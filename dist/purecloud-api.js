(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.purecloud || (g.purecloud = {})).platform = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* jshint node: true */

'use strict';

exports.AnalyticsApi = require('./partials/AnalyticsApi');
exports.QualityApi = require('./partials/QualityApi');
exports.TelephonyProvidersEdgeApi = require('./partials/TelephonyProvidersEdgeApi');
exports.RoutingApi = require('./partials/RoutingApi');
exports.RecordingApi = require('./partials/RecordingApi');
exports.AuthorizationApi = require('./partials/AuthorizationApi');
exports.OutboundApi = require('./partials/OutboundApi');
exports.VoicemailApi = require('./partials/VoicemailApi');
exports.AttributesApi = require('./partials/AttributesApi');
exports.ResponseManagementApi = require('./partials/ResponseManagementApi');
exports.WorkforceManagementApi = require('./partials/WorkforceManagementApi');
exports.ConversationsApi = require('./partials/ConversationsApi');
exports.UsersApi = require('./partials/UsersApi');
exports.AlertingApi = require('./partials/AlertingApi');
exports.UtilitiesApi = require('./partials/UtilitiesApi');
exports.OrganizationApi = require('./partials/OrganizationApi');
exports.GroupsApi = require('./partials/GroupsApi');
exports.SearchApi = require('./partials/SearchApi');
exports.PresenceApi = require('./partials/PresenceApi');
exports.NotificationsApi = require('./partials/NotificationsApi');
exports.ContentManagementApi = require('./partials/ContentManagementApi');
exports.IdentityProviderApi = require('./partials/IdentityProviderApi');
exports.ScriptsApi = require('./partials/ScriptsApi');
exports.StationsApi = require('./partials/StationsApi');
exports.UserRecordingsApi = require('./partials/UserRecordingsApi');
exports.LocationsApi = require('./partials/LocationsApi');
exports.LanguagesApi = require('./partials/LanguagesApi');
exports.GreetingsApi = require('./partials/GreetingsApi');
exports.GeolocationApi = require('./partials/GeolocationApi');
exports.FaxApi = require('./partials/FaxApi');
exports.OAuthApi = require('./partials/OAuthApi');
exports.TokensApi = require('./partials/TokensApi');
exports.SuggestApi = require('./partials/SuggestApi');
exports.PureCloudSession= require('./partials/purecloudsession');

},{"./partials/AlertingApi":2,"./partials/AnalyticsApi":3,"./partials/AttributesApi":4,"./partials/AuthorizationApi":5,"./partials/ContentManagementApi":6,"./partials/ConversationsApi":7,"./partials/FaxApi":8,"./partials/GeolocationApi":9,"./partials/GreetingsApi":10,"./partials/GroupsApi":11,"./partials/IdentityProviderApi":12,"./partials/LanguagesApi":13,"./partials/LocationsApi":14,"./partials/NotificationsApi":15,"./partials/OAuthApi":16,"./partials/OrganizationApi":17,"./partials/OutboundApi":18,"./partials/PresenceApi":19,"./partials/QualityApi":20,"./partials/RecordingApi":21,"./partials/ResponseManagementApi":22,"./partials/RoutingApi":23,"./partials/ScriptsApi":24,"./partials/SearchApi":25,"./partials/StationsApi":26,"./partials/SuggestApi":27,"./partials/TelephonyProvidersEdgeApi":28,"./partials/TokensApi":29,"./partials/UserRecordingsApi":30,"./partials/UsersApi":31,"./partials/UtilitiesApi":32,"./partials/VoicemailApi":33,"./partials/WorkforceManagementApi":34,"./partials/purecloudsession":35}],2:[function(require,module,exports){
/*jshint -W069 */
/**
* @class AlertingApi
* @example
* var api = new purecloud.platform.AlertingApi(pureCloudSession);
*/
function AlertingApi(session) {
    if(!(this instanceof AlertingApi)) {
        return new AlertingApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('AlertingApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a routing status rule list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getRoutingstatusRules = function getRoutingstatusRules(expand){
    var requestPath = '/api/v2/alerting/routingstatus/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a routing status rule.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @param {} body - RoutingStatusRule
  * @example
  * Body Example:
  * {
   "name": "",
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.postRoutingstatusRules = function postRoutingstatusRules(expand, body){
    var requestPath = '/api/v2/alerting/routingstatus/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an interaction stats rule list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getInteractionstatsRules = function getInteractionstatsRules(expand){
    var requestPath = '/api/v2/alerting/interactionstats/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an interaction stats rule.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @param {} body - AlertingRule
  * @example
  * Body Example:
  * {
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.postInteractionstatsRules = function postInteractionstatsRules(expand, body){
    var requestPath = '/api/v2/alerting/interactionstats/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get user presence alert list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getUserpresenceAlerts = function getUserpresenceAlerts(expand){
    var requestPath = '/api/v2/alerting/userpresence/alerts';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get heart beat alert list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getHeartbeatAlerts = function getHeartbeatAlerts(expand){
    var requestPath = '/api/v2/alerting/heartbeat/alerts';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a heart beat rule list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getHeartbeatRules = function getHeartbeatRules(expand){
    var requestPath = '/api/v2/alerting/heartbeat/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a heart beat rule.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @param {} body - HeartBeatRule
  * @example
  * Body Example:
  * {
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.postHeartbeatRules = function postHeartbeatRules(expand, body){
    var requestPath = '/api/v2/alerting/heartbeat/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets user unread count of interaction stats alerts.
  * @memberOf AlertingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "count": 0
}
  */
AlertingApi.prototype.getInteractionstatsAlertsUnread = function getInteractionstatsAlertsUnread(){
    var requestPath = '/api/v2/alerting/interactionstats/alerts/unread';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a heart beat rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.getHeartbeatRulesRuleId = function getHeartbeatRulesRuleId(ruleId, expand){
    var requestPath = '/api/v2/alerting/heartbeat/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a heart beat rule
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @param {} body - HeartBeatRule
  * @example
  * Body Example:
  * {
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.putHeartbeatRulesRuleId = function putHeartbeatRulesRuleId(ruleId, expand, body){
    var requestPath = '/api/v2/alerting/heartbeat/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a heart beat rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  */
AlertingApi.prototype.deleteHeartbeatRulesRuleId = function deleteHeartbeatRulesRuleId(ruleId){
    var requestPath = '/api/v2/alerting/heartbeat/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get routing status alert list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getRoutingstatusAlerts = function getRoutingstatusAlerts(expand){
    var requestPath = '/api/v2/alerting/routingstatus/alerts';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an interaction stats rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.getInteractionstatsRulesRuleId = function getInteractionstatsRulesRuleId(ruleId, expand){
    var requestPath = '/api/v2/alerting/interactionstats/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an interaction stats rule
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @param {} body - AlertingRule
  * @example
  * Body Example:
  * {
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.putInteractionstatsRulesRuleId = function putInteractionstatsRulesRuleId(ruleId, expand, body){
    var requestPath = '/api/v2/alerting/interactionstats/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an interaction stats rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  */
AlertingApi.prototype.deleteInteractionstatsRulesRuleId = function deleteInteractionstatsRulesRuleId(ruleId){
    var requestPath = '/api/v2/alerting/interactionstats/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a heart beat alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "senderId": "",
   "heartBeatTimeoutInMinutes": 0,
   "ruleId": "",
   "startDate": "",
   "endDate": "",
   "notificationUsers": [],
   "alertTypes": [],
   "ruleType": "",
   "ruleUri": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.getHeartbeatAlertsAlertId = function getHeartbeatAlertsAlertId(alertId, expand){
    var requestPath = '/api/v2/alerting/heartbeat/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a heart beat alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  */
AlertingApi.prototype.deleteHeartbeatAlertsAlertId = function deleteHeartbeatAlertsAlertId(alertId){
    var requestPath = '/api/v2/alerting/heartbeat/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user presence rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "presenceUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.getUserpresenceRulesRuleId = function getUserpresenceRulesRuleId(ruleId, expand){
    var requestPath = '/api/v2/alerting/userpresence/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a user presence rule
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @param {} body - UserPresenceRule
  * @example
  * Body Example:
  * {
   "name": "",
   "presenceUser": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "presenceUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.putUserpresenceRulesRuleId = function putUserpresenceRulesRuleId(ruleId, expand, body){
    var requestPath = '/api/v2/alerting/userpresence/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a user presence rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  */
AlertingApi.prototype.deleteUserpresenceRulesRuleId = function deleteUserpresenceRulesRuleId(ruleId){
    var requestPath = '/api/v2/alerting/userpresence/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a routing status alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "ruleId": "",
   "startDate": "",
   "endDate": "",
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.getRoutingstatusAlertsAlertId = function getRoutingstatusAlertsAlertId(alertId, expand){
    var requestPath = '/api/v2/alerting/routingstatus/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a routing status alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  */
AlertingApi.prototype.deleteRoutingstatusAlertsAlertId = function deleteRoutingstatusAlertsAlertId(alertId){
    var requestPath = '/api/v2/alerting/routingstatus/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get interaction stats alert list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getInteractionstatsAlerts = function getInteractionstatsAlerts(expand){
    var requestPath = '/api/v2/alerting/interactionstats/alerts';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user presence rule list.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AlertingApi.prototype.getUserpresenceRules = function getUserpresenceRules(expand){
    var requestPath = '/api/v2/alerting/userpresence/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a user presence rule.
  * @memberOf AlertingApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @param {} body - UserPresenceRule
  * @example
  * Body Example:
  * {
   "name": "",
   "presenceUser": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "presenceUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.postUserpresenceRules = function postUserpresenceRules(expand, body){
    var requestPath = '/api/v2/alerting/userpresence/rules';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an interaction stats alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dimension": "",
   "dimensionValue": "",
   "metric": "",
   "mediaType": "",
   "numericRange": "",
   "statistic": "",
   "value": {},
   "ruleId": "",
   "unread": true,
   "startDate": "",
   "endDate": "",
   "notificationUsers": [],
   "alertTypes": [],
   "ruleUri": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.getInteractionstatsAlertsAlertId = function getInteractionstatsAlertsAlertId(alertId, expand){
    var requestPath = '/api/v2/alerting/interactionstats/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an interaction stats alert read status
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers
  * @param {} body - InteractionStatsAlert
  * @example
  * Body Example:
  * {
   "unread": true
}
  * @example
  * 200 Response Example:
  * {
   "unread": true
}
  */
AlertingApi.prototype.putInteractionstatsAlertsAlertId = function putInteractionstatsAlertsAlertId(alertId, expand, body){
    var requestPath = '/api/v2/alerting/interactionstats/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an interaction stats alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  */
AlertingApi.prototype.deleteInteractionstatsAlertsAlertId = function deleteInteractionstatsAlertsAlertId(alertId){
    var requestPath = '/api/v2/alerting/interactionstats/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user presence alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, presenceUser
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "presenceUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "presenceType": "",
   "presenceValue": "",
   "presenceLimitInSeconds": 0,
   "ruleId": "",
   "startDate": "",
   "endDate": "",
   "notificationUsers": [],
   "alertTypes": [],
   "ruleUri": "",
   "selfUri": ""
}
  */
AlertingApi.prototype.getUserpresenceAlertsAlertId = function getUserpresenceAlertsAlertId(alertId, expand){
    var requestPath = '/api/v2/alerting/userpresence/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a user presence alert
  * @memberOf AlertingApi
  * @instance
  * @param {string} alertId - Alert ID
  */
AlertingApi.prototype.deleteUserpresenceAlertsAlertId = function deleteUserpresenceAlertsAlertId(alertId){
    var requestPath = '/api/v2/alerting/userpresence/alerts/{alertId}';
    var requestQuery = {};
    var requestBody;

    if(alertId === undefined || alertId === null){
      throw new Error('Missing required  parameter: alertId');
    }
    requestPath = requestPath.replace('{alertId}', alertId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a routing status rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.getRoutingstatusRulesRuleId = function getRoutingstatusRulesRuleId(ruleId, expand){
    var requestPath = '/api/v2/alerting/routingstatus/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a routing status rule
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: notificationUsers, agent
  * @param {} body - RoutingStatusRule
  * @example
  * Body Example:
  * {
   "name": "",
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "enabled": true,
   "notificationUsers": [],
   "alertTypes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "routingStatus": "",
   "routingLimitInSeconds": 0,
   "enabled": true,
   "inAlarm": true,
   "notificationUsers": [],
   "alertTypes": [],
   "selfUri": ""
}
  */
AlertingApi.prototype.putRoutingstatusRulesRuleId = function putRoutingstatusRulesRuleId(ruleId, expand, body){
    var requestPath = '/api/v2/alerting/routingstatus/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    requestQuery["expand"] = expand;
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a routing status rule.
  * @memberOf AlertingApi
  * @instance
  * @param {string} ruleId - Rule ID
  */
AlertingApi.prototype.deleteRoutingstatusRulesRuleId = function deleteRoutingstatusRulesRuleId(ruleId){
    var requestPath = '/api/v2/alerting/routingstatus/rules/{ruleId}';
    var requestQuery = {};
    var requestBody;

    if(ruleId === undefined || ruleId === null){
      throw new Error('Missing required  parameter: ruleId');
    }
    requestPath = requestPath.replace('{ruleId}', ruleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = AlertingApi;

},{}],3:[function(require,module,exports){
/*jshint -W069 */
/**
* @class AnalyticsApi
* @example
* var api = new purecloud.platform.AnalyticsApi(pureCloudSession);
*/
function AnalyticsApi(session) {
    if(!(this instanceof AnalyticsApi)) {
        return new AnalyticsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('AnalyticsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "quartzCronExpression": "",
   "nextFireTime": "",
   "dateCreated": "",
   "dateModified": "",
   "description": "",
   "timeZone": "",
   "timePeriod": "",
   "interval": "",
   "reportFormat": "",
   "locale": "",
   "enabled": true,
   "reportId": "",
   "parameters": {},
   "lastRun": {
      "id": "",
      "name": "",
      "reportId": "",
      "runTime": "",
      "runStatus": "",
      "errorMessage": "",
      "runDurationMsec": 0,
      "reportUrl": "",
      "reportFormat": "",
      "scheduleUri": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
AnalyticsApi.prototype.getReportingSchedulesScheduleId = function getReportingSchedulesScheduleId(scheduleId){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  * @param {} body - ReportSchedule
  * @example
  * Body Example:
  * {
   "name": "",
   "quartzCronExpression": "",
   "nextFireTime": "",
   "dateCreated": "",
   "dateModified": "",
   "description": "",
   "timeZone": "",
   "timePeriod": "",
   "interval": "",
   "reportFormat": "",
   "locale": "",
   "enabled": true,
   "reportId": "",
   "parameters": {},
   "lastRun": {
      "name": "",
      "reportId": "",
      "runTime": "",
      "runStatus": "",
      "errorMessage": "",
      "runDurationMsec": 0,
      "reportUrl": "",
      "reportFormat": "",
      "scheduleUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "quartzCronExpression": "",
   "nextFireTime": "",
   "dateCreated": "",
   "dateModified": "",
   "description": "",
   "timeZone": "",
   "timePeriod": "",
   "interval": "",
   "reportFormat": "",
   "locale": "",
   "enabled": true,
   "reportId": "",
   "parameters": {},
   "lastRun": {
      "id": "",
      "name": "",
      "reportId": "",
      "runTime": "",
      "runStatus": "",
      "errorMessage": "",
      "runDurationMsec": 0,
      "reportUrl": "",
      "reportFormat": "",
      "scheduleUri": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
AnalyticsApi.prototype.putReportingSchedulesScheduleId = function putReportingSchedulesScheduleId(scheduleId, body){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  */
AnalyticsApi.prototype.deleteReportingSchedulesScheduleId = function deleteReportingSchedulesScheduleId(scheduleId){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of scheduled report jobs
  * @description Get a list of scheduled report jobs.
  * @memberOf AnalyticsApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AnalyticsApi.prototype.getReportingSchedules = function getReportingSchedules(pageNumber, pageSize){
    var requestPath = '/api/v2/analytics/reporting/schedules';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a scheduled report job
  * @description Create a scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - ReportSchedule
  * @example
  * Body Example:
  * {
   "name": "",
   "quartzCronExpression": "",
   "nextFireTime": "",
   "dateCreated": "",
   "dateModified": "",
   "description": "",
   "timeZone": "",
   "timePeriod": "",
   "interval": "",
   "reportFormat": "",
   "locale": "",
   "enabled": true,
   "reportId": "",
   "parameters": {},
   "lastRun": {
      "name": "",
      "reportId": "",
      "runTime": "",
      "runStatus": "",
      "errorMessage": "",
      "runDurationMsec": 0,
      "reportUrl": "",
      "reportFormat": "",
      "scheduleUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "quartzCronExpression": "",
   "nextFireTime": "",
   "dateCreated": "",
   "dateModified": "",
   "description": "",
   "timeZone": "",
   "timePeriod": "",
   "interval": "",
   "reportFormat": "",
   "locale": "",
   "enabled": true,
   "reportId": "",
   "parameters": {},
   "lastRun": {
      "id": "",
      "name": "",
      "reportId": "",
      "runTime": "",
      "runStatus": "",
      "errorMessage": "",
      "runDurationMsec": 0,
      "reportUrl": "",
      "reportFormat": "",
      "scheduleUri": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
AnalyticsApi.prototype.postReportingSchedules = function postReportingSchedules(body){
    var requestPath = '/api/v2/analytics/reporting/schedules';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for conversation aggregates
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
AnalyticsApi.prototype.postConversationsAggregatesQuery = function postConversationsAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/conversations/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for conversation details
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "conversationFilters": [],
   "evaluationFilters": [],
   "segmentFilters": [],
   "aggregations": [],
   "paging": {
      "pageSize": 0,
      "pageNumber": 0
   },
   "order": "",
   "orderBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "conversations": [],
   "aggregations": []
}
  */
AnalyticsApi.prototype.postConversationsDetailsQuery = function postConversationsDetailsQuery(body){
    var requestPath = '/api/v2/analytics/conversations/details/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a conversation by id
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} conversationId - conversationId
  * @example
  * 200 Response Example:
  * {
   "conversationId": "",
   "conversationStart": "",
   "conversationEnd": "",
   "participants": [],
   "evaluations": []
}
  */
AnalyticsApi.prototype.getConversationsConversationIdDetails = function getConversationsConversationIdDetails(conversationId){
    var requestPath = '/api/v2/analytics/conversations/{conversationId}/details';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Index conversation properties
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {} body - request
  * @example
  * Body Example:
  * {
   "sessionId": "",
   "targetDate": "",
   "properties": []
}
  */
AnalyticsApi.prototype.postConversationsConversationIdDetailsProperties = function postConversationsConversationIdDetailsProperties(conversationId, body){
    var requestPath = '/api/v2/analytics/conversations/{conversationId}/details/properties';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a reporting metadata.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} reportId - Report ID
  * @param {string} locale - Locale
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "title": "",
   "description": "",
   "keywords": [],
   "availableLocales": [],
   "parameters": [],
   "exampleUrl": "",
   "selfUri": ""
}
  */
AnalyticsApi.prototype.getReportingReportIdMetadata = function getReportingReportIdMetadata(reportId, locale){
    var requestPath = '/api/v2/analytics/reporting/{reportId}/metadata';
    var requestQuery = {};
    var requestBody;

    if(reportId === undefined || reportId === null){
      throw new Error('Missing required  parameter: reportId');
    }
    requestPath = requestPath.replace('{reportId}', reportId);
    requestQuery["locale"] = locale;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for queue observations
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": []
}
  * @example
  * 200 Response Example:
  * {
   "systemToOrganizationMappings": {},
   "results": []
}
  */
AnalyticsApi.prototype.postQueuesObservationsQuery = function postQueuesObservationsQuery(body){
    var requestPath = '/api/v2/analytics/queues/observations/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user aggregates
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "systemToOrganizationMappings": {},
   "results": []
}
  */
AnalyticsApi.prototype.postUsersAggregatesQuery = function postUsersAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/users/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user details
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "userFilters": [],
   "presenceFilters": [],
   "routingStatusFilters": [],
   "presenceAggregations": [],
   "routingStatusAggregations": [],
   "paging": {
      "pageSize": 0,
      "pageNumber": 0
   },
   "order": ""
}
  * @example
  * 200 Response Example:
  * {
   "userDetails": [],
   "aggregations": []
}
  */
AnalyticsApi.prototype.postUsersDetailsQuery = function postUsersDetailsQuery(body){
    var requestPath = '/api/v2/analytics/users/details/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user observations
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": []
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
AnalyticsApi.prototype.postUsersObservationsQuery = function postUsersObservationsQuery(body){
    var requestPath = '/api/v2/analytics/users/observations/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of report formats
  * @description Get a list of report formats.
  * @memberOf AnalyticsApi
  * @instance
  */
AnalyticsApi.prototype.getReportingReportformats = function getReportingReportformats(){
    var requestPath = '/api/v2/analytics/reporting/reportformats';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for evaluation aggregates
  * @memberOf AnalyticsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
AnalyticsApi.prototype.postEvaluationsAggregatesQuery = function postEvaluationsAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/evaluations/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary A completed scheduled report job
  * @description A completed scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} runId - Run ID
  * @param {string} scheduleId - Schedule ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "reportId": "",
   "runTime": "",
   "runStatus": "",
   "errorMessage": "",
   "runDurationMsec": 0,
   "reportUrl": "",
   "reportFormat": "",
   "scheduleUri": "",
   "selfUri": ""
}
  */
AnalyticsApi.prototype.getReportingSchedulesScheduleIdHistoryRunId = function getReportingSchedulesScheduleIdHistoryRunId(runId, scheduleId){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}/history/{runId}';
    var requestQuery = {};
    var requestBody;

    if(runId === undefined || runId === null){
      throw new Error('Missing required  parameter: runId');
    }
    requestPath = requestPath.replace('{runId}', runId);
    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of report time periods.
  * @memberOf AnalyticsApi
  * @instance
  */
AnalyticsApi.prototype.getReportingTimeperiods = function getReportingTimeperiods(){
    var requestPath = '/api/v2/analytics/reporting/timeperiods';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of reporting metadata.
  * @memberOf AnalyticsApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} locale - Locale
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AnalyticsApi.prototype.getReportingMetadata = function getReportingMetadata(pageNumber, pageSize, locale){
    var requestPath = '/api/v2/analytics/reporting/metadata';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["locale"] = locale;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of completed scheduled report jobs.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  * @param {integer} pageNumber - 
  * @param {integer} pageSize - 
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AnalyticsApi.prototype.getReportingSchedulesScheduleIdHistory = function getReportingSchedulesScheduleIdHistory(scheduleId, pageNumber, pageSize){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}/history';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get most recently completed scheduled report job.
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "reportId": "",
   "runTime": "",
   "runStatus": "",
   "errorMessage": "",
   "runDurationMsec": 0,
   "reportUrl": "",
   "reportFormat": "",
   "scheduleUri": "",
   "selfUri": ""
}
  */
AnalyticsApi.prototype.getReportingSchedulesScheduleIdHistoryLatest = function getReportingSchedulesScheduleIdHistoryLatest(scheduleId){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}/history/latest';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Place a scheduled report immediately into the reporting queue
  * @memberOf AnalyticsApi
  * @instance
  * @param {string} scheduleId - Schedule ID
  */
AnalyticsApi.prototype.postReportingSchedulesScheduleIdRunreport = function postReportingSchedulesScheduleIdRunreport(scheduleId){
    var requestPath = '/api/v2/analytics/reporting/schedules/{scheduleId}/runreport';
    var requestQuery = {};
    var requestBody;

    if(scheduleId === undefined || scheduleId === null){
      throw new Error('Missing required  parameter: scheduleId');
    }
    requestPath = requestPath.replace('{scheduleId}', scheduleId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = AnalyticsApi;

},{}],4:[function(require,module,exports){
/*jshint -W069 */
/**
* @class AttributesApi
* @example
* var api = new purecloud.platform.AttributesApi(pureCloudSession);
*/
function AttributesApi(session) {
    if(!(this instanceof AttributesApi)) {
        return new AttributesApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('AttributesApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Gets a list of existing attributes.
  * @memberOf AttributesApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AttributesApi.prototype.getAttributes = function getAttributes(pageNumber, pageSize){
    var requestPath = '/api/v2/attributes';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an attribute.
  * @memberOf AttributesApi
  * @instance
  * @param {} body - Attribute
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "description": "",
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateCreated": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateModified": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "description": "",
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateCreated": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateModified": "",
   "selfUri": ""
}
  */
AttributesApi.prototype.postAttributes = function postAttributes(body){
    var requestPath = '/api/v2/attributes';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query attributes
  * @memberOf AttributesApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "query": "",
   "pageSize": 0,
   "pageNumber": 0
}
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AttributesApi.prototype.postQuery = function postQuery(body){
    var requestPath = '/api/v2/attributes/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get details about an existing attribute.
  * @memberOf AttributesApi
  * @instance
  * @param {string} attributeId - Attribute ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "description": "",
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateCreated": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateModified": "",
   "selfUri": ""
}
  */
AttributesApi.prototype.getAttributeId = function getAttributeId(attributeId){
    var requestPath = '/api/v2/attributes/{attributeId}';
    var requestQuery = {};
    var requestBody;

    if(attributeId === undefined || attributeId === null){
      throw new Error('Missing required  parameter: attributeId');
    }
    requestPath = requestPath.replace('{attributeId}', attributeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an existing attribute.
  * @description Fields that can be updated: name, description. The most recent version is required for updates.
  * @memberOf AttributesApi
  * @instance
  * @param {string} attributeId - Attribute ID
  * @param {} body - Attribute
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "description": "",
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateCreated": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateModified": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "description": "",
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateCreated": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dateModified": "",
   "selfUri": ""
}
  */
AttributesApi.prototype.putAttributeId = function putAttributeId(attributeId, body){
    var requestPath = '/api/v2/attributes/{attributeId}';
    var requestQuery = {};
    var requestBody;

    if(attributeId === undefined || attributeId === null){
      throw new Error('Missing required  parameter: attributeId');
    }
    requestPath = requestPath.replace('{attributeId}', attributeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an existing Attribute.
  * @description This will remove attribute.
  * @memberOf AttributesApi
  * @instance
  * @param {string} attributeId - Attribute ID
  */
AttributesApi.prototype.deleteAttributeId = function deleteAttributeId(attributeId){
    var requestPath = '/api/v2/attributes/{attributeId}';
    var requestQuery = {};
    var requestBody;

    if(attributeId === undefined || attributeId === null){
      throw new Error('Missing required  parameter: attributeId');
    }
    requestPath = requestPath.replace('{attributeId}', attributeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = AttributesApi;

},{}],5:[function(require,module,exports){
/*jshint -W069 */
/**
* @class AuthorizationApi
* @example
* var api = new purecloud.platform.AuthorizationApi(pureCloudSession);
*/
function AuthorizationApi(session) {
    if(!(this instanceof AuthorizationApi)) {
        return new AuthorizationApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('AuthorizationApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Retrieve a list of all roles defined for the organization
  * @memberOf AuthorizationApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {array} permission - 
  * @param {boolean} userCount - 
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AuthorizationApi.prototype.getRoles = function getRoles(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, permission, userCount){
    var requestPath = '/api/v2/authorization/roles';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["permission"] = permission;
    requestQuery["userCount"] = userCount;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an organization role.
  * @memberOf AuthorizationApi
  * @instance
  * @param {} body - Organization role
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true,
   "selfUri": ""
}
  */
AuthorizationApi.prototype.postRoles = function postRoles(body){
    var requestPath = '/api/v2/authorization/roles';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get all permissions.
  * @description Retrieve a list of all permission defined in the system.
  * @memberOf AuthorizationApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AuthorizationApi.prototype.getPermissions = function getPermissions(pageSize, pageNumber){
    var requestPath = '/api/v2/authorization/permissions';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Restores all default roles
  * @description This endpoint serves several purposes. 1. It provides the org with default roles. This is important for default roles that will be added after go-live (they can retroactively add the new default-role). Note: When not using a query param of force=true, it only adds the default roles not configured for the org; it does not overwrite roles. 2. Using the query param force=true, you can restore all default roles. Note: This does not have an effect on custom roles.
  * @memberOf AuthorizationApi
  * @instance
  * @param {boolean} force - Restore default roles
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AuthorizationApi.prototype.postRolesDefault = function postRolesDefault(force){
    var requestPath = '/api/v2/authorization/roles/default';
    var requestQuery = {};
    var requestBody;

    requestQuery["force"] = force;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Restore specified default roles
  * @memberOf AuthorizationApi
  * @instance
  * @param {} body - Organization roles list
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "description": "",
  "defaultRoleId": "",
  "permissions": [],
  "permissionPolicies": [],
  "userCount": 0,
  "roleNeedsUpdate": true,
  "default": true,
  "base": true
 }
]
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
AuthorizationApi.prototype.putRolesDefault = function putRolesDefault(body){
    var requestPath = '/api/v2/authorization/roles/default';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of enabled products
  * @description Gets the list of enabled products. Some example product names are: collaborateFree, collaboratePro, communicate, and engage.
  * @memberOf AuthorizationApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "pageCount": 0
}
  */
AuthorizationApi.prototype.getProducts = function getProducts(){
    var requestPath = '/api/v2/authorization/products';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Returns a listing of roles and permissions for a user.
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
}
  */
AuthorizationApi.prototype.getUserIdRoles = function getUserIdRoles(userId){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Sets the user's roles
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - List of roles
  * @example
  * 200 Response Example:
  * {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
}
  */
AuthorizationApi.prototype.putUserIdRoles = function putUserIdRoles(userId, body){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Removes all the roles from the user.
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} userId - User ID
  */
AuthorizationApi.prototype.deleteUserIdRoles = function deleteUserIdRoles(userId){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Sets the users for the role
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  * @param {} body - List of user IDs
  */
AuthorizationApi.prototype.putRolesRoleIdUsersAdd = function putRolesRoleIdUsersAdd(roleId, body){
    var requestPath = '/api/v2/authorization/roles/{roleId}/users/add';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Removes the users from the role
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  * @param {} body - List of user IDs
  */
AuthorizationApi.prototype.putRolesRoleIdUsersRemove = function putRolesRoleIdUsersRemove(roleId, body){
    var requestPath = '/api/v2/authorization/roles/{roleId}/users/remove';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an org role to default role comparison comparison
  * @description Compares any organization role to a default role id and show differences
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} leftRoleId - Left Role ID
  * @param {string} rightRoleId - Right Role id
  * @example
  * 200 Response Example:
  * {
   "removedPermissionPolicies": [],
   "addedPermissionPolicies": [],
   "samePermissionPolicies": [],
   "userOrgRole": {
      "id": "",
      "name": "",
      "description": "",
      "defaultRoleId": "",
      "permissions": [],
      "permissionPolicies": [],
      "userCount": 0,
      "roleNeedsUpdate": true,
      "default": true,
      "base": true,
      "selfUri": ""
   },
   "roleFromDefault": {
      "id": "",
      "name": "",
      "description": "",
      "defaultRoleId": "",
      "permissions": [],
      "permissionPolicies": [],
      "userCount": 0,
      "roleNeedsUpdate": true,
      "default": true,
      "base": true,
      "selfUri": ""
   }
}
  */
AuthorizationApi.prototype.getRolesLeftroleIdComparedefaultRightroleId = function getRolesLeftroleIdComparedefaultRightroleId(leftRoleId, rightRoleId){
    var requestPath = '/api/v2/authorization/roles/{leftRoleId}/comparedefault/{rightRoleId}';
    var requestQuery = {};
    var requestBody;

    if(leftRoleId === undefined || leftRoleId === null){
      throw new Error('Missing required  parameter: leftRoleId');
    }
    requestPath = requestPath.replace('{leftRoleId}', leftRoleId);
    if(rightRoleId === undefined || rightRoleId === null){
      throw new Error('Missing required  parameter: rightRoleId');
    }
    requestPath = requestPath.replace('{rightRoleId}', rightRoleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an unsaved org role to default role comparison
  * @description Allows users to compare their existing roles in an unsaved state to its default role
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} leftRoleId - Left Role ID
  * @param {string} rightRoleId - Right Role id
  * @param {} body - Organization role
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true
}
  * @example
  * 200 Response Example:
  * {
   "removedPermissionPolicies": [],
   "addedPermissionPolicies": [],
   "samePermissionPolicies": [],
   "userOrgRole": {
      "id": "",
      "name": "",
      "description": "",
      "defaultRoleId": "",
      "permissions": [],
      "permissionPolicies": [],
      "userCount": 0,
      "roleNeedsUpdate": true,
      "default": true,
      "base": true,
      "selfUri": ""
   },
   "roleFromDefault": {
      "id": "",
      "name": "",
      "description": "",
      "defaultRoleId": "",
      "permissions": [],
      "permissionPolicies": [],
      "userCount": 0,
      "roleNeedsUpdate": true,
      "default": true,
      "base": true,
      "selfUri": ""
   }
}
  */
AuthorizationApi.prototype.postRolesLeftroleIdComparedefaultRightroleId = function postRolesLeftroleIdComparedefaultRightroleId(leftRoleId, rightRoleId, body){
    var requestPath = '/api/v2/authorization/roles/{leftRoleId}/comparedefault/{rightRoleId}';
    var requestQuery = {};
    var requestBody;

    if(leftRoleId === undefined || leftRoleId === null){
      throw new Error('Missing required  parameter: leftRoleId');
    }
    requestPath = requestPath.replace('{leftRoleId}', leftRoleId);
    if(rightRoleId === undefined || rightRoleId === null){
      throw new Error('Missing required  parameter: rightRoleId');
    }
    requestPath = requestPath.replace('{rightRoleId}', rightRoleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a single organization role.
  * @description Get the organization role specified by its ID.
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true,
   "selfUri": ""
}
  */
AuthorizationApi.prototype.getRolesRoleId = function getRolesRoleId(roleId){
    var requestPath = '/api/v2/authorization/roles/{roleId}';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an organization role.
  * @description Update
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  * @param {} body - Organization role
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true,
   "selfUri": ""
}
  */
AuthorizationApi.prototype.putRolesRoleId = function putRolesRoleId(roleId, body){
    var requestPath = '/api/v2/authorization/roles/{roleId}';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an organization role.
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  */
AuthorizationApi.prototype.deleteRolesRoleId = function deleteRolesRoleId(roleId){
    var requestPath = '/api/v2/authorization/roles/{roleId}';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch Organization Role for needsUpdate Field
  * @description Patch Organization Role for needsUpdate Field
  * @memberOf AuthorizationApi
  * @instance
  * @param {string} roleId - Role ID
  * @param {} body - Organization role
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "defaultRoleId": "",
   "permissions": [],
   "permissionPolicies": [],
   "userCount": 0,
   "roleNeedsUpdate": true,
   "default": true,
   "base": true,
   "selfUri": ""
}
  */
AuthorizationApi.prototype.patchRolesRoleId = function patchRolesRoleId(roleId, body){
    var requestPath = '/api/v2/authorization/roles/{roleId}';
    var requestQuery = {};
    var requestBody;

    if(roleId === undefined || roleId === null){
      throw new Error('Missing required  parameter: roleId');
    }
    requestPath = requestPath.replace('{roleId}', roleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};


module.exports = AuthorizationApi;

},{}],6:[function(require,module,exports){
/*jshint -W069 */
/**
* @class ContentManagementApi
* @example
* var api = new purecloud.platform.ContentManagementApi(pureCloudSession);
*/
function ContentManagementApi(session) {
    if(!(this instanceof ContentManagementApi)) {
        return new ContentManagementApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('ContentManagementApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Download a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {string} disposition - Request how the content will be downloaded: a file attachment or inline. Default is attachment.
  attachment,
  inline,
  * @param {string} contentType - The requested format for the specified document. If supported, the document will be returned in that format. Example contentType=audio/wav
  * @example
  * 200 Response Example:
  * {
   "contentLocationUri": "",
   "imageUri": "",
   "thumbnails": []
}
  */
ContentManagementApi.prototype.getDocumentsDocumentIdContent = function getDocumentsDocumentIdContent(documentId, disposition, contentType){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}/content';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    requestQuery["disposition"] = disposition;
    requestQuery["contentType"] = contentType;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace the contents of a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {} body - Replace Request
  * @param {boolean} override - Override any lock on the document
  * @example
  * Body Example:
  * {
   "changeNumber": 0,
   "name": "",
   "authToken": ""
}
  */
ContentManagementApi.prototype.postDocumentsDocumentIdContent = function postDocumentsDocumentIdContent(documentId, body, override){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}/content';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["override"] = override;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list workspace members
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {array} expand - Which fields, if any, to expand. Valid Values: member
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceIdMembers = function getWorkspacesWorkspaceIdMembers(workspaceId, pageSize, pageNumber, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/members';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of statuses for pending operations
  * @memberOf ContentManagementApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getStatus = function getStatus(pageSize, pageNumber){
    var requestPath = '/api/v2/contentmanagement/status';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of documents.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} name - Name
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl, workspace
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - name or dateCreated
  * @param {string} sortOrder - ascending or descending
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getDocuments = function getDocuments(workspaceId, name, expand, pageSize, pageNumber, sortBy, sortOrder){
    var requestPath = '/api/v2/contentmanagement/documents';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestQuery["workspaceId"] = workspaceId;
    requestQuery["name"] = name;
    requestQuery["expand"] = expand;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {} body - Document
  * @param {string} copySource - Copy a document within a workspace or to a new workspace. Provide a document ID as the copy source.
  * @param {string} moveSource - Move a document to a new workspace. Provide a document ID as the move source.
  * @param {boolean} override - Override any lock on the source document
  * @example
  * Body Example:
  * {
   "name": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "tags": [],
   "tagIds": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "changeNumber": 0,
   "dateCreated": "",
   "dateModified": "",
   "dateUploaded": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "systemType": "",
   "filename": "",
   "pageCount": 0,
   "read": true,
   "callerAddress": "",
   "receiverAddress": "",
   "tags": [],
   "tagValues": [],
   "attributes": [],
   "thumbnails": [],
   "uploadStatus": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadDestinationUri": "",
   "uploadMethod": "",
   "lockInfo": {
      "lockedBy": {},
      "dateCreated": "",
      "dateExpires": "",
      "action": ""
   },
   "acl": [],
   "sharingStatus": "",
   "sharingUri": "",
   "downloadSharingUri": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.postDocuments = function postDocuments(body, copySource, moveSource, override){
    var requestPath = '/api/v2/contentmanagement/documents';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["copySource"] = copySource;
    requestQuery["moveSource"] = moveSource;
    requestQuery["override"] = override;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of workspaces.
  * @description Specifying 'content' access will return all workspaces the user has document access to, while 'admin' access will return all group workspaces the user has administrative rights to.
  * @memberOf ContentManagementApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {array} access - Requested access level. Valid Values: content, admin, document:create, document:viewContent, document:viewMetadata, document:download, document:delete, document:update, document:share, document:shareView, document:email, document:print, document:auditView, document:replace, document:tag, tag:create, tag:view, tag:update, tag:apply, tag:remove, tag:delete
  * @param {array} expand - Which fields, if any, to expand. Valid Values: summary, acl
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getWorkspaces = function getWorkspaces(pageSize, pageNumber, access, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["access"] = access;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a group workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {} body - Workspace
  * @example
  * Body Example:
  * {
   "name": "",
   "bucket": "",
   "description": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "isCurrentUserWorkspace": true,
   "user": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "bucket": "",
   "dateCreated": "",
   "dateModified": "",
   "summary": {
      "totalDocumentCount": 0,
      "totalDocumentByteCount": 0
   },
   "acl": [],
   "description": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.postWorkspaces = function postWorkspaces(body){
    var requestPath = '/api/v2/contentmanagement/workspaces';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query content
  * @memberOf ContentManagementApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - name or dateCreated
  * @param {string} sortOrder - ascending or descending
  * @param {string} queryPhrase - Phrase tokens are ANDed together over all searchable fields
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl, workspace
  * @example
  * 200 Response Example:
  * {
   "results": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "facetInfo": {
      "attributes": [],
      "facets": []
   }
}
  */
ContentManagementApi.prototype.getQuery = function getQuery(pageSize, pageNumber, sortBy, sortOrder, queryPhrase, expand){
    var requestPath = '/api/v2/contentmanagement/query';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    if(queryPhrase === undefined || queryPhrase === null){
      throw new Error('Missing required  parameter: queryPhrase');
    }
    requestQuery["queryPhrase"] = queryPhrase;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query content
  * @memberOf ContentManagementApi
  * @instance
  * @param {} body - Allows for a filtered query returning facet information
  * @param {string} expand - Expand some document fields
  acl,
  workspace,
  * @example
  * Body Example:
  * {
   "queryPhrase": "",
   "pageNumber": 0,
   "pageSize": 0,
   "facetNameRequests": [],
   "sort": [],
   "filters": [],
   "attributeFilters": [],
   "includeShares": true
}
  * @example
  * 200 Response Example:
  * {
   "results": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "facetInfo": {
      "attributes": [],
      "facets": []
   }
}
  */
ContentManagementApi.prototype.postQuery = function postQuery(body, expand){
    var requestPath = '/api/v2/contentmanagement/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a list of shares.  You must specify at least one filter (e.g. entityId).
  * @description Failing to specify a filter will return 400.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} entityId - Filters the shares returned to only the entity specified by the value of this parameter.
  * @param {array} expand - Which fields, if any, to expand. Valid Values: member
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getShares = function getShares(entityId, expand, pageSize, pageNumber){
    var requestPath = '/api/v2/contentmanagement/shares';
    var requestQuery = {};
    var requestBody;

    requestQuery["entityId"] = entityId;
    requestQuery["expand"] = expand;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Creates a new share or updates an existing share if the entity has already been shared
  * @memberOf ContentManagementApi
  * @instance
  * @param {} body - CreateShareRequest - entity id and type and a single member or list of members are required
  * @example
  * Body Example:
  * {
   "sharedEntityType": "",
   "sharedEntity": {
      "id": ""
   },
   "memberType": "",
   "member": {
      "id": ""
   },
   "members": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "sharedEntityType": "",
   "sharedEntity": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "memberType": "",
   "member": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "sharedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "succeeded": [],
   "failed": [],
   "selfUri": ""
}
  */
ContentManagementApi.prototype.postShares = function postShares(body){
    var requestPath = '/api/v2/contentmanagement/shares';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of workspace tags
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} value - filter the list of tags returned
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceIdTagvalues = function getWorkspacesWorkspaceIdTagvalues(workspaceId, value, pageSize, pageNumber, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    requestQuery["value"] = value;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a workspace tag
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {} body - tag
  * @example
  * Body Example:
  * {
   "name": "",
   "inUse": true,
   "acl": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "inUse": true,
   "acl": [],
   "selfUri": ""
}
  */
ContentManagementApi.prototype.postWorkspacesWorkspaceIdTagvalues = function postWorkspacesWorkspaceIdTagvalues(workspaceId, body){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a workspace.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: summary, acl
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "isCurrentUserWorkspace": true,
   "user": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "bucket": "",
   "dateCreated": "",
   "dateModified": "",
   "summary": {
      "totalDocumentCount": 0,
      "totalDocumentByteCount": 0
   },
   "acl": [],
   "description": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceId = function getWorkspacesWorkspaceId(workspaceId, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {} body - Workspace
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "isCurrentUserWorkspace": true,
   "user": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "bucket": "",
   "dateCreated": "",
   "dateModified": "",
   "summary": {
      "totalDocumentCount": 0,
      "totalDocumentByteCount": 0
   },
   "acl": [],
   "description": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "isCurrentUserWorkspace": true,
   "user": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "bucket": "",
   "dateCreated": "",
   "dateModified": "",
   "summary": {
      "totalDocumentCount": 0,
      "totalDocumentByteCount": 0
   },
   "acl": [],
   "description": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.putWorkspacesWorkspaceId = function putWorkspacesWorkspaceId(workspaceId, body){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} moveChildrenToWorkspaceId - New location for objects in deleted workspace.
  */
ContentManagementApi.prototype.deleteWorkspacesWorkspaceId = function deleteWorkspacesWorkspaceId(workspaceId, moveChildrenToWorkspaceId){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    requestQuery["moveChildrenToWorkspaceId"] = moveChildrenToWorkspaceId;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get usage details.
  * @memberOf ContentManagementApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "types": []
}
  */
ContentManagementApi.prototype.getUsage = function getUsage(){
    var requestPath = '/api/v2/contentmanagement/usage';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of audits for a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} transactionFilter - Transaction filter
  * @param {string} level - level
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getDocumentsDocumentIdAudits = function getDocumentsDocumentIdAudits(documentId, pageSize, pageNumber, transactionFilter, level, sortBy, sortOrder){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}/audits';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["transactionFilter"] = transactionFilter;
    requestQuery["level"] = level;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a List of Security Profiles
  * @memberOf ContentManagementApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getSecurityprofiles = function getSecurityprofiles(){
    var requestPath = '/api/v2/contentmanagement/securityprofiles';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a workspace tag
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} tagId - Tag ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "inUse": true,
   "acl": [],
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceIdTagvaluesTagId = function getWorkspacesWorkspaceIdTagvaluesTagId(workspaceId, tagId, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues/{tagId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(tagId === undefined || tagId === null){
      throw new Error('Missing required  parameter: tagId');
    }
    requestPath = requestPath.replace('{tagId}', tagId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a workspace tag. Will update all documents with the new tag value.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} tagId - Tag ID
  * @param {} body - Workspace
  * @example
  * Body Example:
  * {
   "name": "",
   "inUse": true,
   "acl": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "inUse": true,
   "acl": [],
   "selfUri": ""
}
  */
ContentManagementApi.prototype.putWorkspacesWorkspaceIdTagvaluesTagId = function putWorkspacesWorkspaceIdTagvaluesTagId(workspaceId, tagId, body){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues/{tagId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(tagId === undefined || tagId === null){
      throw new Error('Missing required  parameter: tagId');
    }
    requestPath = requestPath.replace('{tagId}', tagId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete workspace tag
  * @description Delete a tag from a workspace. Will remove this tag from all documents.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} tagId - Tag ID
  */
ContentManagementApi.prototype.deleteWorkspacesWorkspaceIdTagvaluesTagId = function deleteWorkspacesWorkspaceIdTagvaluesTagId(workspaceId, tagId){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues/{tagId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(tagId === undefined || tagId === null){
      throw new Error('Missing required  parameter: tagId');
    }
    requestPath = requestPath.replace('{tagId}', tagId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get shared documents. Securely download a shared document.
  * @description This method requires the download sharing URI obtained in the get document response (downloadSharingUri). Documents may be shared between users in the same workspace. Documents may also be shared between any user by creating a content management share.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} sharedId - Shared ID
  * @param {boolean} redirect - Turn on or off redirect
  * @param {string} disposition - Request how the share content will be downloaded: attached as a file or inline. Default is attachment.
  attachment,
  inline,
  none,
  * @param {string} contentType - The requested format for the specified document. If supported, the document will be returned in that format. Example contentType=audio/wav
  * @param {string} expand - Expand some document fields
  document.acl,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "downloadUri": "",
   "viewUri": "",
   "document": {
      "id": "",
      "name": "",
      "changeNumber": 0,
      "dateCreated": "",
      "dateModified": "",
      "dateUploaded": "",
      "contentUri": "",
      "workspace": {},
      "createdBy": {},
      "uploadedBy": {},
      "contentType": "",
      "contentLength": 0,
      "systemType": "",
      "filename": "",
      "pageCount": 0,
      "read": true,
      "callerAddress": "",
      "receiverAddress": "",
      "tags": [],
      "tagValues": [],
      "attributes": [],
      "thumbnails": [],
      "uploadStatus": {},
      "uploadDestinationUri": "",
      "uploadMethod": "",
      "lockInfo": {},
      "acl": [],
      "sharingStatus": "",
      "sharingUri": "",
      "downloadSharingUri": "",
      "selfUri": ""
   },
   "share": {
      "id": "",
      "name": "",
      "sharedEntityType": "",
      "sharedEntity": {},
      "memberType": "",
      "member": {},
      "sharedBy": {},
      "workspace": {},
      "user": {},
      "group": {},
      "selfUri": ""
   }
}
  */
ContentManagementApi.prototype.getSharedSharedId = function getSharedSharedId(sharedId, redirect, disposition, contentType, expand){
    var requestPath = '/api/v2/contentmanagement/shared/{sharedId}';
    var requestQuery = {};
    var requestBody;

    if(sharedId === undefined || sharedId === null){
      throw new Error('Missing required  parameter: sharedId');
    }
    requestPath = requestPath.replace('{sharedId}', sharedId);
    requestQuery["redirect"] = redirect;
    requestQuery["disposition"] = disposition;
    requestQuery["contentType"] = contentType;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a status.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} statusId - Status ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "expiration": "",
   "userId": "",
   "statusCode": "",
   "commandType": "",
   "document": {
      "id": "",
      "name": "",
      "changeNumber": 0,
      "dateCreated": "",
      "dateModified": "",
      "dateUploaded": "",
      "contentUri": "",
      "workspace": {},
      "createdBy": {},
      "uploadedBy": {},
      "contentType": "",
      "contentLength": 0,
      "systemType": "",
      "filename": "",
      "pageCount": 0,
      "read": true,
      "callerAddress": "",
      "receiverAddress": "",
      "tags": [],
      "tagValues": [],
      "attributes": [],
      "thumbnails": [],
      "uploadStatus": {},
      "uploadDestinationUri": "",
      "uploadMethod": "",
      "lockInfo": {},
      "acl": [],
      "sharingStatus": "",
      "sharingUri": "",
      "downloadSharingUri": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getStatusStatusId = function getStatusStatusId(statusId){
    var requestPath = '/api/v2/contentmanagement/status/{statusId}';
    var requestQuery = {};
    var requestBody;

    if(statusId === undefined || statusId === null){
      throw new Error('Missing required  parameter: statusId');
    }
    requestPath = requestPath.replace('{statusId}', statusId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Cancel the command for this status
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} statusId - Status ID
  */
ContentManagementApi.prototype.deleteStatusStatusId = function deleteStatusStatusId(statusId){
    var requestPath = '/api/v2/contentmanagement/status/{statusId}';
    var requestQuery = {};
    var requestBody;

    if(statusId === undefined || statusId === null){
      throw new Error('Missing required  parameter: statusId');
    }
    requestPath = requestPath.replace('{statusId}', statusId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: lockInfo, acl, workspace
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "changeNumber": 0,
   "dateCreated": "",
   "dateModified": "",
   "dateUploaded": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "systemType": "",
   "filename": "",
   "pageCount": 0,
   "read": true,
   "callerAddress": "",
   "receiverAddress": "",
   "tags": [],
   "tagValues": [],
   "attributes": [],
   "thumbnails": [],
   "uploadStatus": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadDestinationUri": "",
   "uploadMethod": "",
   "lockInfo": {
      "lockedBy": {},
      "dateCreated": "",
      "dateExpires": "",
      "action": ""
   },
   "acl": [],
   "sharingStatus": "",
   "sharingUri": "",
   "downloadSharingUri": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getDocumentsDocumentId = function getDocumentsDocumentId(documentId, expand){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {} body - Document
  * @param {string} expand - Expand some document fields
  acl,
  * @param {boolean} override - Override any lock on the document
  * @example
  * Body Example:
  * {
   "changeNumber": 0,
   "name": "",
   "read": true,
   "addTags": [],
   "removeTags": [],
   "addTagIds": [],
   "removeTagIds": [],
   "updateAttributes": [],
   "removeAttributes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "changeNumber": 0,
   "dateCreated": "",
   "dateModified": "",
   "dateUploaded": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "systemType": "",
   "filename": "",
   "pageCount": 0,
   "read": true,
   "callerAddress": "",
   "receiverAddress": "",
   "tags": [],
   "tagValues": [],
   "attributes": [],
   "thumbnails": [],
   "uploadStatus": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "uploadDestinationUri": "",
   "uploadMethod": "",
   "lockInfo": {
      "lockedBy": {},
      "dateCreated": "",
      "dateExpires": "",
      "action": ""
   },
   "acl": [],
   "sharingStatus": "",
   "sharingUri": "",
   "downloadSharingUri": "",
   "selfUri": ""
}
  */
ContentManagementApi.prototype.postDocumentsDocumentId = function postDocumentsDocumentId(documentId, body, expand, override){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    requestQuery["override"] = override;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a document.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {boolean} override - Override any lock on the document
  */
ContentManagementApi.prototype.deleteDocumentsDocumentId = function deleteDocumentsDocumentId(documentId, override){
    var requestPath = '/api/v2/contentmanagement/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    requestQuery["override"] = override;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a workspace member
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} memberId - Member ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: member
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "memberType": "",
   "member": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "securityProfile": {
      "id": "",
      "name": "",
      "permissions": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceIdMembersMemberId = function getWorkspacesWorkspaceIdMembersMemberId(workspaceId, memberId, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/members/{memberId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(memberId === undefined || memberId === null){
      throw new Error('Missing required  parameter: memberId');
    }
    requestPath = requestPath.replace('{memberId}', memberId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add a member to a workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} memberId - Member ID
  * @param {} body - Workspace Member
  * @example
  * Body Example:
  * {
   "name": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "memberType": "",
   "member": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "group": {
      "name": "",
      "description": "",
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": ""
   },
   "securityProfile": {
      "name": "",
      "permissions": []
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "memberType": "",
   "member": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "securityProfile": {
      "id": "",
      "name": "",
      "permissions": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
ContentManagementApi.prototype.putWorkspacesWorkspaceIdMembersMemberId = function putWorkspacesWorkspaceIdMembersMemberId(workspaceId, memberId, body){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/members/{memberId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(memberId === undefined || memberId === null){
      throw new Error('Missing required  parameter: memberId');
    }
    requestPath = requestPath.replace('{memberId}', memberId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a member from a workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {string} memberId - Member ID
  */
ContentManagementApi.prototype.deleteWorkspacesWorkspaceIdMembersMemberId = function deleteWorkspacesWorkspaceIdMembersMemberId(workspaceId, memberId){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/members/{memberId}';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(memberId === undefined || memberId === null){
      throw new Error('Missing required  parameter: memberId');
    }
    requestPath = requestPath.replace('{memberId}', memberId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Security Profile
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} securityProfileId - Security Profile Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "permissions": [],
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getSecurityprofilesSecurityprofileId = function getSecurityprofilesSecurityprofileId(securityProfileId){
    var requestPath = '/api/v2/contentmanagement/securityprofiles/{securityProfileId}';
    var requestQuery = {};
    var requestBody;

    if(securityProfileId === undefined || securityProfileId === null){
      throw new Error('Missing required  parameter: securityProfileId');
    }
    requestPath = requestPath.replace('{securityProfileId}', securityProfileId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of documents.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl, workspace
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - name or dateCreated
  * @param {string} sortOrder - ascending or descending
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.getWorkspacesWorkspaceIdDocuments = function getWorkspacesWorkspaceIdDocuments(workspaceId, expand, pageSize, pageNumber, sortBy, sortOrder){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/documents';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    requestQuery["expand"] = expand;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query audits
  * @memberOf ContentManagementApi
  * @instance
  * @param {} body - Allows for a filtered query returning facet information
  * @example
  * Body Example:
  * {
   "queryPhrase": "",
   "pageNumber": 0,
   "pageSize": 0,
   "facetNameRequests": [],
   "sort": [],
   "filters": [],
   "attributeFilters": [],
   "includeShares": true
}
  * @example
  * 200 Response Example:
  * {
   "results": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "facetInfo": {
      "attributes": [],
      "facets": []
   }
}
  */
ContentManagementApi.prototype.postAuditquery = function postAuditquery(body){
    var requestPath = '/api/v2/contentmanagement/auditquery';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Perform a prefix query on tags in the workspace
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} workspaceId - Workspace ID
  * @param {} body - query
  * @param {array} expand - Which fields, if any, to expand. Valid Values: acl
  * @example
  * Body Example:
  * {
   "query": "",
   "pageNumber": 0,
   "pageSize": 0
}
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ContentManagementApi.prototype.postWorkspacesWorkspaceIdTagvaluesQuery = function postWorkspacesWorkspaceIdTagvaluesQuery(workspaceId, body, expand){
    var requestPath = '/api/v2/contentmanagement/workspaces/{workspaceId}/tagvalues/query';
    var requestQuery = {};
    var requestBody;

    if(workspaceId === undefined || workspaceId === null){
      throw new Error('Missing required  parameter: workspaceId');
    }
    requestPath = requestPath.replace('{workspaceId}', workspaceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Retrieve details about an existing share.
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} shareId - Share ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: member
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "sharedEntityType": "",
   "sharedEntity": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "memberType": "",
   "member": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "sharedBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
ContentManagementApi.prototype.getSharesShareId = function getSharesShareId(shareId, expand){
    var requestPath = '/api/v2/contentmanagement/shares/{shareId}';
    var requestQuery = {};
    var requestBody;

    if(shareId === undefined || shareId === null){
      throw new Error('Missing required  parameter: shareId');
    }
    requestPath = requestPath.replace('{shareId}', shareId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Deletes an existing share.
  * @description This revokes sharing rights specified in the share record
  * @memberOf ContentManagementApi
  * @instance
  * @param {string} shareId - Share ID
  */
ContentManagementApi.prototype.deleteSharesShareId = function deleteSharesShareId(shareId){
    var requestPath = '/api/v2/contentmanagement/shares/{shareId}';
    var requestQuery = {};
    var requestBody;

    if(shareId === undefined || shareId === null){
      throw new Error('Missing required  parameter: shareId');
    }
    requestPath = requestPath.replace('{shareId}', shareId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = ContentManagementApi;

},{}],7:[function(require,module,exports){
/*jshint -W069 */
/**
* @class ConversationsApi
* @example
* var api = new purecloud.platform.ConversationsApi(pureCloudSession);
*/
function ConversationsApi(session) {
    if(!(this instanceof ConversationsApi)) {
        return new ConversationsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('ConversationsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Query for conversation aggregates
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
ConversationsApi.prototype.postConversationsAggregatesQuery = function postConversationsAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/conversations/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for conversation details
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "conversationFilters": [],
   "evaluationFilters": [],
   "segmentFilters": [],
   "aggregations": [],
   "paging": {
      "pageSize": 0,
      "pageNumber": 0
   },
   "order": "",
   "orderBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "conversations": [],
   "aggregations": []
}
  */
ConversationsApi.prototype.postConversationsDetailsQuery = function postConversationsDetailsQuery(body){
    var requestPath = '/api/v2/analytics/conversations/details/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a conversation by id
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversationId
  * @example
  * 200 Response Example:
  * {
   "conversationId": "",
   "conversationStart": "",
   "conversationEnd": "",
   "participants": [],
   "evaluations": []
}
  */
ConversationsApi.prototype.getConversationsConversationIdDetails = function getConversationsConversationIdDetails(conversationId){
    var requestPath = '/api/v2/analytics/conversations/{conversationId}/details';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Index conversation properties
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {} body - request
  * @example
  * Body Example:
  * {
   "sessionId": "",
   "targetDate": "",
   "properties": []
}
  */
ConversationsApi.prototype.postConversationsConversationIdDetailsProperties = function postConversationsConversationIdDetailsProperties(conversationId, body){
    var requestPath = '/api/v2/analytics/conversations/{conversationId}/details/properties';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent conversations
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getCalls = function getCalls(){
    var requestPath = '/api/v2/conversations/calls';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a call conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - Call request
  * @example
  * Body Example:
  * {
   "phoneNumber": "",
   "callFromQueueId": "",
   "callQueueId": "",
   "callUserId": "",
   "priority": 0,
   "languageId": "",
   "routingSkillsIds": [],
   "conversationIds": [],
   "participants": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.postCalls = function postCalls(body){
    var requestPath = '/api/v2/conversations/calls';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant's communication by disconnecting it.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {string} communicationId - communicationId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  * @example
  * 200 Response Example:
  * {}
  */
ConversationsApi.prototype.patchCallsCallIdParticipantsParticipantIdCommunicationsCommunicationId = function patchCallsCallIdParticipantsParticipantIdCommunicationsCommunicationId(callId, participantId, communicationId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/communications/{communicationId}';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(communicationId === undefined || communicationId === null){
      throw new Error('Missing required  parameter: communicationId');
    }
    requestPath = requestPath.replace('{communicationId}', communicationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {} body - Participant request
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchCallsCallIdParticipantsParticipantId = function patchCallsCallIdParticipantsParticipantId(callId, participantId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {} body - Transfer request
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postCallsCallIdParticipantsParticipantIdReplace = function postCallsCallIdParticipantsParticipantIdReplace(callId, participantId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Listen in on the conversation from the point of view of a given participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  */
ConversationsApi.prototype.postCallsCallIdParticipantsParticipantIdMonitor = function postCallsCallIdParticipantsParticipantIdMonitor(callId, participantId){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/monitor';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Initiate and update consult transfer
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {} body - Destination address & initial speak to
  * @example
  * Body Example:
  * {
   "speakTo": "",
   "destination": {
      "address": "",
      "name": "",
      "userId": "",
      "queueId": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "destinationParticipantId": ""
}
  */
ConversationsApi.prototype.postCallsCallIdParticipantsParticipantIdConsult = function postCallsCallIdParticipantsParticipantIdConsult(callId, participantId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/consult';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Cancel the transfer
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  */
ConversationsApi.prototype.deleteCallsCallIdParticipantsParticipantIdConsult = function deleteCallsCallIdParticipantsParticipantIdConsult(callId, participantId){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/consult';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Change who can speak
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {} body - new speak to
  * @example
  * Body Example:
  * {
   "speakTo": ""
}
  * @example
  * 200 Response Example:
  * {
   "destinationParticipantId": ""
}
  */
ConversationsApi.prototype.patchCallsCallIdParticipantsParticipantIdConsult = function patchCallsCallIdParticipantsParticipantIdConsult(callId, participantId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/consult';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getCallsCallIdParticipantsParticipantIdWrapupcodes = function getCallsCallIdParticipantsParticipantIdWrapupcodes(callId, participantId){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get call conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "recordingState": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.getCallsCallId = function getCallsCallId(callId){
    var requestPath = '/api/v2/conversations/calls/{callId}';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add a new call to a conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "callNumber": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.postCallsCallId = function postCallsCallId(callId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a conversation by setting it's recording state, merging in other conversations to create a conference, or disconnecting all of the participants
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.patchCallsCallId = function patchCallsCallId(callId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the maximum number of participants that this user can have on a conference
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "maxParticipants": 0
}
  */
ConversationsApi.prototype.getCallsMaximumconferenceparties = function getCallsMaximumconferenceparties(){
    var requestPath = '/api/v2/conversations/calls/maximumconferenceparties';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {} body - Participant attributes
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchCallsCallIdParticipantsParticipantIdAttributes = function patchCallsCallIdParticipantsParticipantIdAttributes(callId, participantId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {string} participantId - participantId
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "code": "",
   "name": "",
   "notes": "",
   "tags": [],
   "durationSeconds": 0,
   "endTime": "",
   "provisional": true
}
  */
ConversationsApi.prototype.getCallsCallIdParticipantsParticipantIdWrapup = function getCallsCallIdParticipantsParticipantIdWrapup(callId, participantId, provisional){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add participants to a conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callId - callId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.postCallsCallIdParticipants = function postCallsCallIdParticipants(callId, body){
    var requestPath = '/api/v2/conversations/calls/{callId}/participants';
    var requestQuery = {};
    var requestBody;

    if(callId === undefined || callId === null){
      throw new Error('Missing required  parameter: callId');
    }
    requestPath = requestPath.replace('{callId}', callId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get call history
  * @memberOf ConversationsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} interval - Interval string; format is ISO-8601. Separate start and end times with forward slash '/'
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getCallsHistory = function getCallsHistory(pageSize, pageNumber, interval){
    var requestPath = '/api/v2/conversations/calls/history';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["interval"] = interval;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get conversations
  * @memberOf ConversationsApi
  * @instance
  * @param {string} communicationType - Call or Chat communication filtering
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getConversations = function getConversations(communicationType){
    var requestPath = '/api/v2/conversations';
    var requestQuery = {};
    var requestBody;

    requestQuery["communicationType"] = communicationType;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent chat conversations
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getChats = function getChats(){
    var requestPath = '/api/v2/conversations/chats';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a web chat conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - Create web chat request
  * @example
  * Body Example:
  * {
   "queueId": "",
   "provider": "",
   "skillIds": [],
   "languageId": "",
   "priority": 0,
   "attributes": {},
   "customerName": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.postChats = function postChats(body){
    var requestPath = '/api/v2/conversations/chats';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant's communication by disconnecting it.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @param {string} communicationId - communicationId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  * @example
  * 200 Response Example:
  * {}
  */
ConversationsApi.prototype.patchChatsChatIdParticipantsParticipantIdCommunicationsCommunicationId = function patchChatsChatIdParticipantsParticipantIdCommunicationsCommunicationId(chatId, participantId, communicationId, body){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}/communications/{communicationId}';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(communicationId === undefined || communicationId === null){
      throw new Error('Missing required  parameter: communicationId');
    }
    requestPath = requestPath.replace('{communicationId}', communicationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @param {} body - Update request
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchChatsChatIdParticipantsParticipantId = function patchChatsChatIdParticipantsParticipantId(chatId, participantId, body){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @param {} body - Transfer request
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postChatsChatIdParticipantsParticipantIdReplace = function postChatsChatIdParticipantsParticipantIdReplace(chatId, participantId, body){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getChatsChatIdParticipantsParticipantIdWrapupcodes = function getChatsChatIdParticipantsParticipantIdWrapupcodes(chatId, participantId){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get chat conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.getChatsChatId = function getChatsChatId(chatId){
    var requestPath = '/api/v2/conversations/chats/{chatId}';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a conversation by disconnecting all of the participants
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.patchChatsChatId = function patchChatsChatId(chatId, body){
    var requestPath = '/api/v2/conversations/chats/{chatId}';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @param {} body - Participant attributes
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchChatsChatIdParticipantsParticipantIdAttributes = function patchChatsChatIdParticipantsParticipantIdAttributes(chatId, participantId, body){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} chatId - chatId
  * @param {string} participantId - participantId
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "code": "",
   "name": "",
   "notes": "",
   "tags": [],
   "durationSeconds": 0,
   "endTime": "",
   "provisional": true
}
  */
ConversationsApi.prototype.getChatsChatIdParticipantsParticipantIdWrapup = function getChatsChatIdParticipantsParticipantIdWrapup(chatId, participantId, provisional){
    var requestPath = '/api/v2/conversations/chats/{chatId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(chatId === undefined || chatId === null){
      throw new Error('Missing required  parameter: chatId');
    }
    requestPath = requestPath.replace('{chatId}', chatId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @param {} body - Update request
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchEmailsEmailIdParticipantsParticipantId = function patchEmailsEmailIdParticipantsParticipantId(emailId, participantId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant's communication by disconnecting it.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @param {string} communicationId - communicationId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  * @example
  * 200 Response Example:
  * {}
  */
ConversationsApi.prototype.patchEmailsEmailIdParticipantsParticipantIdCommunicationsCommunicationId = function patchEmailsEmailIdParticipantsParticipantIdCommunicationsCommunicationId(emailId, participantId, communicationId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}/communications/{communicationId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(communicationId === undefined || communicationId === null){
      throw new Error('Missing required  parameter: communicationId');
    }
    requestPath = requestPath.replace('{communicationId}', communicationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @param {} body - Transfer request
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postEmailsEmailIdParticipantsParticipantIdReplace = function postEmailsEmailIdParticipantsParticipantIdReplace(emailId, participantId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get conversation message
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} messageId - messageId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.getEmailsEmailIdMessagesMessageId = function getEmailsEmailIdMessagesMessageId(emailId, messageId){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages/{messageId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(messageId === undefined || messageId === null){
      throw new Error('Missing required  parameter: messageId');
    }
    requestPath = requestPath.replace('{messageId}', messageId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent email conversations
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getEmails = function getEmails(){
    var requestPath = '/api/v2/conversations/emails';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an email conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - Create email request
  * @example
  * Body Example:
  * {
   "queueId": "",
   "provider": "",
   "skillIds": [],
   "languageId": "",
   "priority": 0,
   "attributes": {},
   "toAddress": "",
   "toName": "",
   "fromAddress": "",
   "fromName": "",
   "subject": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.postEmails = function postEmails(body){
    var requestPath = '/api/v2/conversations/emails';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getEmailsEmailIdParticipantsParticipantIdWrapupcodes = function getEmailsEmailIdParticipantsParticipantIdWrapupcodes(emailId, participantId){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get conversation messages
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getEmailsEmailIdMessages = function getEmailsEmailIdMessages(emailId){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Send an email reply
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {} body - Reply
  * @example
  * Body Example:
  * {
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.postEmailsEmailIdMessages = function postEmailsEmailIdMessages(emailId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get email conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.getEmailsEmailId = function getEmailsEmailId(emailId){
    var requestPath = '/api/v2/conversations/emails/{emailId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a conversation by disconnecting all of the participants
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.patchEmailsEmailId = function patchEmailsEmailId(emailId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @param {} body - Participant attributes
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchEmailsEmailIdParticipantsParticipantIdAttributes = function patchEmailsEmailIdParticipantsParticipantIdAttributes(emailId, participantId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} participantId - participantId
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "code": "",
   "name": "",
   "notes": "",
   "tags": [],
   "durationSeconds": 0,
   "endTime": "",
   "provisional": true
}
  */
ConversationsApi.prototype.getEmailsEmailIdParticipantsParticipantIdWrapup = function getEmailsEmailIdParticipantsParticipantIdWrapup(emailId, participantId, provisional){
    var requestPath = '/api/v2/conversations/emails/{emailId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete attachment from draft
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {string} attachmentId - attachmentId
  */
ConversationsApi.prototype.deleteEmailsEmailIdMessagesDraftAttachmentsAttachmentId = function deleteEmailsEmailIdMessagesDraftAttachmentsAttachmentId(emailId, attachmentId){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages/draft/attachments/{attachmentId}';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(attachmentId === undefined || attachmentId === null){
      throw new Error('Missing required  parameter: attachmentId');
    }
    requestPath = requestPath.replace('{attachmentId}', attachmentId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get conversation draft reply
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.getEmailsEmailIdMessagesDraft = function getEmailsEmailIdMessagesDraft(emailId){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages/draft';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation draft reply
  * @memberOf ConversationsApi
  * @instance
  * @param {string} emailId - emailId
  * @param {} body - Draft
  * @example
  * Body Example:
  * {
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "to": [],
   "cc": [],
   "bcc": [],
   "from": {
      "email": "",
      "name": ""
   },
   "subject": "",
   "attachments": [],
   "textBody": "",
   "htmlBody": "",
   "time": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.putEmailsEmailIdMessagesDraft = function putEmailsEmailIdMessagesDraft(emailId, body){
    var requestPath = '/api/v2/conversations/emails/{emailId}/messages/draft';
    var requestQuery = {};
    var requestBody;

    if(emailId === undefined || emailId === null){
      throw new Error('Missing required  parameter: emailId');
    }
    requestPath = requestPath.replace('{emailId}', emailId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a participant.
  * @description Update conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {} body - Update request
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchConversationIdParticipantsParticipantId = function patchConversationIdParticipantsParticipantId(conversationId, participantId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {} body - Transfer request
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postConversationIdParticipantsParticipantIdReplace = function postConversationIdParticipantsParticipantIdReplace(conversationId, participantId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getConversationIdParticipantsParticipantIdWrapupcodes = function getConversationIdParticipantsParticipantIdWrapupcodes(conversationId, participantId){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new callback for the specified participant on the conversation.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "scriptId": "",
   "queueId": "",
   "routingData": {
      "queueId": "",
      "languageId": "",
      "priority": 0,
      "skillIds": [],
      "preferredAgentIds": []
   },
   "callbackUserName": "",
   "callbackNumbers": [],
   "callbackScheduledTime": "",
   "countryCode": "",
   "data": {}
}
  */
ConversationsApi.prototype.postConversationIdParticipantsParticipantIdCallbacks = function postConversationIdParticipantsParticipantIdCallbacks(conversationId, participantId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/callbacks';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {} body - Participant attributes
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchConversationIdParticipantsParticipantIdAttributes = function patchConversationIdParticipantsParticipantIdAttributes(conversationId, participantId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.getConversationIdParticipantsParticipantIdWrapup = function getConversationIdParticipantsParticipantIdWrapup(conversationId, participantId, provisional){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchCobrowsesessionsCobrowseIdParticipantsParticipantId = function patchCobrowsesessionsCobrowseIdParticipantsParticipantId(cobrowseId, participantId, body){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant's communication by disconnecting it.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @param {string} communicationId - communicationId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  * @example
  * 200 Response Example:
  * {}
  */
ConversationsApi.prototype.patchCobrowsesessionsCobrowseIdParticipantsParticipantIdCommunicationsCommunicationId = function patchCobrowsesessionsCobrowseIdParticipantsParticipantIdCommunicationsCommunicationId(cobrowseId, participantId, communicationId, body){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}/communications/{communicationId}';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(communicationId === undefined || communicationId === null){
      throw new Error('Missing required  parameter: communicationId');
    }
    requestPath = requestPath.replace('{communicationId}', communicationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postCobrowsesessionsCobrowseIdParticipantsParticipantIdReplace = function postCobrowsesessionsCobrowseIdParticipantsParticipantIdReplace(cobrowseId, participantId, body){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent cobrowse conversations
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getCobrowsesessions = function getCobrowsesessions(){
    var requestPath = '/api/v2/conversations/cobrowsesessions';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getCobrowsesessionsCobrowseIdParticipantsParticipantIdWrapupcodes = function getCobrowsesessionsCobrowseIdParticipantsParticipantIdWrapupcodes(cobrowseId, participantId){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get cobrowse conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.getCobrowsesessionsCobrowseId = function getCobrowsesessionsCobrowseId(cobrowseId){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a conversation by disconnecting all of the participants
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.patchCobrowsesessionsCobrowseId = function patchCobrowsesessionsCobrowseId(cobrowseId, body){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchCobrowsesessionsCobrowseIdParticipantsParticipantIdAttributes = function patchCobrowsesessionsCobrowseIdParticipantsParticipantIdAttributes(cobrowseId, participantId, body){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} cobrowseId - cobrowseId
  * @param {string} participantId - participantId
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "code": "",
   "name": "",
   "notes": "",
   "tags": [],
   "durationSeconds": 0,
   "endTime": "",
   "provisional": true
}
  */
ConversationsApi.prototype.getCobrowsesessionsCobrowseIdParticipantsParticipantIdWrapup = function getCobrowsesessionsCobrowseIdParticipantsParticipantIdWrapup(cobrowseId, participantId, provisional){
    var requestPath = '/api/v2/conversations/cobrowsesessions/{cobrowseId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(cobrowseId === undefined || cobrowseId === null){
      throw new Error('Missing required  parameter: cobrowseId');
    }
    requestPath = requestPath.replace('{cobrowseId}', cobrowseId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a code used to add a communication to this participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @param {string} participantId - participant ID
  * @param {string} addCommunicationCode - addCommunicationCode
  */
ConversationsApi.prototype.deleteConversationIdParticipantsParticipantIdCodesAddcommunicationcode = function deleteConversationIdParticipantsParticipantIdCodesAddcommunicationcode(conversationId, participantId, addCommunicationCode){
    var requestPath = '/api/v2/conversations/{conversationId}/participants/{participantId}/codes/{addCommunicationCode}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(addCommunicationCode === undefined || addCommunicationCode === null){
      throw new Error('Missing required  parameter: addCommunicationCode');
    }
    requestPath = requestPath.replace('{addCommunicationCode}', addCommunicationCode);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create Fax Conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - Fax
  * @example
  * Body Example:
  * {
   "name": "",
   "addresses": [],
   "documentId": "",
   "contentType": "",
   "workspace": {
      "name": "",
      "type": "",
      "isCurrentUserWorkspace": true,
      "user": {},
      "bucket": "",
      "dateCreated": "",
      "dateModified": "",
      "summary": {},
      "acl": [],
      "description": ""
   },
   "coverSheet": {
      "notes": "",
      "locale": ""
   },
   "timeZoneOffsetMinutes": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "uploadDestinationUri": "",
   "uploadMethodType": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.postFaxes = function postFaxes(body){
    var requestPath = '/api/v2/conversations/faxes';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} conversationId - conversation ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.getConversationId = function getConversationId(conversationId){
    var requestPath = '/api/v2/conversations/{conversationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get callback conversations
  * @memberOf ConversationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ConversationsApi.prototype.getCallbacks = function getCallbacks(){
    var requestPath = '/api/v2/conversations/callbacks';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Callback
  * @memberOf ConversationsApi
  * @instance
  * @param {} body - Callback
  * @example
  * Body Example:
  * {
   "scriptId": "",
   "queueId": "",
   "routingData": {
      "queueId": "",
      "languageId": "",
      "priority": 0,
      "skillIds": [],
      "preferredAgentIds": []
   },
   "callbackUserName": "",
   "callbackNumbers": [],
   "callbackScheduledTime": "",
   "countryCode": "",
   "data": {}
}
  * @example
  * 200 Response Example:
  * {
   "conversation": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callbackIdentifiers": []
}
  */
ConversationsApi.prototype.postCallbacks = function postCallbacks(body){
    var requestPath = '/api/v2/conversations/callbacks';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  */
ConversationsApi.prototype.patchCallbacksCallbackIdParticipantsParticipantId = function patchCallbacksCallbackIdParticipantsParticipantId(callbackId, participantId, body){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update conversation participant's communication by disconnecting it.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @param {string} communicationId - communicationId
  * @param {} body - Participant
  * @example
  * Body Example:
  * {
   "wrapup": {
      "code": "",
      "name": "",
      "notes": "",
      "tags": [],
      "durationSeconds": 0,
      "endTime": "",
      "provisional": true
   },
   "state": "",
   "recording": true,
   "muted": true,
   "confined": true,
   "held": true,
   "wrapupSkipped": true
}
  * @example
  * 200 Response Example:
  * {}
  */
ConversationsApi.prototype.patchCallbacksCallbackIdParticipantsParticipantIdCommunicationsCommunicationId = function patchCallbacksCallbackIdParticipantsParticipantIdCommunicationsCommunicationId(callbackId, participantId, communicationId, body){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}/communications/{communicationId}';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(communicationId === undefined || communicationId === null){
      throw new Error('Missing required  parameter: communicationId');
    }
    requestPath = requestPath.replace('{communicationId}', communicationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace this participant with the specified user and/or address
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @param {} body - Transfer request
  * @example
  * Body Example:
  * {
   "userId": "",
   "address": "",
   "userName": "",
   "queueId": "",
   "voicemail": true
}
  */
ConversationsApi.prototype.postCallbacksCallbackIdParticipantsParticipantIdReplace = function postCallbacksCallbackIdParticipantsParticipantIdReplace(callbackId, participantId, body){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}/replace';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes for this conversation participant
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
ConversationsApi.prototype.getCallbacksCallbackIdParticipantsParticipantIdWrapupcodes = function getCallbacksCallbackIdParticipantsParticipantIdWrapupcodes(callbackId, participantId){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get callback conversation
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "participants": [],
   "otherMediaUris": [],
   "selfUri": ""
}
  */
ConversationsApi.prototype.getCallbacksCallbackId = function getCallbacksCallbackId(callbackId){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a conversation by disconnecting all of the participants
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {} body - Conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "startTime": "",
   "endTime": "",
   "address": "",
   "participants": [],
   "conversationIds": [],
   "maxParticipants": 0,
   "recordingState": "",
   "state": "",
   "selfUri": ""
}
  */
ConversationsApi.prototype.patchCallbacksCallbackId = function patchCallbacksCallbackId(callbackId, body){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the attributes on a conversation participant.
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @param {} body - Attributes
  * @example
  * Body Example:
  * {
   "attributes": {}
}
  */
ConversationsApi.prototype.patchCallbacksCallbackIdParticipantsParticipantIdAttributes = function patchCallbacksCallbackIdParticipantsParticipantIdAttributes(callbackId, participantId, body){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}/attributes';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up for this conversation participant. 
  * @memberOf ConversationsApi
  * @instance
  * @param {string} callbackId - callbackId
  * @param {string} participantId - participantId
  * @param {boolean} provisional - Indicates if the wrap-up code is provisional.
  * @example
  * 200 Response Example:
  * {
   "code": "",
   "name": "",
   "notes": "",
   "tags": [],
   "durationSeconds": 0,
   "endTime": "",
   "provisional": true
}
  */
ConversationsApi.prototype.getCallbacksCallbackIdParticipantsParticipantIdWrapup = function getCallbacksCallbackIdParticipantsParticipantIdWrapup(callbackId, participantId, provisional){
    var requestPath = '/api/v2/conversations/callbacks/{callbackId}/participants/{participantId}/wrapup';
    var requestQuery = {};
    var requestBody;

    if(callbackId === undefined || callbackId === null){
      throw new Error('Missing required  parameter: callbackId');
    }
    requestPath = requestPath.replace('{callbackId}', callbackId);
    if(participantId === undefined || participantId === null){
      throw new Error('Missing required  parameter: participantId');
    }
    requestPath = requestPath.replace('{participantId}', participantId);
    requestQuery["provisional"] = provisional;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = ConversationsApi;

},{}],8:[function(require,module,exports){
/*jshint -W069 */
/**
* @class FaxApi
* @example
* var api = new purecloud.platform.FaxApi(pureCloudSession);
*/
function FaxApi(session) {
    if(!(this instanceof FaxApi)) {
        return new FaxApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('FaxApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Download a fax document.
  * @memberOf FaxApi
  * @instance
  * @param {string} documentId - Document ID
  * @example
  * 200 Response Example:
  * {
   "contentLocationUri": "",
   "imageUri": "",
   "thumbnails": []
}
  */
FaxApi.prototype.getDocumentsDocumentIdContent = function getDocumentsDocumentIdContent(documentId){
    var requestPath = '/api/v2/fax/documents/{documentId}/content';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a document.
  * @memberOf FaxApi
  * @instance
  * @param {string} documentId - Document ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "filename": "",
   "read": true,
   "pageCount": 0,
   "callerAddress": "",
   "receiverAddress": "",
   "thumbnails": [],
   "sharingUri": "",
   "downloadSharingUri": "",
   "selfUri": ""
}
  */
FaxApi.prototype.getDocumentsDocumentId = function getDocumentsDocumentId(documentId){
    var requestPath = '/api/v2/fax/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a fax document.
  * @memberOf FaxApi
  * @instance
  * @param {string} documentId - Document ID
  * @param {} body - Document
  * @example
  * Body Example:
  * {
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "filename": "",
   "read": true,
   "pageCount": 0,
   "callerAddress": "",
   "receiverAddress": "",
   "thumbnails": [],
   "sharingUri": "",
   "downloadSharingUri": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contentType": "",
   "contentLength": 0,
   "filename": "",
   "read": true,
   "pageCount": 0,
   "callerAddress": "",
   "receiverAddress": "",
   "thumbnails": [],
   "sharingUri": "",
   "downloadSharingUri": "",
   "selfUri": ""
}
  */
FaxApi.prototype.putDocumentsDocumentId = function putDocumentsDocumentId(documentId, body){
    var requestPath = '/api/v2/fax/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a fax document.
  * @memberOf FaxApi
  * @instance
  * @param {string} documentId - Document ID
  */
FaxApi.prototype.deleteDocumentsDocumentId = function deleteDocumentsDocumentId(documentId){
    var requestPath = '/api/v2/fax/documents/{documentId}';
    var requestQuery = {};
    var requestBody;

    if(documentId === undefined || documentId === null){
      throw new Error('Missing required  parameter: documentId');
    }
    requestPath = requestPath.replace('{documentId}', documentId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get fax summary
  * @memberOf FaxApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "readCount": 0,
   "unreadCount": 0,
   "totalCount": 0
}
  */
FaxApi.prototype.getSummary = function getSummary(){
    var requestPath = '/api/v2/fax/summary';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of fax documents.
  * @memberOf FaxApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
FaxApi.prototype.getDocuments = function getDocuments(pageSize, pageNumber){
    var requestPath = '/api/v2/fax/documents';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = FaxApi;

},{}],9:[function(require,module,exports){
/*jshint -W069 */
/**
* @class GeolocationApi
* @example
* var api = new purecloud.platform.GeolocationApi(pureCloudSession);
*/
function GeolocationApi(session) {
    if(!(this instanceof GeolocationApi)) {
        return new GeolocationApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('GeolocationApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a user's Geolocation
  * @memberOf GeolocationApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} clientId - client Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
}
  */
GeolocationApi.prototype.getUserIdGeolocationsClientId = function getUserIdGeolocationsClientId(userId, clientId){
    var requestPath = '/api/v2/users/{userId}/geolocations/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a user's Geolocation
  * @description The geolocation object can be patched one of three ways. Option 1: Set the 'primary' property to true. This will set the client as the user's primary geolocation source.  Option 2: Provide the 'latitude' and 'longitude' values.  This will enqueue an asynchronous update of the 'city', 'region', and 'country', generating a notification. A subsequent GET operation will include the new values for 'city', 'region' and 'country'.  Option 3:  Provide the 'city', 'region', 'country' values.  Option 1 can be combined with Option 2 or Option 3.  For example, update the client as primary and provide latitude and longitude values.
  * @memberOf GeolocationApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} clientId - client Id
  * @param {} body - Geolocation
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
}
  */
GeolocationApi.prototype.patchUserIdGeolocationsClientId = function patchUserIdGeolocationsClientId(userId, clientId, body){
    var requestPath = '/api/v2/users/{userId}/geolocations/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a organization's GeolocationSettings
  * @memberOf GeolocationApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "enabled": true,
   "mapboxKey": "",
   "selfUri": ""
}
  */
GeolocationApi.prototype.getSettings = function getSettings(){
    var requestPath = '/api/v2/geolocations/settings';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a organization's GeolocationSettings
  * @memberOf GeolocationApi
  * @instance
  * @param {} body - Geolocation settings
  * @example
  * Body Example:
  * {
   "name": "",
   "enabled": true,
   "mapboxKey": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "enabled": true,
   "mapboxKey": "",
   "selfUri": ""
}
  */
GeolocationApi.prototype.patchSettings = function patchSettings(body){
    var requestPath = '/api/v2/geolocations/settings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};


module.exports = GeolocationApi;

},{}],10:[function(require,module,exports){
/*jshint -W069 */
/**
* @class GreetingsApi
* @example
* var api = new purecloud.platform.GreetingsApi(pureCloudSession);
*/
function GreetingsApi(session) {
    if(!(this instanceof GreetingsApi)) {
        return new GreetingsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('GreetingsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get an Organization's DefaultGreetingList
  * @memberOf GreetingsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.getDefaults = function getDefaults(){
    var requestPath = '/api/v2/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an Organization's DefaultGreetingList
  * @memberOf GreetingsApi
  * @instance
  * @param {} body - The updated defaultGreetingList
  * @example
  * Body Example:
  * {
   "name": "",
   "owner": {
      "name": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.putDefaults = function putDefaults(body){
    var requestPath = '/api/v2/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Grabs the list of Default Greetings given a User's ID
  * @memberOf GreetingsApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.getUserIdGreetingsDefaults = function getUserIdGreetingsDefaults(userId){
    var requestPath = '/api/v2/users/{userId}/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Updates the DefaultGreetingList of the specified User
  * @memberOf GreetingsApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - The updated defaultGreetingList
  * @example
  * Body Example:
  * {
   "name": "",
   "owner": {
      "name": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.putUserIdGreetingsDefaults = function putUserIdGreetingsDefaults(userId, body){
    var requestPath = '/api/v2/users/{userId}/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Grabs the list of Default Greetings given a Group's ID
  * @memberOf GreetingsApi
  * @instance
  * @param {string} groupId - Group ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.getGroupIdGreetingsDefaults = function getGroupIdGreetingsDefaults(groupId){
    var requestPath = '/api/v2/groups/{groupId}/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Updates the DefaultGreetingList of the specified Group
  * @memberOf GreetingsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {} body - The updated defaultGreetingList
  * @example
  * Body Example:
  * {
   "name": "",
   "owner": {
      "name": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.putGroupIdGreetingsDefaults = function putGroupIdGreetingsDefaults(groupId, body){
    var requestPath = '/api/v2/groups/{groupId}/greetings/defaults';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets an Organization's Greetings
  * @memberOf GreetingsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
GreetingsApi.prototype.getGreetings = function getGreetings(pageSize, pageNumber){
    var requestPath = '/api/v2/greetings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Greeting for an Organization
  * @memberOf GreetingsApi
  * @instance
  * @param {} body - The Greeting to create
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "name": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "greetings": {},
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.postGreetings = function postGreetings(body){
    var requestPath = '/api/v2/greetings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Greeting with the given GreetingId
  * @memberOf GreetingsApi
  * @instance
  * @param {string} greetingId - Greeting ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.getGreetingId = function getGreetingId(greetingId){
    var requestPath = '/api/v2/greetings/{greetingId}';
    var requestQuery = {};
    var requestBody;

    if(greetingId === undefined || greetingId === null){
      throw new Error('Missing required  parameter: greetingId');
    }
    requestPath = requestPath.replace('{greetingId}', greetingId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Updates the Greeting with the given GreetingId
  * @memberOf GreetingsApi
  * @instance
  * @param {string} greetingId - Greeting ID
  * @param {} body - The updated Greeting
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "name": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.putGreetingId = function putGreetingId(greetingId, body){
    var requestPath = '/api/v2/greetings/{greetingId}';
    var requestQuery = {};
    var requestBody;

    if(greetingId === undefined || greetingId === null){
      throw new Error('Missing required  parameter: greetingId');
    }
    requestPath = requestPath.replace('{greetingId}', greetingId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Deletes a Greeting with the given GreetingId
  * @memberOf GreetingsApi
  * @instance
  * @param {string} greetingId - Greeting ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.deleteGreetingId = function deleteGreetingId(greetingId){
    var requestPath = '/api/v2/greetings/{greetingId}';
    var requestQuery = {};
    var requestBody;

    if(greetingId === undefined || greetingId === null){
      throw new Error('Missing required  parameter: greetingId');
    }
    requestPath = requestPath.replace('{greetingId}', greetingId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of the User's Greetings
  * @memberOf GreetingsApi
  * @instance
  * @param {string} userId - User ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
GreetingsApi.prototype.getUserIdGreetings = function getUserIdGreetings(userId, pageSize, pageNumber){
    var requestPath = '/api/v2/users/{userId}/greetings';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Creates a Greeting for a User
  * @memberOf GreetingsApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - The Greeting to create
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "name": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.postUserIdGreetings = function postUserIdGreetings(userId, body){
    var requestPath = '/api/v2/users/{userId}/greetings';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of the Group's Greetings
  * @memberOf GreetingsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
GreetingsApi.prototype.getGroupIdGreetings = function getGroupIdGreetings(groupId, pageSize, pageNumber){
    var requestPath = '/api/v2/groups/{groupId}/greetings';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Creates a Greeting for a Group
  * @memberOf GreetingsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {} body - The Greeting to create
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "name": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "ownerType": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "audioFile": {
      "durationMilliseconds": 0,
      "sizeBytes": 0,
      "selfUri": ""
   },
   "audioTTS": "",
   "createdDate": "",
   "createdBy": "",
   "modifiedDate": "",
   "modifiedBy": "",
   "selfUri": ""
}
  */
GreetingsApi.prototype.postGroupIdGreetings = function postGroupIdGreetings(groupId, body){
    var requestPath = '/api/v2/groups/{groupId}/greetings';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get media playback URI for this greeting
  * @memberOf GreetingsApi
  * @instance
  * @param {string} greetingId - Greeting ID
  * @param {string} formatId - The desired media format.
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "mediaFileUri": "",
   "mediaImageUri": ""
}
  */
GreetingsApi.prototype.getGreetingIdMedia = function getGreetingIdMedia(greetingId, formatId){
    var requestPath = '/api/v2/greetings/{greetingId}/media';
    var requestQuery = {};
    var requestBody;

    if(greetingId === undefined || greetingId === null){
      throw new Error('Missing required  parameter: greetingId');
    }
    requestPath = requestPath.replace('{greetingId}', greetingId);
    requestQuery["formatId"] = formatId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = GreetingsApi;

},{}],11:[function(require,module,exports){
/*jshint -W069 */
/**
* @class GroupsApi
* @example
* var api = new purecloud.platform.GroupsApi(pureCloudSession);
*/
function GroupsApi(session) {
    if(!(this instanceof GroupsApi)) {
        return new GroupsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('GroupsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Search groups using the q64 value returned from a previous search
  * @memberOf GroupsApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
GroupsApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/groups/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search groups
  * @memberOf GroupsApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
GroupsApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/groups/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get group members
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
GroupsApi.prototype.getGroupIdMembers = function getGroupIdMembers(groupId, pageSize, pageNumber, sortOrder, expand){
    var requestPath = '/api/v2/groups/{groupId}/members';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add members
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {} body - Add members
  * @example
  * Body Example:
  * {
   "memberIds": [],
   "version": 0
}
  */
GroupsApi.prototype.postGroupIdMembers = function postGroupIdMembers(groupId, body){
    var requestPath = '/api/v2/groups/{groupId}/members';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Remove members
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {string} ids - Comma separated list of userIds to remove
  */
GroupsApi.prototype.deleteGroupIdMembers = function deleteGroupIdMembers(groupId, ids){
    var requestPath = '/api/v2/groups/{groupId}/members';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(ids === undefined || ids === null){
      throw new Error('Missing required  parameter: ids');
    }
    requestQuery["ids"] = ids;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Fetch field config for an entity type
  * @memberOf GroupsApi
  * @instance
  * @param {string} type - Field type
  person,
  group,
  org,
  externalContact,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "entityType": "",
   "state": "",
   "sections": [],
   "version": "",
   "schemaVersion": "",
   "selfUri": ""
}
  */
GroupsApi.prototype.getFieldconfig = function getFieldconfig(type){
    var requestPath = '/api/v2/fieldconfig';
    var requestQuery = {};
    var requestBody;

    if(type === undefined || type === null){
      throw new Error('Missing required  parameter: type');
    }
    requestQuery["type"] = type;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a group list
  * @memberOf GroupsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
GroupsApi.prototype.getGroups = function getGroups(pageSize, pageNumber, sortOrder){
    var requestPath = '/api/v2/groups';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a group
  * @memberOf GroupsApi
  * @instance
  * @param {} body - Group
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "type": "",
   "images": [],
   "addresses": [],
   "rulesVisible": true,
   "visibility": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "dateModified": "",
   "memberCount": 0,
   "state": "",
   "version": 0,
   "type": "",
   "images": [],
   "addresses": [],
   "rulesVisible": true,
   "visibility": "",
   "selfUri": ""
}
  */
GroupsApi.prototype.postGroups = function postGroups(body){
    var requestPath = '/api/v2/groups';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get group
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "dateModified": "",
   "memberCount": 0,
   "state": "",
   "version": 0,
   "type": "",
   "images": [],
   "addresses": [],
   "rulesVisible": true,
   "visibility": "",
   "selfUri": ""
}
  */
GroupsApi.prototype.getGroupId = function getGroupId(groupId){
    var requestPath = '/api/v2/groups/{groupId}';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update group
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {} body - Group
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "state": "",
   "version": 0,
   "images": [],
   "addresses": [],
   "rulesVisible": true,
   "visibility": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "dateModified": "",
   "memberCount": 0,
   "state": "",
   "version": 0,
   "type": "",
   "images": [],
   "addresses": [],
   "rulesVisible": true,
   "visibility": "",
   "selfUri": ""
}
  */
GroupsApi.prototype.putGroupId = function putGroupId(groupId, body){
    var requestPath = '/api/v2/groups/{groupId}';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete group
  * @memberOf GroupsApi
  * @instance
  * @param {string} groupId - Group ID
  */
GroupsApi.prototype.deleteGroupId = function deleteGroupId(groupId){
    var requestPath = '/api/v2/groups/{groupId}';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = GroupsApi;

},{}],12:[function(require,module,exports){
/*jshint -W069 */
/**
* @class IdentityProviderApi
* @example
* var api = new purecloud.platform.IdentityProviderApi(pureCloudSession);
*/
function IdentityProviderApi(session) {
    if(!(this instanceof IdentityProviderApi)) {
        return new IdentityProviderApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('IdentityProviderApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get Customer Interaction Center (CIC) Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getCic = function getCic(){
    var requestPath = '/api/v2/identityproviders/cic';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create Customer Interaction Center (CIC) Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putCic = function putCic(body){
    var requestPath = '/api/v2/identityproviders/cic';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Customer Interaction Center (CIC) Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteCic = function deleteCic(){
    var requestPath = '/api/v2/identityproviders/cic';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get PureCloud Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getPurecloud = function getPurecloud(){
    var requestPath = '/api/v2/identityproviders/purecloud';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create PureCloud Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putPurecloud = function putPurecloud(body){
    var requestPath = '/api/v2/identityproviders/purecloud';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete PureCloud Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deletePurecloud = function deletePurecloud(){
    var requestPath = '/api/v2/identityproviders/purecloud';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Salesforce Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getSalesforce = function getSalesforce(){
    var requestPath = '/api/v2/identityproviders/salesforce';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create Salesforce Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putSalesforce = function putSalesforce(body){
    var requestPath = '/api/v2/identityproviders/salesforce';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Salesforce Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteSalesforce = function deleteSalesforce(){
    var requestPath = '/api/v2/identityproviders/salesforce';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary The list of identity providers
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
IdentityProviderApi.prototype.getIdentityproviders = function getIdentityproviders(){
    var requestPath = '/api/v2/identityproviders';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get ADFS Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "relyingPartyIdentifier": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getAdfs = function getAdfs(){
    var requestPath = '/api/v2/identityproviders/adfs';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create ADFS Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "relyingPartyIdentifier": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putAdfs = function putAdfs(body){
    var requestPath = '/api/v2/identityproviders/adfs';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete ADFS Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteAdfs = function deleteAdfs(){
    var requestPath = '/api/v2/identityproviders/adfs';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get OneLogin Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getOnelogin = function getOnelogin(){
    var requestPath = '/api/v2/identityproviders/onelogin';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create OneLogin Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putOnelogin = function putOnelogin(body){
    var requestPath = '/api/v2/identityproviders/onelogin';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete OneLogin Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteOnelogin = function deleteOnelogin(){
    var requestPath = '/api/v2/identityproviders/onelogin';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an identity provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getProviderId = function getProviderId(){
    var requestPath = '/api/v2/identityproviders/{providerId}';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an identity provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putProviderId = function putProviderId(body){
    var requestPath = '/api/v2/identityproviders/{providerId}';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an identity provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteProviderId = function deleteProviderId(){
    var requestPath = '/api/v2/identityproviders/{providerId}';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Okta Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true,
   "selfUri": ""
}
  */
IdentityProviderApi.prototype.getOkta = function getOkta(){
    var requestPath = '/api/v2/identityproviders/okta';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update/Create Okta Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  * @param {} body - Provider
  * @example
  * Body Example:
  * {
   "name": "",
   "certificate": "",
   "ssoTargetURI": "",
   "issuerURI": "",
   "disabled": true
}
  */
IdentityProviderApi.prototype.putOkta = function putOkta(body){
    var requestPath = '/api/v2/identityproviders/okta';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Okta Identity Provider
  * @memberOf IdentityProviderApi
  * @instance
  */
IdentityProviderApi.prototype.deleteOkta = function deleteOkta(){
    var requestPath = '/api/v2/identityproviders/okta';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = IdentityProviderApi;

},{}],13:[function(require,module,exports){
/*jshint -W069 */
/**
* @class LanguagesApi
* @example
* var api = new purecloud.platform.LanguagesApi(pureCloudSession);
*/
function LanguagesApi(session) {
    if(!(this instanceof LanguagesApi)) {
        return new LanguagesApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('LanguagesApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get language
  * @memberOf LanguagesApi
  * @instance
  * @param {string} languageId - Language ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
LanguagesApi.prototype.getLanguagesLanguageId = function getLanguagesLanguageId(languageId){
    var requestPath = '/api/v2/routing/languages/{languageId}';
    var requestQuery = {};
    var requestBody;

    if(languageId === undefined || languageId === null){
      throw new Error('Missing required  parameter: languageId');
    }
    requestPath = requestPath.replace('{languageId}', languageId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Language
  * @memberOf LanguagesApi
  * @instance
  * @param {string} languageId - Language ID
  */
LanguagesApi.prototype.deleteLanguagesLanguageId = function deleteLanguagesLanguageId(languageId){
    var requestPath = '/api/v2/routing/languages/{languageId}';
    var requestQuery = {};
    var requestBody;

    if(languageId === undefined || languageId === null){
      throw new Error('Missing required  parameter: languageId');
    }
    requestPath = requestPath.replace('{languageId}', languageId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get all available languages for translation
  * @memberOf LanguagesApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "orgSpecific": [],
   "builtin": []
}
  */
LanguagesApi.prototype.getTranslations = function getTranslations(){
    var requestPath = '/api/v2/languages/translations';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the builtin translation for a language
  * @memberOf LanguagesApi
  * @instance
  * @param {string} language - The language of the builtin translation to retrieve
  */
LanguagesApi.prototype.getTranslationsBuiltin = function getTranslationsBuiltin(language){
    var requestPath = '/api/v2/languages/translations/builtin';
    var requestQuery = {};
    var requestBody;

    if(language === undefined || language === null){
      throw new Error('Missing required  parameter: language');
    }
    requestQuery["language"] = language;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get effective translation for an organization by language
  * @memberOf LanguagesApi
  * @instance
  * @param {string} language - The language of the translation to retrieve for the organization
  */
LanguagesApi.prototype.getTranslationsOrganization = function getTranslationsOrganization(language){
    var requestPath = '/api/v2/languages/translations/organization';
    var requestQuery = {};
    var requestBody;

    if(language === undefined || language === null){
      throw new Error('Missing required  parameter: language');
    }
    requestQuery["language"] = language;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get effective language translation for a user
  * @memberOf LanguagesApi
  * @instance
  * @param {string} userId - The user id
  */
LanguagesApi.prototype.getTranslationsUsersUserId = function getTranslationsUsersUserId(userId){
    var requestPath = '/api/v2/languages/translations/users/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of supported languages. (Deprecated)
  * @description This endpoint is deprecated. It has been moved to /routing/languages
  * @memberOf LanguagesApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @param {string} name - Name
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
LanguagesApi.prototype.getLanguages = function getLanguages(pageSize, pageNumber, sortOrder, name){
    var requestPath = '/api/v2/languages';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create Language (Deprecated)
  * @description This endpoint is deprecated. It has been moved to /routing/languages
  * @memberOf LanguagesApi
  * @instance
  * @param {} body - Language
  * @example
  * Body Example:
  * {
   "name": "",
   "dateModified": "",
   "state": "",
   "version": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
LanguagesApi.prototype.postLanguages = function postLanguages(body){
    var requestPath = '/api/v2/languages';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get language (Deprecated)
  * @description This endpoint is deprecated. It has been moved to /routing/languages/{languageId}
  * @memberOf LanguagesApi
  * @instance
  * @param {string} languageId - Language ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
LanguagesApi.prototype.getLanguageId = function getLanguageId(languageId){
    var requestPath = '/api/v2/languages/{languageId}';
    var requestQuery = {};
    var requestBody;

    if(languageId === undefined || languageId === null){
      throw new Error('Missing required  parameter: languageId');
    }
    requestPath = requestPath.replace('{languageId}', languageId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Language (Deprecated)
  * @description This endpoint is deprecated. It has been moved to /routing/languages/{languageId}
  * @memberOf LanguagesApi
  * @instance
  * @param {string} languageId - Language ID
  */
LanguagesApi.prototype.deleteLanguageId = function deleteLanguageId(languageId){
    var requestPath = '/api/v2/languages/{languageId}';
    var requestQuery = {};
    var requestBody;

    if(languageId === undefined || languageId === null){
      throw new Error('Missing required  parameter: languageId');
    }
    requestPath = requestPath.replace('{languageId}', languageId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = LanguagesApi;

},{}],14:[function(require,module,exports){
/*jshint -W069 */
/**
* @class LocationsApi
* @example
* var api = new purecloud.platform.LocationsApi(pureCloudSession);
*/
function LocationsApi(session) {
    if(!(this instanceof LocationsApi)) {
        return new LocationsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('LocationsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a list of all locations.
  * @memberOf LocationsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Sort order
  asc,
  desc,
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "address": {
   "city": "",
   "country": "",
   "countryName": "",
   "state": "",
   "street1": "",
   "street2": "",
   "zipcode": ""
  },
  "addressVerified": true,
  "emergencyNumber": {
   "e164": "",
   "number": "",
   "type": ""
  },
  "state": "",
  "version": 0,
  "path": [],
  "selfUri": ""
 }
]
  */
LocationsApi.prototype.getLocations = function getLocations(pageSize, pageNumber, sortOrder){
    var requestPath = '/api/v2/locations';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search locations using the q64 value returned from a previous search
  * @memberOf LocationsApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
LocationsApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/locations/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search locations
  * @memberOf LocationsApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
LocationsApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/locations/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Location by ID.
  * @memberOf LocationsApi
  * @instance
  * @param {string} locationId - Location ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "address": {
      "city": "",
      "country": "",
      "countryName": "",
      "state": "",
      "street1": "",
      "street2": "",
      "zipcode": ""
   },
   "addressVerified": true,
   "emergencyNumber": {
      "e164": "",
      "number": "",
      "type": ""
   },
   "state": "",
   "version": 0,
   "path": [],
   "selfUri": ""
}
  */
LocationsApi.prototype.getLocationId = function getLocationId(locationId){
    var requestPath = '/api/v2/locations/{locationId}';
    var requestQuery = {};
    var requestBody;

    if(locationId === undefined || locationId === null){
      throw new Error('Missing required  parameter: locationId');
    }
    requestPath = requestPath.replace('{locationId}', locationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = LocationsApi;

},{}],15:[function(require,module,exports){
/*jshint -W069 */
/**
* @class NotificationsApi
* @example
* var api = new purecloud.platform.NotificationsApi(pureCloudSession);
*/
function NotificationsApi(session) {
    if(!(this instanceof NotificationsApi)) {
        return new NotificationsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('NotificationsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary The list of existing channels
  * @memberOf NotificationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
NotificationsApi.prototype.getChannels = function getChannels(){
    var requestPath = '/api/v2/notifications/channels';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new channel
  * @description There is a limit of 10 channels. Creating an 11th channel will remove the channel with oldest last used date.
  * @memberOf NotificationsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "connectUri": ""
}
  */
NotificationsApi.prototype.postChannels = function postChannels(){
    var requestPath = '/api/v2/notifications/channels';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary The list of all subscriptions for this channel
  * @memberOf NotificationsApi
  * @instance
  * @param {string} channelId - Channel ID
  * @example
  * 200 Response Example:
  * {
   "entities": []
}
  */
NotificationsApi.prototype.getChannelsChannelIdSubscriptions = function getChannelsChannelIdSubscriptions(channelId){
    var requestPath = '/api/v2/notifications/channels/{channelId}/subscriptions';
    var requestQuery = {};
    var requestBody;

    if(channelId === undefined || channelId === null){
      throw new Error('Missing required  parameter: channelId');
    }
    requestPath = requestPath.replace('{channelId}', channelId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add a list of subscriptions to the existing list of subscriptions
  * @memberOf NotificationsApi
  * @instance
  * @param {string} channelId - Channel ID
  * @param {} body - Topic
  * @example
  * Body Example:
  * [
 {
  "id": ""
 }
]
  * @example
  * 200 Response Example:
  * {
   "entities": []
}
  */
NotificationsApi.prototype.postChannelsChannelIdSubscriptions = function postChannelsChannelIdSubscriptions(channelId, body){
    var requestPath = '/api/v2/notifications/channels/{channelId}/subscriptions';
    var requestQuery = {};
    var requestBody;

    if(channelId === undefined || channelId === null){
      throw new Error('Missing required  parameter: channelId');
    }
    requestPath = requestPath.replace('{channelId}', channelId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Replace the current list of subscriptions with a new list.
  * @memberOf NotificationsApi
  * @instance
  * @param {string} channelId - Channel ID
  * @param {} body - Topic
  * @example
  * Body Example:
  * [
 {
  "id": ""
 }
]
  * @example
  * 200 Response Example:
  * {
   "entities": []
}
  */
NotificationsApi.prototype.putChannelsChannelIdSubscriptions = function putChannelsChannelIdSubscriptions(channelId, body){
    var requestPath = '/api/v2/notifications/channels/{channelId}/subscriptions';
    var requestQuery = {};
    var requestBody;

    if(channelId === undefined || channelId === null){
      throw new Error('Missing required  parameter: channelId');
    }
    requestPath = requestPath.replace('{channelId}', channelId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Remove all subscriptions
  * @memberOf NotificationsApi
  * @instance
  * @param {string} channelId - Channel ID
  */
NotificationsApi.prototype.deleteChannelsChannelIdSubscriptions = function deleteChannelsChannelIdSubscriptions(channelId){
    var requestPath = '/api/v2/notifications/channels/{channelId}/subscriptions';
    var requestQuery = {};
    var requestBody;

    if(channelId === undefined || channelId === null){
      throw new Error('Missing required  parameter: channelId');
    }
    requestPath = requestPath.replace('{channelId}', channelId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get available notification topics.
  * @memberOf NotificationsApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand Valid Values: description, requiresPermissions, schema
  * @example
  * 200 Response Example:
  * {
   "entities": []
}
  */
NotificationsApi.prototype.getAvailabletopics = function getAvailabletopics(expand){
    var requestPath = '/api/v2/notifications/availabletopics';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = NotificationsApi;

},{}],16:[function(require,module,exports){
/*jshint -W069 */
/**
* @class OAuthApi
* @example
* var api = new purecloud.platform.OAuthApi(pureCloudSession);
*/
function OAuthApi(session) {
    if(!(this instanceof OAuthApi)) {
        return new OAuthApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('OAuthApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get OAuth Client
  * @memberOf OAuthApi
  * @instance
  * @param {string} clientId - Client ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "accessTokenValiditySeconds": 0,
   "description": "",
   "registeredRedirectUri": [],
   "secret": "",
   "roleIds": [],
   "authorizedGrantType": "",
   "selfUri": ""
}
  */
OAuthApi.prototype.getClientsClientId = function getClientsClientId(clientId){
    var requestPath = '/api/v2/oauth/clients/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update OAuth Client
  * @memberOf OAuthApi
  * @instance
  * @param {string} clientId - Client ID
  * @param {} body - Client
  * @example
  * Body Example:
  * {
   "name": "",
   "accessTokenValiditySeconds": 0,
   "description": "",
   "registeredRedirectUri": [],
   "secret": "",
   "roleIds": [],
   "authorizedGrantType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "accessTokenValiditySeconds": 0,
   "description": "",
   "registeredRedirectUri": [],
   "secret": "",
   "roleIds": [],
   "authorizedGrantType": "",
   "selfUri": ""
}
  */
OAuthApi.prototype.putClientsClientId = function putClientsClientId(clientId, body){
    var requestPath = '/api/v2/oauth/clients/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete OAuth Client
  * @memberOf OAuthApi
  * @instance
  * @param {string} clientId - Client ID
  */
OAuthApi.prototype.deleteClientsClientId = function deleteClientsClientId(clientId){
    var requestPath = '/api/v2/oauth/clients/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Regenerate Client Secret
  * @description This operation will set the client secret to a randomly generated cryptographically random value. All clients must be updated with the new secret. This operation should be used with caution.
  * @memberOf OAuthApi
  * @instance
  * @param {string} clientId - Client ID
  */
OAuthApi.prototype.postClientsClientIdSecret = function postClientsClientIdSecret(clientId){
    var requestPath = '/api/v2/oauth/clients/{clientId}/secret';
    var requestQuery = {};
    var requestBody;

    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary The list of OAuth clients
  * @memberOf OAuthApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OAuthApi.prototype.getClients = function getClients(){
    var requestPath = '/api/v2/oauth/clients';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create OAuth client
  * @description The OAuth Grant/Client is required in order to create an authentication token and gain access to PureCloud. 
The preferred authorizedGrantTypes is 'CODE' which requires applications to send a client ID and client secret. This is typically a web server. 
If the client is unable to secure the client secret then the 'TOKEN' grant type aka IMPLICIT should be used. This is would be for browser or mobile apps. 
If a client is to be used outside of the context of a user then the 'CLIENT-CREDENTIALS' grant may be used. In this case the client must be granted roles 
via the 'roleIds' field.
  * @memberOf OAuthApi
  * @instance
  * @param {} body - Client
  * @example
  * Body Example:
  * {
   "name": "",
   "accessTokenValiditySeconds": 0,
   "description": "",
   "registeredRedirectUri": [],
   "secret": "",
   "roleIds": [],
   "authorizedGrantType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "accessTokenValiditySeconds": 0,
   "description": "",
   "registeredRedirectUri": [],
   "secret": "",
   "roleIds": [],
   "authorizedGrantType": "",
   "selfUri": ""
}
  */
OAuthApi.prototype.postClients = function postClients(body){
    var requestPath = '/api/v2/oauth/clients';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = OAuthApi;

},{}],17:[function(require,module,exports){
/*jshint -W069 */
/**
* @class OrganizationApi
* @example
* var api = new purecloud.platform.OrganizationApi(pureCloudSession);
*/
function OrganizationApi(session) {
    if(!(this instanceof OrganizationApi)) {
        return new OrganizationApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('OrganizationApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Update organization
  * @memberOf OrganizationApi
  * @instance
  * @param {} body - Feature to update.
  * @example
  * Body Example:
  * {
   "value": true,
   "key": ""
}
  */
OrganizationApi.prototype.patchFeatures = function patchFeatures(body){
    var requestPath = '/api/v2/organizations/features';
    var requestQuery = {};
    var requestBody;

    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Fetch field config for an entity type
  * @memberOf OrganizationApi
  * @instance
  * @param {string} type - Field type
  person,
  group,
  org,
  externalContact,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "entityType": "",
   "state": "",
   "sections": [],
   "version": "",
   "schemaVersion": "",
   "selfUri": ""
}
  */
OrganizationApi.prototype.getFieldconfig = function getFieldconfig(type){
    var requestPath = '/api/v2/fieldconfig';
    var requestQuery = {};
    var requestBody;

    if(type === undefined || type === null){
      throw new Error('Missing required  parameter: type');
    }
    requestQuery["type"] = type;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get organization.
  * @memberOf OrganizationApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "thirdPartyOrgId": "",
   "thirdPartyOrgName": "",
   "thirdPartyURI": "",
   "domain": "",
   "version": 0,
   "state": "",
   "defaultSiteId": "",
   "deletable": true,
   "selfUri": "",
   "features": {}
}
  */
OrganizationApi.prototype.getMe = function getMe(){
    var requestPath = '/api/v2/organizations/me';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = OrganizationApi;

},{}],18:[function(require,module,exports){
/*jshint -W069 */
/**
* @class OutboundApi
* @example
* var api = new purecloud.platform.OutboundApi(pureCloudSession);
*/
function OutboundApi(session) {
    if(!(this instanceof OutboundApi)) {
        return new OutboundApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('OutboundApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Query a list of contact lists.
  * @memberOf OutboundApi
  * @instance
  * @param {boolean} includeImportStatus - Include import status
  * @param {boolean} includeSize - Include size
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getContactlists = function getContactlists(includeImportStatus, includeSize, pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/contactlists';
    var requestQuery = {};
    var requestBody;

    requestQuery["includeImportStatus"] = includeImportStatus;
    requestQuery["includeSize"] = includeSize;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a contact List.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - ContactList
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "columnNames": [],
   "phoneColumns": [],
   "previewModeColumnName": "",
   "previewModeAcceptedValues": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "columnNames": [],
   "phoneColumns": [],
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "previewModeColumnName": "",
   "previewModeAcceptedValues": [],
   "size": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.postContactlists = function postContactlists(body){
    var requestPath = '/api/v2/outbound/contactlists';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get progress for a list of campaigns
  * @memberOf OutboundApi
  * @instance
  * @param {} body - Campaign IDs
  * @example
  * 200 Response Example:
  * [
 {
  "campaign": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "contactList": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "numberOfContactsCalled": 0,
  "totalNumberOfContacts": 0,
  "percentage": 0
 }
]
  */
OutboundApi.prototype.postCampaignsProgress = function postCampaignsProgress(body){
    var requestPath = '/api/v2/outbound/campaigns/progress';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query callable time set list
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getCallabletimesets = function getCallabletimesets(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/callabletimesets';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create callable time set
  * @memberOf OutboundApi
  * @instance
  * @param {} body - DialerCallableTimeSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "callableTimes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "callableTimes": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.postCallabletimesets = function postCallabletimesets(body){
    var requestPath = '/api/v2/outbound/callabletimesets';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get dialer contactList import status.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  * @example
  * 200 Response Example:
  * {
   "state": "",
   "totalRecords": 0,
   "completedRecords": 0,
   "percentComplete": 0,
   "failureReason": ""
}
  */
OutboundApi.prototype.getContactlistsContactlistIdImportstatus = function getContactlistsContactlistIdImportstatus(contactListId){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/importstatus';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Retrieves audits for dialer.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - AuditSearch
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  * @param {boolean} facetsOnly - Facets only
  * @example
  * Body Example:
  * {
   "queryPhrase": "",
   "queryFields": [],
   "facets": [],
   "filters": []
}
  * @example
  * 200 Response Example:
  * {
   "pageNumber": 0,
   "pageSize": 0,
   "total": 0,
   "pageCount": 0,
   "facetInfo": [],
   "auditMessages": []
}
  */
OutboundApi.prototype.postAudits = function postAudits(body, pageSize, pageNumber, sortBy, sortOrder, facetsOnly){
    var requestPath = '/api/v2/outbound/audits';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["facetsOnly"] = facetsOnly;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query a list of dialer call analysis response sets.
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getCallanalysisresponsesets = function getCallanalysisresponsesets(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/callanalysisresponsesets';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a dialer call analysis response set.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - ResponseSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "responses": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "responses": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.postCallanalysisresponsesets = function postCallanalysisresponsesets(body){
    var requestPath = '/api/v2/outbound/callanalysisresponsesets';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query a list of dialer campaign sequences.
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getSequences = function getSequences(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/sequences';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new campaign sequence.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - Organization
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "campaigns": [],
   "status": "",
   "repeat": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaigns": [],
   "currentCampaign": 0,
   "status": "",
   "stopMessage": "",
   "repeat": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.postSequences = function postSequences(body){
    var requestPath = '/api/v2/outbound/sequences';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the URI of a contact list export.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  * @param {string} download - Redirect to download uri
  * @example
  * 200 Response Example:
  * {
   "uri": "",
   "exportTimestamp": ""
}
  */
OutboundApi.prototype.getContactlistsContactlistIdExport = function getContactlistsContactlistIdExport(contactListId, download){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/export';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    requestQuery["download"] = download;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Initiate the export of a contact list.
  * @description Returns 200 if received OK.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  */
OutboundApi.prototype.postContactlistsContactlistIdExport = function postContactlistsContactlistIdExport(contactListId){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/export';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get dialer campaign.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dialingMode": "",
   "script": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "campaignStatus": "",
   "phoneColumns": [],
   "abandonRate": {},
   "dncLists": [],
   "callableTimeSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callAnalysisResponseSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "errors": [],
   "callerName": "",
   "callerAddress": "",
   "outboundLineCount": 0,
   "ruleSets": [],
   "skipPreviewDisabled": true,
   "previewTimeOutSeconds": 0,
   "contactSort": {
      "fieldName": "",
      "direction": "",
      "numeric": true
   },
   "noAnswerTimeout": 0,
   "callAnalysisLanguage": "",
   "priority": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.getCampaignsCampaignId = function getCampaignsCampaignId(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a campaign.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @param {} body - Campaign
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dialingMode": "",
   "script": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "campaignStatus": "",
   "phoneColumns": [],
   "abandonRate": {},
   "dncLists": [],
   "callableTimeSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callAnalysisResponseSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callerName": "",
   "callerAddress": "",
   "outboundLineCount": 0,
   "ruleSets": [],
   "skipPreviewDisabled": true,
   "previewTimeOutSeconds": 0,
   "contactSort": {
      "fieldName": "",
      "direction": "",
      "numeric": true
   },
   "noAnswerTimeout": 0,
   "callAnalysisLanguage": "",
   "priority": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dialingMode": "",
   "script": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "campaignStatus": "",
   "phoneColumns": [],
   "abandonRate": {},
   "dncLists": [],
   "callableTimeSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callAnalysisResponseSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "errors": [],
   "callerName": "",
   "callerAddress": "",
   "outboundLineCount": 0,
   "ruleSets": [],
   "skipPreviewDisabled": true,
   "previewTimeOutSeconds": 0,
   "contactSort": {
      "fieldName": "",
      "direction": "",
      "numeric": true
   },
   "noAnswerTimeout": 0,
   "callAnalysisLanguage": "",
   "priority": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.putCampaignsCampaignId = function putCampaignsCampaignId(campaignId, body){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a campaign.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  */
OutboundApi.prototype.deleteCampaignsCampaignId = function deleteCampaignsCampaignId(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get campaign diagnostics
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "callableContacts": {
      "attemptLimits": {},
      "dncLists": [],
      "callableTimeSet": {},
      "ruleSets": []
   },
   "queueUtilizationDiagnostic": {
      "queue": {},
      "usersInQueue": 0,
      "activeUsersInQueue": 0,
      "usersOnQueue": 0,
      "usersNotUtilized": 0,
      "usersOnQueueWithStation": 0,
      "usersOnACampaignCall": 0,
      "usersOnDifferentEdgeGroup": 0,
      "usersOnANonCampaignCall": 0
   },
   "ruleSetDiagnostics": [],
   "outstandingInteractionsCount": 0
}
  */
OutboundApi.prototype.getCampaignsCampaignIdDiagnostics = function getCampaignsCampaignIdDiagnostics(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/diagnostics';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get campaign progress
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "campaign": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "numberOfContactsCalled": 0,
   "totalNumberOfContacts": 0,
   "percentage": 0
}
  */
OutboundApi.prototype.getCampaignsCampaignIdProgress = function getCampaignsCampaignIdProgress(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/progress';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Reset campaign progress and recycle the campaign
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  */
OutboundApi.prototype.deleteCampaignsCampaignIdProgress = function deleteCampaignsCampaignIdProgress(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/progress';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get attempt limits
  * @memberOf OutboundApi
  * @instance
  * @param {string} attemptLimitsId - Attempt limits ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "maxAttemptsPerContact": 0,
   "maxAttemptsPerNumber": 0,
   "timeZoneId": "",
   "resetPeriod": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.getAttemptlimitsAttemptlimitsId = function getAttemptlimitsAttemptlimitsId(attemptLimitsId){
    var requestPath = '/api/v2/outbound/attemptlimits/{attemptLimitsId}';
    var requestQuery = {};
    var requestBody;

    if(attemptLimitsId === undefined || attemptLimitsId === null){
      throw new Error('Missing required  parameter: attemptLimitsId');
    }
    requestPath = requestPath.replace('{attemptLimitsId}', attemptLimitsId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update attempt limits
  * @memberOf OutboundApi
  * @instance
  * @param {string} attemptLimitsId - Attempt limits ID
  * @param {} body - AttemptLimits
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "maxAttemptsPerContact": 0,
   "maxAttemptsPerNumber": 0,
   "timeZoneId": "",
   "resetPeriod": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "maxAttemptsPerContact": 0,
   "maxAttemptsPerNumber": 0,
   "timeZoneId": "",
   "resetPeriod": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.putAttemptlimitsAttemptlimitsId = function putAttemptlimitsAttemptlimitsId(attemptLimitsId, body){
    var requestPath = '/api/v2/outbound/attemptlimits/{attemptLimitsId}';
    var requestQuery = {};
    var requestBody;

    if(attemptLimitsId === undefined || attemptLimitsId === null){
      throw new Error('Missing required  parameter: attemptLimitsId');
    }
    requestPath = requestPath.replace('{attemptLimitsId}', attemptLimitsId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete attempt limits
  * @memberOf OutboundApi
  * @instance
  * @param {string} attemptLimitsId - Attempt limits ID
  */
OutboundApi.prototype.deleteAttemptlimitsAttemptlimitsId = function deleteAttemptlimitsAttemptlimitsId(attemptLimitsId){
    var requestPath = '/api/v2/outbound/attemptlimits/{attemptLimitsId}';
    var requestQuery = {};
    var requestBody;

    if(attemptLimitsId === undefined || attemptLimitsId === null){
      throw new Error('Missing required  parameter: attemptLimitsId');
    }
    requestPath = requestPath.replace('{attemptLimitsId}', attemptLimitsId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a dialer call analysis response set.
  * @memberOf OutboundApi
  * @instance
  * @param {string} callAnalysisSetId - Call Analysis Response Set ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "responses": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.getCallanalysisresponsesetsCallanalysissetId = function getCallanalysisresponsesetsCallanalysissetId(callAnalysisSetId){
    var requestPath = '/api/v2/outbound/callanalysisresponsesets/{callAnalysisSetId}';
    var requestQuery = {};
    var requestBody;

    if(callAnalysisSetId === undefined || callAnalysisSetId === null){
      throw new Error('Missing required  parameter: callAnalysisSetId');
    }
    requestPath = requestPath.replace('{callAnalysisSetId}', callAnalysisSetId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a dialer call analysis response set.
  * @memberOf OutboundApi
  * @instance
  * @param {string} callAnalysisSetId - Call Analysis Response Set ID
  * @param {} body - ResponseSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "responses": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "responses": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.putCallanalysisresponsesetsCallanalysissetId = function putCallanalysisresponsesetsCallanalysissetId(callAnalysisSetId, body){
    var requestPath = '/api/v2/outbound/callanalysisresponsesets/{callAnalysisSetId}';
    var requestQuery = {};
    var requestBody;

    if(callAnalysisSetId === undefined || callAnalysisSetId === null){
      throw new Error('Missing required  parameter: callAnalysisSetId');
    }
    requestPath = requestPath.replace('{callAnalysisSetId}', callAnalysisSetId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a dialer call analysis response set.
  * @memberOf OutboundApi
  * @instance
  * @param {string} callAnalysisSetId - Call Analysis Response Set ID
  */
OutboundApi.prototype.deleteCallanalysisresponsesetsCallanalysissetId = function deleteCallanalysisresponsesetsCallanalysissetId(callAnalysisSetId){
    var requestPath = '/api/v2/outbound/callanalysisresponsesets/{callAnalysisSetId}';
    var requestQuery = {};
    var requestBody;

    if(callAnalysisSetId === undefined || callAnalysisSetId === null){
      throw new Error('Missing required  parameter: callAnalysisSetId');
    }
    requestPath = requestPath.replace('{callAnalysisSetId}', callAnalysisSetId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a contact.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - Contact List ID
  * @param {string} contactId - Contact ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "contactListId": "",
   "data": {},
   "callRecords": {},
   "callable": true,
   "phoneNumberStatus": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.getContactlistsContactlistIdContactsContactId = function getContactlistsContactlistIdContactsContactId(contactListId, contactId){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/contacts/{contactId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    if(contactId === undefined || contactId === null){
      throw new Error('Missing required  parameter: contactId');
    }
    requestPath = requestPath.replace('{contactId}', contactId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a contact.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - Contact List ID
  * @param {string} contactId - Contact ID
  * @param {} body - Contact
  * @example
  * Body Example:
  * {
   "name": "",
   "contactListId": "",
   "data": {},
   "callable": true,
   "phoneNumberStatus": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "contactListId": "",
   "data": {},
   "callRecords": {},
   "callable": true,
   "phoneNumberStatus": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.putContactlistsContactlistIdContactsContactId = function putContactlistsContactlistIdContactsContactId(contactListId, contactId, body){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/contacts/{contactId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    if(contactId === undefined || contactId === null){
      throw new Error('Missing required  parameter: contactId');
    }
    requestPath = requestPath.replace('{contactId}', contactId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a contact.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - Contact List ID
  * @param {string} contactId - Contact ID
  */
OutboundApi.prototype.deleteContactlistsContactlistIdContactsContactId = function deleteContactlistsContactlistIdContactsContactId(contactListId, contactId){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/contacts/{contactId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    if(contactId === undefined || contactId === null){
      throw new Error('Missing required  parameter: contactId');
    }
    requestPath = requestPath.replace('{contactId}', contactId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query a list of Rule Sets.
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getRulesets = function getRulesets(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/rulesets';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Dialer Call Analysis Response Set.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - RuleSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "rules": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "rules": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.postRulesets = function postRulesets(body){
    var requestPath = '/api/v2/outbound/rulesets';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query dialer DNC lists
  * @memberOf OutboundApi
  * @instance
  * @param {boolean} includeImportStatus - Import status
  * @param {boolean} includeSize - Include size
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getDnclists = function getDnclists(includeImportStatus, includeSize, pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/dnclists';
    var requestQuery = {};
    var requestBody;

    requestQuery["includeImportStatus"] = includeImportStatus;
    requestQuery["includeSize"] = includeSize;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create dialer DNC list
  * @memberOf OutboundApi
  * @instance
  * @param {} body - DncList
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "size": 0,
   "dncSourceType": "",
   "loginId": "",
   "dncCodes": [],
   "licenseId": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.postDnclists = function postDnclists(body){
    var requestPath = '/api/v2/outbound/dnclists';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query Campaign Rule list
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getCampaignrules = function getCampaignrules(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/campaignrules';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create Campaign Rule
  * @memberOf OutboundApi
  * @instance
  * @param {} body - CampaignRule
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "campaignRuleEntities": {
      "campaigns": [],
      "sequences": []
   },
   "campaignRuleConditions": [],
   "campaignRuleActions": [],
   "matchAnyConditions": true,
   "enabled": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaignRuleEntities": {
      "campaigns": [],
      "sequences": []
   },
   "campaignRuleConditions": [],
   "campaignRuleActions": [],
   "matchAnyConditions": true,
   "enabled": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.postCampaignrules = function postCampaignrules(body){
    var requestPath = '/api/v2/outbound/campaignrules';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a dialer sequence schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Sequence ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "sequence": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
OutboundApi.prototype.getSchedulesSequencesSequenceId = function getSchedulesSequencesSequenceId(sequenceId){
    var requestPath = '/api/v2/outbound/schedules/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a new sequence schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Sequence ID
  * @param {} body - SequenceSchedule
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "sequence": {
      "id": "",
      "name": "",
      "selfUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "sequence": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
OutboundApi.prototype.putSchedulesSequencesSequenceId = function putSchedulesSequencesSequenceId(sequenceId, body){
    var requestPath = '/api/v2/outbound/schedules/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a dialer sequence schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Sequence ID
  */
OutboundApi.prototype.deleteSchedulesSequencesSequenceId = function deleteSchedulesSequencesSequenceId(sequenceId){
    var requestPath = '/api/v2/outbound/schedules/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Send notification that an agent's state changed 
  * @description New agent state.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @param {string} userId - Agent's user ID
  * @param {} body - agent
  * @example
  * Body Example:
  * {
   "stage": ""
}
  */
OutboundApi.prototype.putCampaignsCampaignIdAgentsUserId = function putCampaignsCampaignIdAgentsUserId(campaignId, userId, body){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/agents/{userId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a dialer campaign sequence.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Campaign Sequence ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaigns": [],
   "currentCampaign": 0,
   "status": "",
   "stopMessage": "",
   "repeat": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.getSequencesSequenceId = function getSequencesSequenceId(sequenceId){
    var requestPath = '/api/v2/outbound/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a new campaign sequence.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Campaign Sequence ID
  * @param {} body - Organization
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "campaigns": [],
   "status": "",
   "repeat": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaigns": [],
   "currentCampaign": 0,
   "status": "",
   "stopMessage": "",
   "repeat": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.putSequencesSequenceId = function putSequencesSequenceId(sequenceId, body){
    var requestPath = '/api/v2/outbound/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a dialer campaign sequence.
  * @memberOf OutboundApi
  * @instance
  * @param {string} sequenceId - Campaign Sequence ID
  */
OutboundApi.prototype.deleteSequencesSequenceId = function deleteSequencesSequenceId(sequenceId){
    var requestPath = '/api/v2/outbound/sequences/{sequenceId}';
    var requestQuery = {};
    var requestBody;

    if(sequenceId === undefined || sequenceId === null){
      throw new Error('Missing required  parameter: sequenceId');
    }
    requestPath = requestPath.replace('{sequenceId}', sequenceId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get dialer campaign interactions.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "campaign": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "pendingInteractions": [],
   "proceedingInteractions": [],
   "previewingInteractions": [],
   "interactingInteractions": [],
   "scheduledInteractions": []
}
  */
OutboundApi.prototype.getCampaignsCampaignIdInteractions = function getCampaignsCampaignIdInteractions(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/interactions';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add phone numbers to a Dialer DNC list.
  * @description Only Internal DNC lists may be appended to
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  * @param {} body - DNC Phone Numbers
  */
OutboundApi.prototype.postDnclistsDnclistIdPhonenumbers = function postDnclistsDnclistIdPhonenumbers(dncListId, body){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}/phonenumbers';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the URI of a DNC list export.
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  * @param {string} download - Redirect to download uri
  * @example
  * 200 Response Example:
  * {
   "uri": "",
   "exportTimestamp": ""
}
  */
OutboundApi.prototype.getDnclistsDnclistIdExport = function getDnclistsDnclistIdExport(dncListId, download){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}/export';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    requestQuery["download"] = download;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Initiate the export of a dnc list.
  * @description Returns 200 if received OK.
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  */
OutboundApi.prototype.postDnclistsDnclistIdExport = function postDnclistsDnclistIdExport(dncListId){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}/export';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get dialer DNC list
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  * @param {boolean} includeImportStatus - Import status
  * @param {boolean} includeSize - Include size
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "size": 0,
   "dncSourceType": "",
   "loginId": "",
   "dncCodes": [],
   "licenseId": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.getDnclistsDnclistId = function getDnclistsDnclistId(dncListId, includeImportStatus, includeSize){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    requestQuery["includeImportStatus"] = includeImportStatus;
    requestQuery["includeSize"] = includeSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update dialer DNC list
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  * @param {} body - DncList
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "size": 0,
   "dncSourceType": "",
   "loginId": "",
   "dncCodes": [],
   "licenseId": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.putDnclistsDnclistId = function putDnclistsDnclistId(dncListId, body){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete dialer DNC list
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  */
OutboundApi.prototype.deleteDnclistsDnclistId = function deleteDnclistsDnclistId(dncListId){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add contacts to a contact list.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - Contact List ID
  * @param {} body - Contact
  * @param {boolean} priority - Contact priority.  True means the contact(s) will go to the beginning of the list, false means at the end.
  * @param {boolean} clearSystemData - Clear system data.  True means the system data stored on the contact will be cleared if the contact already exists (attempts, callable status, etc), false means it won't.
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "contactListId": "",
  "data": {},
  "callable": true,
  "phoneNumberStatus": {}
 }
]
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "contactListId": "",
  "data": {},
  "callRecords": {},
  "callable": true,
  "phoneNumberStatus": {},
  "selfUri": ""
 }
]
  */
OutboundApi.prototype.postContactlistsContactlistIdContacts = function postContactlistsContactlistIdContacts(contactListId, body, priority, clearSystemData){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}/contacts';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["priority"] = priority;
    requestQuery["clearSystemData"] = clearSystemData;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Campaign Rule
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignRuleId - Campaign Rule ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaignRuleEntities": {
      "campaigns": [],
      "sequences": []
   },
   "campaignRuleConditions": [],
   "campaignRuleActions": [],
   "matchAnyConditions": true,
   "enabled": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.getCampaignrulesCampaignruleId = function getCampaignrulesCampaignruleId(campaignRuleId){
    var requestPath = '/api/v2/outbound/campaignrules/{campaignRuleId}';
    var requestQuery = {};
    var requestBody;

    if(campaignRuleId === undefined || campaignRuleId === null){
      throw new Error('Missing required  parameter: campaignRuleId');
    }
    requestPath = requestPath.replace('{campaignRuleId}', campaignRuleId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update Campaign Rule
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignRuleId - Campaign Rule ID
  * @param {} body - CampaignRule
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "campaignRuleEntities": {
      "campaigns": [],
      "sequences": []
   },
   "campaignRuleConditions": [],
   "campaignRuleActions": [],
   "matchAnyConditions": true,
   "enabled": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "campaignRuleEntities": {
      "campaigns": [],
      "sequences": []
   },
   "campaignRuleConditions": [],
   "campaignRuleActions": [],
   "matchAnyConditions": true,
   "enabled": true,
   "selfUri": ""
}
  */
OutboundApi.prototype.putCampaignrulesCampaignruleId = function putCampaignrulesCampaignruleId(campaignRuleId, body){
    var requestPath = '/api/v2/outbound/campaignrules/{campaignRuleId}';
    var requestQuery = {};
    var requestBody;

    if(campaignRuleId === undefined || campaignRuleId === null){
      throw new Error('Missing required  parameter: campaignRuleId');
    }
    requestPath = requestPath.replace('{campaignRuleId}', campaignRuleId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Campaign Rule
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignRuleId - Campaign Rule ID
  */
OutboundApi.prototype.deleteCampaignrulesCampaignruleId = function deleteCampaignrulesCampaignruleId(campaignRuleId){
    var requestPath = '/api/v2/outbound/campaignrules/{campaignRuleId}';
    var requestQuery = {};
    var requestBody;

    if(campaignRuleId === undefined || campaignRuleId === null){
      throw new Error('Missing required  parameter: campaignRuleId');
    }
    requestPath = requestPath.replace('{campaignRuleId}', campaignRuleId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the Dialer wrap up code mapping.
  * @memberOf OutboundApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "defaultSet": [],
   "mapping": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.getWrapupcodemappings = function getWrapupcodemappings(){
    var requestPath = '/api/v2/outbound/wrapupcodemappings';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the Dialer wrap up code mapping.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - wrapUpCodeMapping
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "defaultSet": [],
   "mapping": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "defaultSet": [],
   "mapping": {},
   "selfUri": ""
}
  */
OutboundApi.prototype.putWrapupcodemappings = function putWrapupcodemappings(body){
    var requestPath = '/api/v2/outbound/wrapupcodemappings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a dialer campaign schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "campaign": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
OutboundApi.prototype.getSchedulesCampaignsCampaignId = function getSchedulesCampaignsCampaignId(campaignId){
    var requestPath = '/api/v2/outbound/schedules/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a new campaign schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @param {} body - CampaignSchedule
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "campaign": {
      "id": "",
      "name": "",
      "selfUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "intervals": [],
   "timeZone": "",
   "campaign": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
OutboundApi.prototype.putSchedulesCampaignsCampaignId = function putSchedulesCampaignsCampaignId(campaignId, body){
    var requestPath = '/api/v2/outbound/schedules/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a dialer campaign schedule.
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  */
OutboundApi.prototype.deleteSchedulesCampaignsCampaignId = function deleteSchedulesCampaignsCampaignId(campaignId){
    var requestPath = '/api/v2/outbound/schedules/campaigns/{campaignId}';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a dialer contact list.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  * @param {boolean} includeImportStatus - Import status
  * @param {boolean} includeSize - Include size
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "columnNames": [],
   "phoneColumns": [],
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "previewModeColumnName": "",
   "previewModeAcceptedValues": [],
   "size": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.getContactlistsContactlistId = function getContactlistsContactlistId(contactListId, includeImportStatus, includeSize){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    requestQuery["includeImportStatus"] = includeImportStatus;
    requestQuery["includeSize"] = includeSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a contact list.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  * @param {} body - ContactList
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "columnNames": [],
   "phoneColumns": [],
   "previewModeColumnName": "",
   "previewModeAcceptedValues": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "columnNames": [],
   "phoneColumns": [],
   "importStatus": {
      "state": "",
      "totalRecords": 0,
      "completedRecords": 0,
      "percentComplete": 0,
      "failureReason": ""
   },
   "previewModeColumnName": "",
   "previewModeAcceptedValues": [],
   "size": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.putContactlistsContactlistId = function putContactlistsContactlistId(contactListId, body){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a contact list.
  * @memberOf OutboundApi
  * @instance
  * @param {string} contactListId - ContactList ID
  */
OutboundApi.prototype.deleteContactlistsContactlistId = function deleteContactlistsContactlistId(contactListId){
    var requestPath = '/api/v2/outbound/contactlists/{contactListId}';
    var requestQuery = {};
    var requestBody;

    if(contactListId === undefined || contactListId === null){
      throw new Error('Missing required  parameter: contactListId');
    }
    requestPath = requestPath.replace('{contactListId}', contactListId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get dialer dncList import status.
  * @memberOf OutboundApi
  * @instance
  * @param {string} dncListId - DncList ID
  * @example
  * 200 Response Example:
  * {
   "state": "",
   "totalRecords": 0,
   "completedRecords": 0,
   "percentComplete": 0,
   "failureReason": ""
}
  */
OutboundApi.prototype.getDnclistsDnclistIdImportstatus = function getDnclistsDnclistIdImportstatus(dncListId){
    var requestPath = '/api/v2/outbound/dnclists/{dncListId}/importstatus';
    var requestQuery = {};
    var requestBody;

    if(dncListId === undefined || dncListId === null){
      throw new Error('Missing required  parameter: dncListId');
    }
    requestPath = requestPath.replace('{dncListId}', dncListId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query attempt limits list
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getAttemptlimits = function getAttemptlimits(pageSize, pageNumber, filterType, name, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/attemptlimits';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create attempt limits
  * @memberOf OutboundApi
  * @instance
  * @param {} body - AttemptLimits
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "maxAttemptsPerContact": 0,
   "maxAttemptsPerNumber": 0,
   "timeZoneId": "",
   "resetPeriod": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "maxAttemptsPerContact": 0,
   "maxAttemptsPerNumber": 0,
   "timeZoneId": "",
   "resetPeriod": "",
   "selfUri": ""
}
  */
OutboundApi.prototype.postAttemptlimits = function postAttemptlimits(body){
    var requestPath = '/api/v2/outbound/attemptlimits';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for a list of dialer sequence schedules.
  * @memberOf OutboundApi
  * @instance
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "version": 0,
  "intervals": [],
  "timeZone": "",
  "sequence": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "selfUri": ""
 }
]
  */
OutboundApi.prototype.getSchedulesSequences = function getSchedulesSequences(){
    var requestPath = '/api/v2/outbound/schedules/sequences';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add phone numbers to a Dialer DNC list.
  * @memberOf OutboundApi
  * @instance
  * @param {string} conversationId - Conversation ID
  */
OutboundApi.prototype.postConversationsConversationIdDnc = function postConversationsConversationIdDnc(conversationId){
    var requestPath = '/api/v2/outbound/conversations/{conversationId}/dnc';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query a list of dialer campaigns.
  * @memberOf OutboundApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} filterType - Filter type
  Equals,
  RegEx,
  Contains,
  Prefix,
  LessThan,
  LessThanEqualTo,
  GreaterThan,
  GreaterThanEqualTo,
  BeginsWith,
  EndsWith,
  * @param {string} name - Name
  * @param {string} contactListId - Contact List ID
  * @param {string} dncListId - DNC list ID
  * @param {string} distributionQueueId - Distribution queue ID
  * @param {string} edgeGroupId - Edge group ID
  * @param {string} callAnalysisResponseSetId - Call analysis response set ID
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
OutboundApi.prototype.getCampaigns = function getCampaigns(pageSize, pageNumber, filterType, name, contactListId, dncListId, distributionQueueId, edgeGroupId, callAnalysisResponseSetId, sortBy, sortOrder){
    var requestPath = '/api/v2/outbound/campaigns';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["filterType"] = filterType;
    requestQuery["name"] = name;
    requestQuery["contactListId"] = contactListId;
    requestQuery["dncListId"] = dncListId;
    requestQuery["distributionQueueId"] = distributionQueueId;
    requestQuery["edgeGroupId"] = edgeGroupId;
    requestQuery["callAnalysisResponseSetId"] = callAnalysisResponseSetId;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a campaign.
  * @memberOf OutboundApi
  * @instance
  * @param {} body - Campaign
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dialingMode": "",
   "script": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "campaignStatus": "",
   "phoneColumns": [],
   "abandonRate": {},
   "dncLists": [],
   "callableTimeSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callAnalysisResponseSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callerName": "",
   "callerAddress": "",
   "outboundLineCount": 0,
   "ruleSets": [],
   "skipPreviewDisabled": true,
   "previewTimeOutSeconds": 0,
   "contactSort": {
      "fieldName": "",
      "direction": "",
      "numeric": true
   },
   "noAnswerTimeout": 0,
   "callAnalysisLanguage": "",
   "priority": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dialingMode": "",
   "script": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "campaignStatus": "",
   "phoneColumns": [],
   "abandonRate": {},
   "dncLists": [],
   "callableTimeSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callAnalysisResponseSet": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "errors": [],
   "callerName": "",
   "callerAddress": "",
   "outboundLineCount": 0,
   "ruleSets": [],
   "skipPreviewDisabled": true,
   "previewTimeOutSeconds": 0,
   "contactSort": {
      "fieldName": "",
      "direction": "",
      "numeric": true
   },
   "noAnswerTimeout": 0,
   "callAnalysisLanguage": "",
   "priority": 0,
   "selfUri": ""
}
  */
OutboundApi.prototype.postCampaigns = function postCampaigns(body){
    var requestPath = '/api/v2/outbound/campaigns';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Rule Set by ID.
  * @memberOf OutboundApi
  * @instance
  * @param {string} ruleSetId - Rule Set ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "rules": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.getRulesetsRulesetId = function getRulesetsRulesetId(ruleSetId){
    var requestPath = '/api/v2/outbound/rulesets/{ruleSetId}';
    var requestQuery = {};
    var requestBody;

    if(ruleSetId === undefined || ruleSetId === null){
      throw new Error('Missing required  parameter: ruleSetId');
    }
    requestPath = requestPath.replace('{ruleSetId}', ruleSetId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a RuleSet.
  * @memberOf OutboundApi
  * @instance
  * @param {string} ruleSetId - Rule Set ID
  * @param {} body - RuleSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "rules": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "contactList": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "rules": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.putRulesetsRulesetId = function putRulesetsRulesetId(ruleSetId, body){
    var requestPath = '/api/v2/outbound/rulesets/{ruleSetId}';
    var requestQuery = {};
    var requestBody;

    if(ruleSetId === undefined || ruleSetId === null){
      throw new Error('Missing required  parameter: ruleSetId');
    }
    requestPath = requestPath.replace('{ruleSetId}', ruleSetId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Rule set.
  * @memberOf OutboundApi
  * @instance
  * @param {string} ruleSetId - Rule Set ID
  */
OutboundApi.prototype.deleteRulesetsRulesetId = function deleteRulesetsRulesetId(ruleSetId){
    var requestPath = '/api/v2/outbound/rulesets/{ruleSetId}';
    var requestQuery = {};
    var requestBody;

    if(ruleSetId === undefined || ruleSetId === null){
      throw new Error('Missing required  parameter: ruleSetId');
    }
    requestPath = requestPath.replace('{ruleSetId}', ruleSetId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get callable time set
  * @memberOf OutboundApi
  * @instance
  * @param {string} callableTimeSetId - Callable Time Set ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "callableTimes": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.getCallabletimesetsCallabletimesetId = function getCallabletimesetsCallabletimesetId(callableTimeSetId){
    var requestPath = '/api/v2/outbound/callabletimesets/{callableTimeSetId}';
    var requestQuery = {};
    var requestBody;

    if(callableTimeSetId === undefined || callableTimeSetId === null){
      throw new Error('Missing required  parameter: callableTimeSetId');
    }
    requestPath = requestPath.replace('{callableTimeSetId}', callableTimeSetId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update callable time set
  * @memberOf OutboundApi
  * @instance
  * @param {string} callableTimeSetId - Callable Time Set ID
  * @param {} body - DialerCallableTimeSet
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "callableTimes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "callableTimes": [],
   "selfUri": ""
}
  */
OutboundApi.prototype.putCallabletimesetsCallabletimesetId = function putCallabletimesetsCallabletimesetId(callableTimeSetId, body){
    var requestPath = '/api/v2/outbound/callabletimesets/{callableTimeSetId}';
    var requestQuery = {};
    var requestBody;

    if(callableTimeSetId === undefined || callableTimeSetId === null){
      throw new Error('Missing required  parameter: callableTimeSetId');
    }
    requestPath = requestPath.replace('{callableTimeSetId}', callableTimeSetId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete callable time set
  * @memberOf OutboundApi
  * @instance
  * @param {string} callableTimeSetId - Callable Time Set ID
  */
OutboundApi.prototype.deleteCallabletimesetsCallabletimesetId = function deleteCallabletimesetsCallabletimesetId(callableTimeSetId){
    var requestPath = '/api/v2/outbound/callabletimesets/{callableTimeSetId}';
    var requestQuery = {};
    var requestBody;

    if(callableTimeSetId === undefined || callableTimeSetId === null){
      throw new Error('Missing required  parameter: callableTimeSetId');
    }
    requestPath = requestPath.replace('{callableTimeSetId}', callableTimeSetId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get statistics about a Dialer Campaign
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @example
  * 200 Response Example:
  * {
   "contactRate": {
      "attempts": 0,
      "connects": 0,
      "connectRatio": {}
   },
   "idleAgents": 0,
   "adjustedCallsPerAgent": {},
   "outstandingCalls": 0
}
  */
OutboundApi.prototype.getCampaignsCampaignIdStats = function getCampaignsCampaignIdStats(campaignId){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/stats';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for a list of dialer campaign schedules.
  * @memberOf OutboundApi
  * @instance
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "version": 0,
  "intervals": [],
  "timeZone": "",
  "campaign": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "selfUri": ""
 }
]
  */
OutboundApi.prototype.getSchedulesCampaigns = function getSchedulesCampaigns(){
    var requestPath = '/api/v2/outbound/schedules/campaigns';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Schedule a Callback for a Dialer Campaign (Deprecated)
  * @description This endpoint is deprecated and may have unexpected results. Please use "/conversations/{conversationId}/participants/{participantId}/callbacks instead."
  * @memberOf OutboundApi
  * @instance
  * @param {string} campaignId - Campaign ID
  * @param {} body - ContactCallbackRequest
  * @example
  * Body Example:
  * {
   "campaignId": "",
   "contactListId": "",
   "contactId": "",
   "phoneColumn": "",
   "schedule": ""
}
  * @example
  * 200 Response Example:
  * {
   "campaignId": "",
   "contactListId": "",
   "contactId": "",
   "phoneColumn": "",
   "schedule": ""
}
  */
OutboundApi.prototype.postCampaignsCampaignIdCallbackSchedule = function postCampaignsCampaignIdCallbackSchedule(campaignId, body){
    var requestPath = '/api/v2/outbound/campaigns/{campaignId}/callback/schedule';
    var requestQuery = {};
    var requestBody;

    if(campaignId === undefined || campaignId === null){
      throw new Error('Missing required  parameter: campaignId');
    }
    requestPath = requestPath.replace('{campaignId}', campaignId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = OutboundApi;

},{}],19:[function(require,module,exports){
/*jshint -W069 */
/**
* @class PresenceApi
* @example
* var api = new purecloud.platform.PresenceApi(pureCloudSession);
*/
function PresenceApi(session) {
    if(!(this instanceof PresenceApi)) {
        return new PresenceApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('PresenceApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a Presence Definition
  * @memberOf PresenceApi
  * @instance
  * @param {string} presenceId - Organization Presence ID
  * @param {string} localeCode - The locale code to fetch for the presence definition. Use ALL to fetch everything.
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "languageLabels": {},
   "systemPresence": "",
   "deactivated": true,
   "primary": true,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "createdDate": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "modifiedDate": "",
   "selfUri": ""
}
  */
PresenceApi.prototype.getPresenceId = function getPresenceId(presenceId, localeCode){
    var requestPath = '/api/v2/presencedefinitions/{presenceId}';
    var requestQuery = {};
    var requestBody;

    if(presenceId === undefined || presenceId === null){
      throw new Error('Missing required  parameter: presenceId');
    }
    requestPath = requestPath.replace('{presenceId}', presenceId);
    requestQuery["localeCode"] = localeCode;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a Presence Definition
  * @memberOf PresenceApi
  * @instance
  * @param {string} presenceId - Organization Presence ID
  * @param {} body - The OrganizationPresence to update
  * @example
  * Body Example:
  * {
   "name": "",
   "languageLabels": {},
   "systemPresence": "",
   "deactivated": true,
   "primary": true,
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "createdDate": "",
   "modifiedBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "modifiedDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "languageLabels": {},
   "systemPresence": "",
   "deactivated": true,
   "primary": true,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "createdDate": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "modifiedDate": "",
   "selfUri": ""
}
  */
PresenceApi.prototype.putPresenceId = function putPresenceId(presenceId, body){
    var requestPath = '/api/v2/presencedefinitions/{presenceId}';
    var requestQuery = {};
    var requestBody;

    if(presenceId === undefined || presenceId === null){
      throw new Error('Missing required  parameter: presenceId');
    }
    requestPath = requestPath.replace('{presenceId}', presenceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Presence Definition
  * @memberOf PresenceApi
  * @instance
  * @param {string} presenceId - Organization Presence ID
  */
PresenceApi.prototype.deletePresenceId = function deletePresenceId(presenceId){
    var requestPath = '/api/v2/presencedefinitions/{presenceId}';
    var requestQuery = {};
    var requestBody;

    if(presenceId === undefined || presenceId === null){
      throw new Error('Missing required  parameter: presenceId');
    }
    requestPath = requestPath.replace('{presenceId}', presenceId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user's Presence
  * @memberOf PresenceApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} sourceId - Source
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "source": "",
   "primary": true,
   "presenceDefinition": {
      "id": "",
      "name": "",
      "languageLabels": {},
      "systemPresence": "",
      "deactivated": true,
      "primary": true,
      "createdBy": {},
      "createdDate": "",
      "modifiedBy": {},
      "modifiedDate": "",
      "selfUri": ""
   },
   "message": "",
   "modifiedDate": "",
   "selfUri": ""
}
  */
PresenceApi.prototype.getUserIdPresencesSourceId = function getUserIdPresencesSourceId(userId, sourceId){
    var requestPath = '/api/v2/users/{userId}/presences/{sourceId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(sourceId === undefined || sourceId === null){
      throw new Error('Missing required  parameter: sourceId');
    }
    requestPath = requestPath.replace('{sourceId}', sourceId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a user's Presence
  * @description The presence object can be patched one of three ways. Option 1: Set the 'primary' property to true. This will set the 'source' defined in the path as the user's primary presence source. Option 2: Provide the presenceDefinition value. The 'id' is the only value required within the presenceDefinition. Option 3: Provide the message value. Option 1 can be combined with Option 2 and/or Option 3.
  * @memberOf PresenceApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} sourceId - Source
  * @param {} body - User presence
  * @example
  * Body Example:
  * {
   "name": "",
   "source": "",
   "primary": true,
   "presenceDefinition": {
      "name": "",
      "languageLabels": {},
      "systemPresence": "",
      "deactivated": true,
      "primary": true,
      "createdBy": {},
      "createdDate": "",
      "modifiedBy": {},
      "modifiedDate": ""
   },
   "message": "",
   "modifiedDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "source": "",
   "primary": true,
   "presenceDefinition": {
      "id": "",
      "name": "",
      "languageLabels": {},
      "systemPresence": "",
      "deactivated": true,
      "primary": true,
      "createdBy": {},
      "createdDate": "",
      "modifiedBy": {},
      "modifiedDate": "",
      "selfUri": ""
   },
   "message": "",
   "modifiedDate": "",
   "selfUri": ""
}
  */
PresenceApi.prototype.patchUserIdPresencesSourceId = function patchUserIdPresencesSourceId(userId, sourceId, body){
    var requestPath = '/api/v2/users/{userId}/presences/{sourceId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(sourceId === undefined || sourceId === null){
      throw new Error('Missing required  parameter: sourceId');
    }
    requestPath = requestPath.replace('{sourceId}', sourceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an Organization's list of Presence Definitions
  * @memberOf PresenceApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} doDeleted - Deleted query can be TRUE, FALSE or ALL
  * @param {string} localeCode - The locale code to fetch for each presence definition. Use ALL to fetch everything.
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
PresenceApi.prototype.getPresencedefinitions = function getPresencedefinitions(pageNumber, pageSize, doDeleted, localeCode){
    var requestPath = '/api/v2/presencedefinitions';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["deleted"] = doDeleted;
    requestQuery["localeCode"] = localeCode;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Presence Definition
  * @memberOf PresenceApi
  * @instance
  * @param {} body - The Presence Definition to create
  * @example
  * Body Example:
  * {
   "name": "",
   "languageLabels": {},
   "systemPresence": "",
   "deactivated": true,
   "primary": true,
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "createdDate": "",
   "modifiedBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "modifiedDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "languageLabels": {},
   "systemPresence": "",
   "deactivated": true,
   "primary": true,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "createdDate": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "modifiedDate": "",
   "selfUri": ""
}
  */
PresenceApi.prototype.postPresencedefinitions = function postPresencedefinitions(body){
    var requestPath = '/api/v2/presencedefinitions';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of SystemPresences
  * @memberOf PresenceApi
  * @instance
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "selfUri": ""
 }
]
  */
PresenceApi.prototype.getSystempresences = function getSystempresences(){
    var requestPath = '/api/v2/systempresences';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = PresenceApi;

},{}],20:[function(require,module,exports){
/*jshint -W069 */
/**
* @class QualityApi
* @example
* var api = new purecloud.platform.QualityApi(pureCloudSession);
*/
function QualityApi(session) {
    if(!(this instanceof QualityApi)) {
        return new QualityApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('QualityApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get an evaluation form
  * @memberOf QualityApi
  * @instance
  * @param {string} formId - Form ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "selfUri": ""
}
  */
QualityApi.prototype.getFormsFormId = function getFormsFormId(formId){
    var requestPath = '/api/v2/quality/forms/{formId}';
    var requestQuery = {};
    var requestBody;

    if(formId === undefined || formId === null){
      throw new Error('Missing required  parameter: formId');
    }
    requestPath = requestPath.replace('{formId}', formId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an evaluation form.
  * @memberOf QualityApi
  * @instance
  * @param {string} formId - Form ID
  * @param {} body - Evaluation form
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "selfUri": ""
}
  */
QualityApi.prototype.putFormsFormId = function putFormsFormId(formId, body){
    var requestPath = '/api/v2/quality/forms/{formId}';
    var requestQuery = {};
    var requestBody;

    if(formId === undefined || formId === null){
      throw new Error('Missing required  parameter: formId');
    }
    requestPath = requestPath.replace('{formId}', formId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an evaluation form.
  * @memberOf QualityApi
  * @instance
  * @param {string} formId - Form ID
  */
QualityApi.prototype.deleteFormsFormId = function deleteFormsFormId(formId){
    var requestPath = '/api/v2/quality/forms/{formId}';
    var requestQuery = {};
    var requestBody;

    if(formId === undefined || formId === null){
      throw new Error('Missing required  parameter: formId');
    }
    requestPath = requestPath.replace('{formId}', formId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Retrieve the spotability statistic
  * @memberOf QualityApi
  * @instance
  * @param {} body - Keyword Set
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "queue": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": [],
   "selfUri": ""
}
  */
QualityApi.prototype.postSpotability = function postSpotability(body){
    var requestPath = '/api/v2/quality/spotability';
    var requestQuery = {};
    var requestBody;

    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a keywordSet by id.
  * @memberOf QualityApi
  * @instance
  * @param {string} keywordSetId - KeywordSet ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": [],
   "selfUri": ""
}
  */
QualityApi.prototype.getKeywordsetsKeywordsetId = function getKeywordsetsKeywordsetId(keywordSetId){
    var requestPath = '/api/v2/quality/keywordsets/{keywordSetId}';
    var requestQuery = {};
    var requestBody;

    if(keywordSetId === undefined || keywordSetId === null){
      throw new Error('Missing required  parameter: keywordSetId');
    }
    requestPath = requestPath.replace('{keywordSetId}', keywordSetId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a keywordSet to the specified keywordSet via PUT.
  * @memberOf QualityApi
  * @instance
  * @param {string} keywordSetId - KeywordSet ID
  * @param {} body - keywordSet
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "queue": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": [],
   "selfUri": ""
}
  */
QualityApi.prototype.putKeywordsetsKeywordsetId = function putKeywordsetsKeywordsetId(keywordSetId, body){
    var requestPath = '/api/v2/quality/keywordsets/{keywordSetId}';
    var requestQuery = {};
    var requestBody;

    if(keywordSetId === undefined || keywordSetId === null){
      throw new Error('Missing required  parameter: keywordSetId');
    }
    requestPath = requestPath.replace('{keywordSetId}', keywordSetId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a keywordSet by id.
  * @memberOf QualityApi
  * @instance
  * @param {string} keywordSetId - KeywordSet ID
  */
QualityApi.prototype.deleteKeywordsetsKeywordsetId = function deleteKeywordsetsKeywordsetId(keywordSetId){
    var requestPath = '/api/v2/quality/keywordsets/{keywordSetId}';
    var requestQuery = {};
    var requestBody;

    if(keywordSetId === undefined || keywordSetId === null){
      throw new Error('Missing required  parameter: keywordSetId');
    }
    requestPath = requestPath.replace('{keywordSetId}', keywordSetId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a list of Agent Activities
  * @description Including the number of evaluations and average evaluation score
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} startTime - Start time of agent activity. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {string} endTime - End time of agent activity. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {array} agentUserId - user id of agent requested
  * @param {string} evaluatorUserId - user id of the evaluator
  * @param {string} name - name
  * @param {string} group - group id
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getAgentsActivity = function getAgentsActivity(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, startTime, endTime, agentUserId, evaluatorUserId, name, group){
    var requestPath = '/api/v2/quality/agents/activity';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["startTime"] = startTime;
    requestQuery["endTime"] = endTime;
    requestQuery["agentUserId"] = agentUserId;
    requestQuery["evaluatorUserId"] = evaluatorUserId;
    requestQuery["name"] = name;
    requestQuery["group"] = group;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get audits for conversation or recording
  * @memberOf QualityApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} recordingId - id of the recording
  * @param {string} entityType - entity type options: Recording, Calibration, Evaluation, Annotation
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getConversationsConversationIdAudits = function getConversationsConversationIdAudits(conversationId, pageSize, pageNumber, sortBy, expand, nextPage, previousPage, recordingId, entityType){
    var requestPath = '/api/v2/quality/conversations/{conversationId}/audits';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["recordingId"] = recordingId;
    requestQuery["entityType"] = entityType;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets all the revisions for a specific evaluation.
  * @memberOf QualityApi
  * @instance
  * @param {string} formId - Form ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getFormsFormIdVersions = function getFormsFormIdVersions(formId, pageSize, pageNumber){
    var requestPath = '/api/v2/quality/forms/{formId}/versions';
    var requestQuery = {};
    var requestBody;

    if(formId === undefined || formId === null){
      throw new Error('Missing required  parameter: formId');
    }
    requestPath = requestPath.replace('{formId}', formId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an evaluation
  * @memberOf QualityApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {string} evaluationId - evaluationId
  * @param {string} expand - agent, evaluator, evaluationForm
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "evaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "calibration": {
      "id": "",
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {},
      "selfUri": ""
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true,
   "selfUri": ""
}
  */
QualityApi.prototype.getConversationsConversationIdEvaluationsEvaluationId = function getConversationsConversationIdEvaluationsEvaluationId(conversationId, evaluationId, expand){
    var requestPath = '/api/v2/quality/conversations/{conversationId}/evaluations/{evaluationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(evaluationId === undefined || evaluationId === null){
      throw new Error('Missing required  parameter: evaluationId');
    }
    requestPath = requestPath.replace('{evaluationId}', evaluationId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an evaluation
  * @memberOf QualityApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {string} evaluationId - evaluationId
  * @param {} body - evaluation
  * @param {string} expand - evaluatorId
  * @example
  * Body Example:
  * {
   "name": "",
   "conversation": {
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": ""
   },
   "evaluationForm": {
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {}
   },
   "evaluator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "calibration": {
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {}
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "evaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "calibration": {
      "id": "",
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {},
      "selfUri": ""
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true,
   "selfUri": ""
}
  */
QualityApi.prototype.putConversationsConversationIdEvaluationsEvaluationId = function putConversationsConversationIdEvaluationsEvaluationId(conversationId, evaluationId, body, expand){
    var requestPath = '/api/v2/quality/conversations/{conversationId}/evaluations/{evaluationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(evaluationId === undefined || evaluationId === null){
      throw new Error('Missing required  parameter: evaluationId');
    }
    requestPath = requestPath.replace('{evaluationId}', evaluationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an evaluation
  * @memberOf QualityApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {string} evaluationId - evaluationId
  * @param {string} expand - evaluatorId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "evaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "calibration": {
      "id": "",
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {},
      "selfUri": ""
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true,
   "selfUri": ""
}
  */
QualityApi.prototype.deleteConversationsConversationIdEvaluationsEvaluationId = function deleteConversationsConversationIdEvaluationsEvaluationId(conversationId, evaluationId, expand){
    var requestPath = '/api/v2/quality/conversations/{conversationId}/evaluations/{evaluationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(evaluationId === undefined || evaluationId === null){
      throw new Error('Missing required  parameter: evaluationId');
    }
    requestPath = requestPath.replace('{evaluationId}', evaluationId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Score evaluation
  * @memberOf QualityApi
  * @instance
  * @param {} body - evaluationAndScoringSet
  * @example
  * Body Example:
  * {
   "evaluationForm": {
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {}
   },
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "totalScore": {},
   "totalCriticalScore": {},
   "questionGroupScores": [],
   "anyFailedKillQuestions": true,
   "comments": "",
   "agentComments": ""
}
  */
QualityApi.prototype.postEvaluationsScoring = function postEvaluationsScoring(body){
    var requestPath = '/api/v2/quality/evaluations/scoring';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for evaluation aggregates
  * @memberOf QualityApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
QualityApi.prototype.postEvaluationsAggregatesQuery = function postEvaluationsAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/evaluations/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an evaluator activity
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} startTime - The start time specified. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {string} endTime - The end time specified. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {string} name - Evaluator name
  * @param {array} permission - permission strings
  * @param {string} group - group id
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getEvaluatorsActivity = function getEvaluatorsActivity(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, startTime, endTime, name, permission, group){
    var requestPath = '/api/v2/quality/evaluators/activity';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["startTime"] = startTime;
    requestQuery["endTime"] = endTime;
    requestQuery["name"] = name;
    requestQuery["permission"] = permission;
    requestQuery["group"] = group;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published evaluation forms.
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getPublishedforms = function getPublishedforms(pageSize, pageNumber, name){
    var requestPath = '/api/v2/quality/publishedforms';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Publish an evaluation form.
  * @memberOf QualityApi
  * @instance
  * @param {} body - Evaluation form
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "selfUri": ""
}
  */
QualityApi.prototype.postPublishedforms = function postPublishedforms(body){
    var requestPath = '/api/v2/quality/publishedforms';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Queries Evaluations and returns a paged list
  * @description Query params must include one of conversationId, evaluatorUserId, or agentUserId
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} conversationId - conversationId specified
  * @param {string} agentUserId - user id of the agent
  * @param {string} evaluatorUserId - evaluator user id
  * @param {string} queueId - queue id
  * @param {string} startTime - start time of the evaluation query
  * @param {string} endTime - end time of the evaluation query
  * @param {array} evaluationState - evaluation state options: Pending, InProgress, Finished
  * @param {boolean} isReleased - the evaluation has been released
  * @param {boolean} agentHasRead - agent has the evaluation
  * @param {boolean} expandAnswerTotalScores - get the total scores for evaluations
  * @param {integer} maximum - maximum
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getEvaluationsQuery = function getEvaluationsQuery(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, conversationId, agentUserId, evaluatorUserId, queueId, startTime, endTime, evaluationState, isReleased, agentHasRead, expandAnswerTotalScores, maximum){
    var requestPath = '/api/v2/quality/evaluations/query';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["conversationId"] = conversationId;
    requestQuery["agentUserId"] = agentUserId;
    requestQuery["evaluatorUserId"] = evaluatorUserId;
    requestQuery["queueId"] = queueId;
    requestQuery["startTime"] = startTime;
    requestQuery["endTime"] = endTime;
    requestQuery["evaluationState"] = evaluationState;
    requestQuery["isReleased"] = isReleased;
    requestQuery["agentHasRead"] = agentHasRead;
    requestQuery["expandAnswerTotalScores"] = expandAnswerTotalScores;
    requestQuery["maximum"] = maximum;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of evaluation forms
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} expand - Expand
  * @param {string} name - Name
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getForms = function getForms(pageSize, pageNumber, sortBy, nextPage, previousPage, expand, name){
    var requestPath = '/api/v2/quality/forms';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["expand"] = expand;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an evaluation form.
  * @memberOf QualityApi
  * @instance
  * @param {} body - Evaluation form
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "selfUri": ""
}
  */
QualityApi.prototype.postForms = function postForms(body){
    var requestPath = '/api/v2/quality/forms';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of calibrations
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} conversationId - conversation id
  * @param {string} startTime - Beginning of the calibration query. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {string} endTime - end of the calibration query. Date time is represented as an ISO-8601 string. For example: yyyy-MM-ddTHH:mm:ss.SSSZ
  * @param {string} calibratorId - user id of calibrator
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getCalibrations = function getCalibrations(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, conversationId, startTime, endTime, calibratorId){
    var requestPath = '/api/v2/quality/calibrations';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["conversationId"] = conversationId;
    requestQuery["startTime"] = startTime;
    requestQuery["endTime"] = endTime;
    if(calibratorId === undefined || calibratorId === null){
      throw new Error('Missing required  parameter: calibratorId');
    }
    requestQuery["calibratorId"] = calibratorId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a calibration
  * @memberOf QualityApi
  * @instance
  * @param {} body - calibration
  * @param {string} expand - calibratorId
  * @example
  * Body Example:
  * {
   "name": "",
   "calibrator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "conversation": {
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": ""
   },
   "evaluationForm": {
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {}
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true
   },
   "expertEvaluator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "calibrator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "id": "",
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true,
      "selfUri": ""
   },
   "expertEvaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
QualityApi.prototype.postCalibrations = function postCalibrations(body, expand){
    var requestPath = '/api/v2/quality/calibrations';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published evaluation forms.
  * @memberOf QualityApi
  * @instance
  * @param {string} formId - Form ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "modifiedDate": "",
   "published": true,
   "contextId": "",
   "questionGroups": [],
   "publishedVersions": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   },
   "selfUri": ""
}
  */
QualityApi.prototype.getPublishedformsFormId = function getPublishedformsFormId(formId){
    var requestPath = '/api/v2/quality/publishedforms/{formId}';
    var requestQuery = {};
    var requestBody;

    if(formId === undefined || formId === null){
      throw new Error('Missing required  parameter: formId');
    }
    requestPath = requestPath.replace('{formId}', formId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an evaluation
  * @memberOf QualityApi
  * @instance
  * @param {string} conversationId - conversationId
  * @param {} body - evaluation
  * @param {string} expand - evaluatorId
  * @example
  * Body Example:
  * {
   "name": "",
   "conversation": {
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": ""
   },
   "evaluationForm": {
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {}
   },
   "evaluator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "calibration": {
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {}
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "evaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "calibration": {
      "id": "",
      "name": "",
      "calibrator": {},
      "agent": {},
      "conversation": {},
      "evaluationForm": {},
      "contextId": "",
      "averageScore": 0,
      "highScore": 0,
      "lowScore": 0,
      "createdDate": "",
      "evaluations": [],
      "evaluators": [],
      "scoringIndex": {},
      "expertEvaluator": {},
      "selfUri": ""
   },
   "status": "",
   "answers": {
      "totalScore": {},
      "totalCriticalScore": {},
      "questionGroupScores": [],
      "anyFailedKillQuestions": true,
      "comments": "",
      "agentComments": ""
   },
   "agentHasRead": true,
   "releaseDate": "",
   "assignedDate": "",
   "changedDate": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "neverRelease": true,
   "resourceId": "",
   "resourceType": "",
   "redacted": true,
   "isScoringIndex": true,
   "selfUri": ""
}
  */
QualityApi.prototype.postConversationsConversationIdEvaluations = function postConversationsConversationIdEvaluations(conversationId, body, expand){
    var requestPath = '/api/v2/quality/conversations/{conversationId}/evaluations';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a calibration by id.
  * @memberOf QualityApi
  * @instance
  * @param {string} calibrationId - Calibration ID
  * @param {string} calibratorId - calibratorId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "calibrator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "id": "",
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true,
      "selfUri": ""
   },
   "expertEvaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
QualityApi.prototype.getCalibrationsCalibrationId = function getCalibrationsCalibrationId(calibrationId, calibratorId){
    var requestPath = '/api/v2/quality/calibrations/{calibrationId}';
    var requestQuery = {};
    var requestBody;

    if(calibrationId === undefined || calibrationId === null){
      throw new Error('Missing required  parameter: calibrationId');
    }
    requestPath = requestPath.replace('{calibrationId}', calibrationId);
    if(calibratorId === undefined || calibratorId === null){
      throw new Error('Missing required  parameter: calibratorId');
    }
    requestQuery["calibratorId"] = calibratorId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a calibration to the specified calibration via PUT.  Editable fields include: evaluators, expertEvaluator, and scoringIndex
  * @memberOf QualityApi
  * @instance
  * @param {string} calibrationId - Calibration ID
  * @param {} body - Calibration
  * @example
  * Body Example:
  * {
   "name": "",
   "calibrator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "agent": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "conversation": {
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": ""
   },
   "evaluationForm": {
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {}
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true
   },
   "expertEvaluator": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "calibrator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "id": "",
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true,
      "selfUri": ""
   },
   "expertEvaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
QualityApi.prototype.putCalibrationsCalibrationId = function putCalibrationsCalibrationId(calibrationId, body){
    var requestPath = '/api/v2/quality/calibrations/{calibrationId}';
    var requestQuery = {};
    var requestBody;

    if(calibrationId === undefined || calibrationId === null){
      throw new Error('Missing required  parameter: calibrationId');
    }
    requestPath = requestPath.replace('{calibrationId}', calibrationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a calibration by id.
  * @memberOf QualityApi
  * @instance
  * @param {string} calibrationId - Calibration ID
  * @param {string} calibratorId - calibratorId
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "calibrator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "agent": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "evaluationForm": {
      "id": "",
      "name": "",
      "type": "",
      "modifiedDate": "",
      "published": true,
      "contextId": "",
      "questionGroups": [],
      "publishedVersions": {},
      "selfUri": ""
   },
   "contextId": "",
   "averageScore": 0,
   "highScore": 0,
   "lowScore": 0,
   "createdDate": "",
   "evaluations": [],
   "evaluators": [],
   "scoringIndex": {
      "id": "",
      "name": "",
      "conversation": {},
      "evaluationForm": {},
      "evaluator": {},
      "agent": {},
      "calibration": {},
      "status": "",
      "answers": {},
      "agentHasRead": true,
      "releaseDate": "",
      "assignedDate": "",
      "changedDate": "",
      "queue": {},
      "neverRelease": true,
      "resourceId": "",
      "resourceType": "",
      "redacted": true,
      "isScoringIndex": true,
      "selfUri": ""
   },
   "expertEvaluator": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
QualityApi.prototype.deleteCalibrationsCalibrationId = function deleteCalibrationsCalibrationId(calibrationId, calibratorId){
    var requestPath = '/api/v2/quality/calibrations/{calibrationId}';
    var requestQuery = {};
    var requestBody;

    if(calibrationId === undefined || calibrationId === null){
      throw new Error('Missing required  parameter: calibrationId');
    }
    requestPath = requestPath.replace('{calibrationId}', calibrationId);
    if(calibratorId === undefined || calibratorId === null){
      throw new Error('Missing required  parameter: calibratorId');
    }
    requestQuery["calibratorId"] = calibratorId;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of keyword sets
  * @memberOf QualityApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} name - the keyword set name - used for filtering results in searches.
  * @param {string} queueId - the queue id - used for filtering results in searches.
  * @param {string} agentId - the agent id - used for filtering results in searches.
  * @param {string} operator - If agentID and queueId are both present, this determines whether the query is an AND or OR between those parameters.
  AND,
  OR,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
QualityApi.prototype.getKeywordsets = function getKeywordsets(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, name, queueId, agentId, operator){
    var requestPath = '/api/v2/quality/keywordsets';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["name"] = name;
    requestQuery["queueId"] = queueId;
    requestQuery["agentId"] = agentId;
    requestQuery["operator"] = operator;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Keyword Set
  * @memberOf QualityApi
  * @instance
  * @param {} body - keywordSet
  * @param {string} expand - queueId
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "queue": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "queue": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "mediaSettings": {},
      "bullseye": {},
      "acwSettings": {},
      "skillEvaluationMethod": "",
      "queueFlow": {},
      "callingPartyName": "",
      "callingPartyNumber": "",
      "outboundEmailAddress": {},
      "memberCount": 0,
      "selfUri": ""
   },
   "queues": [],
   "language": "",
   "agents": [],
   "keywords": [],
   "participantPurposes": [],
   "selfUri": ""
}
  */
QualityApi.prototype.postKeywordsets = function postKeywordsets(body, expand){
    var requestPath = '/api/v2/quality/keywordsets';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete keyword sets
  * @description Bulk delete of keyword sets; this will only delete the keyword sets that match the ids specified in the query param.
  * @memberOf QualityApi
  * @instance
  * @param {string} ids - A comma-delimited list of valid KeywordSet ids
  */
QualityApi.prototype.deleteKeywordsets = function deleteKeywordsets(ids){
    var requestPath = '/api/v2/quality/keywordsets';
    var requestQuery = {};
    var requestBody;

    if(ids === undefined || ids === null){
      throw new Error('Missing required  parameter: ids');
    }
    requestQuery["ids"] = ids;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = QualityApi;

},{}],21:[function(require,module,exports){
/*jshint -W069 */
/**
* @class RecordingApi
* @example
* var api = new purecloud.platform.RecordingApi(pureCloudSession);
*/
function RecordingApi(session) {
    if(!(this instanceof RecordingApi)) {
        return new RecordingApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('RecordingApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Gets the media of a single orphan recording
  * @description A 202 response means the orphaned media is currently transcoding and will be available shortly.A 200 response denotes the transcoded orphan media is available now and is contained in the response body.
  * @memberOf RecordingApi
  * @instance
  * @param {string} orphanId - Orphan ID
  * @param {string} formatId - The desired media format.
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @param {boolean} download - requesting a download format of the recording
  true,
  false,
  * @param {string} fileName - the name of the downloaded fileName
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversationId": "",
   "path": "",
   "startTime": "",
   "endTime": "",
   "media": "",
   "annotations": [],
   "transcript": [],
   "emailTranscript": [],
   "fileState": "",
   "restoreExpirationTime": "",
   "mediaUris": {},
   "estimatedTranscodeTimeMs": 0,
   "actualTranscodeTimeMs": 0,
   "archiveDate": "",
   "archiveMedium": "",
   "deleteDate": "",
   "maxAllowedRestorationsForOrg": 0,
   "remainingRestorationsAllowedForOrg": 0,
   "sessionId": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.getOrphanIdMedia = function getOrphanIdMedia(orphanId, formatId, download, fileName){
    var requestPath = '/api/v2/orphanrecordings/{orphanId}/media';
    var requestQuery = {};
    var requestBody;

    if(orphanId === undefined || orphanId === null){
      throw new Error('Missing required  parameter: orphanId');
    }
    requestPath = requestPath.replace('{orphanId}', orphanId);
    requestQuery["formatId"] = formatId;
    requestQuery["download"] = download;
    requestQuery["fileName"] = fileName;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary gets a list local key settings data
  * @memberOf RecordingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RecordingApi.prototype.getLocalkeysSettings = function getLocalkeysSettings(){
    var requestPath = '/api/v2/recording/localkeys/settings';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary create settings for local key creation
  * @memberOf RecordingApi
  * @instance
  * @param {} body - Local Encryption Configuration
  * @example
  * Body Example:
  * {
   "name": "",
   "url": "",
   "apiId": "",
   "apiKey": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "url": "",
   "apiId": "",
   "apiKey": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.postLocalkeysSettings = function postLocalkeysSettings(body){
    var requestPath = '/api/v2/recording/localkeys/settings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get annotation
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {string} annotationId - Annotation ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "location": 0,
   "durationMs": 0,
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "description": "",
   "keywordName": "",
   "confidence": {},
   "keywordSetId": "",
   "keywordSetName": "",
   "utterance": "",
   "timeBegin": "",
   "timeEnd": "",
   "keywordConfidenceThreshold": "",
   "agentScoreModifier": "",
   "customerScoreModifier": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.getConversationIdRecordingsRecordingIdAnnotationsAnnotationId = function getConversationIdRecordingsRecordingIdAnnotationsAnnotationId(conversationId, recordingId, annotationId){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}/annotations/{annotationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(annotationId === undefined || annotationId === null){
      throw new Error('Missing required  parameter: annotationId');
    }
    requestPath = requestPath.replace('{annotationId}', annotationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update annotation
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {string} annotationId - Annotation ID
  * @param {} body - annotation
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "location": 0,
   "durationMs": 0,
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "description": "",
   "keywordName": "",
   "confidence": {},
   "keywordSetId": "",
   "keywordSetName": "",
   "utterance": "",
   "timeBegin": "",
   "timeEnd": "",
   "keywordConfidenceThreshold": "",
   "agentScoreModifier": "",
   "customerScoreModifier": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "location": 0,
   "durationMs": 0,
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "description": "",
   "keywordName": "",
   "confidence": {},
   "keywordSetId": "",
   "keywordSetName": "",
   "utterance": "",
   "timeBegin": "",
   "timeEnd": "",
   "keywordConfidenceThreshold": "",
   "agentScoreModifier": "",
   "customerScoreModifier": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.putConversationIdRecordingsRecordingIdAnnotationsAnnotationId = function putConversationIdRecordingsRecordingIdAnnotationsAnnotationId(conversationId, recordingId, annotationId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}/annotations/{annotationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(annotationId === undefined || annotationId === null){
      throw new Error('Missing required  parameter: annotationId');
    }
    requestPath = requestPath.replace('{annotationId}', annotationId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete annotation
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {string} annotationId - Annotation ID
  */
RecordingApi.prototype.deleteConversationIdRecordingsRecordingIdAnnotationsAnnotationId = function deleteConversationIdRecordingsRecordingIdAnnotationsAnnotationId(conversationId, recordingId, annotationId){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}/annotations/{annotationId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(annotationId === undefined || annotationId === null){
      throw new Error('Missing required  parameter: annotationId');
    }
    requestPath = requestPath.replace('{annotationId}', annotationId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a screen recording session
  * @memberOf RecordingApi
  * @instance
  * @param {string} recordingSessionId - Screen recording session ID
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "state": "",
   "archiveDate": "",
   "deleteDate": ""
}
  */
RecordingApi.prototype.patchsScreensessionsRecordingsessionId = function patchsScreensessionsRecordingsessionId(recordingSessionId, body){
    var requestPath = '/api/v2/recordings/screensessions/{recordingSessionId}';
    var requestQuery = {};
    var requestBody;

    if(recordingSessionId === undefined || recordingSessionId === null){
      throw new Error('Missing required  parameter: recordingSessionId');
    }
    requestPath = requestPath.replace('{recordingSessionId}', recordingSessionId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary create a local recording key
  * @memberOf RecordingApi
  * @instance
  * @param {} body - Local Encryption body
  * @example
  * Body Example:
  * {
   "configId": "",
   "publicKey": "",
   "keypairId": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "createDate": "",
   "keydataSummary": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.postLocalkeys = function postLocalkeys(body){
    var requestPath = '/api/v2/recording/localkeys';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Retrieves a paged listing of screen recording sessions
  * @memberOf RecordingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RecordingApi.prototype.getsScreensessions = function getsScreensessions(pageSize, pageNumber){
    var requestPath = '/api/v2/recordings/screensessions';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets media retention policy list with query options to filter on name and enabled.
  * @description for a less verbose response, add summary=true to this endpoint
  * @memberOf RecordingApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {string} name - the policy name - used for filtering results in searches.
  * @param {boolean} enabled - checks to see if policy is enabled - use enabled = true or enabled = false
  * @param {boolean} summary - provides a less verbose response of policy lists.
  * @param {boolean} hasErrors - provides a way to fetch all policies with errors or policies that do not have errors
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RecordingApi.prototype.getMediaretentionpolicies = function getMediaretentionpolicies(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, name, enabled, summary, hasErrors){
    var requestPath = '/api/v2/recording/mediaretentionpolicies';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["name"] = name;
    requestQuery["enabled"] = enabled;
    requestQuery["summary"] = summary;
    requestQuery["hasErrors"] = hasErrors;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create media retention policy
  * @memberOf RecordingApi
  * @instance
  * @param {} body - Policy
  * @example
  * Body Example:
  * {
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.postMediaretentionpolicies = function postMediaretentionpolicies(body){
    var requestPath = '/api/v2/recording/mediaretentionpolicies';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete media retention policies
  * @description Bulk delete of media retention policies, this will only delete the polices that match the ids specified in the query param.
  * @memberOf RecordingApi
  * @instance
  * @param {string} ids - Bulk delete of media retention policies, this will only delete the polices that match the ids specified in the query param.
  */
RecordingApi.prototype.deleteMediaretentionpolicies = function deleteMediaretentionpolicies(ids){
    var requestPath = '/api/v2/recording/mediaretentionpolicies';
    var requestQuery = {};
    var requestBody;

    if(ids === undefined || ids === null){
      throw new Error('Missing required  parameter: ids');
    }
    requestQuery["ids"] = ids;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get annotations for recording
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "type": "",
  "location": 0,
  "durationMs": 0,
  "user": {
   "id": "",
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0,
   "routingStatus": {},
   "presence": {},
   "conversationSummary": {},
   "outOfOffice": {},
   "geolocation": {},
   "station": {},
   "authorization": {},
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
  },
  "description": "",
  "keywordName": "",
  "confidence": {},
  "keywordSetId": "",
  "keywordSetName": "",
  "utterance": "",
  "timeBegin": "",
  "timeEnd": "",
  "keywordConfidenceThreshold": "",
  "agentScoreModifier": "",
  "customerScoreModifier": "",
  "selfUri": ""
 }
]
  */
RecordingApi.prototype.getConversationIdRecordingsRecordingIdAnnotations = function getConversationIdRecordingsRecordingIdAnnotations(conversationId, recordingId){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}/annotations';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create annotation
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {} body - annotation
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "location": 0,
   "durationMs": 0,
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "description": "",
   "keywordName": "",
   "confidence": {},
   "keywordSetId": "",
   "keywordSetName": "",
   "utterance": "",
   "timeBegin": "",
   "timeEnd": "",
   "keywordConfidenceThreshold": "",
   "agentScoreModifier": "",
   "customerScoreModifier": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "location": 0,
   "durationMs": 0,
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "description": "",
   "keywordName": "",
   "confidence": {},
   "keywordSetId": "",
   "keywordSetName": "",
   "utterance": "",
   "timeBegin": "",
   "timeEnd": "",
   "keywordConfidenceThreshold": "",
   "agentScoreModifier": "",
   "customerScoreModifier": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.postConversationIdRecordingsRecordingIdAnnotations = function postConversationIdRecordingsRecordingIdAnnotations(conversationId, recordingId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}/annotations';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get key rotation schedule
  * @memberOf RecordingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "period": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.getRecordingkeysRotationschedule = function getRecordingkeysRotationschedule(){
    var requestPath = '/api/v2/recording/recordingkeys/rotationschedule';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update key rotation schedule
  * @memberOf RecordingApi
  * @instance
  * @param {} body - KeyRotationSchedule
  * @example
  * Body Example:
  * {
   "name": "",
   "period": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "period": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.putRecordingkeysRotationschedule = function putRecordingkeysRotationschedule(body){
    var requestPath = '/api/v2/recording/recordingkeys/rotationschedule';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a media retention policy
  * @memberOf RecordingApi
  * @instance
  * @param {string} policyId - Policy ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.getMediaretentionpoliciesPolicyId = function getMediaretentionpoliciesPolicyId(policyId){
    var requestPath = '/api/v2/recording/mediaretentionpolicies/{policyId}';
    var requestQuery = {};
    var requestBody;

    if(policyId === undefined || policyId === null){
      throw new Error('Missing required  parameter: policyId');
    }
    requestPath = requestPath.replace('{policyId}', policyId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a media retention policy
  * @memberOf RecordingApi
  * @instance
  * @param {string} policyId - Policy ID
  * @param {} body - Policy
  * @example
  * Body Example:
  * {
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.putMediaretentionpoliciesPolicyId = function putMediaretentionpoliciesPolicyId(policyId, body){
    var requestPath = '/api/v2/recording/mediaretentionpolicies/{policyId}';
    var requestQuery = {};
    var requestBody;

    if(policyId === undefined || policyId === null){
      throw new Error('Missing required  parameter: policyId');
    }
    requestPath = requestPath.replace('{policyId}', policyId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a media retention policy
  * @memberOf RecordingApi
  * @instance
  * @param {string} policyId - Policy ID
  */
RecordingApi.prototype.deleteMediaretentionpoliciesPolicyId = function deleteMediaretentionpoliciesPolicyId(policyId){
    var requestPath = '/api/v2/recording/mediaretentionpolicies/{policyId}';
    var requestQuery = {};
    var requestBody;

    if(policyId === undefined || policyId === null){
      throw new Error('Missing required  parameter: policyId');
    }
    requestPath = requestPath.replace('{policyId}', policyId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a media retention policy
  * @memberOf RecordingApi
  * @instance
  * @param {string} policyId - Policy ID
  * @param {} body - Policy
  * @example
  * Body Example:
  * {
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "modifiedDate": "",
   "createdDate": "",
   "order": 0,
   "description": "",
   "enabled": true,
   "mediaPolicies": {
      "callPolicy": {},
      "chatPolicy": {},
      "emailPolicy": {}
   },
   "conditions": {
      "forUsers": [],
      "directions": [],
      "dateRanges": [],
      "mediaTypes": [],
      "forQueues": [],
      "duration": {},
      "wrapupCodes": [],
      "timeAllowed": {}
   },
   "actions": {
      "retainRecording": true,
      "deleteRecording": true,
      "alwaysDelete": true,
      "assignEvaluations": [],
      "assignMeteredEvaluations": [],
      "assignCalibrations": [],
      "retentionDuration": {},
      "initiateScreenRecording": {}
   },
   "policyErrors": {
      "policyErrorMessages": []
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.patchMediaretentionpoliciesPolicyId = function patchMediaretentionpoliciesPolicyId(policyId, body){
    var requestPath = '/api/v2/recording/mediaretentionpolicies/{policyId}';
    var requestQuery = {};
    var requestBody;

    if(policyId === undefined || policyId === null){
      throw new Error('Missing required  parameter: policyId');
    }
    requestPath = requestPath.replace('{policyId}', policyId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a specific recording.
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {string} formatId - The desired media format.
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @param {boolean} download - requesting a download format of the recording
  true,
  false,
  * @param {string} fileName - the name of the downloaded fileName
  */
RecordingApi.prototype.getConversationIdRecordingsRecordingId = function getConversationIdRecordingsRecordingId(conversationId, recordingId, formatId, download, fileName){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    requestQuery["formatId"] = formatId;
    requestQuery["download"] = download;
    requestQuery["fileName"] = fileName;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Updates the retention records on a recording.
  * @description Currently supports updating and removing both archive and delete dates for eligible recordings. A request to change the archival date of an archived recording will result in a restoration of the recording until the new date set. 
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {string} recordingId - Recording ID
  * @param {} body - recording
  * @example
  * Body Example:
  * {
   "name": "",
   "conversationId": "",
   "path": "",
   "startTime": "",
   "endTime": "",
   "media": "",
   "annotations": [],
   "transcript": [],
   "emailTranscript": [],
   "fileState": "",
   "restoreExpirationTime": "",
   "mediaUris": {},
   "estimatedTranscodeTimeMs": 0,
   "actualTranscodeTimeMs": 0,
   "archiveDate": "",
   "archiveMedium": "",
   "deleteDate": "",
   "maxAllowedRestorationsForOrg": 0,
   "remainingRestorationsAllowedForOrg": 0,
   "sessionId": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversationId": "",
   "path": "",
   "startTime": "",
   "endTime": "",
   "media": "",
   "annotations": [],
   "transcript": [],
   "emailTranscript": [],
   "fileState": "",
   "restoreExpirationTime": "",
   "mediaUris": {},
   "estimatedTranscodeTimeMs": 0,
   "actualTranscodeTimeMs": 0,
   "archiveDate": "",
   "archiveMedium": "",
   "deleteDate": "",
   "maxAllowedRestorationsForOrg": 0,
   "remainingRestorationsAllowedForOrg": 0,
   "sessionId": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.putConversationIdRecordingsRecordingId = function putConversationIdRecordingsRecordingId(conversationId, recordingId, body){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings/{recordingId}';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a single orphan recording
  * @memberOf RecordingApi
  * @instance
  * @param {string} orphanId - Orphan ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "createdTime": "",
   "recoveredTime": "",
   "providerType": "",
   "mediaSizeBytes": 0,
   "mediaType": "",
   "fileState": "",
   "providerEndpoint": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "count": 0,
      "properties": {},
      "schema": {},
      "enabled": true,
      "site": {},
      "dids": [],
      "selfUri": ""
   },
   "recording": {
      "id": "",
      "name": "",
      "conversationId": "",
      "path": "",
      "startTime": "",
      "endTime": "",
      "media": "",
      "annotations": [],
      "transcript": [],
      "emailTranscript": [],
      "fileState": "",
      "restoreExpirationTime": "",
      "mediaUris": {},
      "estimatedTranscodeTimeMs": 0,
      "actualTranscodeTimeMs": 0,
      "archiveDate": "",
      "archiveMedium": "",
      "deleteDate": "",
      "maxAllowedRestorationsForOrg": 0,
      "remainingRestorationsAllowedForOrg": 0,
      "sessionId": "",
      "selfUri": ""
   },
   "orphanStatus": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.getOrphanId = function getOrphanId(orphanId){
    var requestPath = '/api/v2/orphanrecordings/{orphanId}';
    var requestQuery = {};
    var requestBody;

    if(orphanId === undefined || orphanId === null){
      throw new Error('Missing required  parameter: orphanId');
    }
    requestPath = requestPath.replace('{orphanId}', orphanId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Updates an orphan recording to a regular recording with retention values
  * @description If this operation is successful the orphan will no longer exist. It will be replaced by the resulting recording in the response. This replacement recording is accessible by the normal Recording api.
  * @memberOf RecordingApi
  * @instance
  * @param {string} orphanId - Orphan ID
  * @param {} body - If this operation is successful the orphan will no longer exist. It will be replaced by the resulting recording in the response. This replacement recording is accessible by the normal Recording api.
  * @example
  * Body Example:
  * {
   "archiveDate": "",
   "deleteDate": "",
   "conversationId": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "conversationId": "",
   "path": "",
   "startTime": "",
   "endTime": "",
   "media": "",
   "annotations": [],
   "transcript": [],
   "emailTranscript": [],
   "fileState": "",
   "restoreExpirationTime": "",
   "mediaUris": {},
   "estimatedTranscodeTimeMs": 0,
   "actualTranscodeTimeMs": 0,
   "archiveDate": "",
   "archiveMedium": "",
   "deleteDate": "",
   "maxAllowedRestorationsForOrg": 0,
   "remainingRestorationsAllowedForOrg": 0,
   "sessionId": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.putOrphanId = function putOrphanId(orphanId, body){
    var requestPath = '/api/v2/orphanrecordings/{orphanId}';
    var requestQuery = {};
    var requestBody;

    if(orphanId === undefined || orphanId === null){
      throw new Error('Missing required  parameter: orphanId');
    }
    requestPath = requestPath.replace('{orphanId}', orphanId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Deletes a single orphan recording
  * @memberOf RecordingApi
  * @instance
  * @param {string} orphanId - Orphan ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "createdTime": "",
   "recoveredTime": "",
   "providerType": "",
   "mediaSizeBytes": 0,
   "mediaType": "",
   "fileState": "",
   "providerEndpoint": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "count": 0,
      "properties": {},
      "schema": {},
      "enabled": true,
      "site": {},
      "dids": [],
      "selfUri": ""
   },
   "recording": {
      "id": "",
      "name": "",
      "conversationId": "",
      "path": "",
      "startTime": "",
      "endTime": "",
      "media": "",
      "annotations": [],
      "transcript": [],
      "emailTranscript": [],
      "fileState": "",
      "restoreExpirationTime": "",
      "mediaUris": {},
      "estimatedTranscodeTimeMs": 0,
      "actualTranscodeTimeMs": 0,
      "archiveDate": "",
      "archiveMedium": "",
      "deleteDate": "",
      "maxAllowedRestorationsForOrg": 0,
      "remainingRestorationsAllowedForOrg": 0,
      "sessionId": "",
      "selfUri": ""
   },
   "orphanStatus": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.deleteOrphanId = function deleteOrphanId(orphanId){
    var requestPath = '/api/v2/orphanrecordings/{orphanId}';
    var requestQuery = {};
    var requestBody;

    if(orphanId === undefined || orphanId === null){
      throw new Error('Missing required  parameter: orphanId');
    }
    requestPath = requestPath.replace('{orphanId}', orphanId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the local encryption settings
  * @memberOf RecordingApi
  * @instance
  * @param {string} settingsId - Settings Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "url": "",
   "apiId": "",
   "apiKey": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.getLocalkeysSettingsSettingsId = function getLocalkeysSettingsSettingsId(settingsId){
    var requestPath = '/api/v2/recording/localkeys/settings/{settingsId}';
    var requestQuery = {};
    var requestBody;

    if(settingsId === undefined || settingsId === null){
      throw new Error('Missing required  parameter: settingsId');
    }
    requestPath = requestPath.replace('{settingsId}', settingsId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the local encryption settings
  * @memberOf RecordingApi
  * @instance
  * @param {string} settingsId - Settings Id
  * @param {} body - Local Encryption metadata
  * @example
  * Body Example:
  * {
   "name": "",
   "url": "",
   "apiId": "",
   "apiKey": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "url": "",
   "apiId": "",
   "apiKey": "",
   "selfUri": ""
}
  */
RecordingApi.prototype.putLocalkeysSettingsSettingsId = function putLocalkeysSettingsSettingsId(settingsId, body){
    var requestPath = '/api/v2/recording/localkeys/settings/{settingsId}';
    var requestQuery = {};
    var requestBody;

    if(settingsId === undefined || settingsId === null){
      throw new Error('Missing required  parameter: settingsId');
    }
    requestPath = requestPath.replace('{settingsId}', settingsId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets all orphan recordings
  * @memberOf RecordingApi
  * @instance
  * @param {integer} pageSize - The total page size requested
  * @param {integer} pageNumber - The page number requested
  * @param {string} sortBy - variable name requested to sort by
  * @param {array} expand - variable name requested by expand list
  * @param {string} nextPage - next page token
  * @param {string} previousPage - Previous page token
  * @param {boolean} hasConversation - Filter resulting orphans by whether the conversation is known. False returns all orphans for the organization.
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RecordingApi.prototype.getOrphanrecordings = function getOrphanrecordings(pageSize, pageNumber, sortBy, expand, nextPage, previousPage, hasConversation){
    var requestPath = '/api/v2/orphanrecordings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["nextPage"] = nextPage;
    requestQuery["previousPage"] = previousPage;
    requestQuery["hasConversation"] = hasConversation;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get all of a Conversation's Recordings.
  * @memberOf RecordingApi
  * @instance
  * @param {string} conversationId - Conversation ID
  * @param {integer} maxWaitMs - The maximum number of milliseconds to wait for the recording to be ready. Must be a positive value.
  * @param {string} formatId - The desired media format
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "conversationId": "",
  "path": "",
  "startTime": "",
  "endTime": "",
  "media": "",
  "annotations": [],
  "transcript": [],
  "emailTranscript": [],
  "fileState": "",
  "restoreExpirationTime": "",
  "mediaUris": {},
  "estimatedTranscodeTimeMs": 0,
  "actualTranscodeTimeMs": 0,
  "archiveDate": "",
  "archiveMedium": "",
  "deleteDate": "",
  "maxAllowedRestorationsForOrg": 0,
  "remainingRestorationsAllowedForOrg": 0,
  "sessionId": "",
  "selfUri": ""
 }
]
  */
RecordingApi.prototype.getConversationIdRecordings = function getConversationIdRecordings(conversationId, maxWaitMs, formatId){
    var requestPath = '/api/v2/conversations/{conversationId}/recordings';
    var requestQuery = {};
    var requestBody;

    if(conversationId === undefined || conversationId === null){
      throw new Error('Missing required  parameter: conversationId');
    }
    requestPath = requestPath.replace('{conversationId}', conversationId);
    requestQuery["maxWaitMs"] = maxWaitMs;
    requestQuery["formatId"] = formatId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get encryption key list
  * @memberOf RecordingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RecordingApi.prototype.getRecordingkeys = function getRecordingkeys(pageSize, pageNumber){
    var requestPath = '/api/v2/recording/recordingkeys';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create encryption key
  * @memberOf RecordingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "createDate": "",
   "keydataSummary": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "selfUri": ""
}
  */
RecordingApi.prototype.postRecordingkeys = function postRecordingkeys(){
    var requestPath = '/api/v2/recording/recordingkeys';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the Recording Settings for the Organization
  * @memberOf RecordingApi
  * @instance
  * @param {boolean} createDefault - If no settings are found, a new one is created with default values
  * @example
  * 200 Response Example:
  * {
   "maxSimultaneousStreams": 0
}
  */
RecordingApi.prototype.getSettings = function getSettings(createDefault){
    var requestPath = '/api/v2/recording/settings';
    var requestQuery = {};
    var requestBody;

    requestQuery["createDefault"] = createDefault;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the Recording Settings for the Organization
  * @memberOf RecordingApi
  * @instance
  * @param {} body - Recording settings
  * @example
  * Body Example:
  * {
   "maxSimultaneousStreams": 0
}
  * @example
  * 200 Response Example:
  * {
   "maxSimultaneousStreams": 0
}
  */
RecordingApi.prototype.putSettings = function putSettings(body){
    var requestPath = '/api/v2/recording/settings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};


module.exports = RecordingApi;

},{}],22:[function(require,module,exports){
/*jshint -W069 */
/**
* @class ResponseManagementApi
* @example
* var api = new purecloud.platform.ResponseManagementApi(pureCloudSession);
*/
function ResponseManagementApi(session) {
    if(!(this instanceof ResponseManagementApi)) {
        return new ResponseManagementApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('ResponseManagementApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Query responses
  * @memberOf ResponseManagementApi
  * @instance
  * @param {} body - Response
  * @example
  * Body Example:
  * {
   "queryPhrase": "",
   "pageSize": 0,
   "filters": []
}
  * @example
  * 200 Response Example:
  * {
   "results": {
      "entities": [],
      "pageSize": 0,
      "pageNumber": 0,
      "total": 0,
      "selfUri": "",
      "firstUri": "",
      "previousUri": "",
      "nextUri": "",
      "lastUri": "",
      "pageCount": 0
   }
}
  */
ResponseManagementApi.prototype.postResponsesQuery = function postResponsesQuery(body){
    var requestPath = '/api/v2/responsemanagement/responses/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a list of existing responses.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} libraryId - Library ID
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ResponseManagementApi.prototype.getResponses = function getResponses(libraryId, pageNumber, pageSize){
    var requestPath = '/api/v2/responsemanagement/responses';
    var requestQuery = {};
    var requestBody;

    if(libraryId === undefined || libraryId === null){
      throw new Error('Missing required  parameter: libraryId');
    }
    requestQuery["libraryId"] = libraryId;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a response.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {} body - Response
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "libraries": [],
   "texts": [],
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "dateCreated": "",
   "interactionType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "libraries": [],
   "texts": [],
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "interactionType": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.postResponses = function postResponses(body){
    var requestPath = '/api/v2/responsemanagement/responses';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get details about an existing response.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} responseId - Response ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "libraries": [],
   "texts": [],
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "interactionType": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.getResponsesResponseId = function getResponsesResponseId(responseId){
    var requestPath = '/api/v2/responsemanagement/responses/{responseId}';
    var requestQuery = {};
    var requestBody;

    if(responseId === undefined || responseId === null){
      throw new Error('Missing required  parameter: responseId');
    }
    requestPath = requestPath.replace('{responseId}', responseId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an existing response.
  * @description Fields that can be updated: name, libraries, and texts. The most recent version is required for updates.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} responseId - Response ID
  * @param {} body - Response
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "libraries": [],
   "texts": [],
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "dateCreated": "",
   "interactionType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "libraries": [],
   "texts": [],
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "interactionType": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.putResponsesResponseId = function putResponsesResponseId(responseId, body){
    var requestPath = '/api/v2/responsemanagement/responses/{responseId}';
    var requestQuery = {};
    var requestBody;

    if(responseId === undefined || responseId === null){
      throw new Error('Missing required  parameter: responseId');
    }
    requestPath = requestPath.replace('{responseId}', responseId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an existing response.
  * @description This will remove the response from any libraries associated with it.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} responseId - Response ID
  */
ResponseManagementApi.prototype.deleteResponsesResponseId = function deleteResponsesResponseId(responseId){
    var requestPath = '/api/v2/responsemanagement/responses/{responseId}';
    var requestQuery = {};
    var requestBody;

    if(responseId === undefined || responseId === null){
      throw new Error('Missing required  parameter: responseId');
    }
    requestPath = requestPath.replace('{responseId}', responseId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get details about an existing response library.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} libraryId - Library ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.getLibrariesLibraryId = function getLibrariesLibraryId(libraryId){
    var requestPath = '/api/v2/responsemanagement/libraries/{libraryId}';
    var requestQuery = {};
    var requestBody;

    if(libraryId === undefined || libraryId === null){
      throw new Error('Missing required  parameter: libraryId');
    }
    requestPath = requestPath.replace('{libraryId}', libraryId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an existing response library.
  * @description Fields that can be updated: name. The most recent version is required for updates.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} libraryId - Library ID
  * @param {} body - Library
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "dateCreated": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.putLibrariesLibraryId = function putLibrariesLibraryId(libraryId, body){
    var requestPath = '/api/v2/responsemanagement/libraries/{libraryId}';
    var requestQuery = {};
    var requestBody;

    if(libraryId === undefined || libraryId === null){
      throw new Error('Missing required  parameter: libraryId');
    }
    requestPath = requestPath.replace('{libraryId}', libraryId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an existing response library.
  * @description This will remove any responses associated with the library.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {string} libraryId - Library ID
  */
ResponseManagementApi.prototype.deleteLibrariesLibraryId = function deleteLibrariesLibraryId(libraryId){
    var requestPath = '/api/v2/responsemanagement/libraries/{libraryId}';
    var requestQuery = {};
    var requestBody;

    if(libraryId === undefined || libraryId === null){
      throw new Error('Missing required  parameter: libraryId');
    }
    requestPath = requestPath.replace('{libraryId}', libraryId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets a list of existing response libraries.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ResponseManagementApi.prototype.getLibraries = function getLibraries(pageNumber, pageSize){
    var requestPath = '/api/v2/responsemanagement/libraries';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a response library.
  * @memberOf ResponseManagementApi
  * @instance
  * @param {} body - Library
  * @example
  * Body Example:
  * {
   "name": "",
   "version": 0,
   "createdBy": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "dateCreated": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "version": 0,
   "createdBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "dateCreated": "",
   "selfUri": ""
}
  */
ResponseManagementApi.prototype.postLibraries = function postLibraries(body){
    var requestPath = '/api/v2/responsemanagement/libraries';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = ResponseManagementApi;

},{}],23:[function(require,module,exports){
/*jshint -W069 */
/**
* @class RoutingApi
* @example
* var api = new purecloud.platform.RoutingApi(pureCloudSession);
*/
function RoutingApi(session) {
    if(!(this instanceof RoutingApi)) {
        return new RoutingApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('RoutingApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get recent conversations that are still active
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdConversations = function getQueuesQueueIdConversations(queueId, pageSize, pageNumber){
    var requestPath = '/api/v2/routing/queues/{queueId}/conversations';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get details about this queue.
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "memberCount": 0,
   "selfUri": ""
}
  */
RoutingApi.prototype.getQueuesQueueId = function getQueuesQueueId(queueId){
    var requestPath = '/api/v2/routing/queues/{queueId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {} body - Queue
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "memberCount": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "memberCount": 0,
   "selfUri": ""
}
  */
RoutingApi.prototype.putQueuesQueueId = function putQueuesQueueId(queueId, body){
    var requestPath = '/api/v2/routing/queues/{queueId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {boolean} forceDelete - forceDelete
  */
RoutingApi.prototype.deleteQueuesQueueId = function deleteQueuesQueueId(queueId, forceDelete){
    var requestPath = '/api/v2/routing/queues/{queueId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["forceDelete"] = forceDelete;
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a route
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainName - email domain
  * @param {string} routeId - route ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "pattern": "",
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "priority": 0,
   "skills": [],
   "language": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "fromName": "",
   "fromEmail": "",
   "flow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
RoutingApi.prototype.getEmailDomainsDomainnameRoutesRouteId = function getEmailDomainsDomainnameRoutesRouteId(domainName, routeId){
    var requestPath = '/api/v2/routing/email/domains/{domainName}/routes/{routeId}';
    var requestQuery = {};
    var requestBody;

    if(domainName === undefined || domainName === null){
      throw new Error('Missing required  parameter: domainName');
    }
    requestPath = requestPath.replace('{domainName}', domainName);
    if(routeId === undefined || routeId === null){
      throw new Error('Missing required  parameter: routeId');
    }
    requestPath = requestPath.replace('{routeId}', routeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a route
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainName - email domain
  * @param {string} routeId - route ID
  * @param {} body - Route
  * @example
  * Body Example:
  * {
   "name": "",
   "pattern": "",
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "priority": 0,
   "skills": [],
   "language": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "fromName": "",
   "fromEmail": "",
   "flow": {
      "id": "",
      "name": "",
      "selfUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "pattern": "",
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "priority": 0,
   "skills": [],
   "language": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "fromName": "",
   "fromEmail": "",
   "flow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
RoutingApi.prototype.putEmailDomainsDomainnameRoutesRouteId = function putEmailDomainsDomainnameRoutesRouteId(domainName, routeId, body){
    var requestPath = '/api/v2/routing/email/domains/{domainName}/routes/{routeId}';
    var requestQuery = {};
    var requestBody;

    if(domainName === undefined || domainName === null){
      throw new Error('Missing required  parameter: domainName');
    }
    requestPath = requestPath.replace('{domainName}', domainName);
    if(routeId === undefined || routeId === null){
      throw new Error('Missing required  parameter: routeId');
    }
    requestPath = requestPath.replace('{routeId}', routeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a route
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainName - email domain
  * @param {string} routeId - route ID
  */
RoutingApi.prototype.deleteEmailDomainsDomainnameRoutesRouteId = function deleteEmailDomainsDomainnameRoutesRouteId(domainName, routeId){
    var requestPath = '/api/v2/routing/email/domains/{domainName}/routes/{routeId}';
    var requestQuery = {};
    var requestBody;

    if(domainName === undefined || domainName === null){
      throw new Error('Missing required  parameter: domainName');
    }
    requestPath = requestPath.replace('{domainName}', domainName);
    if(routeId === undefined || routeId === null){
      throw new Error('Missing required  parameter: routeId');
    }
    requestPath = requestPath.replace('{routeId}', routeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of wrapup codes.
  * @memberOf RoutingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getWrapupcodes = function getWrapupcodes(pageSize, pageNumber, sortBy){
    var requestPath = '/api/v2/routing/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a wrap-up code
  * @memberOf RoutingApi
  * @instance
  * @param {} body - WrapupCode
  * @example
  * Body Example:
  * {
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "version": 0,
   "callableTimes": [],
   "selfUri": ""
}
  */
RoutingApi.prototype.postWrapupcodes = function postWrapupcodes(body){
    var requestPath = '/api/v2/routing/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for queue observations
  * @memberOf RoutingApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": []
}
  * @example
  * 200 Response Example:
  * {
   "systemToOrganizationMappings": {},
   "results": []
}
  */
RoutingApi.prototype.postQueuesObservationsQuery = function postQueuesObservationsQuery(body){
    var requestPath = '/api/v2/analytics/queues/observations/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of supported languages.
  * @memberOf RoutingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @param {string} name - Name
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getLanguages = function getLanguages(pageSize, pageNumber, sortOrder, name){
    var requestPath = '/api/v2/routing/languages';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create Language
  * @memberOf RoutingApi
  * @instance
  * @param {} body - Language
  * @example
  * Body Example:
  * {
   "name": "",
   "dateModified": "",
   "state": "",
   "version": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.postLanguages = function postLanguages(body){
    var requestPath = '/api/v2/routing/languages';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Estimated Wait Time
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - queueId
  * @param {string} conversationId - conversationId
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
RoutingApi.prototype.getQueuesQueueIdEstimatedwaittime = function getQueuesQueueIdEstimatedwaittime(queueId, conversationId){
    var requestPath = '/api/v2/routing/queues/{queueId}/estimatedwaittime';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["conversationId"] = conversationId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Routing Skill
  * @memberOf RoutingApi
  * @instance
  * @param {string} skillId - Skill ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.getSkillsSkillId = function getSkillsSkillId(skillId){
    var requestPath = '/api/v2/routing/skills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Routing Skill
  * @memberOf RoutingApi
  * @instance
  * @param {string} skillId - Skill ID
  */
RoutingApi.prototype.deleteSkillsSkillId = function deleteSkillsSkillId(skillId){
    var requestPath = '/api/v2/routing/skills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete queue member
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {string} memberId - Member ID
  */
RoutingApi.prototype.deleteQueuesQueueIdUsersMemberId = function deleteQueuesQueueIdUsersMemberId(queueId, memberId){
    var requestPath = '/api/v2/routing/queues/{queueId}/users/{memberId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(memberId === undefined || memberId === null){
      throw new Error('Missing required  parameter: memberId');
    }
    requestPath = requestPath.replace('{memberId}', memberId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the ring number of joined status for a User in a Queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {string} memberId - Member ID
  * @param {} body - Queue Member
  * @example
  * Body Example:
  * {
   "name": "",
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "ringNumber": 0,
   "joined": true,
   "memberBy": "",
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "ringNumber": 0,
   "joined": true,
   "memberBy": "",
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   },
   "selfUri": ""
}
  */
RoutingApi.prototype.patchQueuesQueueIdUsersMemberId = function patchQueuesQueueIdUsersMemberId(queueId, memberId, body){
    var requestPath = '/api/v2/routing/queues/{queueId}/users/{memberId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(memberId === undefined || memberId === null){
      throw new Error('Missing required  parameter: memberId');
    }
    requestPath = requestPath.replace('{memberId}', memberId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get email setup
  * @memberOf RoutingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "rootDomain": ""
}
  */
RoutingApi.prototype.getEmailSetup = function getEmailSetup(){
    var requestPath = '/api/v2/routing/email/setup';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the members of this queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {array} expand - Which fields, if any, to expand. Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations, date, geolocationsettings, organization, presencedefinitions, locationdefinitions, orgauthorization, favorites, superiors, directreports, adjacents, routingskills, fieldconfigs
  * @param {boolean} joined - Filter by joined status
  * @param {string} name - Filter by queue member name
  * @param {array} profileSkills - Filter by profile skill
  * @param {array} skills - Filter by skill
  * @param {array} languages - Filter by language
  * @param {array} routingStatus - Filter by routing status
  * @param {array} presence - Filter by presence
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdUsers = function getQueuesQueueIdUsers(queueId, pageSize, pageNumber, sortBy, expand, joined, name, profileSkills, skills, languages, routingStatus, presence){
    var requestPath = '/api/v2/routing/queues/{queueId}/users';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    requestQuery["joined"] = joined;
    requestQuery["name"] = name;
    requestQuery["profileSkills"] = profileSkills;
    requestQuery["skills"] = skills;
    requestQuery["languages"] = languages;
    requestQuery["routingStatus"] = routingStatus;
    requestQuery["presence"] = presence;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Bulk add or delete up to 100 queue members
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {} body - Queue Members
  * @param {boolean} doDelete - True to delete queue members
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "user": {
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "addresses": [],
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0
  },
  "ringNumber": 0,
  "joined": true,
  "memberBy": "",
  "routingStatus": {
   "userId": "",
   "status": "",
   "startTime": ""
  }
 }
]
  */
RoutingApi.prototype.postQueuesQueueIdUsers = function postQueuesQueueIdUsers(queueId, body, doDelete){
    var requestPath = '/api/v2/routing/queues/{queueId}/users';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["delete"] = doDelete;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Join or unjoin a set of users for a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {} body - Queue Members
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "user": {
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "addresses": [],
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0
  },
  "ringNumber": 0,
  "joined": true,
  "memberBy": "",
  "routingStatus": {
   "userId": "",
   "status": "",
   "startTime": ""
  }
 }
]
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.patchQueuesQueueIdUsers = function patchQueuesQueueIdUsers(queueId, body){
    var requestPath = '/api/v2/routing/queues/{queueId}/users';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of routing skills.
  * @memberOf RoutingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Filter for results that start with this value
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getSkills = function getSkills(pageSize, pageNumber, name){
    var requestPath = '/api/v2/routing/skills';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create Skill
  * @memberOf RoutingApi
  * @instance
  * @param {} body - Skill
  * @example
  * Body Example:
  * {
   "name": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateModified": "",
   "state": "",
   "version": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.postSkills = function postSkills(body){
    var requestPath = '/api/v2/routing/skills';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get domains
  * @memberOf RoutingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getEmailDomains = function getEmailDomains(){
    var requestPath = '/api/v2/routing/email/domains';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a domain
  * @memberOf RoutingApi
  * @instance
  * @param {} body - Domain
  * @example
  * Body Example:
  * {
   "name": "",
   "mxRecordStatus": "",
   "subDomain": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "mxRecordStatus": "",
   "subDomain": true,
   "selfUri": ""
}
  */
RoutingApi.prototype.postEmailDomains = function postEmailDomains(body){
    var requestPath = '/api/v2/routing/email/domains';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent call conversations that are still active
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdConversationsCalls = function getQueuesQueueIdConversationsCalls(queueId, pageSize, pageNumber){
    var requestPath = '/api/v2/routing/queues/{queueId}/conversations/calls';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent chat conversations that are still active
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdConversationsChats = function getQueuesQueueIdConversationsChats(queueId, pageSize, pageNumber){
    var requestPath = '/api/v2/routing/queues/{queueId}/conversations/chats';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get list of queues.
  * @memberOf RoutingApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} name - Name
  * @param {boolean} active - Active
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueues = function getQueues(pageSize, pageNumber, sortBy, name, active){
    var requestPath = '/api/v2/routing/queues';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["name"] = name;
    requestQuery["active"] = active;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create queue
  * @memberOf RoutingApi
  * @instance
  * @param {} body - Queue
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "sourceQueueId": "",
   "memberCount": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "memberCount": 0,
   "selfUri": ""
}
  */
RoutingApi.prototype.postQueues = function postQueues(body){
    var requestPath = '/api/v2/routing/queues';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a wrap-up code from a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {string} codeId - Code ID
  */
RoutingApi.prototype.deleteQueuesQueueIdWrapupcodesCodeId = function deleteQueuesQueueIdWrapupcodesCodeId(queueId, codeId){
    var requestPath = '/api/v2/routing/queues/{queueId}/wrapupcodes/{codeId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(codeId === undefined || codeId === null){
      throw new Error('Missing required  parameter: codeId');
    }
    requestPath = requestPath.replace('{codeId}', codeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the wrap-up codes for a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdWrapupcodes = function getQueuesQueueIdWrapupcodes(queueId){
    var requestPath = '/api/v2/routing/queues/{queueId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add up to 100 wrap-up codes to a queue
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {} body - List of wrapup codes
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": ""
 }
]
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "selfUri": ""
 }
]
  */
RoutingApi.prototype.postQueuesQueueIdWrapupcodes = function postQueuesQueueIdWrapupcodes(queueId, body){
    var requestPath = '/api/v2/routing/queues/{queueId}/wrapupcodes';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get details about this wrap-up code.
  * @memberOf RoutingApi
  * @instance
  * @param {string} codeId - Wrapup Code ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.getWrapupcodesCodeId = function getWrapupcodesCodeId(codeId){
    var requestPath = '/api/v2/routing/wrapupcodes/{codeId}';
    var requestQuery = {};
    var requestBody;

    if(codeId === undefined || codeId === null){
      throw new Error('Missing required  parameter: codeId');
    }
    requestPath = requestPath.replace('{codeId}', codeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update wrap-up code
  * @memberOf RoutingApi
  * @instance
  * @param {string} codeId - Wrapup Code ID
  * @param {} body - WrapupCode
  * @example
  * Body Example:
  * {
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.putWrapupcodesCodeId = function putWrapupcodesCodeId(codeId, body){
    var requestPath = '/api/v2/routing/wrapupcodes/{codeId}';
    var requestQuery = {};
    var requestBody;

    if(codeId === undefined || codeId === null){
      throw new Error('Missing required  parameter: codeId');
    }
    requestPath = requestPath.replace('{codeId}', codeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete wrap-up code
  * @memberOf RoutingApi
  * @instance
  * @param {string} codeId - Wrapup Code ID
  */
RoutingApi.prototype.deleteWrapupcodesCodeId = function deleteWrapupcodesCodeId(codeId){
    var requestPath = '/api/v2/routing/wrapupcodes/{codeId}';
    var requestQuery = {};
    var requestBody;

    if(codeId === undefined || codeId === null){
      throw new Error('Missing required  parameter: codeId');
    }
    requestPath = requestPath.replace('{codeId}', codeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get routes
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainName - email domain
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} pattern - Filter routes by the route's pattern property
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getEmailDomainsDomainnameRoutes = function getEmailDomainsDomainnameRoutes(domainName, pageSize, pageNumber, pattern){
    var requestPath = '/api/v2/routing/email/domains/{domainName}/routes';
    var requestQuery = {};
    var requestBody;

    if(domainName === undefined || domainName === null){
      throw new Error('Missing required  parameter: domainName');
    }
    requestPath = requestPath.replace('{domainName}', domainName);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pattern"] = pattern;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a route
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainName - email domain
  * @param {} body - Route
  * @example
  * Body Example:
  * {
   "name": "",
   "pattern": "",
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "priority": 0,
   "skills": [],
   "language": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "fromName": "",
   "fromEmail": "",
   "flow": {
      "id": "",
      "name": "",
      "selfUri": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "pattern": "",
   "queue": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "priority": 0,
   "skills": [],
   "language": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "fromName": "",
   "fromEmail": "",
   "flow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
RoutingApi.prototype.postEmailDomainsDomainnameRoutes = function postEmailDomainsDomainnameRoutes(domainName, body){
    var requestPath = '/api/v2/routing/email/domains/{domainName}/routes';
    var requestQuery = {};
    var requestBody;

    if(domainName === undefined || domainName === null){
      throw new Error('Missing required  parameter: domainName');
    }
    requestPath = requestPath.replace('{domainName}', domainName);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent callback conversations that are still active
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdConversationsCallbacks = function getQueuesQueueIdConversationsCallbacks(queueId, pageSize, pageNumber){
    var requestPath = '/api/v2/routing/queues/{queueId}/conversations/callbacks';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update routing skill proficiency or state.
  * @memberOf RoutingApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} skillId - skillId
  * @param {} body - Skill
  * @example
  * Body Example:
  * {
   "name": "",
   "proficiency": {},
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "proficiency": {},
   "state": "",
   "skillUri": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.putUserIdRoutingskillsSkillId = function putUserIdRoutingskillsSkillId(userId, skillId, body){
    var requestPath = '/api/v2/users/{userId}/routingskills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Remove routing skill from user
  * @memberOf RoutingApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} skillId - skillId
  */
RoutingApi.prototype.deleteUserIdRoutingskillsSkillId = function deleteUserIdRoutingskillsSkillId(userId, skillId){
    var requestPath = '/api/v2/users/{userId}/routingskills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary List routing skills for user
  * @memberOf RoutingApi
  * @instance
  * @param {string} userId - User ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getUserIdRoutingskills = function getUserIdRoutingskills(userId, pageSize, pageNumber, sortOrder){
    var requestPath = '/api/v2/users/{userId}/routingskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add routing skill to user
  * @memberOf RoutingApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Skill
  * @example
  * Body Example:
  * {
   "id": "",
   "proficiency": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "proficiency": {},
   "state": "",
   "skillUri": "",
   "selfUri": ""
}
  */
RoutingApi.prototype.postUserIdRoutingskills = function postUserIdRoutingskills(userId, body){
    var requestPath = '/api/v2/users/{userId}/routingskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get recent email conversations that are still active
  * @memberOf RoutingApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
RoutingApi.prototype.getQueuesQueueIdConversationsEmails = function getQueuesQueueIdConversationsEmails(queueId, pageSize, pageNumber){
    var requestPath = '/api/v2/routing/queues/{queueId}/conversations/emails';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get domain
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainId - domain ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "mxRecordStatus": "",
   "subDomain": true,
   "selfUri": ""
}
  */
RoutingApi.prototype.getEmailDomainsDomainId = function getEmailDomainsDomainId(domainId){
    var requestPath = '/api/v2/routing/email/domains/{domainId}';
    var requestQuery = {};
    var requestBody;

    if(domainId === undefined || domainId === null){
      throw new Error('Missing required  parameter: domainId');
    }
    requestPath = requestPath.replace('{domainId}', domainId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a domain
  * @memberOf RoutingApi
  * @instance
  * @param {string} domainId - domain ID
  */
RoutingApi.prototype.deleteEmailDomainsDomainId = function deleteEmailDomainsDomainId(domainId){
    var requestPath = '/api/v2/routing/email/domains/{domainId}';
    var requestQuery = {};
    var requestBody;

    if(domainId === undefined || domainId === null){
      throw new Error('Missing required  parameter: domainId');
    }
    requestPath = requestPath.replace('{domainId}', domainId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the utilization settings.
  * @memberOf RoutingApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "utilization": {}
}
  */
RoutingApi.prototype.getUtilization = function getUtilization(){
    var requestPath = '/api/v2/routing/utilization';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the utilization settings.
  * @memberOf RoutingApi
  * @instance
  * @param {} body - utilization
  * @example
  * Body Example:
  * {
   "utilization": {}
}
  * @example
  * 200 Response Example:
  * {
   "utilization": {}
}
  */
RoutingApi.prototype.putUtilization = function putUtilization(body){
    var requestPath = '/api/v2/routing/utilization';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete utilization settings and revert to system defaults.
  * @memberOf RoutingApi
  * @instance
  */
RoutingApi.prototype.deleteUtilization = function deleteUtilization(){
    var requestPath = '/api/v2/routing/utilization';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = RoutingApi;

},{}],24:[function(require,module,exports){
/*jshint -W069 */
/**
* @class ScriptsApi
* @example
* var api = new purecloud.platform.ScriptsApi(pureCloudSession);
*/
function ScriptsApi(session) {
    if(!(this instanceof ScriptsApi)) {
        return new ScriptsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('ScriptsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get a script
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "versionId": "",
   "createdDate": "",
   "modifiedDate": "",
   "publishedDate": "",
   "versionDate": "",
   "startPageId": "",
   "startPageName": "",
   "features": {},
   "variables": {},
   "customActions": {},
   "pages": [],
   "selfUri": ""
}
  */
ScriptsApi.prototype.getScriptId = function getScriptId(scriptId){
    var requestPath = '/api/v2/scripts/{scriptId}';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published scripts.
  * @memberOf ScriptsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} expand - Expand
  * @param {string} name - Name filter
  * @param {string} feature - Feature filter
  * @param {string} flowId - Secure flow id filter
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ScriptsApi.prototype.getPublished = function getPublished(pageSize, pageNumber, expand, name, feature, flowId){
    var requestPath = '/api/v2/scripts/published';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["expand"] = expand;
    requestQuery["name"] = name;
    requestQuery["feature"] = feature;
    requestQuery["flowId"] = flowId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published script.
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "versionId": "",
   "createdDate": "",
   "modifiedDate": "",
   "publishedDate": "",
   "versionDate": "",
   "startPageId": "",
   "startPageName": "",
   "features": {},
   "variables": {},
   "customActions": {},
   "pages": [],
   "selfUri": ""
}
  */
ScriptsApi.prototype.getPublishedScriptId = function getPublishedScriptId(scriptId){
    var requestPath = '/api/v2/scripts/published/{scriptId}';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published page.
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @param {string} pageId - Page ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "versionId": "",
   "createdDate": "",
   "modifiedDate": "",
   "rootContainer": {},
   "properties": {},
   "selfUri": ""
}
  */
ScriptsApi.prototype.getPublishedScriptIdPagesPageId = function getPublishedScriptIdPagesPageId(scriptId, pageId){
    var requestPath = '/api/v2/scripts/published/{scriptId}/pages/{pageId}';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    if(pageId === undefined || pageId === null){
      throw new Error('Missing required  parameter: pageId');
    }
    requestPath = requestPath.replace('{pageId}', pageId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the published variables
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  */
ScriptsApi.prototype.getPublishedScriptIdVariables = function getPublishedScriptIdVariables(scriptId){
    var requestPath = '/api/v2/scripts/published/{scriptId}/variables';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a page
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @param {string} pageId - Page ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "versionId": "",
   "createdDate": "",
   "modifiedDate": "",
   "rootContainer": {},
   "properties": {},
   "selfUri": ""
}
  */
ScriptsApi.prototype.getScriptIdPagesPageId = function getScriptIdPagesPageId(scriptId, pageId){
    var requestPath = '/api/v2/scripts/{scriptId}/pages/{pageId}';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    if(pageId === undefined || pageId === null){
      throw new Error('Missing required  parameter: pageId');
    }
    requestPath = requestPath.replace('{pageId}', pageId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of published pages
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "versionId": "",
  "createdDate": "",
  "modifiedDate": "",
  "rootContainer": {},
  "properties": {},
  "selfUri": ""
 }
]
  */
ScriptsApi.prototype.getPublishedScriptIdPages = function getPublishedScriptIdPages(scriptId){
    var requestPath = '/api/v2/scripts/published/{scriptId}/pages';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of scripts
  * @memberOf ScriptsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} expand - Expand
  * @param {string} name - Name filter
  * @param {string} feature - Feature filter
  * @param {string} flowId - Secure flow id filter
  * @param {string} sortBy - SortBy
  modifiedDate,
  createdDate,
  * @param {string} sortOrder - SortOrder
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
ScriptsApi.prototype.getScripts = function getScripts(pageSize, pageNumber, expand, name, feature, flowId, sortBy, sortOrder){
    var requestPath = '/api/v2/scripts';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["expand"] = expand;
    requestQuery["name"] = name;
    requestQuery["feature"] = feature;
    requestQuery["flowId"] = flowId;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of pages
  * @memberOf ScriptsApi
  * @instance
  * @param {string} scriptId - Script ID
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "versionId": "",
  "createdDate": "",
  "modifiedDate": "",
  "rootContainer": {},
  "properties": {},
  "selfUri": ""
 }
]
  */
ScriptsApi.prototype.getScriptIdPages = function getScriptIdPages(scriptId){
    var requestPath = '/api/v2/scripts/{scriptId}/pages';
    var requestQuery = {};
    var requestBody;

    if(scriptId === undefined || scriptId === null){
      throw new Error('Missing required  parameter: scriptId');
    }
    requestPath = requestPath.replace('{scriptId}', scriptId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = ScriptsApi;

},{}],25:[function(require,module,exports){
/*jshint -W069 */
/**
* @class SearchApi
* @example
* var api = new purecloud.platform.SearchApi(pureCloudSession);
*/
function SearchApi(session) {
    if(!(this instanceof SearchApi)) {
        return new SearchApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('SearchApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Search groups using the q64 value returned from a previous search
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/groups/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search groups
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/groups/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search voicemails using the q64 value returned from a previous search
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/voicemail/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search voicemails
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/voicemail/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search users using the q64 value returned from a previous search
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/users/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search users
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/users/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search locations using the q64 value returned from a previous search
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/locations/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search locations
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
SearchApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/locations/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search using the q64 value returned from a previous search.
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @param {boolean} profile - profile
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SearchApi.prototype.getSearch = function getSearch(q64, expand, profile){
    var requestPath = '/api/v2/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    requestQuery["profile"] = profile;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search resources.
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @param {boolean} profile - profile
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "types": [],
   "query": [],
   "aggregations": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SearchApi.prototype.postSearch = function postSearch(body, profile){
    var requestPath = '/api/v2/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["profile"] = profile;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Suggest resources using the q64 value returned from a previous suggest query.
  * @memberOf SearchApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @param {boolean} profile - profile
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SearchApi.prototype.getSuggest = function getSuggest(q64, expand, profile){
    var requestPath = '/api/v2/search/suggest';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    requestQuery["profile"] = profile;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Suggest resources.
  * @memberOf SearchApi
  * @instance
  * @param {} body - Search request options
  * @param {boolean} profile - profile
  * @example
  * Body Example:
  * {
   "expand": [],
   "types": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SearchApi.prototype.postSuggest = function postSuggest(body, profile){
    var requestPath = '/api/v2/search/suggest';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["profile"] = profile;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = SearchApi;

},{}],26:[function(require,module,exports){
/*jshint -W069 */
/**
* @class StationsApi
* @example
* var api = new purecloud.platform.StationsApi(pureCloudSession);
*/
function StationsApi(session) {
    if(!(this instanceof StationsApi)) {
        return new StationsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('StationsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get the list of available stations.
  * @memberOf StationsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} name - Name
  * @param {string} id - Comma separated list of stationIds
  * @param {string} lineAppearanceId - lineAppearanceId
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
StationsApi.prototype.getStations = function getStations(pageSize, pageNumber, sortBy, name, id, lineAppearanceId){
    var requestPath = '/api/v2/stations';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["name"] = name;
    requestQuery["id"] = id;
    requestQuery["lineAppearanceId"] = lineAppearanceId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Unassigns the user assigned to this station
  * @memberOf StationsApi
  * @instance
  * @param {string} stationId - Station ID
  */
StationsApi.prototype.deleteStationIdAssociateduser = function deleteStationIdAssociateduser(stationId){
    var requestPath = '/api/v2/stations/{stationId}/associateduser';
    var requestQuery = {};
    var requestBody;

    if(stationId === undefined || stationId === null){
      throw new Error('Missing required  parameter: stationId');
    }
    requestPath = requestPath.replace('{stationId}', stationId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get station.
  * @memberOf StationsApi
  * @instance
  * @param {string} stationId - Station ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "status": "",
   "userId": "",
   "primaryEdge": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "type": "",
   "lineAppearanceId": "",
   "selfUri": ""
}
  */
StationsApi.prototype.getStationId = function getStationId(stationId){
    var requestPath = '/api/v2/stations/{stationId}';
    var requestQuery = {};
    var requestBody;

    if(stationId === undefined || stationId === null){
      throw new Error('Missing required  parameter: stationId');
    }
    requestPath = requestPath.replace('{stationId}', stationId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = StationsApi;

},{}],27:[function(require,module,exports){
/*jshint -W069 */
/**
* @class SuggestApi
* @example
* var api = new purecloud.platform.SuggestApi(pureCloudSession);
*/
function SuggestApi(session) {
    if(!(this instanceof SuggestApi)) {
        return new SuggestApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('SuggestApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Search using the q64 value returned from a previous search.
  * @memberOf SuggestApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @param {boolean} profile - profile
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SuggestApi.prototype.getSearch = function getSearch(q64, expand, profile){
    var requestPath = '/api/v2/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    requestQuery["profile"] = profile;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search resources.
  * @memberOf SuggestApi
  * @instance
  * @param {} body - Search request options
  * @param {boolean} profile - profile
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "types": [],
   "query": [],
   "aggregations": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SuggestApi.prototype.postSearch = function postSearch(body, profile){
    var requestPath = '/api/v2/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["profile"] = profile;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Suggest resources using the q64 value returned from a previous suggest query.
  * @memberOf SuggestApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @param {boolean} profile - profile
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SuggestApi.prototype.getSuggest = function getSuggest(q64, expand, profile){
    var requestPath = '/api/v2/search/suggest';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    requestQuery["profile"] = profile;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Suggest resources.
  * @memberOf SuggestApi
  * @instance
  * @param {} body - Search request options
  * @param {boolean} profile - profile
  * @example
  * Body Example:
  * {
   "expand": [],
   "types": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   },
   "aggregations": {
      "array": true,
      "null": true,
      "nodeType": "",
      "object": true,
      "boolean": true,
      "number": true,
      "float": true,
      "valueNode": true,
      "missingNode": true,
      "containerNode": true,
      "pojo": true,
      "integralNumber": true,
      "floatingPointNumber": true,
      "short": true,
      "int": true,
      "long": true,
      "double": true,
      "bigDecimal": true,
      "bigInteger": true,
      "textual": true,
      "binary": true
   }
}
  */
SuggestApi.prototype.postSuggest = function postSuggest(body, profile){
    var requestPath = '/api/v2/search/suggest';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["profile"] = profile;
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = SuggestApi;

},{}],28:[function(require,module,exports){
/*jshint -W069 */
/**
* @class TelephonyProvidersEdgeApi
* @example
* var api = new purecloud.platform.TelephonyProvidersEdgeApi(pureCloudSession);
*/
function TelephonyProvidersEdgeApi(session) {
    if(!(this instanceof TelephonyProvidersEdgeApi)) {
        return new TelephonyProvidersEdgeApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('TelephonyProvidersEdgeApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get the list of Number Plans for this Site.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "description": "",
  "version": 0,
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "state": "",
  "modifiedByApp": "",
  "createdByApp": "",
  "match": "",
  "normalizedFormat": "",
  "priority": 0,
  "numbers": [],
  "digitLength": {
   "start": "",
   "end": ""
  },
  "classification": "",
  "matchType": "",
  "selfUri": ""
 }
]
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteIdNumberplans = function getProvidersEdgesSitesSiteIdNumberplans(siteId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/numberplans';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the list of Number Plans.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {} body - List of number plans
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "description": "",
  "version": 0,
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "state": "",
  "modifiedByApp": "",
  "createdByApp": "",
  "match": "",
  "normalizedFormat": "",
  "priority": 0,
  "numbers": [],
  "digitLength": {
   "start": "",
   "end": ""
  },
  "classification": "",
  "matchType": ""
 }
]
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "description": "",
  "version": 0,
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "state": "",
  "modifiedByApp": "",
  "createdByApp": "",
  "match": "",
  "normalizedFormat": "",
  "priority": 0,
  "numbers": [],
  "digitLength": {
   "start": "",
   "end": ""
  },
  "classification": "",
  "matchType": "",
  "selfUri": ""
 }
]
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesSitesSiteIdNumberplans = function putProvidersEdgesSitesSiteIdNumberplans(siteId, body){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/numberplans';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of Edge-compatible time zones
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTimezones = function getProvidersEdgesTimezones(pageSize, pageNumber){
    var requestPath = '/api/v2/telephony/providers/edges/timezones';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Counts of trunks that have recording disabled or enabled
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkType - The type of this trunk base.
  EXTERNAL,
  PHONE,
  EDGE,
  * @example
  * 200 Response Example:
  * {
   "enabledCount": 0,
   "disabledCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunkswithrecording = function getProvidersEdgesTrunkswithrecording(trunkType){
    var requestPath = '/api/v2/telephony/providers/edges/trunkswithrecording';
    var requestQuery = {};
    var requestBody;

    requestQuery["trunkType"] = trunkType;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of lines.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdLines = function getProvidersEdgesEdgeIdLines(edgeId, pageSize, pageNumber){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/lines';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get edge logical interfaces.
  * @description Retrieve a list of all configured logical interfaces from a specific edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {array} expand - Field to expand in the response Valid Values: externalTrunkBaseAssignments, phoneTrunkBaseAssignments
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdLogicalinterfaces = function getProvidersEdgesEdgeIdLogicalinterfaces(edgeId, expand){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logicalinterfaces';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an edge logical interface.
  * @description Create
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {} body - Logical interface
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "edgeAssignedId": "",
   "friendlyName": "",
   "vlanTagId": 0,
   "hardwareAddress": "",
   "physicalAdapterId": "",
   "ifStatus": "",
   "routes": [],
   "addresses": [],
   "ipv4Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true
   },
   "ipv6Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true
   },
   "currentState": "",
   "lastModifiedUserId": "",
   "lastModifiedCorrelationId": "",
   "commandResponses": [],
   "inheritPhoneTrunkBasesIPv4": true,
   "inheritPhoneTrunkBasesIPv6": true,
   "useForInternalEdgeCommunication": true,
   "externalTrunkBaseAssignments": [],
   "phoneTrunkBaseAssignments": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "edgeAssignedId": "",
   "friendlyName": "",
   "vlanTagId": 0,
   "hardwareAddress": "",
   "physicalAdapterId": "",
   "ifStatus": "",
   "interfaceType": "",
   "routes": [],
   "addresses": [],
   "ipv4Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "ipv6Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "currentState": "",
   "lastModifiedUserId": "",
   "lastModifiedCorrelationId": "",
   "commandResponses": [],
   "inheritPhoneTrunkBasesIPv4": true,
   "inheritPhoneTrunkBasesIPv6": true,
   "useForInternalEdgeCommunication": true,
   "externalTrunkBaseAssignments": [],
   "phoneTrunkBaseAssignments": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdLogicalinterfaces = function postProvidersEdgesEdgeIdLogicalinterfaces(edgeId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logicalinterfaces';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get endpoint
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} endpointId - Endpoint ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "count": 0,
   "properties": {},
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dids": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEndpointsEndpointId = function getProvidersEdgesEndpointsEndpointId(endpointId){
    var requestPath = '/api/v2/telephony/providers/edges/endpoints/{endpointId}';
    var requestQuery = {};
    var requestBody;

    if(endpointId === undefined || endpointId === null){
      throw new Error('Missing required  parameter: endpointId');
    }
    requestPath = requestPath.replace('{endpointId}', endpointId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update endpoint
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} endpointId - Endpoint ID
  * @param {} body - EndpointTemplate
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "count": 0,
   "properties": {},
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dids": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "count": 0,
   "properties": {},
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dids": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesEndpointsEndpointId = function putProvidersEdgesEndpointsEndpointId(endpointId, body){
    var requestPath = '/api/v2/telephony/providers/edges/endpoints/{endpointId}';
    var requestQuery = {};
    var requestBody;

    if(endpointId === undefined || endpointId === null){
      throw new Error('Missing required  parameter: endpointId');
    }
    requestPath = requestPath.replace('{endpointId}', endpointId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete endpoint
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} endpointId - Endpoint ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesEndpointsEndpointId = function deleteProvidersEdgesEndpointsEndpointId(endpointId){
    var requestPath = '/api/v2/telephony/providers/edges/endpoints/{endpointId}';
    var requestQuery = {};
    var requestBody;

    if(endpointId === undefined || endpointId === null){
      throw new Error('Missing required  parameter: endpointId');
    }
    requestPath = requestPath.replace('{endpointId}', endpointId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a file that can be used to configure a hardware Edge's settings.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - EdgeOfflineConfiguration
  * @example
  * Body Example:
  * {
   "pairingId": "",
   "network": {
      "wan": {}
   }
}
  * @example
  * 200 Response Example:
  * {
   "downloadUrl": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesOfflineconfiguration = function postProvidersEdgesOfflineconfiguration(body){
    var requestPath = '/api/v2/telephony/providers/edges/offlineconfiguration';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Reboot Multiple Phones
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Phones
  * @example
  * Body Example:
  * {
   "phoneIds": [],
   "siteId": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesPhonesReboot = function postProvidersEdgesPhonesReboot(body){
    var requestPath = '/api/v2/telephony/providers/edges/phones/reboot';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Retrieve a list of all configured physical interfaces from a specific edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdPhysicalinterfaces = function getProvidersEdgesEdgeIdPhysicalinterfaces(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/physicalinterfaces';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of edges.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} siteid - Filter by site.id
  * @param {string} edgeGroupid - Filter by edgeGroup.id
  * @param {string} sortBy - Sort by
  * @param {boolean} managed - Filter by managed
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdges = function getProvidersEdges(pageSize, pageNumber, name, siteid, edgeGroupid, sortBy, managed){
    var requestPath = '/api/v2/telephony/providers/edges';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["site.id"] = siteid;
    requestQuery["edgeGroup.id"] = edgeGroupid;
    requestQuery["sortBy"] = sortBy;
    requestQuery["managed"] = managed;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Edge
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "interfaces": [],
   "make": "",
   "model": "",
   "apiVersion": "",
   "softwareVersion": "",
   "softwareVersionTimestamp": "",
   "softwareVersionPlatform": "",
   "softwareVersionConfiguration": "",
   "fullSoftwareVersion": "",
   "pairingId": "",
   "fingerprint": "",
   "fingerprintHint": "",
   "currentVersion": "",
   "stagedVersion": "",
   "patch": "",
   "statusCode": "",
   "edgeGroup": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": []
   },
   "site": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true
   },
   "softwareStatus": {
      "version": {},
      "maxDownloadRate": 0,
      "downloadStartTime": "",
      "executeStartTime": "",
      "executeStopTime": "",
      "executeOnIdle": true,
      "status": "",
      "edgeUri": "",
      "current": true
   },
   "onlineStatus": "",
   "serialNumber": "",
   "physicalEdge": true,
   "managed": true,
   "edgeDeploymentType": "",
   "callDrainingState": "",
   "conversationCount": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "interfaces": [],
   "make": "",
   "model": "",
   "apiVersion": "",
   "softwareVersion": "",
   "softwareVersionTimestamp": "",
   "softwareVersionPlatform": "",
   "softwareVersionConfiguration": "",
   "fullSoftwareVersion": "",
   "pairingId": "",
   "fingerprint": "",
   "fingerprintHint": "",
   "currentVersion": "",
   "stagedVersion": "",
   "patch": "",
   "statusCode": "",
   "edgeGroup": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": [],
      "selfUri": ""
   },
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "softwareStatus": {
      "version": {},
      "maxDownloadRate": 0,
      "downloadStartTime": "",
      "executeStartTime": "",
      "executeStopTime": "",
      "executeOnIdle": true,
      "status": "",
      "edgeUri": "",
      "current": true
   },
   "onlineStatus": "",
   "serialNumber": "",
   "physicalEdge": true,
   "managed": true,
   "edgeDeploymentType": "",
   "callDrainingState": "",
   "conversationCount": 0,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdges = function postProvidersEdges(body){
    var requestPath = '/api/v2/telephony/providers/edges';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Triggers the rebalance operation.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesSitesSiteIdRebalance = function postProvidersEdgesSitesSiteIdRebalance(siteId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/rebalance';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Trunk Base Settings instance template from a given make and model. This object can then be modified and saved as a new Trunk Base Settings instance
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkMetabaseId - The id of a metabase object upon which to base this Trunk Base Settings
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunkbasesettingsTemplate = function getProvidersEdgesTrunkbasesettingsTemplate(trunkMetabaseId){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings/template';
    var requestQuery = {};
    var requestBody;

    if(trunkMetabaseId === undefined || trunkMetabaseId === null){
      throw new Error('Missing required  parameter: trunkMetabaseId');
    }
    requestQuery["trunkMetabaseId"] = trunkMetabaseId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Phone Base Settings instance template from a given make and model. This object can then be modified and saved as a new Phone Base Settings instance
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneMetabaseId - The id of a metabase object upon which to base this Phone Base Settings
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonebasesettingsTemplate = function getProvidersEdgesPhonebasesettingsTemplate(phoneMetabaseId){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings/template';
    var requestQuery = {};
    var requestBody;

    if(phoneMetabaseId === undefined || phoneMetabaseId === null){
      throw new Error('Missing required  parameter: phoneMetabaseId');
    }
    requestQuery["phoneMetabaseId"] = phoneMetabaseId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get outbound routes
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} siteid - Filter by site.id
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesOutboundroutes = function getProvidersEdgesOutboundroutes(pageSize, pageNumber, name, siteid, sortBy){
    var requestPath = '/api/v2/telephony/providers/edges/outboundroutes';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["site.id"] = siteid;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create outbound rule
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - OutboundRoute
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesOutboundroutes = function postProvidersEdgesOutboundroutes(body){
    var requestPath = '/api/v2/telephony/providers/edges/outboundroutes';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Phone Base Settings object by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneBaseId - Phone base ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonebasesettingsPhonebaseId = function getProvidersEdgesPhonebasesettingsPhonebaseId(phoneBaseId){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings/{phoneBaseId}';
    var requestQuery = {};
    var requestBody;

    if(phoneBaseId === undefined || phoneBaseId === null){
      throw new Error('Missing required  parameter: phoneBaseId');
    }
    requestPath = requestPath.replace('{phoneBaseId}', phoneBaseId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a Phone Base Settings by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneBaseId - Phone base ID
  * @param {} body - Phone base settings
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesPhonebasesettingsPhonebaseId = function putProvidersEdgesPhonebasesettingsPhonebaseId(phoneBaseId, body){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings/{phoneBaseId}';
    var requestQuery = {};
    var requestBody;

    if(phoneBaseId === undefined || phoneBaseId === null){
      throw new Error('Missing required  parameter: phoneBaseId');
    }
    requestPath = requestPath.replace('{phoneBaseId}', phoneBaseId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Phone Base Settings by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneBaseId - Phone base ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesPhonebasesettingsPhonebaseId = function deleteProvidersEdgesPhonebasesettingsPhonebaseId(phoneBaseId){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings/{phoneBaseId}';
    var requestQuery = {};
    var requestBody;

    if(phoneBaseId === undefined || phoneBaseId === null){
      throw new Error('Missing required  parameter: phoneBaseId');
    }
    requestPath = requestPath.replace('{phoneBaseId}', phoneBaseId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of available makes and models to create a new Phone Base Settings
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonebasesettingsAvailablemetabases = function getProvidersEdgesPhonebasesettingsAvailablemetabases(pageSize, pageNumber){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings/availablemetabases';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of Phone Instances
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} sortBy - Value by which to sort
  * @param {string} sortOrder - Sort order
  * @param {string} siteid - Filter by site.id
  * @param {string} webRtcUserid - Filter by webRtcUser.id
  * @param {string} phoneBaseSettingsid - Filter by phoneBaseSettings.id
  * @param {string} linesloggedInUserid - Filter by lines.loggedInUser.id
  * @param {string} linesdefaultForUserid - Filter by lines.defaultForUser.id
  * @param {string} phone_hardwareId - Filter by phone_hardwareId
  * @param {string} linesid - Filter by lines.id
  * @param {string} linesname - Filter by lines.name
  * @param {array} expand - Fields to expand in the response, comma-separated Valid Values: properties, site, status, status.primaryEdgesStatus, status.secondaryEdgesStatus, phoneBaseSettings, lines
  * @param {array} fields - Fields and properties to get, comma-separated Valid Values: webRtcUser, properties.*, lines.loggedInUser, lines.defaultForUser
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhones = function getProvidersEdgesPhones(pageNumber, pageSize, sortBy, sortOrder, siteid, webRtcUserid, phoneBaseSettingsid, linesloggedInUserid, linesdefaultForUserid, phone_hardwareId, linesid, linesname, expand, fields){
    var requestPath = '/api/v2/telephony/providers/edges/phones';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["site.id"] = siteid;
    requestQuery["webRtcUser.id"] = webRtcUserid;
    requestQuery["phoneBaseSettings.id"] = phoneBaseSettingsid;
    requestQuery["lines.loggedInUser.id"] = linesloggedInUserid;
    requestQuery["lines.defaultForUser.id"] = linesdefaultForUserid;
    requestQuery["phone_hardwareId"] = phone_hardwareId;
    requestQuery["lines.id"] = linesid;
    requestQuery["lines.name"] = linesname;
    requestQuery["expand"] = expand;
    requestQuery["fields"] = fields;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new Phone
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Phone
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {}
   },
   "secondaryStatus": {
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {}
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0
   },
   "secondaryEdge": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "secondaryStatus": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "userAgentInfo": {
      "firmwareVersion": "",
      "manufacturer": "",
      "model": ""
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesPhones = function postProvidersEdgesPhones(body){
    var requestPath = '/api/v2/telephony/providers/edges/phones';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a line base settings object by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} lineBaseId - Line base ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "lineMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesLinebasesettingsLinebaseId = function getProvidersEdgesLinebasesettingsLinebaseId(lineBaseId){
    var requestPath = '/api/v2/telephony/providers/edges/linebasesettings/{lineBaseId}';
    var requestQuery = {};
    var requestBody;

    if(lineBaseId === undefined || lineBaseId === null){
      throw new Error('Missing required  parameter: lineBaseId');
    }
    requestPath = requestPath.replace('{lineBaseId}', lineBaseId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Line instance template based on a Line Base Settings object. This object can then be modified and saved as a new Line instance
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} lineBaseSettingsId - The id of a Line Base Settings object upon which to base this Line
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "properties": {},
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "template": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "loggedInUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "defaultForUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesLinesTemplate = function getProvidersEdgesLinesTemplate(lineBaseSettingsId){
    var requestPath = '/api/v2/telephony/providers/edges/lines/template';
    var requestQuery = {};
    var requestBody;

    if(lineBaseSettingsId === undefined || lineBaseSettingsId === null){
      throw new Error('Missing required  parameter: lineBaseSettingsId');
    }
    requestQuery["lineBaseSettingsId"] = lineBaseSettingsId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the setup package for a locally deployed edge device. This is needed to complete the setup process for the virtual edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @example
  * 200 Response Example:
  * {
   "meta-data": {
      "pairing-token": "",
      "pairing-trust": [],
      "pairing-url": ""
   },
   "edge-id": "",
   "auth-token": "",
   "org-id": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdSetuppackage = function getProvidersEdgesEdgeIdSetuppackage(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/setuppackage';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get Trunk Base Settings listing
  * @description Managed properties will not be returned unless the user is assigned the managed:all:all permission.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} sortBy - Value by which to sort
  * @param {string} sortOrder - Sort order
  * @param {boolean} recordingEnabled - Filter trunks by recording enabled
  * @param {boolean} ignoreHidden - Set this to true to not receive trunk properties that are meant to be hidden or for internal system usage only.
  * @param {boolean} managed - Filter by managed
  * @param {array} expand - Fields to expand in the response, comma-separated Valid Values: properties
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunkbasesettings = function getProvidersEdgesTrunkbasesettings(pageNumber, pageSize, sortBy, sortOrder, recordingEnabled, ignoreHidden, managed, expand){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["recordingEnabled"] = recordingEnabled;
    requestQuery["ignoreHidden"] = ignoreHidden;
    requestQuery["managed"] = managed;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Trunk Base Settings object
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Trunk base settings
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesTrunkbasesettings = function postProvidersEdgesTrunkbasesettings(body){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Line by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} lineId - Line ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "properties": {},
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "template": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "loggedInUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "defaultForUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesLinesLineId = function getProvidersEdgesLinesLineId(lineId){
    var requestPath = '/api/v2/telephony/providers/edges/lines/{lineId}';
    var requestQuery = {};
    var requestBody;

    if(lineId === undefined || lineId === null){
      throw new Error('Missing required  parameter: lineId');
    }
    requestPath = requestPath.replace('{lineId}', lineId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary List schemas of a specific category (Deprecated)
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} schemaCategory - Schema category
  * @param {string} schemaType - Schema type
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getSchemasEdgesVnextSchemacategorySchematype = function getSchemasEdgesVnextSchemacategorySchematype(schemaCategory, schemaType, pageSize, pageNumber){
    var requestPath = '/api/v2/configuration/schemas/edges/vnext/{schemaCategory}/{schemaType}';
    var requestQuery = {};
    var requestBody;

    if(schemaCategory === undefined || schemaCategory === null){
      throw new Error('Missing required  parameter: schemaCategory');
    }
    requestPath = requestPath.replace('{schemaCategory}', schemaCategory);
    if(schemaType === undefined || schemaType === null){
      throw new Error('Missing required  parameter: schemaType');
    }
    requestPath = requestPath.replace('{schemaType}', schemaType);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary List schemas of a specific category (Deprecated)
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} schemaCategory - Schema category
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getSchemasEdgesVnextSchemacategory = function getSchemasEdgesVnextSchemacategory(schemaCategory, pageSize, pageNumber){
    var requestPath = '/api/v2/configuration/schemas/edges/vnext/{schemaCategory}';
    var requestQuery = {};
    var requestBody;

    if(schemaCategory === undefined || schemaCategory === null){
      throw new Error('Missing required  parameter: schemaCategory');
    }
    requestPath = requestPath.replace('{schemaCategory}', schemaCategory);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a listing of line base settings objects
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} sortBy - Value by which to sort
  * @param {string} sortOrder - Sort order
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesLinebasesettings = function getProvidersEdgesLinebasesettings(pageNumber, pageSize, sortBy, sortOrder){
    var requestPath = '/api/v2/telephony/providers/edges/linebasesettings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get edge group.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeGroupId - Edge group ID
  * @param {array} expand - Fields to expand in the response Valid Values: phoneTrunkBases, edgeTrunkBaseAssignment
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "managed": true,
   "edgeTrunkBaseAssignment": {
      "family": 0,
      "trunkBase": {}
   },
   "phoneTrunkBases": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgegroupsEdgegroupId = function getProvidersEdgesEdgegroupsEdgegroupId(edgeGroupId, expand){
    var requestPath = '/api/v2/telephony/providers/edges/edgegroups/{edgeGroupId}';
    var requestQuery = {};
    var requestBody;

    if(edgeGroupId === undefined || edgeGroupId === null){
      throw new Error('Missing required  parameter: edgeGroupId');
    }
    requestPath = requestPath.replace('{edgeGroupId}', edgeGroupId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an edge group.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeGroupId - Edge group ID
  * @param {} body - EdgeGroup
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "managed": true,
   "edgeTrunkBaseAssignment": {
      "family": 0,
      "trunkBase": {}
   },
   "phoneTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "managed": true,
   "edgeTrunkBaseAssignment": {
      "family": 0,
      "trunkBase": {}
   },
   "phoneTrunkBases": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesEdgegroupsEdgegroupId = function putProvidersEdgesEdgegroupsEdgegroupId(edgeGroupId, body){
    var requestPath = '/api/v2/telephony/providers/edges/edgegroups/{edgeGroupId}';
    var requestQuery = {};
    var requestBody;

    if(edgeGroupId === undefined || edgeGroupId === null){
      throw new Error('Missing required  parameter: edgeGroupId');
    }
    requestPath = requestPath.replace('{edgeGroupId}', edgeGroupId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an edge group.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeGroupId - Edge group ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesEdgegroupsEdgegroupId = function deleteProvidersEdgesEdgegroupsEdgegroupId(edgeGroupId){
    var requestPath = '/api/v2/telephony/providers/edges/edgegroups/{edgeGroupId}';
    var requestQuery = {};
    var requestBody;

    if(edgeGroupId === undefined || edgeGroupId === null){
      throw new Error('Missing required  parameter: edgeGroupId');
    }
    requestPath = requestPath.replace('{edgeGroupId}', edgeGroupId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of available makes and models to create a new Trunk Base Settings
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} type - 
  EXTERNAL,
  PHONE,
  EDGE,
  * @param {integer} pageSize - 
  * @param {integer} pageNumber - 
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunkbasesettingsAvailablemetabases = function getProvidersEdgesTrunkbasesettingsAvailablemetabases(type, pageSize, pageNumber){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings/availablemetabases';
    var requestQuery = {};
    var requestBody;

    requestQuery["type"] = type;
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a listing of extensions
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  * @param {string} number - Filter by number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesExtensions = function getProvidersEdgesExtensions(pageSize, pageNumber, sortBy, sortOrder, number){
    var requestPath = '/api/v2/telephony/providers/edges/extensions';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["number"] = number;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Validates a street address
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Address
  * @example
  * Body Example:
  * {
   "address": {
      "country": "",
      "A1": "",
      "A3": "",
      "RD": "",
      "HNO": "",
      "LOC": "",
      "NAM": "",
      "PC": ""
   }
}
  * @example
  * 200 Response Example:
  * {
   "valid": true,
   "response": {
      "messageReturned": [],
      "status": ""
   }
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesAddressvalidation = function postProvidersEdgesAddressvalidation(body){
    var requestPath = '/api/v2/telephony/providers/edges/addressvalidation';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a job to upload a list of Edge logs.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {} body - EdgeLogsJobRequest
  * @example
  * Body Example:
  * {
   "path": "",
   "query": "",
   "recurse": true
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdLogsJobs = function postProvidersEdgesEdgeIdLogsJobs(edgeId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logs/jobs';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a DID Pool by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} didPoolId - DID pool ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startPhoneNumber": "",
   "endPhoneNumber": "",
   "comments": "",
   "provider": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesDidpoolsDidpoolId = function getProvidersEdgesDidpoolsDidpoolId(didPoolId){
    var requestPath = '/api/v2/telephony/providers/edges/didpools/{didPoolId}';
    var requestQuery = {};
    var requestBody;

    if(didPoolId === undefined || didPoolId === null){
      throw new Error('Missing required  parameter: didPoolId');
    }
    requestPath = requestPath.replace('{didPoolId}', didPoolId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a DID Pool by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} didPoolId - DID pool ID
  * @param {} body - DID pool
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startPhoneNumber": "",
   "endPhoneNumber": "",
   "comments": "",
   "provider": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startPhoneNumber": "",
   "endPhoneNumber": "",
   "comments": "",
   "provider": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesDidpoolsDidpoolId = function putProvidersEdgesDidpoolsDidpoolId(didPoolId, body){
    var requestPath = '/api/v2/telephony/providers/edges/didpools/{didPoolId}';
    var requestQuery = {};
    var requestBody;

    if(didPoolId === undefined || didPoolId === null){
      throw new Error('Missing required  parameter: didPoolId');
    }
    requestPath = requestPath.replace('{didPoolId}', didPoolId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a DID Pool by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} didPoolId - DID pool ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesDidpoolsDidpoolId = function deleteProvidersEdgesDidpoolsDidpoolId(didPoolId){
    var requestPath = '/api/v2/telephony/providers/edges/didpools/{didPoolId}';
    var requestQuery = {};
    var requestBody;

    if(didPoolId === undefined || didPoolId === null){
      throw new Error('Missing required  parameter: didPoolId');
    }
    requestPath = requestPath.replace('{didPoolId}', didPoolId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Number Plan by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {string} numberPlanId - Number Plan ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "match": "",
   "normalizedFormat": "",
   "priority": 0,
   "numbers": [],
   "digitLength": {
      "start": "",
      "end": ""
   },
   "classification": "",
   "matchType": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteIdNumberplansNumberplanId = function getProvidersEdgesSitesSiteIdNumberplansNumberplanId(siteId, numberPlanId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/numberplans/{numberPlanId}';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    if(numberPlanId === undefined || numberPlanId === null){
      throw new Error('Missing required  parameter: numberPlanId');
    }
    requestPath = requestPath.replace('{numberPlanId}', numberPlanId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of available languages.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "languages": []
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesAvailablelanguages = function getProvidersEdgesAvailablelanguages(){
    var requestPath = '/api/v2/telephony/providers/edges/availablelanguages';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a listing of DID Pools
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesDidpools = function getProvidersEdgesDidpools(pageSize, pageNumber, sortBy){
    var requestPath = '/api/v2/telephony/providers/edges/didpools';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new DID pool
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - DID pool
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startPhoneNumber": "",
   "endPhoneNumber": "",
   "comments": "",
   "provider": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startPhoneNumber": "",
   "endPhoneNumber": "",
   "comments": "",
   "provider": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesDidpools = function postProvidersEdgesDidpools(body){
    var requestPath = '/api/v2/telephony/providers/edges/didpools';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets all the available software versions for this edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdSoftwareversions = function getProvidersEdgesEdgeIdSoftwareversions(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/softwareversions';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of Classifications for this Site
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {string} classification - Classification
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteIdNumberplansClassifications = function getProvidersEdgesSitesSiteIdNumberplansClassifications(siteId, classification){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/numberplans/classifications';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    requestQuery["classification"] = classification;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a certificate authority.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} certificateId - Certificate ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "certificate": "",
   "type": "",
   "services": [],
   "certificateDetails": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesCertificateauthoritiesCertificateId = function getProvidersEdgesCertificateauthoritiesCertificateId(certificateId){
    var requestPath = '/api/v2/telephony/providers/edges/certificateauthorities/{certificateId}';
    var requestQuery = {};
    var requestBody;

    if(certificateId === undefined || certificateId === null){
      throw new Error('Missing required  parameter: certificateId');
    }
    requestPath = requestPath.replace('{certificateId}', certificateId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a certificate authority.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} certificateId - Certificate ID
  * @param {} body - Certificate authority
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "certificate": "",
   "type": "",
   "services": [],
   "certificateDetails": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "certificate": "",
   "type": "",
   "services": [],
   "certificateDetails": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesCertificateauthoritiesCertificateId = function putProvidersEdgesCertificateauthoritiesCertificateId(certificateId, body){
    var requestPath = '/api/v2/telephony/providers/edges/certificateauthorities/{certificateId}';
    var requestQuery = {};
    var requestBody;

    if(certificateId === undefined || certificateId === null){
      throw new Error('Missing required  parameter: certificateId');
    }
    requestPath = requestPath.replace('{certificateId}', certificateId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a certificate authority.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} certificateId - Certificate ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesCertificateauthoritiesCertificateId = function deleteProvidersEdgesCertificateauthoritiesCertificateId(certificateId){
    var requestPath = '/api/v2/telephony/providers/edges/certificateauthorities/{certificateId}';
    var requestQuery = {};
    var requestBody;

    if(certificateId === undefined || certificateId === null){
      throw new Error('Missing required  parameter: certificateId');
    }
    requestPath = requestPath.replace('{certificateId}', certificateId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a DID by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} didId - DID ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneNumber": "",
   "didPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesDidsDidId = function getProvidersEdgesDidsDidId(didId){
    var requestPath = '/api/v2/telephony/providers/edges/dids/{didId}';
    var requestQuery = {};
    var requestBody;

    if(didId === undefined || didId === null){
      throw new Error('Missing required  parameter: didId');
    }
    requestPath = requestPath.replace('{didId}', didId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a DID by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} didId - DID ID
  * @param {} body - DID
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneNumber": "",
   "didPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneNumber": "",
   "didPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesDidsDidId = function putProvidersEdgesDidsDidId(didId, body){
    var requestPath = '/api/v2/telephony/providers/edges/dids/{didId}';
    var requestQuery = {};
    var requestBody;

    if(didId === undefined || didId === null){
      throw new Error('Missing required  parameter: didId');
    }
    requestPath = requestPath.replace('{didId}', didId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an outbound route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId = function getProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId(outboundRouteId, pageSize, pageNumber, name, sortBy){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update outbound route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  * @param {} body - OutboundRoute
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId = function putProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId(outboundRouteId, body){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Outbound Route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId = function deleteProvidersEdgesSitesSiteIdOutboundroutesOutboundrouteId(outboundRouteId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a listing of extension pools
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} number - Number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesExtensionpools = function getProvidersEdgesExtensionpools(pageSize, pageNumber, sortBy, number){
    var requestPath = '/api/v2/telephony/providers/edges/extensionpools';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["number"] = number;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new extension pool
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - ExtensionPool
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startNumber": "",
   "endNumber": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startNumber": "",
   "endNumber": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesExtensionpools = function postProvidersEdgesExtensionpools(body){
    var requestPath = '/api/v2/telephony/providers/edges/extensionpools';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get outbound route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesOutboundroutesOutboundrouteId = function getProvidersEdgesOutboundroutesOutboundrouteId(outboundRouteId){
    var requestPath = '/api/v2/telephony/providers/edges/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update outbound route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  * @param {} body - OutboundRoute
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesOutboundroutesOutboundrouteId = function putProvidersEdgesOutboundroutesOutboundrouteId(outboundRouteId, body){
    var requestPath = '/api/v2/telephony/providers/edges/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete Outbound Route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} outboundRouteId - Outbound route ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesOutboundroutesOutboundrouteId = function deleteProvidersEdgesOutboundroutesOutboundrouteId(outboundRouteId){
    var requestPath = '/api/v2/telephony/providers/edges/outboundroutes/{outboundRouteId}';
    var requestQuery = {};
    var requestBody;

    if(outboundRouteId === undefined || outboundRouteId === null){
      throw new Error('Missing required  parameter: outboundRouteId');
    }
    requestPath = requestPath.replace('{outboundRouteId}', outboundRouteId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Gets software update status information about any edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @example
  * 200 Response Example:
  * {
   "version": {
      "id": "",
      "name": "",
      "edgeVersion": "",
      "publishDate": "",
      "edgeUri": "",
      "latestRelease": true,
      "current": true,
      "selfUri": ""
   },
   "maxDownloadRate": 0,
   "downloadStartTime": "",
   "executeStartTime": "",
   "executeStopTime": "",
   "executeOnIdle": true,
   "status": "",
   "edgeUri": "",
   "current": true
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdSoftwareupdate = function getProvidersEdgesEdgeIdSoftwareupdate(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/softwareupdate';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Starts a software update for this edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {} body - Software update request
  * @example
  * Body Example:
  * {
   "version": {
      "name": "",
      "edgeVersion": "",
      "publishDate": "",
      "edgeUri": "",
      "latestRelease": true,
      "current": true
   },
   "maxDownloadRate": 0,
   "downloadStartTime": "",
   "executeStartTime": "",
   "executeStopTime": "",
   "executeOnIdle": true,
   "status": "",
   "edgeUri": "",
   "current": true
}
  * @example
  * 200 Response Example:
  * {
   "version": {
      "id": "",
      "name": "",
      "edgeVersion": "",
      "publishDate": "",
      "edgeUri": "",
      "latestRelease": true,
      "current": true,
      "selfUri": ""
   },
   "maxDownloadRate": 0,
   "downloadStartTime": "",
   "executeStartTime": "",
   "executeStopTime": "",
   "executeOnIdle": true,
   "status": "",
   "edgeUri": "",
   "current": true
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdSoftwareupdate = function postProvidersEdgesEdgeIdSoftwareupdate(edgeId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/softwareupdate';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Cancels any in-progress update for this edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesEdgeIdSoftwareupdate = function deleteProvidersEdgesEdgeIdSoftwareupdate(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/softwareupdate';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Trunk by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkId - Trunk ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkType": "",
   "edge": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "trunkBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunksTrunkId = function getProvidersEdgesTrunksTrunkId(trunkId){
    var requestPath = '/api/v2/telephony/providers/edges/trunks/{trunkId}';
    var requestQuery = {};
    var requestBody;

    if(trunkId === undefined || trunkId === null){
      throw new Error('Missing required  parameter: trunkId');
    }
    requestPath = requestPath.replace('{trunkId}', trunkId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Reboot an Edge
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {} body - Parameters for the edge reboot
  * @example
  * Body Example:
  * {
   "callDrainingWaitTimeSeconds": 0
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdReboot = function postProvidersEdgesEdgeIdReboot(edgeId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/reboot';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of Sites.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  * @param {string} name - Name
  * @param {string} locationid - Location Id
  * @param {boolean} managed - Filter by managed
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSites = function getProvidersEdgesSites(pageSize, pageNumber, sortBy, sortOrder, name, locationid, managed){
    var requestPath = '/api/v2/telephony/providers/edges/sites';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["name"] = name;
    requestQuery["location.id"] = locationid;
    requestQuery["managed"] = managed;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a Site.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Site
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "primarySites": [],
   "secondarySites": [],
   "primaryEdges": [],
   "secondaryEdges": [],
   "addresses": [],
   "edges": [],
   "edgeAutoUpdateConfig": {
      "timeZone": "",
      "rrule": "",
      "start": "",
      "end": ""
   },
   "location": {
      "name": "",
      "address": {},
      "addressVerified": true,
      "emergencyNumber": {},
      "state": "",
      "version": 0,
      "path": []
   },
   "managed": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "primarySites": [],
   "secondarySites": [],
   "primaryEdges": [],
   "secondaryEdges": [],
   "addresses": [],
   "edges": [],
   "edgeAutoUpdateConfig": {
      "timeZone": "",
      "rrule": "",
      "start": "",
      "end": ""
   },
   "location": {
      "id": "",
      "name": "",
      "address": {},
      "addressVerified": true,
      "emergencyNumber": {},
      "state": "",
      "version": 0,
      "path": [],
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesSites = function postProvidersEdgesSites(body){
    var requestPath = '/api/v2/telephony/providers/edges/sites';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Phone instance template based on a Phone Base Settings object. This object can then be modified and saved as a new Phone instance
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneBaseSettingsId - The id of a Phone Base Settings object upon which to base this Phone
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "secondaryStatus": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "userAgentInfo": {
      "firmwareVersion": "",
      "manufacturer": "",
      "model": ""
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonesTemplate = function getProvidersEdgesPhonesTemplate(phoneBaseSettingsId){
    var requestPath = '/api/v2/telephony/providers/edges/phones/template';
    var requestQuery = {};
    var requestBody;

    if(phoneBaseSettingsId === undefined || phoneBaseSettingsId === null){
      throw new Error('Missing required  parameter: phoneBaseSettingsId');
    }
    requestQuery["phoneBaseSettingsId"] = phoneBaseSettingsId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of certificate authorities.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesCertificateauthorities = function getProvidersEdgesCertificateauthorities(){
    var requestPath = '/api/v2/telephony/providers/edges/certificateauthorities';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a certificate authority.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - CertificateAuthority
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "certificate": "",
   "type": "",
   "services": [],
   "certificateDetails": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "certificate": "",
   "type": "",
   "services": [],
   "certificateDetails": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesCertificateauthorities = function postProvidersEdgesCertificateauthorities(body){
    var requestPath = '/api/v2/telephony/providers/edges/certificateauthorities';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Request that the specified fileIds be uploaded from the Edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} jobId - Job ID
  * @param {} body - Log upload request
  * @example
  * Body Example:
  * {
   "fileIds": []
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdLogsJobsJobIdUpload = function postProvidersEdgesEdgeIdLogsJobsJobIdUpload(edgeId, jobId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logs/jobs/{jobId}/upload';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(jobId === undefined || jobId === null){
      throw new Error('Missing required  parameter: jobId');
    }
    requestPath = requestPath.replace('{jobId}', jobId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the edge version report.
  * @description The report will not have consistent data about the edge version(s) until all edges have been reset.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "oldestVersion": {
      "softwareVersion": ""
   },
   "newestVersion": {
      "softwareVersion": ""
   }
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeversionreport = function getProvidersEdgesEdgeversionreport(){
    var requestPath = '/api/v2/telephony/providers/edges/edgeversionreport';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Reboot a Phone
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneId - Phone Id
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesPhonesPhoneIdReboot = function postProvidersEdgesPhonesPhoneIdReboot(phoneId){
    var requestPath = '/api/v2/telephony/providers/edges/phones/{phoneId}/reboot';
    var requestQuery = {};
    var requestBody;

    if(phoneId === undefined || phoneId === null){
      throw new Error('Missing required  parameter: phoneId');
    }
    requestPath = requestPath.replace('{phoneId}', phoneId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the edge metrics.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge Id
  * @example
  * 200 Response Example:
  * {
   "edge": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "eventTime": "",
   "upTimeMsec": 0,
   "processors": [],
   "memory": [],
   "disks": [],
   "subsystems": [],
   "networks": []
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdMetrics = function getProvidersEdgesEdgeIdMetrics(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/metrics';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the metrics for a list of edges.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeIds - Comma separated list of Edge Id's
  * @example
  * 200 Response Example:
  * [
 {
  "edge": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "eventTime": "",
  "upTimeMsec": 0,
  "processors": [],
  "memory": [],
  "disks": [],
  "subsystems": [],
  "networks": []
 }
]
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesMetrics = function getProvidersEdgesMetrics(edgeIds){
    var requestPath = '/api/v2/telephony/providers/edges/metrics';
    var requestQuery = {};
    var requestBody;

    if(edgeIds === undefined || edgeIds === null){
      throw new Error('Missing required  parameter: edgeIds');
    }
    requestQuery["edgeIds"] = edgeIds;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Trunk Base Settings object by ID
  * @description Managed properties will not be returned unless the user is assigned the managed:all:all permission.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkBaseSettingsId - Trunk Base ID
  * @param {boolean} ignoreHidden - Set this to true to not receive trunk properties that are meant to be hidden or for internal system usage only.
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunkbasesettingsTrunkbasesettingsId = function getProvidersEdgesTrunkbasesettingsTrunkbasesettingsId(trunkBaseSettingsId, ignoreHidden){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings/{trunkBaseSettingsId}';
    var requestQuery = {};
    var requestBody;

    if(trunkBaseSettingsId === undefined || trunkBaseSettingsId === null){
      throw new Error('Missing required  parameter: trunkBaseSettingsId');
    }
    requestPath = requestPath.replace('{trunkBaseSettingsId}', trunkBaseSettingsId);
    requestQuery["ignoreHidden"] = ignoreHidden;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a Trunk Base Settings object by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkBaseSettingsId - Trunk Base ID
  * @param {} body - Trunk base settings
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "trunkMetabase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "trunkType": "",
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesTrunkbasesettingsTrunkbasesettingsId = function putProvidersEdgesTrunkbasesettingsTrunkbasesettingsId(trunkBaseSettingsId, body){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings/{trunkBaseSettingsId}';
    var requestQuery = {};
    var requestBody;

    if(trunkBaseSettingsId === undefined || trunkBaseSettingsId === null){
      throw new Error('Missing required  parameter: trunkBaseSettingsId');
    }
    requestPath = requestPath.replace('{trunkBaseSettingsId}', trunkBaseSettingsId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Trunk Base Settings object by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} trunkBaseSettingsId - Trunk Base ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesTrunkbasesettingsTrunkbasesettingsId = function deleteProvidersEdgesTrunkbasesettingsTrunkbasesettingsId(trunkBaseSettingsId){
    var requestPath = '/api/v2/telephony/providers/edges/trunkbasesettings/{trunkBaseSettingsId}';
    var requestQuery = {};
    var requestBody;

    if(trunkBaseSettingsId === undefined || trunkBaseSettingsId === null){
      throw new Error('Missing required  parameter: trunkBaseSettingsId');
    }
    requestPath = requestPath.replace('{trunkBaseSettingsId}', trunkBaseSettingsId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Site by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "primarySites": [],
   "secondarySites": [],
   "primaryEdges": [],
   "secondaryEdges": [],
   "addresses": [],
   "edges": [],
   "edgeAutoUpdateConfig": {
      "timeZone": "",
      "rrule": "",
      "start": "",
      "end": ""
   },
   "location": {
      "id": "",
      "name": "",
      "address": {},
      "addressVerified": true,
      "emergencyNumber": {},
      "state": "",
      "version": 0,
      "path": [],
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteId = function getProvidersEdgesSitesSiteId(siteId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a Site by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {} body - Site
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "primarySites": [],
   "secondarySites": [],
   "primaryEdges": [],
   "secondaryEdges": [],
   "addresses": [],
   "edges": [],
   "edgeAutoUpdateConfig": {
      "timeZone": "",
      "rrule": "",
      "start": "",
      "end": ""
   },
   "location": {
      "name": "",
      "address": {},
      "addressVerified": true,
      "emergencyNumber": {},
      "state": "",
      "version": 0,
      "path": []
   },
   "managed": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "primarySites": [],
   "secondarySites": [],
   "primaryEdges": [],
   "secondaryEdges": [],
   "addresses": [],
   "edges": [],
   "edgeAutoUpdateConfig": {
      "timeZone": "",
      "rrule": "",
      "start": "",
      "end": ""
   },
   "location": {
      "id": "",
      "name": "",
      "address": {},
      "addressVerified": true,
      "emergencyNumber": {},
      "state": "",
      "version": 0,
      "path": [],
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesSitesSiteId = function putProvidersEdgesSitesSiteId(siteId, body){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Site by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesSitesSiteId = function deleteProvidersEdgesSitesSiteId(siteId){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an extension pool by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} extensionPoolId - Extension pool ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startNumber": "",
   "endNumber": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesExtensionpoolsExtensionpoolId = function getProvidersEdgesExtensionpoolsExtensionpoolId(extensionPoolId){
    var requestPath = '/api/v2/telephony/providers/edges/extensionpools/{extensionPoolId}';
    var requestQuery = {};
    var requestBody;

    if(extensionPoolId === undefined || extensionPoolId === null){
      throw new Error('Missing required  parameter: extensionPoolId');
    }
    requestPath = requestPath.replace('{extensionPoolId}', extensionPoolId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an extension pool by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} extensionPoolId - Extension pool ID
  * @param {} body - ExtensionPool
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startNumber": "",
   "endNumber": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "startNumber": "",
   "endNumber": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesExtensionpoolsExtensionpoolId = function putProvidersEdgesExtensionpoolsExtensionpoolId(extensionPoolId, body){
    var requestPath = '/api/v2/telephony/providers/edges/extensionpools/{extensionPoolId}';
    var requestQuery = {};
    var requestBody;

    if(extensionPoolId === undefined || extensionPoolId === null){
      throw new Error('Missing required  parameter: extensionPoolId');
    }
    requestPath = requestPath.replace('{extensionPoolId}', extensionPoolId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an extension pool by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} extensionPoolId - Extension pool ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesExtensionpoolsExtensionpoolId = function deleteProvidersEdgesExtensionpoolsExtensionpoolId(extensionPoolId){
    var requestPath = '/api/v2/telephony/providers/edges/extensionpools/{extensionPoolId}';
    var requestQuery = {};
    var requestBody;

    if(extensionPoolId === undefined || extensionPoolId === null){
      throw new Error('Missing required  parameter: extensionPoolId');
    }
    requestPath = requestPath.replace('{extensionPoolId}', extensionPoolId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of Phone Base Settings objects
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} sortBy - Value by which to sort
  * @param {string} sortOrder - Sort order
  * @param {string} name - Name
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonebasesettings = function getProvidersEdgesPhonebasesettings(pageNumber, pageSize, sortBy, sortOrder, name){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["name"] = name;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a new Phone Base Settings object
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - Phone base settings
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesPhonebasesettings = function postProvidersEdgesPhonebasesettings(body){
    var requestPath = '/api/v2/telephony/providers/edges/phonebasesettings';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Lists available schema categories (Deprecated)
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getSchemasEdgesVnext = function getSchemasEdgesVnext(pageSize, pageNumber){
    var requestPath = '/api/v2/configuration/schemas/edges/vnext';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a listing of DIDs
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortBy - Sort by
  * @param {string} sortOrder - Sort order
  * @param {string} phoneNumber - Filter by phoneNumber
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesDids = function getProvidersEdgesDids(pageSize, pageNumber, sortBy, sortOrder, phoneNumber){
    var requestPath = '/api/v2/telephony/providers/edges/dids';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["phoneNumber"] = phoneNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Unpair an Edge
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge Id
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgeIdUnpair = function postProvidersEdgesEdgeIdUnpair(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/unpair';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of available trunks.
  * @description Trunks are created by assigning trunk base settings to an Edge or Edge Group.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageNumber - Page number
  * @param {integer} pageSize - Page size
  * @param {string} sortBy - Value by which to sort
  * @param {string} sortOrder - Sort order
  * @param {string} edgeid - Filter by Edge Ids
  * @param {string} trunkBaseid - Filter by Trunk Base Ids
  * @param {string} trunkType - Filter by a Trunk type
  EXTERNAL,
  PHONE,
  EDGE,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesTrunks = function getProvidersEdgesTrunks(pageNumber, pageSize, sortBy, sortOrder, edgeid, trunkBaseid, trunkType){
    var requestPath = '/api/v2/telephony/providers/edges/trunks';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageNumber"] = pageNumber;
    requestQuery["pageSize"] = pageSize;
    requestQuery["sortBy"] = sortBy;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["edge.id"] = edgeid;
    requestQuery["trunkBase.id"] = trunkBaseid;
    requestQuery["trunkType"] = trunkType;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of Lines
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} sortBy - Value by which to sort
  * @param {array} expand - Fields to expand in the response, comma-separated Valid Values: properties, site, edgeGroup, primaryEdge, secondaryEdge, edges, assignedUser
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesLines = function getProvidersEdgesLines(pageSize, pageNumber, name, sortBy, expand){
    var requestPath = '/api/v2/telephony/providers/edges/lines';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an edge logical interface
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} interfaceId - Interface ID
  * @param {array} expand - Field to expand in the response Valid Values: externalTrunkBaseAssignments, phoneTrunkBaseAssignments
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "edgeAssignedId": "",
   "friendlyName": "",
   "vlanTagId": 0,
   "hardwareAddress": "",
   "physicalAdapterId": "",
   "ifStatus": "",
   "interfaceType": "",
   "routes": [],
   "addresses": [],
   "ipv4Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "ipv6Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "currentState": "",
   "lastModifiedUserId": "",
   "lastModifiedCorrelationId": "",
   "commandResponses": [],
   "inheritPhoneTrunkBasesIPv4": true,
   "inheritPhoneTrunkBasesIPv6": true,
   "useForInternalEdgeCommunication": true,
   "externalTrunkBaseAssignments": [],
   "phoneTrunkBaseAssignments": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdLogicalinterfacesInterfaceId = function getProvidersEdgesEdgeIdLogicalinterfacesInterfaceId(edgeId, interfaceId, expand){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logicalinterfaces/{interfaceId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(interfaceId === undefined || interfaceId === null){
      throw new Error('Missing required  parameter: interfaceId');
    }
    requestPath = requestPath.replace('{interfaceId}', interfaceId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an edge logical interface.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} interfaceId - Interface ID
  * @param {} body - Logical interface
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "edgeAssignedId": "",
   "friendlyName": "",
   "vlanTagId": 0,
   "hardwareAddress": "",
   "physicalAdapterId": "",
   "ifStatus": "",
   "routes": [],
   "addresses": [],
   "ipv4Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true
   },
   "ipv6Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true
   },
   "currentState": "",
   "lastModifiedUserId": "",
   "lastModifiedCorrelationId": "",
   "commandResponses": [],
   "inheritPhoneTrunkBasesIPv4": true,
   "inheritPhoneTrunkBasesIPv6": true,
   "useForInternalEdgeCommunication": true,
   "externalTrunkBaseAssignments": [],
   "phoneTrunkBaseAssignments": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "edgeAssignedId": "",
   "friendlyName": "",
   "vlanTagId": 0,
   "hardwareAddress": "",
   "physicalAdapterId": "",
   "ifStatus": "",
   "interfaceType": "",
   "routes": [],
   "addresses": [],
   "ipv4Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "ipv6Capabilities": {
      "enabled": true,
      "dhcp": true,
      "metric": 0,
      "autoMetric": true,
      "supportsMetric": true
   },
   "currentState": "",
   "lastModifiedUserId": "",
   "lastModifiedCorrelationId": "",
   "commandResponses": [],
   "inheritPhoneTrunkBasesIPv4": true,
   "inheritPhoneTrunkBasesIPv6": true,
   "useForInternalEdgeCommunication": true,
   "externalTrunkBaseAssignments": [],
   "phoneTrunkBaseAssignments": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesEdgeIdLogicalinterfacesInterfaceId = function putProvidersEdgesEdgeIdLogicalinterfacesInterfaceId(edgeId, interfaceId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logicalinterfaces/{interfaceId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(interfaceId === undefined || interfaceId === null){
      throw new Error('Missing required  parameter: interfaceId');
    }
    requestPath = requestPath.replace('{interfaceId}', interfaceId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete an edge logical interface
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} interfaceId - Interface ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesEdgeIdLogicalinterfacesInterfaceId = function deleteProvidersEdgesEdgeIdLogicalinterfacesInterfaceId(edgeId, interfaceId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logicalinterfaces/{interfaceId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(interfaceId === undefined || interfaceId === null){
      throw new Error('Missing required  parameter: interfaceId');
    }
    requestPath = requestPath.replace('{interfaceId}', interfaceId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an extension by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} extensionId - Extension ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "number": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "extensionPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesExtensionsExtensionId = function getProvidersEdgesExtensionsExtensionId(extensionId){
    var requestPath = '/api/v2/telephony/providers/edges/extensions/{extensionId}';
    var requestQuery = {};
    var requestBody;

    if(extensionId === undefined || extensionId === null){
      throw new Error('Missing required  parameter: extensionId');
    }
    requestPath = requestPath.replace('{extensionId}', extensionId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an extension by ID.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} extensionId - Extension ID
  * @param {} body - Extension
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "number": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "extensionPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "number": "",
   "owner": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "extensionPool": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "ownerType": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesExtensionsExtensionId = function putProvidersEdgesExtensionsExtensionId(extensionId, body){
    var requestPath = '/api/v2/telephony/providers/edges/extensions/{extensionId}';
    var requestQuery = {};
    var requestBody;

    if(extensionId === undefined || extensionId === null){
      throw new Error('Missing required  parameter: extensionId');
    }
    requestPath = requestPath.replace('{extensionId}', extensionId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a json schema (Deprecated)
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} schemaCategory - Schema category
  * @param {string} schemaType - Schema type
  * @param {string} schemaId - Schema ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "thirdPartyOrgId": "",
   "thirdPartyOrgName": "",
   "thirdPartyURI": "",
   "domain": "",
   "version": 0,
   "state": "",
   "defaultSiteId": "",
   "deletable": true,
   "selfUri": "",
   "features": {}
}
  */
TelephonyProvidersEdgeApi.prototype.getSchemasEdgesVnextSchemacategorySchematypeSchemaId = function getSchemasEdgesVnextSchemacategorySchematypeSchemaId(schemaCategory, schemaType, schemaId){
    var requestPath = '/api/v2/configuration/schemas/edges/vnext/{schemaCategory}/{schemaType}/{schemaId}';
    var requestQuery = {};
    var requestBody;

    if(schemaCategory === undefined || schemaCategory === null){
      throw new Error('Missing required  parameter: schemaCategory');
    }
    requestPath = requestPath.replace('{schemaCategory}', schemaCategory);
    if(schemaType === undefined || schemaType === null){
      throw new Error('Missing required  parameter: schemaType');
    }
    requestPath = requestPath.replace('{schemaType}', schemaType);
    if(schemaId === undefined || schemaId === null){
      throw new Error('Missing required  parameter: schemaId');
    }
    requestPath = requestPath.replace('{schemaId}', schemaId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get metadata for a schema (Deprecated)
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} schemaCategory - Schema category
  * @param {string} schemaType - Schema type
  * @param {string} schemaId - Schema ID
  * @param {string} extensionType - extension
  * @param {string} metadataId - Metadata ID
  * @param {string} type - Type
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "thirdPartyOrgId": "",
   "thirdPartyOrgName": "",
   "thirdPartyURI": "",
   "domain": "",
   "version": 0,
   "state": "",
   "defaultSiteId": "",
   "deletable": true,
   "selfUri": "",
   "features": {}
}
  */
TelephonyProvidersEdgeApi.prototype.getSchemasEdgesVnextSchemacategorySchematypeSchemaIdExtensiontypeMetadataId = function getSchemasEdgesVnextSchemacategorySchematypeSchemaIdExtensiontypeMetadataId(schemaCategory, schemaType, schemaId, extensionType, metadataId, type){
    var requestPath = '/api/v2/configuration/schemas/edges/vnext/{schemaCategory}/{schemaType}/{schemaId}/{extensionType}/{metadataId}';
    var requestQuery = {};
    var requestBody;

    if(schemaCategory === undefined || schemaCategory === null){
      throw new Error('Missing required  parameter: schemaCategory');
    }
    requestPath = requestPath.replace('{schemaCategory}', schemaCategory);
    if(schemaType === undefined || schemaType === null){
      throw new Error('Missing required  parameter: schemaType');
    }
    requestPath = requestPath.replace('{schemaType}', schemaType);
    if(schemaId === undefined || schemaId === null){
      throw new Error('Missing required  parameter: schemaId');
    }
    requestPath = requestPath.replace('{schemaId}', schemaId);
    if(extensionType === undefined || extensionType === null){
      throw new Error('Missing required  parameter: extensionType');
    }
    requestPath = requestPath.replace('{extensionType}', extensionType);
    if(metadataId === undefined || metadataId === null){
      throw new Error('Missing required  parameter: metadataId');
    }
    requestPath = requestPath.replace('{metadataId}', metadataId);
    requestQuery["type"] = type;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get endpoints
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEndpoints = function getProvidersEdgesEndpoints(pageSize, pageNumber, name, sortBy){
    var requestPath = '/api/v2/telephony/providers/edges/endpoints';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create endpoint
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - EndpointTemplate
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "count": 0,
   "properties": {},
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dids": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "count": 0,
   "properties": {},
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "enabled": true,
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "dids": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEndpoints = function postProvidersEdgesEndpoints(body){
    var requestPath = '/api/v2/telephony/providers/edges/endpoints';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a Phone by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneId - Phone ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "secondaryStatus": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "userAgentInfo": {
      "firmwareVersion": "",
      "manufacturer": "",
      "model": ""
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesPhonesPhoneId = function getProvidersEdgesPhonesPhoneId(phoneId){
    var requestPath = '/api/v2/telephony/providers/edges/phones/{phoneId}';
    var requestQuery = {};
    var requestBody;

    if(phoneId === undefined || phoneId === null){
      throw new Error('Missing required  parameter: phoneId');
    }
    requestPath = requestPath.replace('{phoneId}', phoneId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a Phone by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneId - Phone ID
  * @param {} body - Phone
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {}
   },
   "secondaryStatus": {
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {}
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0
   },
   "secondaryEdge": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0
   }
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "site": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lineBaseSettings": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "phoneMetaBase": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "lines": [],
   "status": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "secondaryStatus": {
      "id": "",
      "name": "",
      "operationalStatus": "",
      "edgesStatus": "",
      "eventCreationTime": "",
      "provision": {},
      "lineStatuses": [],
      "phoneAssignmentToEdgeType": "",
      "edge": {},
      "selfUri": ""
   },
   "userAgentInfo": {
      "firmwareVersion": "",
      "manufacturer": "",
      "model": ""
   },
   "properties": {},
   "capabilities": {
      "provisions": true,
      "registers": true,
      "dualRegisters": true,
      "hardwareIdType": "",
      "allowReboot": true,
      "noRebalance": true
   },
   "webRtcUser": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "primaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "secondaryEdge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesPhonesPhoneId = function putProvidersEdgesPhonesPhoneId(phoneId, body){
    var requestPath = '/api/v2/telephony/providers/edges/phones/{phoneId}';
    var requestQuery = {};
    var requestBody;

    if(phoneId === undefined || phoneId === null){
      throw new Error('Missing required  parameter: phoneId');
    }
    requestPath = requestPath.replace('{phoneId}', phoneId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a Phone by ID
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} phoneId - Phone ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesPhonesPhoneId = function deleteProvidersEdgesPhonesPhoneId(phoneId){
    var requestPath = '/api/v2/telephony/providers/edges/phones/{phoneId}';
    var requestQuery = {};
    var requestBody;

    if(phoneId === undefined || phoneId === null){
      throw new Error('Missing required  parameter: phoneId');
    }
    requestPath = requestPath.replace('{phoneId}', phoneId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {array} expand - Fields to expand in the response, comma-separated Valid Values: site
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "interfaces": [],
   "make": "",
   "model": "",
   "apiVersion": "",
   "softwareVersion": "",
   "softwareVersionTimestamp": "",
   "softwareVersionPlatform": "",
   "softwareVersionConfiguration": "",
   "fullSoftwareVersion": "",
   "pairingId": "",
   "fingerprint": "",
   "fingerprintHint": "",
   "currentVersion": "",
   "stagedVersion": "",
   "patch": "",
   "statusCode": "",
   "edgeGroup": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": [],
      "selfUri": ""
   },
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "softwareStatus": {
      "version": {},
      "maxDownloadRate": 0,
      "downloadStartTime": "",
      "executeStartTime": "",
      "executeStopTime": "",
      "executeOnIdle": true,
      "status": "",
      "edgeUri": "",
      "current": true
   },
   "onlineStatus": "",
   "serialNumber": "",
   "physicalEdge": true,
   "managed": true,
   "edgeDeploymentType": "",
   "callDrainingState": "",
   "conversationCount": 0,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeId = function getProvidersEdgesEdgeId(edgeId, expand){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {} body - Edge
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "interfaces": [],
   "make": "",
   "model": "",
   "apiVersion": "",
   "softwareVersion": "",
   "softwareVersionTimestamp": "",
   "softwareVersionPlatform": "",
   "softwareVersionConfiguration": "",
   "fullSoftwareVersion": "",
   "pairingId": "",
   "fingerprint": "",
   "fingerprintHint": "",
   "currentVersion": "",
   "stagedVersion": "",
   "patch": "",
   "statusCode": "",
   "edgeGroup": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": []
   },
   "site": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true
   },
   "softwareStatus": {
      "version": {},
      "maxDownloadRate": 0,
      "downloadStartTime": "",
      "executeStartTime": "",
      "executeStopTime": "",
      "executeOnIdle": true,
      "status": "",
      "edgeUri": "",
      "current": true
   },
   "onlineStatus": "",
   "serialNumber": "",
   "physicalEdge": true,
   "managed": true,
   "edgeDeploymentType": "",
   "callDrainingState": "",
   "conversationCount": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "interfaces": [],
   "make": "",
   "model": "",
   "apiVersion": "",
   "softwareVersion": "",
   "softwareVersionTimestamp": "",
   "softwareVersionPlatform": "",
   "softwareVersionConfiguration": "",
   "fullSoftwareVersion": "",
   "pairingId": "",
   "fingerprint": "",
   "fingerprintHint": "",
   "currentVersion": "",
   "stagedVersion": "",
   "patch": "",
   "statusCode": "",
   "edgeGroup": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": [],
      "selfUri": ""
   },
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "softwareStatus": {
      "version": {},
      "maxDownloadRate": 0,
      "downloadStartTime": "",
      "executeStartTime": "",
      "executeStopTime": "",
      "executeOnIdle": true,
      "status": "",
      "edgeUri": "",
      "current": true
   },
   "onlineStatus": "",
   "serialNumber": "",
   "physicalEdge": true,
   "managed": true,
   "edgeDeploymentType": "",
   "callDrainingState": "",
   "conversationCount": 0,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesEdgeId = function putProvidersEdgesEdgeId(edgeId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  */
TelephonyProvidersEdgeApi.prototype.deleteProvidersEdgesEdgeId = function deleteProvidersEdgesEdgeId(edgeId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of edge groups.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @param {boolean} managed - Filter by managed
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgegroups = function getProvidersEdgesEdgegroups(pageSize, pageNumber, name, sortBy, managed){
    var requestPath = '/api/v2/telephony/providers/edges/edgegroups';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    requestQuery["managed"] = managed;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create an edge group.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {} body - EdgeGroup
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "managed": true,
   "edgeTrunkBaseAssignment": {
      "family": 0,
      "trunkBase": {}
   },
   "phoneTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "managed": true,
   "edgeTrunkBaseAssignment": {
      "family": 0,
      "trunkBase": {}
   },
   "phoneTrunkBases": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesEdgegroups = function postProvidersEdgesEdgegroups(body){
    var requestPath = '/api/v2/telephony/providers/edges/edgegroups';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get an Edge logs job.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} jobId - Job ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "files": [],
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdLogsJobsJobId = function getProvidersEdgesEdgeIdLogsJobsJobId(edgeId, jobId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/logs/jobs/{jobId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(jobId === undefined || jobId === null){
      throw new Error('Missing required  parameter: jobId');
    }
    requestPath = requestPath.replace('{jobId}', jobId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get edge physical interface.
  * @description Retrieve a physical interface from a specific edge.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} interfaceId - Interface ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "edgeUri": "",
   "friendlyName": "",
   "hardwareAddress": "",
   "portLabel": "",
   "physicalCapabilities": {
      "vlan": true,
      "team": true
   },
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdPhysicalinterfacesInterfaceId = function getProvidersEdgesEdgeIdPhysicalinterfacesInterfaceId(edgeId, interfaceId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/physicalinterfaces/{interfaceId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(interfaceId === undefined || interfaceId === null){
      throw new Error('Missing required  parameter: interfaceId');
    }
    requestPath = requestPath.replace('{interfaceId}', interfaceId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get line
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} lineId - Line ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "edge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": [],
      "selfUri": ""
   },
   "lineType": "",
   "endpoint": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "count": 0,
      "properties": {},
      "schema": {},
      "enabled": true,
      "site": {},
      "dids": [],
      "selfUri": ""
   },
   "ipAddress": "",
   "logicalInterfaceId": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesEdgeIdLinesLineId = function getProvidersEdgesEdgeIdLinesLineId(edgeId, lineId){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/lines/{lineId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(lineId === undefined || lineId === null){
      throw new Error('Missing required  parameter: lineId');
    }
    requestPath = requestPath.replace('{lineId}', lineId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a line.
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} edgeId - Edge ID
  * @param {string} lineId - Line ID
  * @param {} body - Line
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "edge": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0
   },
   "edgeGroup": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": []
   },
   "lineType": "",
   "endpoint": {
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "count": 0,
      "properties": {},
      "schema": {},
      "enabled": true,
      "site": {},
      "dids": []
   },
   "ipAddress": "",
   "logicalInterfaceId": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "schema": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "properties": {},
   "edge": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "interfaces": [],
      "make": "",
      "model": "",
      "apiVersion": "",
      "softwareVersion": "",
      "softwareVersionTimestamp": "",
      "softwareVersionPlatform": "",
      "softwareVersionConfiguration": "",
      "fullSoftwareVersion": "",
      "pairingId": "",
      "fingerprint": "",
      "fingerprintHint": "",
      "currentVersion": "",
      "stagedVersion": "",
      "patch": "",
      "statusCode": "",
      "edgeGroup": {},
      "site": {},
      "softwareStatus": {},
      "onlineStatus": "",
      "serialNumber": "",
      "physicalEdge": true,
      "managed": true,
      "edgeDeploymentType": "",
      "callDrainingState": "",
      "conversationCount": 0,
      "selfUri": ""
   },
   "edgeGroup": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "managed": true,
      "edgeTrunkBaseAssignment": {},
      "phoneTrunkBases": [],
      "selfUri": ""
   },
   "lineType": "",
   "endpoint": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "count": 0,
      "properties": {},
      "schema": {},
      "enabled": true,
      "site": {},
      "dids": [],
      "selfUri": ""
   },
   "ipAddress": "",
   "logicalInterfaceId": "",
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.putProvidersEdgesEdgeIdLinesLineId = function putProvidersEdgesEdgeIdLinesLineId(edgeId, lineId, body){
    var requestPath = '/api/v2/telephony/providers/edges/{edgeId}/lines/{lineId}';
    var requestQuery = {};
    var requestBody;

    if(edgeId === undefined || edgeId === null){
      throw new Error('Missing required  parameter: edgeId');
    }
    requestPath = requestPath.replace('{edgeId}', edgeId);
    if(lineId === undefined || lineId === null){
      throw new Error('Missing required  parameter: lineId');
    }
    requestPath = requestPath.replace('{lineId}', lineId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get outbound routes
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} name - Name
  * @param {string} sortBy - Sort by
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
TelephonyProvidersEdgeApi.prototype.getProvidersEdgesSitesSiteIdOutboundroutes = function getProvidersEdgesSitesSiteIdOutboundroutes(siteId, pageSize, pageNumber, name, sortBy){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/outboundroutes';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["name"] = name;
    requestQuery["sortBy"] = sortBy;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create outbound route
  * @memberOf TelephonyProvidersEdgeApi
  * @instance
  * @param {string} siteId - Site ID
  * @param {} body - OutboundRoute
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": []
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "classificationTypes": [],
   "enabled": true,
   "distribution": "",
   "externalTrunkBases": [],
   "site": {
      "id": "",
      "name": "",
      "description": "",
      "version": 0,
      "dateCreated": "",
      "dateModified": "",
      "modifiedBy": "",
      "createdBy": "",
      "state": "",
      "modifiedByApp": "",
      "createdByApp": "",
      "primarySites": [],
      "secondarySites": [],
      "primaryEdges": [],
      "secondaryEdges": [],
      "addresses": [],
      "edges": [],
      "edgeAutoUpdateConfig": {},
      "location": {},
      "managed": true,
      "selfUri": ""
   },
   "managed": true,
   "selfUri": ""
}
  */
TelephonyProvidersEdgeApi.prototype.postProvidersEdgesSitesSiteIdOutboundroutes = function postProvidersEdgesSitesSiteIdOutboundroutes(siteId, body){
    var requestPath = '/api/v2/telephony/providers/edges/sites/{siteId}/outboundroutes';
    var requestQuery = {};
    var requestBody;

    if(siteId === undefined || siteId === null){
      throw new Error('Missing required  parameter: siteId');
    }
    requestPath = requestPath.replace('{siteId}', siteId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = TelephonyProvidersEdgeApi;

},{}],29:[function(require,module,exports){
/*jshint -W069 */
/**
* @class TokensApi
* @example
* var api = new purecloud.platform.TokensApi(pureCloudSession);
*/
function TokensApi(session) {
    if(!(this instanceof TokensApi)) {
        return new TokensApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('TokensApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Delete  auth token used to make the request.
  * @memberOf TokensApi
  * @instance
  */
TokensApi.prototype.deleteMe = function deleteMe(){
    var requestPath = '/api/v2/tokens/me';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};


module.exports = TokensApi;

},{}],30:[function(require,module,exports){
/*jshint -W069 */
/**
* @class UserRecordingsApi
* @example
* var api = new purecloud.platform.UserRecordingsApi(pureCloudSession);
*/
function UserRecordingsApi(session) {
    if(!(this instanceof UserRecordingsApi)) {
        return new UserRecordingsApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('UserRecordingsApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Download a user recording.
  * @memberOf UserRecordingsApi
  * @instance
  * @param {string} recordingId - User Recording ID
  * @param {string} formatId - The desired media format.
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @example
  * 200 Response Example:
  * {
   "contentLocationUri": "",
   "imageUri": "",
   "thumbnails": []
}
  */
UserRecordingsApi.prototype.getRecordingIdMedia = function getRecordingIdMedia(recordingId, formatId){
    var requestPath = '/api/v2/userrecordings/{recordingId}/media';
    var requestQuery = {};
    var requestBody;

    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    requestQuery["formatId"] = formatId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get user recording summary
  * @memberOf UserRecordingsApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "readCount": 0,
   "unreadCount": 0,
   "totalCount": 0
}
  */
UserRecordingsApi.prototype.getSummary = function getSummary(){
    var requestPath = '/api/v2/userrecordings/summary';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user recording.
  * @memberOf UserRecordingsApi
  * @instance
  * @param {string} recordingId - User Recording ID
  * @param {array} expand - Which fields, if any, to expand. Valid Values: conversation
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "contentLength": 0,
   "durationMilliseconds": 0,
   "thumbnails": [],
   "read": true,
   "selfUri": ""
}
  */
UserRecordingsApi.prototype.getRecordingId = function getRecordingId(recordingId, expand){
    var requestPath = '/api/v2/userrecordings/{recordingId}';
    var requestQuery = {};
    var requestBody;

    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a user recording.
  * @memberOf UserRecordingsApi
  * @instance
  * @param {string} recordingId - User Recording ID
  * @param {} body - UserRecording
  * @param {array} expand - Which fields, if any, to expand. Valid Values: conversation
  * @example
  * Body Example:
  * {
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "conversation": {
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": ""
   },
   "contentLength": 0,
   "durationMilliseconds": 0,
   "thumbnails": [],
   "read": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "dateCreated": "",
   "dateModified": "",
   "contentUri": "",
   "workspace": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "createdBy": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "contentLength": 0,
   "durationMilliseconds": 0,
   "thumbnails": [],
   "read": true,
   "selfUri": ""
}
  */
UserRecordingsApi.prototype.putRecordingId = function putRecordingId(recordingId, body, expand){
    var requestPath = '/api/v2/userrecordings/{recordingId}';
    var requestQuery = {};
    var requestBody;

    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    requestQuery["expand"] = expand;
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a user recording.
  * @memberOf UserRecordingsApi
  * @instance
  * @param {string} recordingId - User Recording ID
  */
UserRecordingsApi.prototype.deleteRecordingId = function deleteRecordingId(recordingId){
    var requestPath = '/api/v2/userrecordings/{recordingId}';
    var requestQuery = {};
    var requestBody;

    if(recordingId === undefined || recordingId === null){
      throw new Error('Missing required  parameter: recordingId');
    }
    requestPath = requestPath.replace('{recordingId}', recordingId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of user recordings.
  * @memberOf UserRecordingsApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {array} expand - Which fields, if any, to expand. Valid Values: conversation
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UserRecordingsApi.prototype.getUserrecordings = function getUserrecordings(pageSize, pageNumber, expand){
    var requestPath = '/api/v2/userrecordings';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = UserRecordingsApi;

},{}],31:[function(require,module,exports){
/*jshint -W069 */
/**
* @class UsersApi
* @example
* var api = new purecloud.platform.UsersApi(pureCloudSession);
*/
function UsersApi(session) {
    if(!(this instanceof UsersApi)) {
        return new UsersApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('UsersApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get user.
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "chat": {
      "jabberId": ""
   },
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "images": [],
   "version": 0,
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   },
   "presence": {
      "id": "",
      "name": "",
      "source": "",
      "primary": true,
      "presenceDefinition": {},
      "message": "",
      "modifiedDate": "",
      "selfUri": ""
   },
   "conversationSummary": {
      "userId": "",
      "call": {},
      "callback": {},
      "email": {},
      "chat": {},
      "socialExpression": {},
      "video": {}
   },
   "outOfOffice": {
      "id": "",
      "name": "",
      "user": {},
      "startDate": "",
      "endDate": "",
      "active": true,
      "selfUri": ""
   },
   "geolocation": {
      "id": "",
      "name": "",
      "type": "",
      "primary": true,
      "latitude": {},
      "longitude": {},
      "country": "",
      "region": "",
      "city": "",
      "selfUri": ""
   },
   "station": {
      "associatedStation": {},
      "effectiveStation": {},
      "defaultStation": {},
      "lastAssociatedStation": {}
   },
   "authorization": {
      "roles": [],
      "permissions": [],
      "permissionPolicies": []
   },
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
}
  */
UsersApi.prototype.getUserId = function getUserId(userId, expand){
    var requestPath = '/api/v2/users/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  */
UsersApi.prototype.deleteUserId = function deleteUserId(userId){
    var requestPath = '/api/v2/users/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - User
  * @example
  * Body Example:
  * {
   "name": "",
   "chat": {
      "jabberId": ""
   },
   "department": "",
   "email": "",
   "addresses": [],
   "title": "",
   "username": "",
   "manager": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "images": [],
   "version": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "chat": {
      "jabberId": ""
   },
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "images": [],
   "version": 0,
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   },
   "presence": {
      "id": "",
      "name": "",
      "source": "",
      "primary": true,
      "presenceDefinition": {},
      "message": "",
      "modifiedDate": "",
      "selfUri": ""
   },
   "conversationSummary": {
      "userId": "",
      "call": {},
      "callback": {},
      "email": {},
      "chat": {},
      "socialExpression": {},
      "video": {}
   },
   "outOfOffice": {
      "id": "",
      "name": "",
      "user": {},
      "startDate": "",
      "endDate": "",
      "active": true,
      "selfUri": ""
   },
   "geolocation": {
      "id": "",
      "name": "",
      "type": "",
      "primary": true,
      "latitude": {},
      "longitude": {},
      "country": "",
      "region": "",
      "city": "",
      "selfUri": ""
   },
   "station": {
      "associatedStation": {},
      "effectiveStation": {},
      "defaultStation": {},
      "lastAssociatedStation": {}
   },
   "authorization": {
      "roles": [],
      "permissions": [],
      "permissionPolicies": []
   },
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
}
  */
UsersApi.prototype.patchUserId = function patchUserId(userId, body){
    var requestPath = '/api/v2/users/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Join or unjoin a queue for a user
  * @memberOf UsersApi
  * @instance
  * @param {string} queueId - Queue ID
  * @param {string} userId - User ID
  * @param {} body - Queue Member
  * @example
  * Body Example:
  * {
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "joined": true,
   "memberCount": 0
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "description": "",
   "version": 0,
   "dateCreated": "",
   "dateModified": "",
   "modifiedBy": "",
   "createdBy": "",
   "state": "",
   "modifiedByApp": "",
   "createdByApp": "",
   "mediaSettings": {},
   "bullseye": {
      "rings": []
   },
   "acwSettings": {
      "wrapupPrompt": "",
      "timeoutMs": 0
   },
   "skillEvaluationMethod": "",
   "queueFlow": {
      "id": "",
      "name": "",
      "selfUri": ""
   },
   "callingPartyName": "",
   "callingPartyNumber": "",
   "outboundEmailAddress": {
      "domain": {},
      "route": {}
   },
   "joined": true,
   "memberCount": 0,
   "selfUri": ""
}
  */
UsersApi.prototype.patchUserIdQueuesQueueId = function patchUserIdQueuesQueueId(queueId, userId, body){
    var requestPath = '/api/v2/users/{userId}/queues/{queueId}';
    var requestQuery = {};
    var requestBody;

    if(queueId === undefined || queueId === null){
      throw new Error('Missing required  parameter: queueId');
    }
    requestPath = requestPath.replace('{queueId}', queueId);
    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Returns a listing of roles and permissions for a user.
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
}
  */
UsersApi.prototype.getUserIdRoles = function getUserIdRoles(userId){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Sets the user's roles
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - List of roles
  * @example
  * 200 Response Example:
  * {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
}
  */
UsersApi.prototype.putUserIdRoles = function putUserIdRoles(userId, body){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Removes all the roles from the user.
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  */
UsersApi.prototype.deleteUserIdRoles = function deleteUserIdRoles(userId){
    var requestPath = '/api/v2/users/{userId}/roles';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get station information for user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "associatedStation": {
      "id": "",
      "name": "",
      "type": "",
      "associatedUser": {},
      "associatedDate": "",
      "defaultUser": {},
      "providerInfo": {}
   },
   "effectiveStation": {
      "id": "",
      "name": "",
      "type": "",
      "associatedUser": {},
      "associatedDate": "",
      "defaultUser": {},
      "providerInfo": {}
   },
   "defaultStation": {
      "id": "",
      "name": "",
      "type": "",
      "associatedUser": {},
      "associatedDate": "",
      "defaultUser": {},
      "providerInfo": {}
   },
   "lastAssociatedStation": {
      "id": "",
      "name": "",
      "type": "",
      "associatedUser": {},
      "associatedDate": "",
      "defaultUser": {},
      "providerInfo": {}
   }
}
  */
UsersApi.prototype.getUserIdStation = function getUserIdStation(userId){
    var requestPath = '/api/v2/users/{userId}/station';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Set associated station
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} stationId - stationId
  */
UsersApi.prototype.putUserIdStationAssociatedstationStationId = function putUserIdStationAssociatedstationStationId(userId, stationId){
    var requestPath = '/api/v2/users/{userId}/station/associatedstation/{stationId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(stationId === undefined || stationId === null){
      throw new Error('Missing required  parameter: stationId');
    }
    requestPath = requestPath.replace('{stationId}', stationId);
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Clear associated station
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  */
UsersApi.prototype.deleteUserIdStationAssociatedstation = function deleteUserIdStationAssociatedstation(userId){
    var requestPath = '/api/v2/users/{userId}/station/associatedstation';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Set default station
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} stationId - stationId
  */
UsersApi.prototype.putUserIdStationDefaultstationStationId = function putUserIdStationDefaultstationStationId(userId, stationId){
    var requestPath = '/api/v2/users/{userId}/station/defaultstation/{stationId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(stationId === undefined || stationId === null){
      throw new Error('Missing required  parameter: stationId');
    }
    requestPath = requestPath.replace('{stationId}', stationId);
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Clear default station
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  */
UsersApi.prototype.deleteUserIdStationDefaultstation = function deleteUserIdStationDefaultstation(userId){
    var requestPath = '/api/v2/users/{userId}/station/defaultstation';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user aggregates
  * @memberOf UsersApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "granularity": "",
   "timeZone": "",
   "groupBy": [],
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": [],
   "flattenMultivaluedDimensions": true
}
  * @example
  * 200 Response Example:
  * {
   "systemToOrganizationMappings": {},
   "results": []
}
  */
UsersApi.prototype.postUsersAggregatesQuery = function postUsersAggregatesQuery(body){
    var requestPath = '/api/v2/analytics/users/aggregates/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user details
  * @memberOf UsersApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "interval": "",
   "userFilters": [],
   "presenceFilters": [],
   "routingStatusFilters": [],
   "presenceAggregations": [],
   "routingStatusAggregations": [],
   "paging": {
      "pageSize": 0,
      "pageNumber": 0
   },
   "order": ""
}
  * @example
  * 200 Response Example:
  * {
   "userDetails": [],
   "aggregations": []
}
  */
UsersApi.prototype.postUsersDetailsQuery = function postUsersDetailsQuery(body){
    var requestPath = '/api/v2/analytics/users/details/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Query for user observations
  * @memberOf UsersApi
  * @instance
  * @param {} body - query
  * @example
  * Body Example:
  * {
   "filter": {
      "type": "",
      "clauses": [],
      "predicates": []
   },
   "metrics": []
}
  * @example
  * 200 Response Example:
  * {
   "results": []
}
  */
UsersApi.prototype.postUsersObservationsQuery = function postUsersObservationsQuery(body){
    var requestPath = '/api/v2/analytics/users/observations/query';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a OutOfOffice
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "startDate": "",
   "endDate": "",
   "active": true,
   "selfUri": ""
}
  */
UsersApi.prototype.getUserIdOutofoffice = function getUserIdOutofoffice(userId){
    var requestPath = '/api/v2/users/{userId}/outofoffice';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update an OutOfOffice
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - The updated UserPresence
  * @example
  * Body Example:
  * {
   "name": "",
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "startDate": "",
   "endDate": "",
   "active": true
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "startDate": "",
   "endDate": "",
   "active": true,
   "selfUri": ""
}
  */
UsersApi.prototype.putUserIdOutofoffice = function putUserIdOutofoffice(userId, body){
    var requestPath = '/api/v2/users/{userId}/outofoffice';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user's CallForwarding
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "enabled": true,
   "phoneNumber": "",
   "modifiedDate": "",
   "selfUri": ""
}
  */
UsersApi.prototype.getUserIdCallforwarding = function getUserIdCallforwarding(userId){
    var requestPath = '/api/v2/users/{userId}/callforwarding';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a user's CallForwarding
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Call forwarding
  * @example
  * Body Example:
  * {
   "name": "",
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "enabled": true,
   "phoneNumber": "",
   "modifiedDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "enabled": true,
   "phoneNumber": "",
   "modifiedDate": "",
   "selfUri": ""
}
  */
UsersApi.prototype.putUserIdCallforwarding = function putUserIdCallforwarding(userId, body){
    var requestPath = '/api/v2/users/{userId}/callforwarding';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a user's CallForwarding
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Call forwarding
  * @example
  * Body Example:
  * {
   "name": "",
   "user": {
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "addresses": [],
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0
   },
   "enabled": true,
   "phoneNumber": "",
   "modifiedDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "enabled": true,
   "phoneNumber": "",
   "modifiedDate": "",
   "selfUri": ""
}
  */
UsersApi.prototype.patchUserIdCallforwarding = function patchUserIdCallforwarding(userId, body){
    var requestPath = '/api/v2/users/{userId}/callforwarding';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Fetch the routing status of a user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "userId": "",
   "status": "",
   "startTime": ""
}
  */
UsersApi.prototype.getUserIdRoutingstatus = function getUserIdRoutingstatus(userId){
    var requestPath = '/api/v2/users/{userId}/routingstatus';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the routing status of a user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Routing Status
  * @example
  * Body Example:
  * {
   "userId": "",
   "status": "",
   "startTime": ""
}
  * @example
  * 200 Response Example:
  * {
   "userId": "",
   "status": "",
   "startTime": ""
}
  */
UsersApi.prototype.putUserIdRoutingstatus = function putUserIdRoutingstatus(userId, body){
    var requestPath = '/api/v2/users/{userId}/routingstatus';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get queues for user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {boolean} joined - Is joined to the queue
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UsersApi.prototype.getUserIdQueues = function getUserIdQueues(userId, pageSize, pageNumber, joined){
    var requestPath = '/api/v2/users/{userId}/queues';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["joined"] = joined;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Join or unjoin a set of queues for a user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - User Queues
  * @example
  * Body Example:
  * [
 {
  "name": "",
  "description": "",
  "version": 0,
  "dateCreated": "",
  "dateModified": "",
  "modifiedBy": "",
  "createdBy": "",
  "state": "",
  "modifiedByApp": "",
  "createdByApp": "",
  "mediaSettings": {},
  "bullseye": {
   "rings": []
  },
  "acwSettings": {
   "wrapupPrompt": "",
   "timeoutMs": 0
  },
  "skillEvaluationMethod": "",
  "queueFlow": {
   "id": "",
   "name": "",
   "selfUri": ""
  },
  "callingPartyName": "",
  "callingPartyNumber": "",
  "outboundEmailAddress": {
   "domain": {},
   "route": {}
  },
  "joined": true,
  "memberCount": 0
 }
]
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UsersApi.prototype.patchUserIdQueues = function patchUserIdQueues(userId, body){
    var requestPath = '/api/v2/users/{userId}/queues';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the list of available users.
  * @memberOf UsersApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {array} id - id
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UsersApi.prototype.getUsers = function getUsers(pageSize, pageNumber, id, sortOrder, expand){
    var requestPath = '/api/v2/users';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["id"] = id;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create user
  * @memberOf UsersApi
  * @instance
  * @param {} body - User
  * @example
  * Body Example:
  * {
   "name": "",
   "department": "",
   "email": "",
   "addresses": [],
   "title": "",
   "password": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "chat": {
      "jabberId": ""
   },
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "images": [],
   "version": 0,
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   },
   "presence": {
      "id": "",
      "name": "",
      "source": "",
      "primary": true,
      "presenceDefinition": {},
      "message": "",
      "modifiedDate": "",
      "selfUri": ""
   },
   "conversationSummary": {
      "userId": "",
      "call": {},
      "callback": {},
      "email": {},
      "chat": {},
      "socialExpression": {},
      "video": {}
   },
   "outOfOffice": {
      "id": "",
      "name": "",
      "user": {},
      "startDate": "",
      "endDate": "",
      "active": true,
      "selfUri": ""
   },
   "geolocation": {
      "id": "",
      "name": "",
      "type": "",
      "primary": true,
      "latitude": {},
      "longitude": {},
      "country": "",
      "region": "",
      "city": "",
      "selfUri": ""
   },
   "station": {
      "associatedStation": {},
      "effectiveStation": {},
      "defaultStation": {},
      "lastAssociatedStation": {}
   },
   "authorization": {
      "roles": [],
      "permissions": [],
      "permissionPolicies": []
   },
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
}
  */
UsersApi.prototype.postUsers = function postUsers(body){
    var requestPath = '/api/v2/users';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user's Geolocation
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} clientId - client Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
}
  */
UsersApi.prototype.getUserIdGeolocationsClientId = function getUserIdGeolocationsClientId(userId, clientId){
    var requestPath = '/api/v2/users/{userId}/geolocations/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Patch a user's Geolocation
  * @description The geolocation object can be patched one of three ways. Option 1: Set the 'primary' property to true. This will set the client as the user's primary geolocation source.  Option 2: Provide the 'latitude' and 'longitude' values.  This will enqueue an asynchronous update of the 'city', 'region', and 'country', generating a notification. A subsequent GET operation will include the new values for 'city', 'region' and 'country'.  Option 3:  Provide the 'city', 'region', 'country' values.  Option 1 can be combined with Option 2 or Option 3.  For example, update the client as primary and provide latitude and longitude values.
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - user Id
  * @param {string} clientId - client Id
  * @param {} body - Geolocation
  * @example
  * Body Example:
  * {
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
}
  */
UsersApi.prototype.patchUserIdGeolocationsClientId = function patchUserIdGeolocationsClientId(userId, clientId, body){
    var requestPath = '/api/v2/users/{userId}/geolocations/{clientId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(clientId === undefined || clientId === null){
      throw new Error('Missing required  parameter: clientId');
    }
    requestPath = requestPath.replace('{clientId}', clientId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Fetch field config for an entity type
  * @memberOf UsersApi
  * @instance
  * @param {string} type - Field type
  person,
  group,
  org,
  externalContact,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "entityType": "",
   "state": "",
   "sections": [],
   "version": "",
   "schemaVersion": "",
   "selfUri": ""
}
  */
UsersApi.prototype.getFieldconfig = function getFieldconfig(type){
    var requestPath = '/api/v2/fieldconfig';
    var requestQuery = {};
    var requestBody;

    if(type === undefined || type === null){
      throw new Error('Missing required  parameter: type');
    }
    requestQuery["type"] = type;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get favorites
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Sort order
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UsersApi.prototype.getUserIdFavorites = function getUserIdFavorites(userId, pageSize, pageNumber, sortOrder, expand){
    var requestPath = '/api/v2/users/{userId}/favorites';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get adjacents
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * {
   "superiors": [],
   "siblings": [],
   "directReports": []
}
  */
UsersApi.prototype.getUserIdAdjacents = function getUserIdAdjacents(userId, expand){
    var requestPath = '/api/v2/users/{userId}/adjacents';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get superiors
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "chat": {
   "jabberId": ""
  },
  "department": "",
  "email": "",
  "primaryContactInfo": [],
  "addresses": [],
  "state": "",
  "title": "",
  "username": "",
  "manager": {
   "id": "",
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0,
   "routingStatus": {},
   "presence": {},
   "conversationSummary": {},
   "outOfOffice": {},
   "geolocation": {},
   "station": {},
   "authorization": {},
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
  },
  "images": [],
  "version": 0,
  "routingStatus": {
   "userId": "",
   "status": "",
   "startTime": ""
  },
  "presence": {
   "id": "",
   "name": "",
   "source": "",
   "primary": true,
   "presenceDefinition": {},
   "message": "",
   "modifiedDate": "",
   "selfUri": ""
  },
  "conversationSummary": {
   "userId": "",
   "call": {},
   "callback": {},
   "email": {},
   "chat": {},
   "socialExpression": {},
   "video": {}
  },
  "outOfOffice": {
   "id": "",
   "name": "",
   "user": {},
   "startDate": "",
   "endDate": "",
   "active": true,
   "selfUri": ""
  },
  "geolocation": {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
  },
  "station": {
   "associatedStation": {},
   "effectiveStation": {},
   "defaultStation": {},
   "lastAssociatedStation": {}
  },
  "authorization": {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
  },
  "profileSkills": [],
  "locations": [],
  "selfUri": ""
 }
]
  */
UsersApi.prototype.getUserIdSuperiors = function getUserIdSuperiors(userId, expand){
    var requestPath = '/api/v2/users/{userId}/superiors';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get direct reports
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {array} expand - Which fields, if any, to expand Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "chat": {
   "jabberId": ""
  },
  "department": "",
  "email": "",
  "primaryContactInfo": [],
  "addresses": [],
  "state": "",
  "title": "",
  "username": "",
  "manager": {
   "id": "",
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0,
   "routingStatus": {},
   "presence": {},
   "conversationSummary": {},
   "outOfOffice": {},
   "geolocation": {},
   "station": {},
   "authorization": {},
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
  },
  "images": [],
  "version": 0,
  "routingStatus": {
   "userId": "",
   "status": "",
   "startTime": ""
  },
  "presence": {
   "id": "",
   "name": "",
   "source": "",
   "primary": true,
   "presenceDefinition": {},
   "message": "",
   "modifiedDate": "",
   "selfUri": ""
  },
  "conversationSummary": {
   "userId": "",
   "call": {},
   "callback": {},
   "email": {},
   "chat": {},
   "socialExpression": {},
   "video": {}
  },
  "outOfOffice": {
   "id": "",
   "name": "",
   "user": {},
   "startDate": "",
   "endDate": "",
   "active": true,
   "selfUri": ""
  },
  "geolocation": {
   "id": "",
   "name": "",
   "type": "",
   "primary": true,
   "latitude": {},
   "longitude": {},
   "country": "",
   "region": "",
   "city": "",
   "selfUri": ""
  },
  "station": {
   "associatedStation": {},
   "effectiveStation": {},
   "defaultStation": {},
   "lastAssociatedStation": {}
  },
  "authorization": {
   "roles": [],
   "permissions": [],
   "permissionPolicies": []
  },
  "profileSkills": [],
  "locations": [],
  "selfUri": ""
 }
]
  */
UsersApi.prototype.getUserIdDirectreports = function getUserIdDirectreports(userId, expand){
    var requestPath = '/api/v2/users/{userId}/directreports';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary List profile skills for a user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  */
UsersApi.prototype.getUserIdProfileskills = function getUserIdProfileskills(userId){
    var requestPath = '/api/v2/users/{userId}/profileskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update profile skills for a user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Skills
  */
UsersApi.prototype.putUserIdProfileskills = function putUserIdProfileskills(userId, body){
    var requestPath = '/api/v2/users/{userId}/profileskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search users using the q64 value returned from a previous search
  * @memberOf UsersApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
UsersApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/users/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search users
  * @memberOf UsersApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
UsersApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/users/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get current user details.
  * @description This request is not valid when using the Client Credentials OAuth grant.
  * @memberOf UsersApi
  * @instance
  * @param {array} expand - Which fields, if any, to expand. Valid Values: routingStatus, presence, conversationSummary, outOfOffice, geolocation, station, authorization, profileSkills, locations, date, geolocationsettings, organization, presencedefinitions, locationdefinitions, orgauthorization, favorites, superiors, directreports, adjacents, routingskills, fieldconfigs
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "chat": {
      "jabberId": ""
   },
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "images": [],
   "version": 0,
   "routingStatus": {
      "userId": "",
      "status": "",
      "startTime": ""
   },
   "presence": {
      "id": "",
      "name": "",
      "source": "",
      "primary": true,
      "presenceDefinition": {},
      "message": "",
      "modifiedDate": "",
      "selfUri": ""
   },
   "conversationSummary": {
      "userId": "",
      "call": {},
      "callback": {},
      "email": {},
      "chat": {},
      "socialExpression": {},
      "video": {}
   },
   "outOfOffice": {
      "id": "",
      "name": "",
      "user": {},
      "startDate": "",
      "endDate": "",
      "active": true,
      "selfUri": ""
   },
   "geolocation": {
      "id": "",
      "name": "",
      "type": "",
      "primary": true,
      "latitude": {},
      "longitude": {},
      "country": "",
      "region": "",
      "city": "",
      "selfUri": ""
   },
   "station": {
      "associatedStation": {},
      "effectiveStation": {},
      "defaultStation": {},
      "lastAssociatedStation": {}
   },
   "authorization": {
      "roles": [],
      "permissions": [],
      "permissionPolicies": []
   },
   "profileSkills": [],
   "locations": [],
   "date": {
      "currentDate": ""
   },
   "geolocationSettings": {
      "id": "",
      "name": "",
      "enabled": true,
      "mapboxKey": "",
      "selfUri": ""
   },
   "organization": {
      "id": "",
      "name": "",
      "thirdPartyOrgId": "",
      "thirdPartyOrgName": "",
      "thirdPartyURI": "",
      "domain": "",
      "version": 0,
      "state": "",
      "defaultSiteId": "",
      "deletable": true,
      "selfUri": "",
      "features": {}
   },
   "presenceDefinitions": [],
   "locationDefinitions": [],
   "orgAuthorization": [],
   "favorites": [],
   "superiors": [],
   "directReports": [],
   "adjacents": {
      "superiors": [],
      "siblings": [],
      "directReports": []
   },
   "routingSkills": [],
   "fieldConfigs": {
      "org": {},
      "person": {},
      "group": {},
      "externalContact": {}
   },
   "selfUri": ""
}
  */
UsersApi.prototype.getMe = function getMe(expand){
    var requestPath = '/api/v2/users/me';
    var requestQuery = {};
    var requestBody;

    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update routing skill proficiency or state.
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} skillId - skillId
  * @param {} body - Skill
  * @example
  * Body Example:
  * {
   "name": "",
   "proficiency": {},
   "state": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "proficiency": {},
   "state": "",
   "skillUri": "",
   "selfUri": ""
}
  */
UsersApi.prototype.putUserIdRoutingskillsSkillId = function putUserIdRoutingskillsSkillId(userId, skillId, body){
    var requestPath = '/api/v2/users/{userId}/routingskills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Remove routing skill from user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {string} skillId - skillId
  */
UsersApi.prototype.deleteUserIdRoutingskillsSkillId = function deleteUserIdRoutingskillsSkillId(userId, skillId){
    var requestPath = '/api/v2/users/{userId}/routingskills/{skillId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(skillId === undefined || skillId === null){
      throw new Error('Missing required  parameter: skillId');
    }
    requestPath = requestPath.replace('{skillId}', skillId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary List routing skills for user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @param {string} sortOrder - Ascending or descending sort order
  ascending,
  descending,
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UsersApi.prototype.getUserIdRoutingskills = function getUserIdRoutingskills(userId, pageSize, pageNumber, sortOrder){
    var requestPath = '/api/v2/users/{userId}/routingskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    requestQuery["sortOrder"] = sortOrder;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Add routing skill to user
  * @memberOf UsersApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - Skill
  * @example
  * Body Example:
  * {
   "id": "",
   "proficiency": {}
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "proficiency": {},
   "state": "",
   "skillUri": "",
   "selfUri": ""
}
  */
UsersApi.prototype.postUserIdRoutingskills = function postUserIdRoutingskills(userId, body){
    var requestPath = '/api/v2/users/{userId}/routingskills';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};


module.exports = UsersApi;

},{}],32:[function(require,module,exports){
/*jshint -W069 */
/**
* @class UtilitiesApi
* @example
* var api = new purecloud.platform.UtilitiesApi(pureCloudSession);
*/
function UtilitiesApi(session) {
    if(!(this instanceof UtilitiesApi)) {
        return new UtilitiesApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('UtilitiesApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get the current system date/time
  * @memberOf UtilitiesApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "currentDate": ""
}
  */
UtilitiesApi.prototype.getDate = function getDate(){
    var requestPath = '/api/v2/date';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Returns the information about an X509 PEM encoded certificate or certificate chain.
  * @memberOf UtilitiesApi
  * @instance
  * @param {} body - Certificate
  * @example
  * Body Example:
  * {
   "certificate": ""
}
  * @example
  * 200 Response Example:
  * {
   "certificateDetails": []
}
  */
UtilitiesApi.prototype.postDetails = function postDetails(body){
    var requestPath = '/api/v2/certificate/details';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get time zones list
  * @memberOf UtilitiesApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
UtilitiesApi.prototype.getTimezones = function getTimezones(pageSize, pageNumber){
    var requestPath = '/api/v2/timezones';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = UtilitiesApi;

},{}],33:[function(require,module,exports){
/*jshint -W069 */
/**
* @class VoicemailApi
* @example
* var api = new purecloud.platform.VoicemailApi(pureCloudSession);
*/
function VoicemailApi(session) {
    if(!(this instanceof VoicemailApi)) {
        return new VoicemailApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('VoicemailApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Get the current user's mailbox information
  * @memberOf VoicemailApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "usageSizeBytes": 0,
   "totalCount": 0,
   "unreadCount": 0,
   "deletedCount": 0,
   "createdDate": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getMeMailbox = function getMeMailbox(){
    var requestPath = '/api/v2/voicemail/me/mailbox';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the group's mailbox information
  * @memberOf VoicemailApi
  * @instance
  * @param {string} groupId - groupId
  * @example
  * 200 Response Example:
  * {
   "usageSizeBytes": 0,
   "totalCount": 0,
   "unreadCount": 0,
   "deletedCount": 0,
   "createdDate": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getGroupsGroupIdMailbox = function getGroupsGroupIdMailbox(groupId){
    var requestPath = '/api/v2/voicemail/groups/{groupId}/mailbox';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the current user's mailbox information
  * @memberOf VoicemailApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "usageSizeBytes": 0,
   "totalCount": 0,
   "unreadCount": 0,
   "deletedCount": 0,
   "createdDate": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getMailbox = function getMailbox(){
    var requestPath = '/api/v2/voicemail/mailbox';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search voicemails using the q64 value returned from a previous search
  * @memberOf VoicemailApi
  * @instance
  * @param {string} q64 - q64
  * @param {array} expand - expand
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
VoicemailApi.prototype.getSearch = function getSearch(q64, expand){
    var requestPath = '/api/v2/voicemail/search';
    var requestQuery = {};
    var requestBody;

    if(q64 === undefined || q64 === null){
      throw new Error('Missing required  parameter: q64');
    }
    requestQuery["q64"] = q64;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Search voicemails
  * @memberOf VoicemailApi
  * @instance
  * @param {} body - Search request options
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "total": 0,
   "pageCount": 0,
   "pageSize": 0,
   "pageNumber": 0,
   "previousPage": "",
   "currentPage": "",
   "nextPage": "",
   "types": [],
   "results": []
}
  */
VoicemailApi.prototype.postSearch = function postSearch(body){
    var requestPath = '/api/v2/voicemail/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a policy
  * @memberOf VoicemailApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pinConfiguration": {
      "minimumLength": 0,
      "maximumLength": 0
   },
   "voicemailExtension": "",
   "pinRequired": true,
   "sendEmailNotifications": true,
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getPolicy = function getPolicy(){
    var requestPath = '/api/v2/voicemail/policy';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a policy
  * @memberOf VoicemailApi
  * @instance
  * @param {} body - Policy
  * @example
  * Body Example:
  * {
   "alertTimeoutSeconds": 0,
   "pinConfiguration": {
      "minimumLength": 0,
      "maximumLength": 0
   },
   "voicemailExtension": "",
   "pinRequired": true,
   "sendEmailNotifications": true
}
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pinConfiguration": {
      "minimumLength": 0,
      "maximumLength": 0
   },
   "voicemailExtension": "",
   "pinRequired": true,
   "sendEmailNotifications": true,
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.putPolicy = function putPolicy(body){
    var requestPath = '/api/v2/voicemail/policy';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a group's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @param {string} groupId - Group ID
  * @example
  * 200 Response Example:
  * {
   "name": "",
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "enabled": true,
   "sendEmailNotifications": true,
   "rotateCallsSecs": 0,
   "stopRingingAfterRotations": 0
}
  */
VoicemailApi.prototype.getGroupsGroupIdPolicy = function getGroupsGroupIdPolicy(groupId){
    var requestPath = '/api/v2/voicemail/groups/{groupId}/policy';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a group's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {} body - The group's voicemail policy
  * @example
  * Body Example:
  * {
   "name": "",
   "enabled": true,
   "sendEmailNotifications": true,
   "rotateCallsSecs": 0,
   "stopRingingAfterRotations": 0
}
  * @example
  * 200 Response Example:
  * {
   "name": "",
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "enabled": true,
   "sendEmailNotifications": true,
   "rotateCallsSecs": 0,
   "stopRingingAfterRotations": 0
}
  */
VoicemailApi.prototype.patchGroupsGroupIdPolicy = function patchGroupsGroupIdPolicy(groupId, body){
    var requestPath = '/api/v2/voicemail/groups/{groupId}/policy';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary List voicemail messages
  * @memberOf VoicemailApi
  * @instance
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
VoicemailApi.prototype.getMeMessages = function getMeMessages(pageSize, pageNumber){
    var requestPath = '/api/v2/voicemail/me/messages';
    var requestQuery = {};
    var requestBody;

    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary List voicemail messages
  * @memberOf VoicemailApi
  * @instance
  * @param {string} groupId - Group ID
  * @param {integer} pageSize - Page size
  * @param {integer} pageNumber - Page number
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
VoicemailApi.prototype.getGroupsGroupIdMessages = function getGroupsGroupIdMessages(groupId, pageSize, pageNumber){
    var requestPath = '/api/v2/voicemail/groups/{groupId}/messages';
    var requestQuery = {};
    var requestBody;

    if(groupId === undefined || groupId === null){
      throw new Error('Missing required  parameter: groupId');
    }
    requestPath = requestPath.replace('{groupId}', groupId);
    requestQuery["pageSize"] = pageSize;
    requestQuery["pageNumber"] = pageNumber;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary List voicemail messages
  * @memberOf VoicemailApi
  * @instance
  * @param {string} ids - An optional comma separated list of VoicemailMessage ids
  * @param {array} expand - If the caller is a known user, which fields, if any, to expand Valid Values: callerUser.routingStatus, callerUser.primaryPresence, callerUser.conversationSummary, callerUser.outOfOffice, callerUser.geolocation
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
VoicemailApi.prototype.getMessages = function getMessages(ids, expand){
    var requestPath = '/api/v2/voicemail/messages';
    var requestQuery = {};
    var requestBody;

    requestQuery["ids"] = ids;
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Copy a voicemail message to a user or group
  * @memberOf VoicemailApi
  * @instance
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "voicemailMessageId": "",
   "userId": "",
   "groupId": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "read": true,
   "audioRecordingDurationSeconds": 0,
   "audioRecordingSizeBytes": 0,
   "createdDate": "",
   "modifiedDate": "",
   "callerAddress": "",
   "callerName": "",
   "callerUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "deleted": true,
   "note": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
VoicemailApi.prototype.postMessages = function postMessages(body){
    var requestPath = '/api/v2/voicemail/messages';
    var requestQuery = {};
    var requestBody;

    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete all voicemail messages
  * @memberOf VoicemailApi
  * @instance
  */
VoicemailApi.prototype.deleteMessages = function deleteMessages(){
    var requestPath = '/api/v2/voicemail/messages';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get message.
  * @memberOf VoicemailApi
  * @instance
  * @param {string} messageId - Message ID
  * @param {array} expand - If the caller is a known user, which fields, if any, to expand Valid Values: callerUser.routingStatus, callerUser.primaryPresence, callerUser.conversationSummary, callerUser.outOfOffice, callerUser.geolocation
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "read": true,
   "audioRecordingDurationSeconds": 0,
   "audioRecordingSizeBytes": 0,
   "createdDate": "",
   "modifiedDate": "",
   "callerAddress": "",
   "callerName": "",
   "callerUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "deleted": true,
   "note": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
VoicemailApi.prototype.getMessagesMessageId = function getMessagesMessageId(messageId, expand){
    var requestPath = '/api/v2/voicemail/messages/{messageId}';
    var requestQuery = {};
    var requestBody;

    if(messageId === undefined || messageId === null){
      throw new Error('Missing required  parameter: messageId');
    }
    requestPath = requestPath.replace('{messageId}', messageId);
    requestQuery["expand"] = expand;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a message.
  * @memberOf VoicemailApi
  * @instance
  * @param {string} messageId - Message ID
  * @param {} body - VoicemailMessage
  * @example
  * Body Example:
  * {
   "read": true,
   "deleted": true,
   "note": ""
}
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "conversation": {
      "id": "",
      "name": "",
      "startTime": "",
      "endTime": "",
      "address": "",
      "participants": [],
      "conversationIds": [],
      "maxParticipants": 0,
      "recordingState": "",
      "state": "",
      "selfUri": ""
   },
   "read": true,
   "audioRecordingDurationSeconds": 0,
   "audioRecordingSizeBytes": 0,
   "createdDate": "",
   "modifiedDate": "",
   "callerAddress": "",
   "callerName": "",
   "callerUser": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "deleted": true,
   "note": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "group": {
      "id": "",
      "name": "",
      "description": "",
      "dateModified": "",
      "memberCount": 0,
      "state": "",
      "version": 0,
      "type": "",
      "images": [],
      "addresses": [],
      "rulesVisible": true,
      "visibility": "",
      "selfUri": ""
   },
   "selfUri": ""
}
  */
VoicemailApi.prototype.putMessagesMessageId = function putMessagesMessageId(messageId, body){
    var requestPath = '/api/v2/voicemail/messages/{messageId}';
    var requestQuery = {};
    var requestBody;

    if(messageId === undefined || messageId === null){
      throw new Error('Missing required  parameter: messageId');
    }
    requestPath = requestPath.replace('{messageId}', messageId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PUT', requestPath, requestQuery, requestBody);
};

/**
  * @summary Delete a message.
  * @memberOf VoicemailApi
  * @instance
  * @param {string} messageId - Message ID
  */
VoicemailApi.prototype.deleteMessagesMessageId = function deleteMessagesMessageId(messageId){
    var requestPath = '/api/v2/voicemail/messages/{messageId}';
    var requestQuery = {};
    var requestBody;

    if(messageId === undefined || messageId === null){
      throw new Error('Missing required  parameter: messageId');
    }
    requestPath = requestPath.replace('{messageId}', messageId);
    return this.session.makeRequest('DELETE', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get media playback URI for this message
  * @memberOf VoicemailApi
  * @instance
  * @param {string} messageId - Message ID
  * @param {string} formatId - The desired media format.
  WAV,
  WEBM,
  WAV_ULAW,
  OGG_VORBIS,
  OGG_OPUS,
  NONE,
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "mediaFileUri": "",
   "mediaImageUri": ""
}
  */
VoicemailApi.prototype.getMessagesMessageIdMedia = function getMessagesMessageIdMedia(messageId, formatId){
    var requestPath = '/api/v2/voicemail/messages/{messageId}/media';
    var requestQuery = {};
    var requestBody;

    if(messageId === undefined || messageId === null){
      throw new Error('Missing required  parameter: messageId');
    }
    requestPath = requestPath.replace('{messageId}', messageId);
    requestQuery["formatId"] = formatId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get the current user's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pin": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getMePolicy = function getMePolicy(){
    var requestPath = '/api/v2/voicemail/me/policy';
    var requestQuery = {};
    var requestBody;

    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update the current user's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @param {} body - The user's voicemail policy
  * @example
  * Body Example:
  * {
   "alertTimeoutSeconds": 0,
   "pin": ""
}
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pin": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.patchMePolicy = function patchMePolicy(body){
    var requestPath = '/api/v2/voicemail/me/policy';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a user's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @param {string} userId - User ID
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pin": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.getUserpoliciesUserId = function getUserpoliciesUserId(userId){
    var requestPath = '/api/v2/voicemail/userpolicies/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Update a user's voicemail policy
  * @memberOf VoicemailApi
  * @instance
  * @param {string} userId - User ID
  * @param {} body - The user's voicemail policy
  * @example
  * Body Example:
  * {
   "alertTimeoutSeconds": 0,
   "pin": ""
}
  * @example
  * 200 Response Example:
  * {
   "enabled": true,
   "alertTimeoutSeconds": 0,
   "pin": "",
   "modifiedDate": ""
}
  */
VoicemailApi.prototype.patchUserpoliciesUserId = function patchUserpoliciesUserId(userId, body){
    var requestPath = '/api/v2/voicemail/userpolicies/{userId}';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};


module.exports = VoicemailApi;

},{}],34:[function(require,module,exports){
/*jshint -W069 */
/**
* @class WorkforceManagementApi
* @example
* var api = new purecloud.platform.WorkforceManagementApi(pureCloudSession);
*/
function WorkforceManagementApi(session) {
    if(!(this instanceof WorkforceManagementApi)) {
        return new WorkforceManagementApi(session);
    }
    if(!(session && session.makeRequest)) {
        throw new Error('WorkforceManagementApi requires a PureCloudSession');
    }
    this.session = session;
}

/**
  * @summary Download decisions files metadata
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "sortOrder": "",
   "sortBy": "",
   "pageSize": 0,
   "pageNumber": 0,
   "returnFields": [],
   "expand": [],
   "types": [],
   "query": []
}
  * @example
  * 200 Response Example:
  * {
   "entities": [],
   "pageSize": 0,
   "pageNumber": 0,
   "total": 0,
   "selfUri": "",
   "firstUri": "",
   "previousUri": "",
   "nextUri": "",
   "lastUri": "",
   "pageCount": 0
}
  */
WorkforceManagementApi.prototype.postDecisionsDownloadsSearch = function postDecisionsDownloadsSearch(body){
    var requestPath = '/api/v2/workforcemanagement/decisions/downloads/search';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get decisions download link
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} downloadId - The decisions file download id
  * @param {string} downloadfilename - The file name used to get the download url
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "url": ""
}
  */
WorkforceManagementApi.prototype.getDecisionsDownloadsDownloadId = function getDecisionsDownloadsDownloadId(downloadId, downloadfilename){
    var requestPath = '/api/v2/workforcemanagement/decisions/downloads/{downloadId}';
    var requestQuery = {};
    var requestBody;

    if(downloadId === undefined || downloadId === null){
      throw new Error('Missing required  parameter: downloadId');
    }
    requestPath = requestPath.replace('{downloadId}', downloadId);
    requestQuery["downloadfilename"] = downloadfilename;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Create a forecast
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {} body - The request body
  * @example
  * Body Example:
  * {
   "numberOfPeriods": 0,
   "periodFrequency": "",
   "description": "",
   "metrics": [],
   "managementUnitId": "",
   "copiedForecastId": ""
}
  * @example
  * 200 Response Example:
  * {
   "notificationId": "",
   "id": "",
   "status": ""
}
  */
WorkforceManagementApi.prototype.postLongtermforecasts = function postLongtermforecasts(body){
    var requestPath = '/api/v2/workforcemanagement/longtermforecasts';
    var requestQuery = {};
    var requestBody;

    if(body === undefined || body === null){
      throw new Error('Missing required  parameter: body');
    }
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get user schedules within the given time range
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} muId - The muId of the management unit.
  * @param {} body - body
  * @example
  * Body Example:
  * {
   "userIds": [],
   "startDate": "",
   "endDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "managementUnitTimeZone": "",
   "userSchedules": {}
}
  */
WorkforceManagementApi.prototype.postManagementunitsMuIdSchedulesSearch = function postManagementunitsMuIdSchedulesSearch(muId, body){
    var requestPath = '/api/v2/workforcemanagement/managementunits/{muId}/schedules/search';
    var requestQuery = {};
    var requestBody;

    if(muId === undefined || muId === null){
      throw new Error('Missing required  parameter: muId');
    }
    requestPath = requestPath.replace('{muId}', muId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of time off requests for any user
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} muId - The muId of the management unit.
  * @param {string} userId - The userId to whom the Time Off Request applies.
  * @param {boolean} recentlyReviewed - Limit results to requests that have been reviewed within the preceding 30 days
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "timeOffRequests": [],
   "selfUri": ""
}
  */
WorkforceManagementApi.prototype.getManagementunitsMuIdUsersUserIdTimeoffrequests = function getManagementunitsMuIdUsersUserIdTimeoffrequests(muId, userId, recentlyReviewed){
    var requestPath = '/api/v2/workforcemanagement/managementunits/{muId}/users/{userId}/timeoffrequests';
    var requestQuery = {};
    var requestBody;

    if(muId === undefined || muId === null){
      throw new Error('Missing required  parameter: muId');
    }
    requestPath = requestPath.replace('{muId}', muId);
    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    requestQuery["recentlyReviewed"] = recentlyReviewed;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a time off request by id
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} muId - The muId of the management unit.
  * @param {string} userId - The userId to whom the Time Off Request applies.
  * @param {string} timeOffRequestId - Time Off Request Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "isFullDayRequest": true,
   "markedAsRead": true,
   "activityCodeId": "",
   "status": "",
   "partialDayStartDateTimes": [],
   "dailyDurationMinutes": 0,
   "notes": "",
   "submittedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "submittedDate": "",
   "reviewedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "reviewedDate": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "modifiedDate": "",
   "selfUri": "",
   "fullDayManagementUnitDates": []
}
  */
WorkforceManagementApi.prototype.getManagementunitsMuIdUsersUserIdTimeoffrequestsTimeoffrequestId = function getManagementunitsMuIdUsersUserIdTimeoffrequestsTimeoffrequestId(muId, userId, timeOffRequestId){
    var requestPath = '/api/v2/workforcemanagement/managementunits/{muId}/users/{userId}/timeoffrequests/{timeOffRequestId}';
    var requestQuery = {};
    var requestBody;

    if(muId === undefined || muId === null){
      throw new Error('Missing required  parameter: muId');
    }
    requestPath = requestPath.replace('{muId}', muId);
    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestPath = requestPath.replace('{userId}', userId);
    if(timeOffRequestId === undefined || timeOffRequestId === null){
      throw new Error('Missing required  parameter: timeOffRequestId');
    }
    requestPath = requestPath.replace('{timeOffRequestId}', timeOffRequestId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get agents in the management unit
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} muId - The muId of the management unit.
  * @example
  * 200 Response Example:
  * {
   "entities": []
}
  */
WorkforceManagementApi.prototype.getManagementunitsMuIdUsers = function getManagementunitsMuIdUsers(muId){
    var requestPath = '/api/v2/workforcemanagement/managementunits/{muId}/users';
    var requestQuery = {};
    var requestBody;

    if(muId === undefined || muId === null){
      throw new Error('Missing required  parameter: muId');
    }
    requestPath = requestPath.replace('{muId}', muId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get activity codes corresponding to a management unit
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} muId - The muId of the management unit.
  * @example
  * 200 Response Example:
  * {
   "activityCodes": {}
}
  */
WorkforceManagementApi.prototype.getManagementunitsMuIdActivitycodes = function getManagementunitsMuIdActivitycodes(muId){
    var requestPath = '/api/v2/workforcemanagement/managementunits/{muId}/activitycodes';
    var requestQuery = {};
    var requestBody;

    if(muId === undefined || muId === null){
      throw new Error('Missing required  parameter: muId');
    }
    requestPath = requestPath.replace('{muId}', muId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a schedule for the current user
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {} body - body
  * @example
  * Body Example:
  * {
   "startDate": "",
   "endDate": ""
}
  * @example
  * 200 Response Example:
  * {
   "managementUnitTimeZone": "",
   "userSchedules": {}
}
  */
WorkforceManagementApi.prototype.postSchedules = function postSchedules(body){
    var requestPath = '/api/v2/workforcemanagement/schedules';
    var requestQuery = {};
    var requestBody;

    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('POST', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of time off requests for the current user
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {boolean} recentlyReviewed - Limit results to requests that have been reviewed within the preceding 30 days
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "timeOffRequests": [],
   "selfUri": ""
}
  */
WorkforceManagementApi.prototype.getTimeoffrequests = function getTimeoffrequests(recentlyReviewed){
    var requestPath = '/api/v2/workforcemanagement/timeoffrequests';
    var requestQuery = {};
    var requestBody;

    requestQuery["recentlyReviewed"] = recentlyReviewed;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a time off request for the current user by id
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} timeOffRequestId - Time Off Request Id
  * @example
  * 200 Response Example:
  * {
   "id": "",
   "name": "",
   "user": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "isFullDayRequest": true,
   "markedAsRead": true,
   "activityCodeId": "",
   "status": "",
   "partialDayStartDateTimes": [],
   "dailyDurationMinutes": 0,
   "notes": "",
   "submittedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "submittedDate": "",
   "reviewedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "reviewedDate": "",
   "modifiedBy": {
      "id": "",
      "name": "",
      "chat": {},
      "department": "",
      "email": "",
      "primaryContactInfo": [],
      "addresses": [],
      "state": "",
      "title": "",
      "username": "",
      "manager": {},
      "images": [],
      "version": 0,
      "routingStatus": {},
      "presence": {},
      "conversationSummary": {},
      "outOfOffice": {},
      "geolocation": {},
      "station": {},
      "authorization": {},
      "profileSkills": [],
      "locations": [],
      "selfUri": ""
   },
   "modifiedDate": "",
   "selfUri": "",
   "fullDayManagementUnitDates": []
}
  */
WorkforceManagementApi.prototype.getTimeoffrequestsTimeoffrequestId = function getTimeoffrequestsTimeoffrequestId(timeOffRequestId){
    var requestPath = '/api/v2/workforcemanagement/timeoffrequests/{timeOffRequestId}';
    var requestQuery = {};
    var requestBody;

    if(timeOffRequestId === undefined || timeOffRequestId === null){
      throw new Error('Missing required  parameter: timeOffRequestId');
    }
    requestPath = requestPath.replace('{timeOffRequestId}', timeOffRequestId);
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};

/**
  * @summary Mark a time off request for the current user as read or unread
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {string} timeOffRequestId - Time Off Request Id
  * @param {} body - 
  * @example
  * Body Example:
  * {
   "markedAsRead": true
}
  */
WorkforceManagementApi.prototype.patchTimeoffrequestsTimeoffrequestId = function patchTimeoffrequestsTimeoffrequestId(timeOffRequestId, body){
    var requestPath = '/api/v2/workforcemanagement/timeoffrequests/{timeOffRequestId}';
    var requestQuery = {};
    var requestBody;

    if(timeOffRequestId === undefined || timeOffRequestId === null){
      throw new Error('Missing required  parameter: timeOffRequestId');
    }
    requestPath = requestPath.replace('{timeOffRequestId}', timeOffRequestId);
    if(body !== undefined && body !== null){
      requestBody = body;
    }
    return this.session.makeRequest('PATCH', requestPath, requestQuery, requestBody);
};

/**
  * @summary Get a list of UserScheduleAdherence records for the requested users
  * @memberOf WorkforceManagementApi
  * @instance
  * @param {array} userId - User Id(s) for which to fetch current schedule adherence information.  Min 1, Max of 100 userIds per request
  * @example
  * 200 Response Example:
  * [
 {
  "id": "",
  "name": "",
  "user": {
   "id": "",
   "name": "",
   "chat": {},
   "department": "",
   "email": "",
   "primaryContactInfo": [],
   "addresses": [],
   "state": "",
   "title": "",
   "username": "",
   "manager": {},
   "images": [],
   "version": 0,
   "routingStatus": {},
   "presence": {},
   "conversationSummary": {},
   "outOfOffice": {},
   "geolocation": {},
   "station": {},
   "authorization": {},
   "profileSkills": [],
   "locations": [],
   "selfUri": ""
  },
  "managementUnit": {
   "id": "",
   "name": "",
   "startDayOfWeek": "",
   "timezone": "",
   "version": 0,
   "selfUri": ""
  },
  "scheduledActivityCategory": "",
  "systemPresence": "",
  "organizationSecondaryPresenceId": "",
  "routingStatus": "",
  "actualActivityCategory": "",
  "isOutOfOffice": true,
  "adherenceState": "",
  "impact": "",
  "timeOfAdherenceChange": "",
  "selfUri": ""
 }
]
  */
WorkforceManagementApi.prototype.getAdherence = function getAdherence(userId){
    var requestPath = '/api/v2/workforcemanagement/adherence';
    var requestQuery = {};
    var requestBody;

    if(userId === undefined || userId === null){
      throw new Error('Missing required  parameter: userId');
    }
    requestQuery["userId"] = userId;
    return this.session.makeRequest('GET', requestPath, requestQuery, requestBody);
};


module.exports = WorkforceManagementApi;

},{}],35:[function(require,module,exports){

var superagent = require('superagent');
var Promise = require('es6-promise').Promise;
require('es6-promise').polyfill();

//API VERSION - 0.83.8
/**
  * @description With the PureCloud Platform API, you can control all aspects of your PureCloud environment. With the APIs you can access the system configuration, manage conversations and more.
  * @class
  * @param {string} options.strategy - Authentication strategy: "token", "implicit", "client-credentials"
  * @param {string} options.environment - (Optional, default "mypurecloud.com") Environment the session use, e.g. mypurecloud.ie, mypurecloud.com.au, etc.
  * @param {string} options.clientId - (Optional) Client identifier for "implicit" or "client-credentials" strategies
  * @param {string} options.clientSecret - (Optional) Client secret key for "client-credentials" strategy
  * @param {string} options.redirectUrl - (Optional) Callback URL for "implicit" strategy
  * @param {string} options.token - (Optional) Existing token for "token" strategy
  * @param {string} options.storageKey - (Optional) Key to set in localStorage with the authentication token
  * @param {number} options.timeout - (Optional) Request timeout in millisecondw
  **/
function PureCloudSession(options) {
    if(!(this instanceof PureCloudSession)) {
        return new PureCloudSession(options);
    }

    if(!options.timeout){
        options.timeout = 2000;
    }

    this.options = options;

    this._setValuesFromUrlHash();

    this.options.token = this._getToken();
    this.setEnvironment(this.options.environment);

}

/**
  * @description Sets the environment used by the session
  * @param {string} environment - (Optional, default "mypurecloud.com") Environment the session use, e.g. mypurecloud.ie, mypurecloud.com.au, etc.
  **/
PureCloudSession.prototype.setEnvironment = function setEnvironment(environment) {
    this.options.environment = environment || 'mypurecloud.com';
    this.apiUrl = 'https://api.' + this.options.environment;
    this.authUrl = 'https://login.' + this.options.environment;
};


/**
  * @description Sets an error handler to be called any time there is a 401 Unauthenticated error returned by the api
  * @param {function} errorHandler - The function to call.
  **/
PureCloudSession.prototype.setUnauthenticatedErrorHandler = function setEnvironment(errorHandler) {
    this.unauthenticatedErrorHandler = errorHandler;
};

/**
  * @description Attempts to login with the appropriate authentication strategy
  * @returns Promise which resolves on successful authentication, otherwise rejects with an error
  **/
PureCloudSession.prototype.login = function login() {
    var self = this;
    return this.options.token ? this._testTokenAccess().catch(function(){
            self._authenticate();
        }) : this._authenticate();
};

PureCloudSession.prototype._authenticate = function _authenticate() {
  var strategy = this.options.strategy;
  switch(strategy) {
    case 'token':
      var token = this.options.token;
      return this._loginWithToken(token);
    case 'implicit':
      var implicitclientId = this.options.clientId;
      var redirectUrl = this.options.redirectUrl;
      var state = this.options.state;
      return this._loginWithImplicitGrant(implicitclientId, redirectUrl, state);
    case 'client-credentials':
      var clientId = this.options.clientId;
      var clientSecret = this.options.clientSecret;
      return this._loginWithClientCredentials(clientId, clientSecret);
    default:
      throw new Error('Authentication strategy "'+strategy+'" is not supported.');
  }
};

PureCloudSession.prototype._testTokenAccess = function _testTokenAccess() {
    if(this.options.strategy === 'implicit') {
      var checkUrl = this.apiUrl + "/api/v2/users/me";
      return this._makeRequest('get', checkUrl);
    }
    return Promise.resolve();
};

PureCloudSession.prototype._loginWithToken = function _loginWithToken(token) {
    if(!token) {
        throw new Error('Options requires a "token" key for the "token" strategy');
    }
    return Promise.resolve();
};

PureCloudSession.prototype._loginWithImplicitGrant = function(clientId, redirectUrl, state) {
    var query = {
        response_type: 'token',
        client_id: encodeURIComponent(clientId),
        redirect_uri: encodeURI(redirectUrl),
        state: state
    };

    function qs(url, key) {
        var val = query[key];
        if(!val) return url;
        return url + '&' + key + '=' + val;
    }

    var url = Object.keys(query).reduce(qs, this.authUrl + '/authorize?');
    window.location.replace(url);
};

PureCloudSession.prototype._setValuesFromUrlHash = function setValuesFromUrlHash() {
    if(!(typeof window !== 'undefined' && window.location.hash)) return;
    var hash = window.location.hash
        .slice(1).split('&')
        .reduce(function(obj, pair) {
            var keyValue = pair.split('=');
            obj[keyValue[0]] = keyValue[1];
            return obj;
        }, {});

    if(hash.access_token) this._setToken(hash.access_token);
    if(hash.state) this.options.state = hash.state;
};

PureCloudSession.prototype._loginWithClientCredentials = function(clientId, clientSecret) {
    var self = this;
    var url = this.authUrl + '/token';
    var data = {grant_type: 'client_credentials'};
    var request = this._baseRequest('post', url)
        .set('Content-Type', 'application/x-www-form-urlencoded')
        .auth(clientId, clientSecret)
        .send(data);
    return this._sendRequest(request)
        .then(function(body) {
            self._setToken(body.access_token);
        });
};

PureCloudSession.prototype._getToken = function _getToken() {
    if(this.options.token) return this.options.token;
    if(this.options.storageKey && PureCloudSession.hasLocalStorage) {
        return localStorage.getItem(this.options.storageKey);
    }
};

PureCloudSession.prototype._setToken = function _setToken(token) {
    this.options.token = token;
    if(this.options.storageKey && PureCloudSession.hasLocalStorage) {
        localStorage.setItem(this.options.storageKey, token);
    }
};

PureCloudSession.hasLocalStorage = (function() {
    try {
        localStorage.setItem("mod", "mod");
        localStorage.removeItem("mod");
        return true;
    } catch(e) {
        return false;
    }
}).call(this);

/**
  * @description Deauthenticates the session and removes any stored token
  **/
PureCloudSession.prototype.logout = function logout() {
    if(PureCloudSession.hasLocalStorage) {
        this._setToken(null);
    }
	window.location.replace(this.authUrl + "/logout");
};

/**
  * @description Makes authenticated requests to PureCloud
  * @param {string} method - HTTP method verb, e.g. "get", "post"
  * @param {string} url - URL to request
  * @param {object} query - (Optional) query parameters
  * @param {object} body - (Optional) request body payload
  * @returns Promise resolving to the response body, otherwise rejects with an error
  */
PureCloudSession.prototype.makeRequest = function makeRequest(method, url, query, body) {
    return this._makeRequest(method, url, query, body);
};

PureCloudSession.prototype._makeRequest = function _makeRequest(method, url, query, body) {
    var bearer = 'bearer ' + this.options.token;

    if(this.debugLog){
        var trace = method + " " + url;
        if(query && Object.keys(query).count > 0 && query[Object.keys(query)[0]]){
            trace += "\nQuery Params: " + JSON.stringify(query);
        }

        if(body){
            trace += "\nBody: " + JSON.stringify(body);
        }

        this.debugLog(trace);
    }

    var request = this._baseRequest(method, url)
        .set('Authorization', bearer)
        .query(query)
        .send(body);
    return this._sendRequest(request);
};

PureCloudSession.prototype._baseRequest = function _baseRequest(method, url) {
    method = method.toLowerCase();
    if(url.charAt(0) === '/') url = this.apiUrl + url;

    var request = superagent[method](url)
        .type('json')
        .accept('json')
        .timeout(this.options.timeout);

    if (typeof window === 'undefined' ) {
        var userAgent = 'PureCloud SDK/Javascript 0.83.8';
        request = request.set('User-Agent', userAgent);
    }

    return request;
};

PureCloudSession.prototype._sendRequest = function _sendRequest(request) {
    var self = this;
    return new Promise(function(resolve, reject) {
        request.end(function(error, res) {
            if(self.debugLog){
                if(res){
                    self.debugLog(res.headers);
                }

                self.debugLog(error || res.error || res.body);
            }


            if(res && res.unauthorized && self.unauthenticatedErrorHandler){
                self.unauthenticatedErrorHandler(error);
            }

            if(error){
                return reject(error);
            }
            if(res.error) {
                return reject(res);
            }
            resolve(res.body);
        });
    });
};

/**
  * @description Conveinence method for making GET requests
  * @param {string} url - URL to request
  * @param {object} query - (Optional) query parameters
  * @returns Promise resolving to the response body, otherwise rejects with an error
  */
PureCloudSession.prototype.get = function get(url, query) {
  return this.makeRequest('get', url, query);
};

module.exports = PureCloudSession;

},{"es6-promise":37,"superagent":40}],36:[function(require,module,exports){

/**
 * Expose `Emitter`.
 */

if (typeof module !== 'undefined') {
  module.exports = Emitter;
}

/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
};

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }
  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};
  var args = [].slice.call(arguments, 1)
    , callbacks = this._callbacks['$' + event];

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};

},{}],37:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.ES6Promise = factory());
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  return typeof x === 'function' || typeof x === 'object' && x !== null;
}

function isFunction(x) {
  return typeof x === 'function';
}

var _isArray = undefined;
if (!Array.isArray) {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
} else {
  _isArray = Array.isArray;
}

var isArray = _isArray;

var len = 0;
var vertxNext = undefined;
var customSchedulerFn = undefined;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  return function () {
    vertxNext(flush);
  };
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var r = require;
    var vertx = r('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = undefined;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && typeof require === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var _arguments = arguments;

  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;

  if (_state) {
    (function () {
      var callback = _arguments[_state - 1];
      asap(function () {
        return invokeCallback(_state, child, callback, parent._result);
      });
    })();
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  _resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(16);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var GET_THEN_ERROR = new ErrorObject();

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    GET_THEN_ERROR.error = error;
    return GET_THEN_ERROR;
  }
}

function tryThen(then, value, fulfillmentHandler, rejectionHandler) {
  try {
    then.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        _resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      _reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      _reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    _reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return _resolve(promise, value);
    }, function (reason) {
      return _reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$) {
  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$ === GET_THEN_ERROR) {
      _reject(promise, GET_THEN_ERROR.error);
    } else if (then$$ === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$)) {
      handleForeignThenable(promise, maybeThenable, then$$);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function _resolve(promise, value) {
  if (promise === value) {
    _reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function _reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;

  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = undefined,
      callback = undefined,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function ErrorObject() {
  this.error = null;
}

var TRY_CATCH_ERROR = new ErrorObject();

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = undefined,
      error = undefined,
      succeeded = undefined,
      failed = undefined;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      _reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
      _resolve(promise, value);
    } else if (failed) {
      _reject(promise, error);
    } else if (settled === FULFILLED) {
      fulfill(promise, value);
    } else if (settled === REJECTED) {
      _reject(promise, value);
    }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      _resolve(promise, value);
    }, function rejectPromise(reason) {
      _reject(promise, reason);
    });
  } catch (e) {
    _reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function Enumerator(Constructor, input) {
  this._instanceConstructor = Constructor;
  this.promise = new Constructor(noop);

  if (!this.promise[PROMISE_ID]) {
    makePromise(this.promise);
  }

  if (isArray(input)) {
    this._input = input;
    this.length = input.length;
    this._remaining = input.length;

    this._result = new Array(this.length);

    if (this.length === 0) {
      fulfill(this.promise, this._result);
    } else {
      this.length = this.length || 0;
      this._enumerate();
      if (this._remaining === 0) {
        fulfill(this.promise, this._result);
      }
    }
  } else {
    _reject(this.promise, validationError());
  }
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
};

Enumerator.prototype._enumerate = function () {
  var length = this.length;
  var _input = this._input;

  for (var i = 0; this._state === PENDING && i < length; i++) {
    this._eachEntry(_input[i], i);
  }
};

Enumerator.prototype._eachEntry = function (entry, i) {
  var c = this._instanceConstructor;
  var resolve$$ = c.resolve;

  if (resolve$$ === resolve) {
    var _then = getThen(entry);

    if (_then === then && entry._state !== PENDING) {
      this._settledAt(entry._state, i, entry._result);
    } else if (typeof _then !== 'function') {
      this._remaining--;
      this._result[i] = entry;
    } else if (c === Promise) {
      var promise = new c(noop);
      handleMaybeThenable(promise, entry, _then);
      this._willSettleAt(promise, i);
    } else {
      this._willSettleAt(new c(function (resolve$$) {
        return resolve$$(entry);
      }), i);
    }
  } else {
    this._willSettleAt(resolve$$(entry), i);
  }
};

Enumerator.prototype._settledAt = function (state, i, value) {
  var promise = this.promise;

  if (promise._state === PENDING) {
    this._remaining--;

    if (state === REJECTED) {
      _reject(promise, value);
    } else {
      this._result[i] = value;
    }
  }

  if (this._remaining === 0) {
    fulfill(promise, this._result);
  }
};

Enumerator.prototype._willSettleAt = function (promise, i) {
  var enumerator = this;

  subscribe(promise, undefined, function (value) {
    return enumerator._settledAt(FULFILLED, i, value);
  }, function (reason) {
    return enumerator._settledAt(REJECTED, i, reason);
  });
};

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all(entries) {
  return new Enumerator(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  _reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {function} resolver
  Useful for tooling.
  @constructor
*/
function Promise(resolver) {
  this[PROMISE_ID] = nextId();
  this._result = this._state = undefined;
  this._subscribers = [];

  if (noop !== resolver) {
    typeof resolver !== 'function' && needsResolver();
    this instanceof Promise ? initializePromise(this, resolver) : needsNew();
  }
}

Promise.all = all;
Promise.race = race;
Promise.resolve = resolve;
Promise.reject = reject;
Promise._setScheduler = setScheduler;
Promise._setAsap = setAsap;
Promise._asap = asap;

Promise.prototype = {
  constructor: Promise,

  /**
    The primary way of interacting with a promise is through its `then` method,
    which registers callbacks to receive either a promise's eventual value or the
    reason why the promise cannot be fulfilled.
  
    ```js
    findUser().then(function(user){
      // user is available
    }, function(reason){
      // user is unavailable, and you are given the reason why
    });
    ```
  
    Chaining
    --------
  
    The return value of `then` is itself a promise.  This second, 'downstream'
    promise is resolved with the return value of the first promise's fulfillment
    or rejection handler, or rejected if the handler throws an exception.
  
    ```js
    findUser().then(function (user) {
      return user.name;
    }, function (reason) {
      return 'default name';
    }).then(function (userName) {
      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
      // will be `'default name'`
    });
  
    findUser().then(function (user) {
      throw new Error('Found user, but still unhappy');
    }, function (reason) {
      throw new Error('`findUser` rejected and we're unhappy');
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
    });
    ```
    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
  
    ```js
    findUser().then(function (user) {
      throw new PedagogicalException('Upstream error');
    }).then(function (value) {
      // never reached
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // The `PedgagocialException` is propagated all the way down to here
    });
    ```
  
    Assimilation
    ------------
  
    Sometimes the value you want to propagate to a downstream promise can only be
    retrieved asynchronously. This can be achieved by returning a promise in the
    fulfillment or rejection handler. The downstream promise will then be pending
    until the returned promise is settled. This is called *assimilation*.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // The user's comments are now available
    });
    ```
  
    If the assimliated promise rejects, then the downstream promise will also reject.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // If `findCommentsByAuthor` fulfills, we'll have the value here
    }, function (reason) {
      // If `findCommentsByAuthor` rejects, we'll have the reason here
    });
    ```
  
    Simple Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let result;
  
    try {
      result = findResult();
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
    findResult(function(result, err){
      if (err) {
        // failure
      } else {
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findResult().then(function(result){
      // success
    }, function(reason){
      // failure
    });
    ```
  
    Advanced Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let author, books;
  
    try {
      author = findAuthor();
      books  = findBooksByAuthor(author);
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
  
    function foundBooks(books) {
  
    }
  
    function failure(reason) {
  
    }
  
    findAuthor(function(author, err){
      if (err) {
        failure(err);
        // failure
      } else {
        try {
          findBoooksByAuthor(author, function(books, err) {
            if (err) {
              failure(err);
            } else {
              try {
                foundBooks(books);
              } catch(reason) {
                failure(reason);
              }
            }
          });
        } catch(error) {
          failure(err);
        }
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findAuthor().
      then(findBooksByAuthor).
      then(function(books){
        // found books
    }).catch(function(reason){
      // something went wrong
    });
    ```
  
    @method then
    @param {Function} onFulfilled
    @param {Function} onRejected
    Useful for tooling.
    @return {Promise}
  */
  then: then,

  /**
    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
    as the catch block of a try/catch statement.
  
    ```js
    function findAuthor(){
      throw new Error('couldn't find that author');
    }
  
    // synchronous
    try {
      findAuthor();
    } catch(reason) {
      // something went wrong
    }
  
    // async with promises
    findAuthor().catch(function(reason){
      // something went wrong
    });
    ```
  
    @method catch
    @param {Function} onRejection
    Useful for tooling.
    @return {Promise}
  */
  'catch': function _catch(onRejection) {
    return this.then(null, onRejection);
  }
};

function polyfill() {
    var local = undefined;

    if (typeof global !== 'undefined') {
        local = global;
    } else if (typeof self !== 'undefined') {
        local = self;
    } else {
        try {
            local = Function('return this')();
        } catch (e) {
            throw new Error('polyfill failed because global object is unavailable in this environment');
        }
    }

    var P = local.Promise;

    if (P) {
        var promiseToString = null;
        try {
            promiseToString = Object.prototype.toString.call(P.resolve());
        } catch (e) {
            // silently ignored
        }

        if (promiseToString === '[object Promise]' && !P.cast) {
            return;
        }
    }

    local.Promise = Promise;
}

polyfill();
// Strange compat..
Promise.polyfill = polyfill;
Promise.Promise = Promise;

return Promise;

})));

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":38}],38:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],39:[function(require,module,exports){

/**
 * Reduce `arr` with `fn`.
 *
 * @param {Array} arr
 * @param {Function} fn
 * @param {Mixed} initial
 *
 * TODO: combatible error handling?
 */

module.exports = function(arr, fn, initial){  
  var idx = 0;
  var len = arr.length;
  var curr = arguments.length == 3
    ? initial
    : arr[idx++];

  while (idx < len) {
    curr = fn.call(null, curr, arr[idx], ++idx, arr);
  }
  
  return curr;
};
},{}],40:[function(require,module,exports){
/**
 * Module dependencies.
 */

var Emitter = require('emitter');
var reduce = require('reduce');
var requestBase = require('./request-base');
var isObject = require('./is-object');

/**
 * Root reference for iframes.
 */

var root;
if (typeof window !== 'undefined') { // Browser window
  root = window;
} else if (typeof self !== 'undefined') { // Web Worker
  root = self;
} else { // Other environments
  root = this;
}

/**
 * Noop.
 */

function noop(){};

/**
 * Check if `obj` is a host object,
 * we don't want to serialize these :)
 *
 * TODO: future proof, move to compoent land
 *
 * @param {Object} obj
 * @return {Boolean}
 * @api private
 */

function isHost(obj) {
  var str = {}.toString.call(obj);

  switch (str) {
    case '[object File]':
    case '[object Blob]':
    case '[object FormData]':
      return true;
    default:
      return false;
  }
}

/**
 * Expose `request`.
 */

var request = module.exports = require('./request').bind(null, Request);

/**
 * Determine XHR.
 */

request.getXHR = function () {
  if (root.XMLHttpRequest
      && (!root.location || 'file:' != root.location.protocol
          || !root.ActiveXObject)) {
    return new XMLHttpRequest;
  } else {
    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}
    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}
    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}
    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}
  }
  return false;
};

/**
 * Removes leading and trailing whitespace, added to support IE.
 *
 * @param {String} s
 * @return {String}
 * @api private
 */

var trim = ''.trim
  ? function(s) { return s.trim(); }
  : function(s) { return s.replace(/(^\s*|\s*$)/g, ''); };

/**
 * Serialize the given `obj`.
 *
 * @param {Object} obj
 * @return {String}
 * @api private
 */

function serialize(obj) {
  if (!isObject(obj)) return obj;
  var pairs = [];
  for (var key in obj) {
    if (null != obj[key]) {
      pushEncodedKeyValuePair(pairs, key, obj[key]);
        }
      }
  return pairs.join('&');
}

/**
 * Helps 'serialize' with serializing arrays.
 * Mutates the pairs array.
 *
 * @param {Array} pairs
 * @param {String} key
 * @param {Mixed} val
 */

function pushEncodedKeyValuePair(pairs, key, val) {
  if (Array.isArray(val)) {
    return val.forEach(function(v) {
      pushEncodedKeyValuePair(pairs, key, v);
    });
  }
  pairs.push(encodeURIComponent(key)
    + '=' + encodeURIComponent(val));
}

/**
 * Expose serialization method.
 */

 request.serializeObject = serialize;

 /**
  * Parse the given x-www-form-urlencoded `str`.
  *
  * @param {String} str
  * @return {Object}
  * @api private
  */

function parseString(str) {
  var obj = {};
  var pairs = str.split('&');
  var parts;
  var pair;

  for (var i = 0, len = pairs.length; i < len; ++i) {
    pair = pairs[i];
    parts = pair.split('=');
    obj[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);
  }

  return obj;
}

/**
 * Expose parser.
 */

request.parseString = parseString;

/**
 * Default MIME type map.
 *
 *     superagent.types.xml = 'application/xml';
 *
 */

request.types = {
  html: 'text/html',
  json: 'application/json',
  xml: 'application/xml',
  urlencoded: 'application/x-www-form-urlencoded',
  'form': 'application/x-www-form-urlencoded',
  'form-data': 'application/x-www-form-urlencoded'
};

/**
 * Default serialization map.
 *
 *     superagent.serialize['application/xml'] = function(obj){
 *       return 'generated xml here';
 *     };
 *
 */

 request.serialize = {
   'application/x-www-form-urlencoded': serialize,
   'application/json': JSON.stringify
 };

 /**
  * Default parsers.
  *
  *     superagent.parse['application/xml'] = function(str){
  *       return { object parsed from str };
  *     };
  *
  */

request.parse = {
  'application/x-www-form-urlencoded': parseString,
  'application/json': JSON.parse
};

/**
 * Parse the given header `str` into
 * an object containing the mapped fields.
 *
 * @param {String} str
 * @return {Object}
 * @api private
 */

function parseHeader(str) {
  var lines = str.split(/\r?\n/);
  var fields = {};
  var index;
  var line;
  var field;
  var val;

  lines.pop(); // trailing CRLF

  for (var i = 0, len = lines.length; i < len; ++i) {
    line = lines[i];
    index = line.indexOf(':');
    field = line.slice(0, index).toLowerCase();
    val = trim(line.slice(index + 1));
    fields[field] = val;
  }

  return fields;
}

/**
 * Check if `mime` is json or has +json structured syntax suffix.
 *
 * @param {String} mime
 * @return {Boolean}
 * @api private
 */

function isJSON(mime) {
  return /[\/+]json\b/.test(mime);
}

/**
 * Return the mime type for the given `str`.
 *
 * @param {String} str
 * @return {String}
 * @api private
 */

function type(str){
  return str.split(/ *; */).shift();
};

/**
 * Return header field parameters.
 *
 * @param {String} str
 * @return {Object}
 * @api private
 */

function params(str){
  return reduce(str.split(/ *; */), function(obj, str){
    var parts = str.split(/ *= */)
      , key = parts.shift()
      , val = parts.shift();

    if (key && val) obj[key] = val;
    return obj;
  }, {});
};

/**
 * Initialize a new `Response` with the given `xhr`.
 *
 *  - set flags (.ok, .error, etc)
 *  - parse header
 *
 * Examples:
 *
 *  Aliasing `superagent` as `request` is nice:
 *
 *      request = superagent;
 *
 *  We can use the promise-like API, or pass callbacks:
 *
 *      request.get('/').end(function(res){});
 *      request.get('/', function(res){});
 *
 *  Sending data can be chained:
 *
 *      request
 *        .post('/user')
 *        .send({ name: 'tj' })
 *        .end(function(res){});
 *
 *  Or passed to `.send()`:
 *
 *      request
 *        .post('/user')
 *        .send({ name: 'tj' }, function(res){});
 *
 *  Or passed to `.post()`:
 *
 *      request
 *        .post('/user', { name: 'tj' })
 *        .end(function(res){});
 *
 * Or further reduced to a single call for simple cases:
 *
 *      request
 *        .post('/user', { name: 'tj' }, function(res){});
 *
 * @param {XMLHTTPRequest} xhr
 * @param {Object} options
 * @api private
 */

function Response(req, options) {
  options = options || {};
  this.req = req;
  this.xhr = this.req.xhr;
  // responseText is accessible only if responseType is '' or 'text' and on older browsers
  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')
     ? this.xhr.responseText
     : null;
  this.statusText = this.req.xhr.statusText;
  this.setStatusProperties(this.xhr.status);
  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());
  // getAllResponseHeaders sometimes falsely returns "" for CORS requests, but
  // getResponseHeader still works. so we get content-type even if getting
  // other headers fails.
  this.header['content-type'] = this.xhr.getResponseHeader('content-type');
  this.setHeaderProperties(this.header);
  this.body = this.req.method != 'HEAD'
    ? this.parseBody(this.text ? this.text : this.xhr.response)
    : null;
}

/**
 * Get case-insensitive `field` value.
 *
 * @param {String} field
 * @return {String}
 * @api public
 */

Response.prototype.get = function(field){
  return this.header[field.toLowerCase()];
};

/**
 * Set header related properties:
 *
 *   - `.type` the content type without params
 *
 * A response of "Content-Type: text/plain; charset=utf-8"
 * will provide you with a `.type` of "text/plain".
 *
 * @param {Object} header
 * @api private
 */

Response.prototype.setHeaderProperties = function(header){
  // content-type
  var ct = this.header['content-type'] || '';
  this.type = type(ct);

  // params
  var obj = params(ct);
  for (var key in obj) this[key] = obj[key];
};

/**
 * Parse the given body `str`.
 *
 * Used for auto-parsing of bodies. Parsers
 * are defined on the `superagent.parse` object.
 *
 * @param {String} str
 * @return {Mixed}
 * @api private
 */

Response.prototype.parseBody = function(str){
  var parse = request.parse[this.type];
  if (!parse && isJSON(this.type)) {
    parse = request.parse['application/json'];
  }
  return parse && str && (str.length || str instanceof Object)
    ? parse(str)
    : null;
};

/**
 * Set flags such as `.ok` based on `status`.
 *
 * For example a 2xx response will give you a `.ok` of __true__
 * whereas 5xx will be __false__ and `.error` will be __true__. The
 * `.clientError` and `.serverError` are also available to be more
 * specific, and `.statusType` is the class of error ranging from 1..5
 * sometimes useful for mapping respond colors etc.
 *
 * "sugar" properties are also defined for common cases. Currently providing:
 *
 *   - .noContent
 *   - .badRequest
 *   - .unauthorized
 *   - .notAcceptable
 *   - .notFound
 *
 * @param {Number} status
 * @api private
 */

Response.prototype.setStatusProperties = function(status){
  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request
  if (status === 1223) {
    status = 204;
  }

  var type = status / 100 | 0;

  // status / class
  this.status = this.statusCode = status;
  this.statusType = type;

  // basics
  this.info = 1 == type;
  this.ok = 2 == type;
  this.clientError = 4 == type;
  this.serverError = 5 == type;
  this.error = (4 == type || 5 == type)
    ? this.toError()
    : false;

  // sugar
  this.accepted = 202 == status;
  this.noContent = 204 == status;
  this.badRequest = 400 == status;
  this.unauthorized = 401 == status;
  this.notAcceptable = 406 == status;
  this.notFound = 404 == status;
  this.forbidden = 403 == status;
};

/**
 * Return an `Error` representative of this response.
 *
 * @return {Error}
 * @api public
 */

Response.prototype.toError = function(){
  var req = this.req;
  var method = req.method;
  var url = req.url;

  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';
  var err = new Error(msg);
  err.status = this.status;
  err.method = method;
  err.url = url;

  return err;
};

/**
 * Expose `Response`.
 */

request.Response = Response;

/**
 * Initialize a new `Request` with the given `method` and `url`.
 *
 * @param {String} method
 * @param {String} url
 * @api public
 */

function Request(method, url) {
  var self = this;
  this._query = this._query || [];
  this.method = method;
  this.url = url;
  this.header = {}; // preserves header name case
  this._header = {}; // coerces header names to lowercase
  this.on('end', function(){
    var err = null;
    var res = null;

    try {
      res = new Response(self);
    } catch(e) {
      err = new Error('Parser is unable to parse the response');
      err.parse = true;
      err.original = e;
      // issue #675: return the raw response if the response parsing fails
      err.rawResponse = self.xhr && self.xhr.responseText ? self.xhr.responseText : null;
      // issue #876: return the http status code if the response parsing fails
      err.statusCode = self.xhr && self.xhr.status ? self.xhr.status : null;
      return self.callback(err);
    }

    self.emit('response', res);

    if (err) {
      return self.callback(err, res);
    }

    if (res.status >= 200 && res.status < 300) {
      return self.callback(err, res);
    }

    var new_err = new Error(res.statusText || 'Unsuccessful HTTP response');
    new_err.original = err;
    new_err.response = res;
    new_err.status = res.status;

    self.callback(new_err, res);
  });
}

/**
 * Mixin `Emitter` and `requestBase`.
 */

Emitter(Request.prototype);
for (var key in requestBase) {
  Request.prototype[key] = requestBase[key];
}

/**
 * Abort the request, and clear potential timeout.
 *
 * @return {Request}
 * @api public
 */

Request.prototype.abort = function(){
  if (this.aborted) return;
  this.aborted = true;
  this.xhr && this.xhr.abort();
  this.clearTimeout();
  this.emit('abort');
  return this;
};

/**
 * Set Content-Type to `type`, mapping values from `request.types`.
 *
 * Examples:
 *
 *      superagent.types.xml = 'application/xml';
 *
 *      request.post('/')
 *        .type('xml')
 *        .send(xmlstring)
 *        .end(callback);
 *
 *      request.post('/')
 *        .type('application/xml')
 *        .send(xmlstring)
 *        .end(callback);
 *
 * @param {String} type
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.type = function(type){
  this.set('Content-Type', request.types[type] || type);
  return this;
};

/**
 * Set responseType to `val`. Presently valid responseTypes are 'blob' and 
 * 'arraybuffer'.
 *
 * Examples:
 *
 *      req.get('/')
 *        .responseType('blob')
 *        .end(callback);
 *
 * @param {String} val
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.responseType = function(val){
  this._responseType = val;
  return this;
};

/**
 * Set Accept to `type`, mapping values from `request.types`.
 *
 * Examples:
 *
 *      superagent.types.json = 'application/json';
 *
 *      request.get('/agent')
 *        .accept('json')
 *        .end(callback);
 *
 *      request.get('/agent')
 *        .accept('application/json')
 *        .end(callback);
 *
 * @param {String} accept
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.accept = function(type){
  this.set('Accept', request.types[type] || type);
  return this;
};

/**
 * Set Authorization field value with `user` and `pass`.
 *
 * @param {String} user
 * @param {String} pass
 * @param {Object} options with 'type' property 'auto' or 'basic' (default 'basic')
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.auth = function(user, pass, options){
  if (!options) {
    options = {
      type: 'basic'
    }
  }

  switch (options.type) {
    case 'basic':
      var str = btoa(user + ':' + pass);
      this.set('Authorization', 'Basic ' + str);
    break;

    case 'auto':
      this.username = user;
      this.password = pass;
    break;
  }
  return this;
};

/**
* Add query-string `val`.
*
* Examples:
*
*   request.get('/shoes')
*     .query('size=10')
*     .query({ color: 'blue' })
*
* @param {Object|String} val
* @return {Request} for chaining
* @api public
*/

Request.prototype.query = function(val){
  if ('string' != typeof val) val = serialize(val);
  if (val) this._query.push(val);
  return this;
};

/**
 * Queue the given `file` as an attachment to the specified `field`,
 * with optional `filename`.
 *
 * ``` js
 * request.post('/upload')
 *   .attach(new Blob(['<a id="a"><b id="b">hey!</b></a>'], { type: "text/html"}))
 *   .end(callback);
 * ```
 *
 * @param {String} field
 * @param {Blob|File} file
 * @param {String} filename
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.attach = function(field, file, filename){
  this._getFormData().append(field, file, filename || file.name);
  return this;
};

Request.prototype._getFormData = function(){
  if (!this._formData) {
    this._formData = new root.FormData();
  }
  return this._formData;
};

/**
 * Send `data` as the request body, defaulting the `.type()` to "json" when
 * an object is given.
 *
 * Examples:
 *
 *       // manual json
 *       request.post('/user')
 *         .type('json')
 *         .send('{"name":"tj"}')
 *         .end(callback)
 *
 *       // auto json
 *       request.post('/user')
 *         .send({ name: 'tj' })
 *         .end(callback)
 *
 *       // manual x-www-form-urlencoded
 *       request.post('/user')
 *         .type('form')
 *         .send('name=tj')
 *         .end(callback)
 *
 *       // auto x-www-form-urlencoded
 *       request.post('/user')
 *         .type('form')
 *         .send({ name: 'tj' })
 *         .end(callback)
 *
 *       // defaults to x-www-form-urlencoded
  *      request.post('/user')
  *        .send('name=tobi')
  *        .send('species=ferret')
  *        .end(callback)
 *
 * @param {String|Object} data
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.send = function(data){
  var obj = isObject(data);
  var type = this._header['content-type'];

  // merge
  if (obj && isObject(this._data)) {
    for (var key in data) {
      this._data[key] = data[key];
    }
  } else if ('string' == typeof data) {
    if (!type) this.type('form');
    type = this._header['content-type'];
    if ('application/x-www-form-urlencoded' == type) {
      this._data = this._data
        ? this._data + '&' + data
        : data;
    } else {
      this._data = (this._data || '') + data;
    }
  } else {
    this._data = data;
  }

  if (!obj || isHost(data)) return this;
  if (!type) this.type('json');
  return this;
};

/**
 * @deprecated
 */
Response.prototype.parse = function serialize(fn){
  if (root.console) {
    console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0");
  }
  this.serialize(fn);
  return this;
};

Response.prototype.serialize = function serialize(fn){
  this._parser = fn;
  return this;
};

/**
 * Invoke the callback with `err` and `res`
 * and handle arity check.
 *
 * @param {Error} err
 * @param {Response} res
 * @api private
 */

Request.prototype.callback = function(err, res){
  var fn = this._callback;
  this.clearTimeout();
  fn(err, res);
};

/**
 * Invoke callback with x-domain error.
 *
 * @api private
 */

Request.prototype.crossDomainError = function(){
  var err = new Error('Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');
  err.crossDomain = true;

  err.status = this.status;
  err.method = this.method;
  err.url = this.url;

  this.callback(err);
};

/**
 * Invoke callback with timeout error.
 *
 * @api private
 */

Request.prototype.timeoutError = function(){
  var timeout = this._timeout;
  var err = new Error('timeout of ' + timeout + 'ms exceeded');
  err.timeout = timeout;
  this.callback(err);
};

/**
 * Enable transmission of cookies with x-domain requests.
 *
 * Note that for this to work the origin must not be
 * using "Access-Control-Allow-Origin" with a wildcard,
 * and also must set "Access-Control-Allow-Credentials"
 * to "true".
 *
 * @api public
 */

Request.prototype.withCredentials = function(){
  this._withCredentials = true;
  return this;
};

/**
 * Initiate request, invoking callback `fn(res)`
 * with an instanceof `Response`.
 *
 * @param {Function} fn
 * @return {Request} for chaining
 * @api public
 */

Request.prototype.end = function(fn){
  var self = this;
  var xhr = this.xhr = request.getXHR();
  var query = this._query.join('&');
  var timeout = this._timeout;
  var data = this._formData || this._data;

  // store callback
  this._callback = fn || noop;

  // state change
  xhr.onreadystatechange = function(){
    if (4 != xhr.readyState) return;

    // In IE9, reads to any property (e.g. status) off of an aborted XHR will
    // result in the error "Could not complete the operation due to error c00c023f"
    var status;
    try { status = xhr.status } catch(e) { status = 0; }

    if (0 == status) {
      if (self.timedout) return self.timeoutError();
      if (self.aborted) return;
      return self.crossDomainError();
    }
    self.emit('end');
  };

  // progress
  var handleProgress = function(e){
    if (e.total > 0) {
      e.percent = e.loaded / e.total * 100;
    }
    e.direction = 'download';
    self.emit('progress', e);
  };
  if (this.hasListeners('progress')) {
    xhr.onprogress = handleProgress;
  }
  try {
    if (xhr.upload && this.hasListeners('progress')) {
      xhr.upload.onprogress = handleProgress;
    }
  } catch(e) {
    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.
    // Reported here:
    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context
  }

  // timeout
  if (timeout && !this._timer) {
    this._timer = setTimeout(function(){
      self.timedout = true;
      self.abort();
    }, timeout);
  }

  // querystring
  if (query) {
    query = request.serializeObject(query);
    this.url += ~this.url.indexOf('?')
      ? '&' + query
      : '?' + query;
  }

  // initiate request
  if (this.username && this.password) {
    xhr.open(this.method, this.url, true, this.username, this.password);
  } else {
    xhr.open(this.method, this.url, true);
  }

  // CORS
  if (this._withCredentials) xhr.withCredentials = true;

  // body
  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !isHost(data)) {
    // serialize stuff
    var contentType = this._header['content-type'];
    var serialize = this._parser || request.serialize[contentType ? contentType.split(';')[0] : ''];
    if (!serialize && isJSON(contentType)) serialize = request.serialize['application/json'];
    if (serialize) data = serialize(data);
  }

  // set header fields
  for (var field in this.header) {
    if (null == this.header[field]) continue;
    xhr.setRequestHeader(field, this.header[field]);
  }

  if (this._responseType) {
    xhr.responseType = this._responseType;
  }

  // send stuff
  this.emit('request', this);

  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)
  // We need null here if data is undefined
  xhr.send(typeof data !== 'undefined' ? data : null);
  return this;
};


/**
 * Expose `Request`.
 */

request.Request = Request;

/**
 * GET `url` with optional callback `fn(res)`.
 *
 * @param {String} url
 * @param {Mixed|Function} data or fn
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

request.get = function(url, data, fn){
  var req = request('GET', url);
  if ('function' == typeof data) fn = data, data = null;
  if (data) req.query(data);
  if (fn) req.end(fn);
  return req;
};

/**
 * HEAD `url` with optional callback `fn(res)`.
 *
 * @param {String} url
 * @param {Mixed|Function} data or fn
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

request.head = function(url, data, fn){
  var req = request('HEAD', url);
  if ('function' == typeof data) fn = data, data = null;
  if (data) req.send(data);
  if (fn) req.end(fn);
  return req;
};

/**
 * DELETE `url` with optional callback `fn(res)`.
 *
 * @param {String} url
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

function del(url, fn){
  var req = request('DELETE', url);
  if (fn) req.end(fn);
  return req;
};

request['del'] = del;
request['delete'] = del;

/**
 * PATCH `url` with optional `data` and callback `fn(res)`.
 *
 * @param {String} url
 * @param {Mixed} data
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

request.patch = function(url, data, fn){
  var req = request('PATCH', url);
  if ('function' == typeof data) fn = data, data = null;
  if (data) req.send(data);
  if (fn) req.end(fn);
  return req;
};

/**
 * POST `url` with optional `data` and callback `fn(res)`.
 *
 * @param {String} url
 * @param {Mixed} data
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

request.post = function(url, data, fn){
  var req = request('POST', url);
  if ('function' == typeof data) fn = data, data = null;
  if (data) req.send(data);
  if (fn) req.end(fn);
  return req;
};

/**
 * PUT `url` with optional `data` and callback `fn(res)`.
 *
 * @param {String} url
 * @param {Mixed|Function} data or fn
 * @param {Function} fn
 * @return {Request}
 * @api public
 */

request.put = function(url, data, fn){
  var req = request('PUT', url);
  if ('function' == typeof data) fn = data, data = null;
  if (data) req.send(data);
  if (fn) req.end(fn);
  return req;
};

},{"./is-object":41,"./request":43,"./request-base":42,"emitter":36,"reduce":39}],41:[function(require,module,exports){
/**
 * Check if `obj` is an object.
 *
 * @param {Object} obj
 * @return {Boolean}
 * @api private
 */

function isObject(obj) {
  return null != obj && 'object' == typeof obj;
}

module.exports = isObject;

},{}],42:[function(require,module,exports){
/**
 * Module of mixed-in functions shared between node and client code
 */
var isObject = require('./is-object');

/**
 * Clear previous timeout.
 *
 * @return {Request} for chaining
 * @api public
 */

exports.clearTimeout = function _clearTimeout(){
  this._timeout = 0;
  clearTimeout(this._timer);
  return this;
};

/**
 * Force given parser
 *
 * Sets the body parser no matter type.
 *
 * @param {Function}
 * @api public
 */

exports.parse = function parse(fn){
  this._parser = fn;
  return this;
};

/**
 * Set timeout to `ms`.
 *
 * @param {Number} ms
 * @return {Request} for chaining
 * @api public
 */

exports.timeout = function timeout(ms){
  this._timeout = ms;
  return this;
};

/**
 * Faux promise support
 *
 * @param {Function} fulfill
 * @param {Function} reject
 * @return {Request}
 */

exports.then = function then(fulfill, reject) {
  return this.end(function(err, res) {
    err ? reject(err) : fulfill(res);
  });
}

/**
 * Allow for extension
 */

exports.use = function use(fn) {
  fn(this);
  return this;
}


/**
 * Get request header `field`.
 * Case-insensitive.
 *
 * @param {String} field
 * @return {String}
 * @api public
 */

exports.get = function(field){
  return this._header[field.toLowerCase()];
};

/**
 * Get case-insensitive header `field` value.
 * This is a deprecated internal API. Use `.get(field)` instead.
 *
 * (getHeader is no longer used internally by the superagent code base)
 *
 * @param {String} field
 * @return {String}
 * @api private
 * @deprecated
 */

exports.getHeader = exports.get;

/**
 * Set header `field` to `val`, or multiple fields with one object.
 * Case-insensitive.
 *
 * Examples:
 *
 *      req.get('/')
 *        .set('Accept', 'application/json')
 *        .set('X-API-Key', 'foobar')
 *        .end(callback);
 *
 *      req.get('/')
 *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })
 *        .end(callback);
 *
 * @param {String|Object} field
 * @param {String} val
 * @return {Request} for chaining
 * @api public
 */

exports.set = function(field, val){
  if (isObject(field)) {
    for (var key in field) {
      this.set(key, field[key]);
    }
    return this;
  }
  this._header[field.toLowerCase()] = val;
  this.header[field] = val;
  return this;
};

/**
 * Remove header `field`.
 * Case-insensitive.
 *
 * Example:
 *
 *      req.get('/')
 *        .unset('User-Agent')
 *        .end(callback);
 *
 * @param {String} field
 */
exports.unset = function(field){
  delete this._header[field.toLowerCase()];
  delete this.header[field];
  return this;
};

/**
 * Write the field `name` and `val` for "multipart/form-data"
 * request bodies.
 *
 * ``` js
 * request.post('/upload')
 *   .field('foo', 'bar')
 *   .end(callback);
 * ```
 *
 * @param {String} name
 * @param {String|Blob|File|Buffer|fs.ReadStream} val
 * @return {Request} for chaining
 * @api public
 */
exports.field = function(name, val) {
  this._getFormData().append(name, val);
  return this;
};

},{"./is-object":41}],43:[function(require,module,exports){
// The node and browser modules expose versions of this with the
// appropriate constructor function bound as first argument
/**
 * Issue a request:
 *
 * Examples:
 *
 *    request('GET', '/users').end(callback)
 *    request('/users').end(callback)
 *    request('/users', callback)
 *
 * @param {String} method
 * @param {String|Function} url or callback
 * @return {Request}
 * @api public
 */

function request(RequestConstructor, method, url) {
  // callback
  if ('function' == typeof url) {
    return new RequestConstructor('GET', method).end(url);
  }

  // url first
  if (2 == arguments.length) {
    return new RequestConstructor('GET', method);
  }

  return new RequestConstructor(method, url);
}

module.exports = request;

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJnZW4vaW5kZXguanMiLCJnZW4vcGFydGlhbHMvQWxlcnRpbmdBcGkuanMiLCJnZW4vcGFydGlhbHMvQW5hbHl0aWNzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL0F0dHJpYnV0ZXNBcGkuanMiLCJnZW4vcGFydGlhbHMvQXV0aG9yaXphdGlvbkFwaS5qcyIsImdlbi9wYXJ0aWFscy9Db250ZW50TWFuYWdlbWVudEFwaS5qcyIsImdlbi9wYXJ0aWFscy9Db252ZXJzYXRpb25zQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL0ZheEFwaS5qcyIsImdlbi9wYXJ0aWFscy9HZW9sb2NhdGlvbkFwaS5qcyIsImdlbi9wYXJ0aWFscy9HcmVldGluZ3NBcGkuanMiLCJnZW4vcGFydGlhbHMvR3JvdXBzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL0lkZW50aXR5UHJvdmlkZXJBcGkuanMiLCJnZW4vcGFydGlhbHMvTGFuZ3VhZ2VzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL0xvY2F0aW9uc0FwaS5qcyIsImdlbi9wYXJ0aWFscy9Ob3RpZmljYXRpb25zQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL09BdXRoQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL09yZ2FuaXphdGlvbkFwaS5qcyIsImdlbi9wYXJ0aWFscy9PdXRib3VuZEFwaS5qcyIsImdlbi9wYXJ0aWFscy9QcmVzZW5jZUFwaS5qcyIsImdlbi9wYXJ0aWFscy9RdWFsaXR5QXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1JlY29yZGluZ0FwaS5qcyIsImdlbi9wYXJ0aWFscy9SZXNwb25zZU1hbmFnZW1lbnRBcGkuanMiLCJnZW4vcGFydGlhbHMvUm91dGluZ0FwaS5qcyIsImdlbi9wYXJ0aWFscy9TY3JpcHRzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1NlYXJjaEFwaS5qcyIsImdlbi9wYXJ0aWFscy9TdGF0aW9uc0FwaS5qcyIsImdlbi9wYXJ0aWFscy9TdWdnZXN0QXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1RlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkuanMiLCJnZW4vcGFydGlhbHMvVG9rZW5zQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1VzZXJSZWNvcmRpbmdzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1VzZXJzQXBpLmpzIiwiZ2VuL3BhcnRpYWxzL1V0aWxpdGllc0FwaS5qcyIsImdlbi9wYXJ0aWFscy9Wb2ljZW1haWxBcGkuanMiLCJnZW4vcGFydGlhbHMvV29ya2ZvcmNlTWFuYWdlbWVudEFwaS5qcyIsImdlbi9wYXJ0aWFscy9wdXJlY2xvdWRzZXNzaW9uLmpzIiwibm9kZV9tb2R1bGVzL2NvbXBvbmVudC1lbWl0dGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlZHVjZS1jb21wb25lbnQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL3N1cGVyYWdlbnQvbGliL2lzLW9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9zdXBlcmFnZW50L2xpYi9yZXF1ZXN0LWJhc2UuanMiLCJub2RlX21vZHVsZXMvc3VwZXJhZ2VudC9saWIvcmVxdWVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy8yQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6MEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbFJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0cEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1MERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy85RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDblBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNVpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9oR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy96RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbnZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy8zREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDLzFOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzN3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNqb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoganNoaW50IG5vZGU6IHRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLkFuYWx5dGljc0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvQW5hbHl0aWNzQXBpJyk7XG5leHBvcnRzLlF1YWxpdHlBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL1F1YWxpdHlBcGknKTtcbmV4cG9ydHMuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaScpO1xuZXhwb3J0cy5Sb3V0aW5nQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Sb3V0aW5nQXBpJyk7XG5leHBvcnRzLlJlY29yZGluZ0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvUmVjb3JkaW5nQXBpJyk7XG5leHBvcnRzLkF1dGhvcml6YXRpb25BcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL0F1dGhvcml6YXRpb25BcGknKTtcbmV4cG9ydHMuT3V0Ym91bmRBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL091dGJvdW5kQXBpJyk7XG5leHBvcnRzLlZvaWNlbWFpbEFwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvVm9pY2VtYWlsQXBpJyk7XG5leHBvcnRzLkF0dHJpYnV0ZXNBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL0F0dHJpYnV0ZXNBcGknKTtcbmV4cG9ydHMuUmVzcG9uc2VNYW5hZ2VtZW50QXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9SZXNwb25zZU1hbmFnZW1lbnRBcGknKTtcbmV4cG9ydHMuV29ya2ZvcmNlTWFuYWdlbWVudEFwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvV29ya2ZvcmNlTWFuYWdlbWVudEFwaScpO1xuZXhwb3J0cy5Db252ZXJzYXRpb25zQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Db252ZXJzYXRpb25zQXBpJyk7XG5leHBvcnRzLlVzZXJzQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Vc2Vyc0FwaScpO1xuZXhwb3J0cy5BbGVydGluZ0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvQWxlcnRpbmdBcGknKTtcbmV4cG9ydHMuVXRpbGl0aWVzQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9VdGlsaXRpZXNBcGknKTtcbmV4cG9ydHMuT3JnYW5pemF0aW9uQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Pcmdhbml6YXRpb25BcGknKTtcbmV4cG9ydHMuR3JvdXBzQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Hcm91cHNBcGknKTtcbmV4cG9ydHMuU2VhcmNoQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9TZWFyY2hBcGknKTtcbmV4cG9ydHMuUHJlc2VuY2VBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL1ByZXNlbmNlQXBpJyk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbnNBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL05vdGlmaWNhdGlvbnNBcGknKTtcbmV4cG9ydHMuQ29udGVudE1hbmFnZW1lbnRBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL0NvbnRlbnRNYW5hZ2VtZW50QXBpJyk7XG5leHBvcnRzLklkZW50aXR5UHJvdmlkZXJBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL0lkZW50aXR5UHJvdmlkZXJBcGknKTtcbmV4cG9ydHMuU2NyaXB0c0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvU2NyaXB0c0FwaScpO1xuZXhwb3J0cy5TdGF0aW9uc0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvU3RhdGlvbnNBcGknKTtcbmV4cG9ydHMuVXNlclJlY29yZGluZ3NBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL1VzZXJSZWNvcmRpbmdzQXBpJyk7XG5leHBvcnRzLkxvY2F0aW9uc0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvTG9jYXRpb25zQXBpJyk7XG5leHBvcnRzLkxhbmd1YWdlc0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvTGFuZ3VhZ2VzQXBpJyk7XG5leHBvcnRzLkdyZWV0aW5nc0FwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvR3JlZXRpbmdzQXBpJyk7XG5leHBvcnRzLkdlb2xvY2F0aW9uQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9HZW9sb2NhdGlvbkFwaScpO1xuZXhwb3J0cy5GYXhBcGkgPSByZXF1aXJlKCcuL3BhcnRpYWxzL0ZheEFwaScpO1xuZXhwb3J0cy5PQXV0aEFwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvT0F1dGhBcGknKTtcbmV4cG9ydHMuVG9rZW5zQXBpID0gcmVxdWlyZSgnLi9wYXJ0aWFscy9Ub2tlbnNBcGknKTtcbmV4cG9ydHMuU3VnZ2VzdEFwaSA9IHJlcXVpcmUoJy4vcGFydGlhbHMvU3VnZ2VzdEFwaScpO1xuZXhwb3J0cy5QdXJlQ2xvdWRTZXNzaW9uPSByZXF1aXJlKCcuL3BhcnRpYWxzL3B1cmVjbG91ZHNlc3Npb24nKTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIEFsZXJ0aW5nQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkFsZXJ0aW5nQXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIEFsZXJ0aW5nQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBBbGVydGluZ0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbGVydGluZ0FwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQWxlcnRpbmdBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHJvdXRpbmcgc3RhdHVzIHJ1bGUgbGlzdC5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnMsIGFnZW50XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0Um91dGluZ3N0YXR1c1J1bGVzID0gZnVuY3Rpb24gZ2V0Um91dGluZ3N0YXR1c1J1bGVzKGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvcm91dGluZ3N0YXR1cy9ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSByb3V0aW5nIHN0YXR1cyBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgYWdlbnRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJvdXRpbmdTdGF0dXNSdWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFnZW50XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcInJvdXRpbmdTdGF0dXNcIjogXCJcIixcbiAgIFwicm91dGluZ0xpbWl0SW5TZWNvbmRzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJhZ2VudFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IFwiXCIsXG4gICBcInJvdXRpbmdMaW1pdEluU2Vjb25kc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImluQWxhcm1cIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLnBvc3RSb3V0aW5nc3RhdHVzUnVsZXMgPSBmdW5jdGlvbiBwb3N0Um91dGluZ3N0YXR1c1J1bGVzKGV4cGFuZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvcm91dGluZ3N0YXR1cy9ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW4gaW50ZXJhY3Rpb24gc3RhdHMgcnVsZSBsaXN0LlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2Vyc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmdldEludGVyYWN0aW9uc3RhdHNSdWxlcyA9IGZ1bmN0aW9uIGdldEludGVyYWN0aW9uc3RhdHNSdWxlcyhleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2ludGVyYWN0aW9uc3RhdHMvcnVsZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGFuIGludGVyYWN0aW9uIHN0YXRzIHJ1bGUuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBbGVydGluZ1J1bGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGltZW5zaW9uXCI6IFwiXCIsXG4gICBcImRpbWVuc2lvblZhbHVlXCI6IFwiXCIsXG4gICBcIm1ldHJpY1wiOiBcIlwiLFxuICAgXCJtZWRpYVR5cGVcIjogXCJcIixcbiAgIFwibnVtZXJpY1JhbmdlXCI6IFwiXCIsXG4gICBcInN0YXRpc3RpY1wiOiBcIlwiLFxuICAgXCJ2YWx1ZVwiOiB7fSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRpbWVuc2lvblwiOiBcIlwiLFxuICAgXCJkaW1lbnNpb25WYWx1ZVwiOiBcIlwiLFxuICAgXCJtZXRyaWNcIjogXCJcIixcbiAgIFwibWVkaWFUeXBlXCI6IFwiXCIsXG4gICBcIm51bWVyaWNSYW5nZVwiOiBcIlwiLFxuICAgXCJzdGF0aXN0aWNcIjogXCJcIixcbiAgIFwidmFsdWVcIjoge30sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiaW5BbGFybVwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUucG9zdEludGVyYWN0aW9uc3RhdHNSdWxlcyA9IGZ1bmN0aW9uIHBvc3RJbnRlcmFjdGlvbnN0YXRzUnVsZXMoZXhwYW5kLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy9pbnRlcmFjdGlvbnN0YXRzL3J1bGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB1c2VyIHByZXNlbmNlIGFsZXJ0IGxpc3QuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzLCBwcmVzZW5jZVVzZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRVc2VycHJlc2VuY2VBbGVydHMgPSBmdW5jdGlvbiBnZXRVc2VycHJlc2VuY2VBbGVydHMoZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy91c2VycHJlc2VuY2UvYWxlcnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBoZWFydCBiZWF0IGFsZXJ0IGxpc3QuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0SGVhcnRiZWF0QWxlcnRzID0gZnVuY3Rpb24gZ2V0SGVhcnRiZWF0QWxlcnRzKGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaGVhcnRiZWF0L2FsZXJ0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBoZWFydCBiZWF0IHJ1bGUgbGlzdC5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRIZWFydGJlYXRSdWxlcyA9IGZ1bmN0aW9uIGdldEhlYXJ0YmVhdFJ1bGVzKGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaGVhcnRiZWF0L3J1bGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIGhlYXJ0IGJlYXQgcnVsZS5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnNcbiAgKiBAcGFyYW0ge30gYm9keSAtIEhlYXJ0QmVhdFJ1bGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2VuZGVySWRcIjogXCJcIixcbiAgIFwiaGVhcnRCZWF0VGltZW91dEluTWludXRlc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJydWxlVHlwZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2VuZGVySWRcIjogXCJcIixcbiAgIFwiaGVhcnRCZWF0VGltZW91dEluTWludXRlc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImluQWxhcm1cIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInJ1bGVUeXBlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLnBvc3RIZWFydGJlYXRSdWxlcyA9IGZ1bmN0aW9uIHBvc3RIZWFydGJlYXRSdWxlcyhleHBhbmQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2hlYXJ0YmVhdC9ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXRzIHVzZXIgdW5yZWFkIGNvdW50IG9mIGludGVyYWN0aW9uIHN0YXRzIGFsZXJ0cy5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY291bnRcIjogMFxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmdldEludGVyYWN0aW9uc3RhdHNBbGVydHNVbnJlYWQgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGlvbnN0YXRzQWxlcnRzVW5yZWFkKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaW50ZXJhY3Rpb25zdGF0cy9hbGVydHMvdW5yZWFkJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgaGVhcnQgYmVhdCBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlSWQgLSBSdWxlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2VuZGVySWRcIjogXCJcIixcbiAgIFwiaGVhcnRCZWF0VGltZW91dEluTWludXRlc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImluQWxhcm1cIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInJ1bGVUeXBlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmdldEhlYXJ0YmVhdFJ1bGVzUnVsZUlkID0gZnVuY3Rpb24gZ2V0SGVhcnRiZWF0UnVsZXNSdWxlSWQocnVsZUlkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2hlYXJ0YmVhdC9ydWxlcy97cnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVJZH0nLCBydWxlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBoZWFydCBiZWF0IHJ1bGVcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZUlkIC0gUnVsZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2Vyc1xuICAqIEBwYXJhbSB7fSBib2R5IC0gSGVhcnRCZWF0UnVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZW5kZXJJZFwiOiBcIlwiLFxuICAgXCJoZWFydEJlYXRUaW1lb3V0SW5NaW51dGVzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInJ1bGVUeXBlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZW5kZXJJZFwiOiBcIlwiLFxuICAgXCJoZWFydEJlYXRUaW1lb3V0SW5NaW51dGVzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiaW5BbGFybVwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXSxcbiAgIFwicnVsZVR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUucHV0SGVhcnRiZWF0UnVsZXNSdWxlSWQgPSBmdW5jdGlvbiBwdXRIZWFydGJlYXRSdWxlc1J1bGVJZChydWxlSWQsIGV4cGFuZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaGVhcnRiZWF0L3J1bGVzL3tydWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVsZUlkID09PSB1bmRlZmluZWQgfHwgcnVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBydWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVsZUlkfScsIHJ1bGVJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgaGVhcnQgYmVhdCBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlSWQgLSBSdWxlIElEXG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlSGVhcnRiZWF0UnVsZXNSdWxlSWQgPSBmdW5jdGlvbiBkZWxldGVIZWFydGJlYXRSdWxlc1J1bGVJZChydWxlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2hlYXJ0YmVhdC9ydWxlcy97cnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVJZH0nLCBydWxlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCByb3V0aW5nIHN0YXR1cyBhbGVydCBsaXN0LlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgYWdlbnRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRSb3V0aW5nc3RhdHVzQWxlcnRzID0gZnVuY3Rpb24gZ2V0Um91dGluZ3N0YXR1c0FsZXJ0cyhleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL3JvdXRpbmdzdGF0dXMvYWxlcnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBpbnRlcmFjdGlvbiBzdGF0cyBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlSWQgLSBSdWxlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGltZW5zaW9uXCI6IFwiXCIsXG4gICBcImRpbWVuc2lvblZhbHVlXCI6IFwiXCIsXG4gICBcIm1ldHJpY1wiOiBcIlwiLFxuICAgXCJtZWRpYVR5cGVcIjogXCJcIixcbiAgIFwibnVtZXJpY1JhbmdlXCI6IFwiXCIsXG4gICBcInN0YXRpc3RpY1wiOiBcIlwiLFxuICAgXCJ2YWx1ZVwiOiB7fSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJpbkFsYXJtXCI6IHRydWUsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnN0YXRzUnVsZXNSdWxlSWQgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGlvbnN0YXRzUnVsZXNSdWxlSWQocnVsZUlkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2ludGVyYWN0aW9uc3RhdHMvcnVsZXMve3J1bGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihydWxlSWQgPT09IHVuZGVmaW5lZCB8fCBydWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJ1bGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tydWxlSWR9JywgcnVsZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGFuIGludGVyYWN0aW9uIHN0YXRzIHJ1bGVcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZUlkIC0gUnVsZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2Vyc1xuICAqIEBwYXJhbSB7fSBib2R5IC0gQWxlcnRpbmdSdWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRpbWVuc2lvblwiOiBcIlwiLFxuICAgXCJkaW1lbnNpb25WYWx1ZVwiOiBcIlwiLFxuICAgXCJtZXRyaWNcIjogXCJcIixcbiAgIFwibWVkaWFUeXBlXCI6IFwiXCIsXG4gICBcIm51bWVyaWNSYW5nZVwiOiBcIlwiLFxuICAgXCJzdGF0aXN0aWNcIjogXCJcIixcbiAgIFwidmFsdWVcIjoge30sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkaW1lbnNpb25cIjogXCJcIixcbiAgIFwiZGltZW5zaW9uVmFsdWVcIjogXCJcIixcbiAgIFwibWV0cmljXCI6IFwiXCIsXG4gICBcIm1lZGlhVHlwZVwiOiBcIlwiLFxuICAgXCJudW1lcmljUmFuZ2VcIjogXCJcIixcbiAgIFwic3RhdGlzdGljXCI6IFwiXCIsXG4gICBcInZhbHVlXCI6IHt9LFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImluQWxhcm1cIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLnB1dEludGVyYWN0aW9uc3RhdHNSdWxlc1J1bGVJZCA9IGZ1bmN0aW9uIHB1dEludGVyYWN0aW9uc3RhdHNSdWxlc1J1bGVJZChydWxlSWQsIGV4cGFuZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaW50ZXJhY3Rpb25zdGF0cy9ydWxlcy97cnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVJZH0nLCBydWxlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbiBpbnRlcmFjdGlvbiBzdGF0cyBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlSWQgLSBSdWxlIElEXG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlSW50ZXJhY3Rpb25zdGF0c1J1bGVzUnVsZUlkID0gZnVuY3Rpb24gZGVsZXRlSW50ZXJhY3Rpb25zdGF0c1J1bGVzUnVsZUlkKHJ1bGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaW50ZXJhY3Rpb25zdGF0cy9ydWxlcy97cnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVJZH0nLCBydWxlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGhlYXJ0IGJlYXQgYWxlcnRcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYWxlcnRJZCAtIEFsZXJ0IElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2VuZGVySWRcIjogXCJcIixcbiAgIFwiaGVhcnRCZWF0VGltZW91dEluTWludXRlc1wiOiAwLFxuICAgXCJydWxlSWRcIjogXCJcIixcbiAgIFwic3RhcnREYXRlXCI6IFwiXCIsXG4gICBcImVuZERhdGVcIjogXCJcIixcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInJ1bGVUeXBlXCI6IFwiXCIsXG4gICBcInJ1bGVVcmlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0SGVhcnRiZWF0QWxlcnRzQWxlcnRJZCA9IGZ1bmN0aW9uIGdldEhlYXJ0YmVhdEFsZXJ0c0FsZXJ0SWQoYWxlcnRJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy9oZWFydGJlYXQvYWxlcnRzL3thbGVydElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGFsZXJ0SWQgPT09IHVuZGVmaW5lZCB8fCBhbGVydElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhbGVydElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2FsZXJ0SWR9JywgYWxlcnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGhlYXJ0IGJlYXQgYWxlcnRcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYWxlcnRJZCAtIEFsZXJ0IElEXG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlSGVhcnRiZWF0QWxlcnRzQWxlcnRJZCA9IGZ1bmN0aW9uIGRlbGV0ZUhlYXJ0YmVhdEFsZXJ0c0FsZXJ0SWQoYWxlcnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaGVhcnRiZWF0L2FsZXJ0cy97YWxlcnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihhbGVydElkID09PSB1bmRlZmluZWQgfHwgYWxlcnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYWxlcnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3thbGVydElkfScsIGFsZXJ0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIgcHJlc2VuY2UgcnVsZS5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZUlkIC0gUnVsZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgcHJlc2VuY2VVc2VyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VVc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByZXNlbmNlVHlwZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZVZhbHVlXCI6IFwiXCIsXG4gICBcInByZXNlbmNlTGltaXRJblNlY29uZHNcIjogMCxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJpbkFsYXJtXCI6IHRydWUsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRVc2VycHJlc2VuY2VSdWxlc1J1bGVJZCA9IGZ1bmN0aW9uIGdldFVzZXJwcmVzZW5jZVJ1bGVzUnVsZUlkKHJ1bGVJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy91c2VycHJlc2VuY2UvcnVsZXMve3J1bGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihydWxlSWQgPT09IHVuZGVmaW5lZCB8fCBydWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJ1bGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tydWxlSWR9JywgcnVsZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgdXNlciBwcmVzZW5jZSBydWxlXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVJZCAtIFJ1bGUgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnMsIHByZXNlbmNlVXNlclxuICAqIEBwYXJhbSB7fSBib2R5IC0gVXNlclByZXNlbmNlUnVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZVVzZXJcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwicHJlc2VuY2VUeXBlXCI6IFwiXCIsXG4gICBcInByZXNlbmNlVmFsdWVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VMaW1pdEluU2Vjb25kc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VVc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByZXNlbmNlVHlwZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZVZhbHVlXCI6IFwiXCIsXG4gICBcInByZXNlbmNlTGltaXRJblNlY29uZHNcIjogMCxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJpbkFsYXJtXCI6IHRydWUsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5wdXRVc2VycHJlc2VuY2VSdWxlc1J1bGVJZCA9IGZ1bmN0aW9uIHB1dFVzZXJwcmVzZW5jZVJ1bGVzUnVsZUlkKHJ1bGVJZCwgZXhwYW5kLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy91c2VycHJlc2VuY2UvcnVsZXMve3J1bGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihydWxlSWQgPT09IHVuZGVmaW5lZCB8fCBydWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJ1bGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tydWxlSWR9JywgcnVsZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSB1c2VyIHByZXNlbmNlIHJ1bGUuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVJZCAtIFJ1bGUgSURcbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVVc2VycHJlc2VuY2VSdWxlc1J1bGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZVVzZXJwcmVzZW5jZVJ1bGVzUnVsZUlkKHJ1bGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvdXNlcnByZXNlbmNlL3J1bGVzL3tydWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVsZUlkID09PSB1bmRlZmluZWQgfHwgcnVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBydWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVsZUlkfScsIHJ1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgcm91dGluZyBzdGF0dXMgYWxlcnRcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYWxlcnRJZCAtIEFsZXJ0IElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzLCBhZ2VudFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFnZW50XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJvdXRpbmdTdGF0dXNcIjogXCJcIixcbiAgIFwicm91dGluZ0xpbWl0SW5TZWNvbmRzXCI6IDAsXG4gICBcInJ1bGVJZFwiOiBcIlwiLFxuICAgXCJzdGFydERhdGVcIjogXCJcIixcbiAgIFwiZW5kRGF0ZVwiOiBcIlwiLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0Um91dGluZ3N0YXR1c0FsZXJ0c0FsZXJ0SWQgPSBmdW5jdGlvbiBnZXRSb3V0aW5nc3RhdHVzQWxlcnRzQWxlcnRJZChhbGVydElkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL3JvdXRpbmdzdGF0dXMvYWxlcnRzL3thbGVydElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGFsZXJ0SWQgPT09IHVuZGVmaW5lZCB8fCBhbGVydElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhbGVydElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2FsZXJ0SWR9JywgYWxlcnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIHJvdXRpbmcgc3RhdHVzIGFsZXJ0XG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGFsZXJ0SWQgLSBBbGVydCBJRFxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVJvdXRpbmdzdGF0dXNBbGVydHNBbGVydElkID0gZnVuY3Rpb24gZGVsZXRlUm91dGluZ3N0YXR1c0FsZXJ0c0FsZXJ0SWQoYWxlcnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvcm91dGluZ3N0YXR1cy9hbGVydHMve2FsZXJ0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYWxlcnRJZCA9PT0gdW5kZWZpbmVkIHx8IGFsZXJ0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGFsZXJ0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YWxlcnRJZH0nLCBhbGVydElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgaW50ZXJhY3Rpb24gc3RhdHMgYWxlcnQgbGlzdC5cbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnN0YXRzQWxlcnRzID0gZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb25zdGF0c0FsZXJ0cyhleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2ludGVyYWN0aW9uc3RhdHMvYWxlcnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIgcHJlc2VuY2UgcnVsZSBsaXN0LlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgcHJlc2VuY2VVc2VyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0VXNlcnByZXNlbmNlUnVsZXMgPSBmdW5jdGlvbiBnZXRVc2VycHJlc2VuY2VSdWxlcyhleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL3VzZXJwcmVzZW5jZS9ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSB1c2VyIHByZXNlbmNlIHJ1bGUuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzLCBwcmVzZW5jZVVzZXJcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVzZXJQcmVzZW5jZVJ1bGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VVc2VyXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcInByZXNlbmNlVHlwZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZVZhbHVlXCI6IFwiXCIsXG4gICBcInByZXNlbmNlTGltaXRJblNlY29uZHNcIjogMCxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInByZXNlbmNlVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmVzZW5jZVR5cGVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VWYWx1ZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZUxpbWl0SW5TZWNvbmRzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiaW5BbGFybVwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUucG9zdFVzZXJwcmVzZW5jZVJ1bGVzID0gZnVuY3Rpb24gcG9zdFVzZXJwcmVzZW5jZVJ1bGVzKGV4cGFuZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvdXNlcnByZXNlbmNlL3J1bGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBpbnRlcmFjdGlvbiBzdGF0cyBhbGVydFxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBhbGVydElkIC0gQWxlcnQgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogbm90aWZpY2F0aW9uVXNlcnNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkaW1lbnNpb25cIjogXCJcIixcbiAgIFwiZGltZW5zaW9uVmFsdWVcIjogXCJcIixcbiAgIFwibWV0cmljXCI6IFwiXCIsXG4gICBcIm1lZGlhVHlwZVwiOiBcIlwiLFxuICAgXCJudW1lcmljUmFuZ2VcIjogXCJcIixcbiAgIFwic3RhdGlzdGljXCI6IFwiXCIsXG4gICBcInZhbHVlXCI6IHt9LFxuICAgXCJydWxlSWRcIjogXCJcIixcbiAgIFwidW5yZWFkXCI6IHRydWUsXG4gICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgXCJlbmREYXRlXCI6IFwiXCIsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJydWxlVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmdldEludGVyYWN0aW9uc3RhdHNBbGVydHNBbGVydElkID0gZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb25zdGF0c0FsZXJ0c0FsZXJ0SWQoYWxlcnRJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy9pbnRlcmFjdGlvbnN0YXRzL2FsZXJ0cy97YWxlcnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihhbGVydElkID09PSB1bmRlZmluZWQgfHwgYWxlcnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYWxlcnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3thbGVydElkfScsIGFsZXJ0SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYW4gaW50ZXJhY3Rpb24gc3RhdHMgYWxlcnQgcmVhZCBzdGF0dXNcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYWxlcnRJZCAtIEFsZXJ0IElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzXG4gICogQHBhcmFtIHt9IGJvZHkgLSBJbnRlcmFjdGlvblN0YXRzQWxlcnRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVucmVhZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVucmVhZFwiOiB0cnVlXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUucHV0SW50ZXJhY3Rpb25zdGF0c0FsZXJ0c0FsZXJ0SWQgPSBmdW5jdGlvbiBwdXRJbnRlcmFjdGlvbnN0YXRzQWxlcnRzQWxlcnRJZChhbGVydElkLCBleHBhbmQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL2ludGVyYWN0aW9uc3RhdHMvYWxlcnRzL3thbGVydElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGFsZXJ0SWQgPT09IHVuZGVmaW5lZCB8fCBhbGVydElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhbGVydElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2FsZXJ0SWR9JywgYWxlcnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGFuIGludGVyYWN0aW9uIHN0YXRzIGFsZXJ0XG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGFsZXJ0SWQgLSBBbGVydCBJRFxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZUludGVyYWN0aW9uc3RhdHNBbGVydHNBbGVydElkID0gZnVuY3Rpb24gZGVsZXRlSW50ZXJhY3Rpb25zdGF0c0FsZXJ0c0FsZXJ0SWQoYWxlcnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvaW50ZXJhY3Rpb25zdGF0cy9hbGVydHMve2FsZXJ0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYWxlcnRJZCA9PT0gdW5kZWZpbmVkIHx8IGFsZXJ0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGFsZXJ0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YWxlcnRJZH0nLCBhbGVydElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSB1c2VyIHByZXNlbmNlIGFsZXJ0XG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGFsZXJ0SWQgLSBBbGVydCBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgcHJlc2VuY2VVc2VyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicHJlc2VuY2VVc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByZXNlbmNlVHlwZVwiOiBcIlwiLFxuICAgXCJwcmVzZW5jZVZhbHVlXCI6IFwiXCIsXG4gICBcInByZXNlbmNlTGltaXRJblNlY29uZHNcIjogMCxcbiAgIFwicnVsZUlkXCI6IFwiXCIsXG4gICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgXCJlbmREYXRlXCI6IFwiXCIsXG4gICBcIm5vdGlmaWNhdGlvblVzZXJzXCI6IFtdLFxuICAgXCJhbGVydFR5cGVzXCI6IFtdLFxuICAgXCJydWxlVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmdldFVzZXJwcmVzZW5jZUFsZXJ0c0FsZXJ0SWQgPSBmdW5jdGlvbiBnZXRVc2VycHJlc2VuY2VBbGVydHNBbGVydElkKGFsZXJ0SWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvdXNlcnByZXNlbmNlL2FsZXJ0cy97YWxlcnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihhbGVydElkID09PSB1bmRlZmluZWQgfHwgYWxlcnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYWxlcnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3thbGVydElkfScsIGFsZXJ0SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSB1c2VyIHByZXNlbmNlIGFsZXJ0XG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGFsZXJ0SWQgLSBBbGVydCBJRFxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVVzZXJwcmVzZW5jZUFsZXJ0c0FsZXJ0SWQgPSBmdW5jdGlvbiBkZWxldGVVc2VycHJlc2VuY2VBbGVydHNBbGVydElkKGFsZXJ0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FsZXJ0aW5nL3VzZXJwcmVzZW5jZS9hbGVydHMve2FsZXJ0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYWxlcnRJZCA9PT0gdW5kZWZpbmVkIHx8IGFsZXJ0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGFsZXJ0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YWxlcnRJZH0nLCBhbGVydElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSByb3V0aW5nIHN0YXR1cyBydWxlLlxuICAqIEBtZW1iZXJPZiBBbGVydGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlSWQgLSBSdWxlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IG5vdGlmaWNhdGlvblVzZXJzLCBhZ2VudFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFnZW50XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJvdXRpbmdTdGF0dXNcIjogXCJcIixcbiAgIFwicm91dGluZ0xpbWl0SW5TZWNvbmRzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiaW5BbGFybVwiOiB0cnVlLFxuICAgXCJub3RpZmljYXRpb25Vc2Vyc1wiOiBbXSxcbiAgIFwiYWxlcnRUeXBlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbGVydGluZ0FwaS5wcm90b3R5cGUuZ2V0Um91dGluZ3N0YXR1c1J1bGVzUnVsZUlkID0gZnVuY3Rpb24gZ2V0Um91dGluZ3N0YXR1c1J1bGVzUnVsZUlkKHJ1bGVJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy9yb3V0aW5nc3RhdHVzL3J1bGVzL3tydWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVsZUlkID09PSB1bmRlZmluZWQgfHwgcnVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBydWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVsZUlkfScsIHJ1bGVJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHJvdXRpbmcgc3RhdHVzIHJ1bGVcbiAgKiBAbWVtYmVyT2YgQWxlcnRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZUlkIC0gUnVsZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBub3RpZmljYXRpb25Vc2VycywgYWdlbnRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJvdXRpbmdTdGF0dXNSdWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFnZW50XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcInJvdXRpbmdTdGF0dXNcIjogXCJcIixcbiAgIFwicm91dGluZ0xpbWl0SW5TZWNvbmRzXCI6IDAsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJhZ2VudFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IFwiXCIsXG4gICBcInJvdXRpbmdMaW1pdEluU2Vjb25kc1wiOiAwLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImluQWxhcm1cIjogdHJ1ZSxcbiAgIFwibm90aWZpY2F0aW9uVXNlcnNcIjogW10sXG4gICBcImFsZXJ0VHlwZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQWxlcnRpbmdBcGkucHJvdG90eXBlLnB1dFJvdXRpbmdzdGF0dXNSdWxlc1J1bGVJZCA9IGZ1bmN0aW9uIHB1dFJvdXRpbmdzdGF0dXNSdWxlc1J1bGVJZChydWxlSWQsIGV4cGFuZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYWxlcnRpbmcvcm91dGluZ3N0YXR1cy9ydWxlcy97cnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVJZH0nLCBydWxlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIHJvdXRpbmcgc3RhdHVzIHJ1bGUuXG4gICogQG1lbWJlck9mIEFsZXJ0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVJZCAtIFJ1bGUgSURcbiAgKi9cbkFsZXJ0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVSb3V0aW5nc3RhdHVzUnVsZXNSdWxlSWQgPSBmdW5jdGlvbiBkZWxldGVSb3V0aW5nc3RhdHVzUnVsZXNSdWxlSWQocnVsZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbGVydGluZy9yb3V0aW5nc3RhdHVzL3J1bGVzL3tydWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVsZUlkID09PSB1bmRlZmluZWQgfHwgcnVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBydWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVsZUlkfScsIHJ1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEFsZXJ0aW5nQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgQW5hbHl0aWNzQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkFuYWx5dGljc0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBBbmFseXRpY3NBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIEFuYWx5dGljc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbmFseXRpY3NBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuYWx5dGljc0FwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgc2NoZWR1bGVkIHJlcG9ydCBqb2IuXG4gICogQG1lbWJlck9mIEFuYWx5dGljc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlZHVsZUlkIC0gU2NoZWR1bGUgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJxdWFydHpDcm9uRXhwcmVzc2lvblwiOiBcIlwiLFxuICAgXCJuZXh0RmlyZVRpbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcInRpbWVQZXJpb2RcIjogXCJcIixcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwicmVwb3J0Rm9ybWF0XCI6IFwiXCIsXG4gICBcImxvY2FsZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICBcInBhcmFtZXRlcnNcIjoge30sXG4gICBcImxhc3RSdW5cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICAgICBcInJ1blRpbWVcIjogXCJcIixcbiAgICAgIFwicnVuU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVycm9yTWVzc2FnZVwiOiBcIlwiLFxuICAgICAgXCJydW5EdXJhdGlvbk1zZWNcIjogMCxcbiAgICAgIFwicmVwb3J0VXJsXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydEZvcm1hdFwiOiBcIlwiLFxuICAgICAgXCJzY2hlZHVsZVVyaVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5nZXRSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkID0gZnVuY3Rpb24gZ2V0UmVwb3J0aW5nU2NoZWR1bGVzU2NoZWR1bGVJZChzY2hlZHVsZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcmVwb3J0aW5nL3NjaGVkdWxlcy97c2NoZWR1bGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzY2hlZHVsZUlkID09PSB1bmRlZmluZWQgfHwgc2NoZWR1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NoZWR1bGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzY2hlZHVsZUlkfScsIHNjaGVkdWxlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHNjaGVkdWxlZCByZXBvcnQgam9iLlxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZWR1bGVJZCAtIFNjaGVkdWxlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSZXBvcnRTY2hlZHVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJxdWFydHpDcm9uRXhwcmVzc2lvblwiOiBcIlwiLFxuICAgXCJuZXh0RmlyZVRpbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcInRpbWVQZXJpb2RcIjogXCJcIixcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwicmVwb3J0Rm9ybWF0XCI6IFwiXCIsXG4gICBcImxvY2FsZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICBcInBhcmFtZXRlcnNcIjoge30sXG4gICBcImxhc3RSdW5cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICAgICBcInJ1blRpbWVcIjogXCJcIixcbiAgICAgIFwicnVuU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVycm9yTWVzc2FnZVwiOiBcIlwiLFxuICAgICAgXCJydW5EdXJhdGlvbk1zZWNcIjogMCxcbiAgICAgIFwicmVwb3J0VXJsXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydEZvcm1hdFwiOiBcIlwiLFxuICAgICAgXCJzY2hlZHVsZVVyaVwiOiBcIlwiXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicXVhcnR6Q3JvbkV4cHJlc3Npb25cIjogXCJcIixcbiAgIFwibmV4dEZpcmVUaW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgXCJ0aW1lUGVyaW9kXCI6IFwiXCIsXG4gICBcImludGVydmFsXCI6IFwiXCIsXG4gICBcInJlcG9ydEZvcm1hdFwiOiBcIlwiLFxuICAgXCJsb2NhbGVcIjogXCJcIixcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJyZXBvcnRJZFwiOiBcIlwiLFxuICAgXCJwYXJhbWV0ZXJzXCI6IHt9LFxuICAgXCJsYXN0UnVuXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJyZXBvcnRJZFwiOiBcIlwiLFxuICAgICAgXCJydW5UaW1lXCI6IFwiXCIsXG4gICAgICBcInJ1blN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlcnJvck1lc3NhZ2VcIjogXCJcIixcbiAgICAgIFwicnVuRHVyYXRpb25Nc2VjXCI6IDAsXG4gICAgICBcInJlcG9ydFVybFwiOiBcIlwiLFxuICAgICAgXCJyZXBvcnRGb3JtYXRcIjogXCJcIixcbiAgICAgIFwic2NoZWR1bGVVcmlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUucHV0UmVwb3J0aW5nU2NoZWR1bGVzU2NoZWR1bGVJZCA9IGZ1bmN0aW9uIHB1dFJlcG9ydGluZ1NjaGVkdWxlc1NjaGVkdWxlSWQoc2NoZWR1bGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3JlcG9ydGluZy9zY2hlZHVsZXMve3NjaGVkdWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2NoZWR1bGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNjaGVkdWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjaGVkdWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NoZWR1bGVJZH0nLCBzY2hlZHVsZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIHNjaGVkdWxlZCByZXBvcnQgam9iLlxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZWR1bGVJZCAtIFNjaGVkdWxlIElEXG4gICovXG5BbmFseXRpY3NBcGkucHJvdG90eXBlLmRlbGV0ZVJlcG9ydGluZ1NjaGVkdWxlc1NjaGVkdWxlSWQgPSBmdW5jdGlvbiBkZWxldGVSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkKHNjaGVkdWxlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9yZXBvcnRpbmcvc2NoZWR1bGVzL3tzY2hlZHVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjaGVkdWxlSWQgPT09IHVuZGVmaW5lZCB8fCBzY2hlZHVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlZHVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVkdWxlSWR9Jywgc2NoZWR1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiBzY2hlZHVsZWQgcmVwb3J0IGpvYnNcbiAgKiBAZGVzY3JpcHRpb24gR2V0IGEgbGlzdCBvZiBzY2hlZHVsZWQgcmVwb3J0IGpvYnMuXG4gICogQG1lbWJlck9mIEFuYWx5dGljc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5nZXRSZXBvcnRpbmdTY2hlZHVsZXMgPSBmdW5jdGlvbiBnZXRSZXBvcnRpbmdTY2hlZHVsZXMocGFnZU51bWJlciwgcGFnZVNpemUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9yZXBvcnRpbmcvc2NoZWR1bGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBzY2hlZHVsZWQgcmVwb3J0IGpvYlxuICAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgYSBzY2hlZHVsZWQgcmVwb3J0IGpvYi5cbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSZXBvcnRTY2hlZHVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJxdWFydHpDcm9uRXhwcmVzc2lvblwiOiBcIlwiLFxuICAgXCJuZXh0RmlyZVRpbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcInRpbWVQZXJpb2RcIjogXCJcIixcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwicmVwb3J0Rm9ybWF0XCI6IFwiXCIsXG4gICBcImxvY2FsZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICBcInBhcmFtZXRlcnNcIjoge30sXG4gICBcImxhc3RSdW5cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydElkXCI6IFwiXCIsXG4gICAgICBcInJ1blRpbWVcIjogXCJcIixcbiAgICAgIFwicnVuU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVycm9yTWVzc2FnZVwiOiBcIlwiLFxuICAgICAgXCJydW5EdXJhdGlvbk1zZWNcIjogMCxcbiAgICAgIFwicmVwb3J0VXJsXCI6IFwiXCIsXG4gICAgICBcInJlcG9ydEZvcm1hdFwiOiBcIlwiLFxuICAgICAgXCJzY2hlZHVsZVVyaVwiOiBcIlwiXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicXVhcnR6Q3JvbkV4cHJlc3Npb25cIjogXCJcIixcbiAgIFwibmV4dEZpcmVUaW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgXCJ0aW1lUGVyaW9kXCI6IFwiXCIsXG4gICBcImludGVydmFsXCI6IFwiXCIsXG4gICBcInJlcG9ydEZvcm1hdFwiOiBcIlwiLFxuICAgXCJsb2NhbGVcIjogXCJcIixcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJyZXBvcnRJZFwiOiBcIlwiLFxuICAgXCJwYXJhbWV0ZXJzXCI6IHt9LFxuICAgXCJsYXN0UnVuXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJyZXBvcnRJZFwiOiBcIlwiLFxuICAgICAgXCJydW5UaW1lXCI6IFwiXCIsXG4gICAgICBcInJ1blN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlcnJvck1lc3NhZ2VcIjogXCJcIixcbiAgICAgIFwicnVuRHVyYXRpb25Nc2VjXCI6IDAsXG4gICAgICBcInJlcG9ydFVybFwiOiBcIlwiLFxuICAgICAgXCJyZXBvcnRGb3JtYXRcIjogXCJcIixcbiAgICAgIFwic2NoZWR1bGVVcmlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUucG9zdFJlcG9ydGluZ1NjaGVkdWxlcyA9IGZ1bmN0aW9uIHBvc3RSZXBvcnRpbmdTY2hlZHVsZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3JlcG9ydGluZy9zY2hlZHVsZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgY29udmVyc2F0aW9uIGFnZ3JlZ2F0ZXNcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwiZ3JhbnVsYXJpdHlcIjogXCJcIixcbiAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgIFwiZ3JvdXBCeVwiOiBbXSxcbiAgIFwiZmlsdGVyXCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJjbGF1c2VzXCI6IFtdLFxuICAgICAgXCJwcmVkaWNhdGVzXCI6IFtdXG4gICB9LFxuICAgXCJtZXRyaWNzXCI6IFtdLFxuICAgXCJmbGF0dGVuTXVsdGl2YWx1ZWREaW1lbnNpb25zXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicmVzdWx0c1wiOiBbXVxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5wb3N0Q29udmVyc2F0aW9uc0FnZ3JlZ2F0ZXNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RDb252ZXJzYXRpb25zQWdncmVnYXRlc1F1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9jb252ZXJzYXRpb25zL2FnZ3JlZ2F0ZXMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgY29udmVyc2F0aW9uIGRldGFpbHNcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uRmlsdGVyc1wiOiBbXSxcbiAgIFwiZXZhbHVhdGlvbkZpbHRlcnNcIjogW10sXG4gICBcInNlZ21lbnRGaWx0ZXJzXCI6IFtdLFxuICAgXCJhZ2dyZWdhdGlvbnNcIjogW10sXG4gICBcInBhZ2luZ1wiOiB7XG4gICAgICBcInBhZ2VTaXplXCI6IDAsXG4gICAgICBcInBhZ2VOdW1iZXJcIjogMFxuICAgfSxcbiAgIFwib3JkZXJcIjogXCJcIixcbiAgIFwib3JkZXJCeVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvbnZlcnNhdGlvbnNcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXVxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5wb3N0Q29udmVyc2F0aW9uc0RldGFpbHNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RDb252ZXJzYXRpb25zRGV0YWlsc1F1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9jb252ZXJzYXRpb25zL2RldGFpbHMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBjb252ZXJzYXRpb24gYnkgaWRcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnZlcnNhdGlvbklkIC0gY29udmVyc2F0aW9uSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY29udmVyc2F0aW9uSWRcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uU3RhcnRcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uRW5kXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwiZXZhbHVhdGlvbnNcIjogW11cbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRGV0YWlscyA9IGZ1bmN0aW9uIGdldENvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZERldGFpbHMoY29udmVyc2F0aW9uSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9jb252ZXJzYXRpb25zL3tjb252ZXJzYXRpb25JZH0vZGV0YWlscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBJbmRleCBjb252ZXJzYXRpb24gcHJvcGVydGllc1xuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBjb252ZXJzYXRpb25JZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gcmVxdWVzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic2Vzc2lvbklkXCI6IFwiXCIsXG4gICBcInRhcmdldERhdGVcIjogXCJcIixcbiAgIFwicHJvcGVydGllc1wiOiBbXVxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5wb3N0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRGV0YWlsc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiBwb3N0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRGV0YWlsc1Byb3BlcnRpZXMoY29udmVyc2F0aW9uSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9jb252ZXJzYXRpb25zL3tjb252ZXJzYXRpb25JZH0vZGV0YWlscy9wcm9wZXJ0aWVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHJlcG9ydGluZyBtZXRhZGF0YS5cbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJlcG9ydElkIC0gUmVwb3J0IElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGxvY2FsZSAtIExvY2FsZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImtleXdvcmRzXCI6IFtdLFxuICAgXCJhdmFpbGFibGVMb2NhbGVzXCI6IFtdLFxuICAgXCJwYXJhbWV0ZXJzXCI6IFtdLFxuICAgXCJleGFtcGxlVXJsXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5nZXRSZXBvcnRpbmdSZXBvcnRJZE1ldGFkYXRhID0gZnVuY3Rpb24gZ2V0UmVwb3J0aW5nUmVwb3J0SWRNZXRhZGF0YShyZXBvcnRJZCwgbG9jYWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcmVwb3J0aW5nL3tyZXBvcnRJZH0vbWV0YWRhdGEnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihyZXBvcnRJZCA9PT0gdW5kZWZpbmVkIHx8IHJlcG9ydElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZXBvcnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyZXBvcnRJZH0nLCByZXBvcnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibG9jYWxlXCJdID0gbG9jYWxlO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGZvciBxdWV1ZSBvYnNlcnZhdGlvbnNcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZmlsdGVyXCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJjbGF1c2VzXCI6IFtdLFxuICAgICAgXCJwcmVkaWNhdGVzXCI6IFtdXG4gICB9LFxuICAgXCJtZXRyaWNzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInN5c3RlbVRvT3JnYW5pemF0aW9uTWFwcGluZ3NcIjoge30sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUucG9zdFF1ZXVlc09ic2VydmF0aW9uc1F1ZXJ5ID0gZnVuY3Rpb24gcG9zdFF1ZXVlc09ic2VydmF0aW9uc1F1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9xdWV1ZXMvb2JzZXJ2YXRpb25zL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgZm9yIHVzZXIgYWdncmVnYXRlc1xuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIHF1ZXJ5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJpbnRlcnZhbFwiOiBcIlwiLFxuICAgXCJncmFudWxhcml0eVwiOiBcIlwiLFxuICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgXCJncm91cEJ5XCI6IFtdLFxuICAgXCJmaWx0ZXJcIjoge1xuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcImNsYXVzZXNcIjogW10sXG4gICAgICBcInByZWRpY2F0ZXNcIjogW11cbiAgIH0sXG4gICBcIm1ldHJpY3NcIjogW10sXG4gICBcImZsYXR0ZW5NdWx0aXZhbHVlZERpbWVuc2lvbnNcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJzeXN0ZW1Ub09yZ2FuaXphdGlvbk1hcHBpbmdzXCI6IHt9LFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5BbmFseXRpY3NBcGkucHJvdG90eXBlLnBvc3RVc2Vyc0FnZ3JlZ2F0ZXNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RVc2Vyc0FnZ3JlZ2F0ZXNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvdXNlcnMvYWdncmVnYXRlcy9xdWVyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGZvciB1c2VyIGRldGFpbHNcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwidXNlckZpbHRlcnNcIjogW10sXG4gICBcInByZXNlbmNlRmlsdGVyc1wiOiBbXSxcbiAgIFwicm91dGluZ1N0YXR1c0ZpbHRlcnNcIjogW10sXG4gICBcInByZXNlbmNlQWdncmVnYXRpb25zXCI6IFtdLFxuICAgXCJyb3V0aW5nU3RhdHVzQWdncmVnYXRpb25zXCI6IFtdLFxuICAgXCJwYWdpbmdcIjoge1xuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDBcbiAgIH0sXG4gICBcIm9yZGVyXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidXNlckRldGFpbHNcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXVxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5wb3N0VXNlcnNEZXRhaWxzUXVlcnkgPSBmdW5jdGlvbiBwb3N0VXNlcnNEZXRhaWxzUXVlcnkoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3VzZXJzL2RldGFpbHMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgdXNlciBvYnNlcnZhdGlvbnNcbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZmlsdGVyXCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJjbGF1c2VzXCI6IFtdLFxuICAgICAgXCJwcmVkaWNhdGVzXCI6IFtdXG4gICB9LFxuICAgXCJtZXRyaWNzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUucG9zdFVzZXJzT2JzZXJ2YXRpb25zUXVlcnkgPSBmdW5jdGlvbiBwb3N0VXNlcnNPYnNlcnZhdGlvbnNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvdXNlcnMvb2JzZXJ2YXRpb25zL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiByZXBvcnQgZm9ybWF0c1xuICAqIEBkZXNjcmlwdGlvbiBHZXQgYSBsaXN0IG9mIHJlcG9ydCBmb3JtYXRzLlxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUuZ2V0UmVwb3J0aW5nUmVwb3J0Zm9ybWF0cyA9IGZ1bmN0aW9uIGdldFJlcG9ydGluZ1JlcG9ydGZvcm1hdHMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcmVwb3J0aW5nL3JlcG9ydGZvcm1hdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgZXZhbHVhdGlvbiBhZ2dyZWdhdGVzXG4gICogQG1lbWJlck9mIEFuYWx5dGljc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gcXVlcnlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImludGVydmFsXCI6IFwiXCIsXG4gICBcImdyYW51bGFyaXR5XCI6IFwiXCIsXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcImdyb3VwQnlcIjogW10sXG4gICBcImZpbHRlclwiOiB7XG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiY2xhdXNlc1wiOiBbXSxcbiAgICAgIFwicHJlZGljYXRlc1wiOiBbXVxuICAgfSxcbiAgIFwibWV0cmljc1wiOiBbXSxcbiAgIFwiZmxhdHRlbk11bHRpdmFsdWVkRGltZW5zaW9uc1wiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUucG9zdEV2YWx1YXRpb25zQWdncmVnYXRlc1F1ZXJ5ID0gZnVuY3Rpb24gcG9zdEV2YWx1YXRpb25zQWdncmVnYXRlc1F1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9ldmFsdWF0aW9ucy9hZ2dyZWdhdGVzL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQSBjb21wbGV0ZWQgc2NoZWR1bGVkIHJlcG9ydCBqb2JcbiAgKiBAZGVzY3JpcHRpb24gQSBjb21wbGV0ZWQgc2NoZWR1bGVkIHJlcG9ydCBqb2IuXG4gICogQG1lbWJlck9mIEFuYWx5dGljc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBydW5JZCAtIFJ1biBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlZHVsZUlkIC0gU2NoZWR1bGUgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJyZXBvcnRJZFwiOiBcIlwiLFxuICAgXCJydW5UaW1lXCI6IFwiXCIsXG4gICBcInJ1blN0YXR1c1wiOiBcIlwiLFxuICAgXCJlcnJvck1lc3NhZ2VcIjogXCJcIixcbiAgIFwicnVuRHVyYXRpb25Nc2VjXCI6IDAsXG4gICBcInJlcG9ydFVybFwiOiBcIlwiLFxuICAgXCJyZXBvcnRGb3JtYXRcIjogXCJcIixcbiAgIFwic2NoZWR1bGVVcmlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BbmFseXRpY3NBcGkucHJvdG90eXBlLmdldFJlcG9ydGluZ1NjaGVkdWxlc1NjaGVkdWxlSWRIaXN0b3J5UnVuSWQgPSBmdW5jdGlvbiBnZXRSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkSGlzdG9yeVJ1bklkKHJ1bklkLCBzY2hlZHVsZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcmVwb3J0aW5nL3NjaGVkdWxlcy97c2NoZWR1bGVJZH0vaGlzdG9yeS97cnVuSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVuSWQgPT09IHVuZGVmaW5lZCB8fCBydW5JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVuSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVuSWR9JywgcnVuSWQpO1xuICAgIGlmKHNjaGVkdWxlSWQgPT09IHVuZGVmaW5lZCB8fCBzY2hlZHVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlZHVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVkdWxlSWR9Jywgc2NoZWR1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiByZXBvcnQgdGltZSBwZXJpb2RzLlxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUuZ2V0UmVwb3J0aW5nVGltZXBlcmlvZHMgPSBmdW5jdGlvbiBnZXRSZXBvcnRpbmdUaW1lcGVyaW9kcygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9yZXBvcnRpbmcvdGltZXBlcmlvZHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbGlzdCBvZiByZXBvcnRpbmcgbWV0YWRhdGEuXG4gICogQG1lbWJlck9mIEFuYWx5dGljc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbGUgLSBMb2NhbGVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUuZ2V0UmVwb3J0aW5nTWV0YWRhdGEgPSBmdW5jdGlvbiBnZXRSZXBvcnRpbmdNZXRhZGF0YShwYWdlTnVtYmVyLCBwYWdlU2l6ZSwgbG9jYWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcmVwb3J0aW5nL21ldGFkYXRhJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJsb2NhbGVcIl0gPSBsb2NhbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGxpc3Qgb2YgY29tcGxldGVkIHNjaGVkdWxlZCByZXBvcnQgam9icy5cbiAgKiBAbWVtYmVyT2YgQW5hbHl0aWNzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNjaGVkdWxlSWQgLSBTY2hlZHVsZSBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkFuYWx5dGljc0FwaS5wcm90b3R5cGUuZ2V0UmVwb3J0aW5nU2NoZWR1bGVzU2NoZWR1bGVJZEhpc3RvcnkgPSBmdW5jdGlvbiBnZXRSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkSGlzdG9yeShzY2hlZHVsZUlkLCBwYWdlTnVtYmVyLCBwYWdlU2l6ZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3JlcG9ydGluZy9zY2hlZHVsZXMve3NjaGVkdWxlSWR9L2hpc3RvcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzY2hlZHVsZUlkID09PSB1bmRlZmluZWQgfHwgc2NoZWR1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NoZWR1bGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzY2hlZHVsZUlkfScsIHNjaGVkdWxlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IG1vc3QgcmVjZW50bHkgY29tcGxldGVkIHNjaGVkdWxlZCByZXBvcnQgam9iLlxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZWR1bGVJZCAtIFNjaGVkdWxlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicmVwb3J0SWRcIjogXCJcIixcbiAgIFwicnVuVGltZVwiOiBcIlwiLFxuICAgXCJydW5TdGF0dXNcIjogXCJcIixcbiAgIFwiZXJyb3JNZXNzYWdlXCI6IFwiXCIsXG4gICBcInJ1bkR1cmF0aW9uTXNlY1wiOiAwLFxuICAgXCJyZXBvcnRVcmxcIjogXCJcIixcbiAgIFwicmVwb3J0Rm9ybWF0XCI6IFwiXCIsXG4gICBcInNjaGVkdWxlVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQW5hbHl0aWNzQXBpLnByb3RvdHlwZS5nZXRSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkSGlzdG9yeUxhdGVzdCA9IGZ1bmN0aW9uIGdldFJlcG9ydGluZ1NjaGVkdWxlc1NjaGVkdWxlSWRIaXN0b3J5TGF0ZXN0KHNjaGVkdWxlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9yZXBvcnRpbmcvc2NoZWR1bGVzL3tzY2hlZHVsZUlkfS9oaXN0b3J5L2xhdGVzdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjaGVkdWxlSWQgPT09IHVuZGVmaW5lZCB8fCBzY2hlZHVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlZHVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVkdWxlSWR9Jywgc2NoZWR1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUGxhY2UgYSBzY2hlZHVsZWQgcmVwb3J0IGltbWVkaWF0ZWx5IGludG8gdGhlIHJlcG9ydGluZyBxdWV1ZVxuICAqIEBtZW1iZXJPZiBBbmFseXRpY3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZWR1bGVJZCAtIFNjaGVkdWxlIElEXG4gICovXG5BbmFseXRpY3NBcGkucHJvdG90eXBlLnBvc3RSZXBvcnRpbmdTY2hlZHVsZXNTY2hlZHVsZUlkUnVucmVwb3J0ID0gZnVuY3Rpb24gcG9zdFJlcG9ydGluZ1NjaGVkdWxlc1NjaGVkdWxlSWRSdW5yZXBvcnQoc2NoZWR1bGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3JlcG9ydGluZy9zY2hlZHVsZXMve3NjaGVkdWxlSWR9L3J1bnJlcG9ydCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjaGVkdWxlSWQgPT09IHVuZGVmaW5lZCB8fCBzY2hlZHVsZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlZHVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVkdWxlSWR9Jywgc2NoZWR1bGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBBbmFseXRpY3NBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBBdHRyaWJ1dGVzQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkF0dHJpYnV0ZXNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gQXR0cmlidXRlc0FwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRyaWJ1dGVzQXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXRzIGEgbGlzdCBvZiBleGlzdGluZyBhdHRyaWJ1dGVzLlxuICAqIEBtZW1iZXJPZiBBdHRyaWJ1dGVzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BdHRyaWJ1dGVzQXBpLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlcyhwYWdlTnVtYmVyLCBwYWdlU2l6ZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXR0cmlidXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGFuIGF0dHJpYnV0ZS5cbiAgKiBAbWVtYmVyT2YgQXR0cmlidXRlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gQXR0cmlidXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkF0dHJpYnV0ZXNBcGkucHJvdG90eXBlLnBvc3RBdHRyaWJ1dGVzID0gZnVuY3Rpb24gcG9zdEF0dHJpYnV0ZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXR0cmlidXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGF0dHJpYnV0ZXNcbiAgKiBAbWVtYmVyT2YgQXR0cmlidXRlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gcXVlcnlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInF1ZXJ5XCI6IFwiXCIsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMFxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQXR0cmlidXRlc0FwaS5wcm90b3R5cGUucG9zdFF1ZXJ5ID0gZnVuY3Rpb24gcG9zdFF1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F0dHJpYnV0ZXMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZGV0YWlscyBhYm91dCBhbiBleGlzdGluZyBhdHRyaWJ1dGUuXG4gICogQG1lbWJlck9mIEF0dHJpYnV0ZXNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlSWQgLSBBdHRyaWJ1dGUgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkF0dHJpYnV0ZXNBcGkucHJvdG90eXBlLmdldEF0dHJpYnV0ZUlkID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlSWQoYXR0cmlidXRlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F0dHJpYnV0ZXMve2F0dHJpYnV0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGF0dHJpYnV0ZUlkID09PSB1bmRlZmluZWQgfHwgYXR0cmlidXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGF0dHJpYnV0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2F0dHJpYnV0ZUlkfScsIGF0dHJpYnV0ZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYW4gZXhpc3RpbmcgYXR0cmlidXRlLlxuICAqIEBkZXNjcmlwdGlvbiBGaWVsZHMgdGhhdCBjYW4gYmUgdXBkYXRlZDogbmFtZSwgZGVzY3JpcHRpb24uIFRoZSBtb3N0IHJlY2VudCB2ZXJzaW9uIGlzIHJlcXVpcmVkIGZvciB1cGRhdGVzLlxuICAqIEBtZW1iZXJPZiBBdHRyaWJ1dGVzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZUlkIC0gQXR0cmlidXRlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBdHRyaWJ1dGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQXR0cmlidXRlc0FwaS5wcm90b3R5cGUucHV0QXR0cmlidXRlSWQgPSBmdW5jdGlvbiBwdXRBdHRyaWJ1dGVJZChhdHRyaWJ1dGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXR0cmlidXRlcy97YXR0cmlidXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYXR0cmlidXRlSWQgPT09IHVuZGVmaW5lZCB8fCBhdHRyaWJ1dGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYXR0cmlidXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YXR0cmlidXRlSWR9JywgYXR0cmlidXRlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGFuIGV4aXN0aW5nIEF0dHJpYnV0ZS5cbiAgKiBAZGVzY3JpcHRpb24gVGhpcyB3aWxsIHJlbW92ZSBhdHRyaWJ1dGUuXG4gICogQG1lbWJlck9mIEF0dHJpYnV0ZXNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlSWQgLSBBdHRyaWJ1dGUgSURcbiAgKi9cbkF0dHJpYnV0ZXNBcGkucHJvdG90eXBlLmRlbGV0ZUF0dHJpYnV0ZUlkID0gZnVuY3Rpb24gZGVsZXRlQXR0cmlidXRlSWQoYXR0cmlidXRlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F0dHJpYnV0ZXMve2F0dHJpYnV0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGF0dHJpYnV0ZUlkID09PSB1bmRlZmluZWQgfHwgYXR0cmlidXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGF0dHJpYnV0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2F0dHJpYnV0ZUlkfScsIGF0dHJpYnV0ZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gQXR0cmlidXRlc0FwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIEF1dGhvcml6YXRpb25BcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uQXV0aG9yaXphdGlvbkFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBBdXRob3JpemF0aW9uQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBBdXRob3JpemF0aW9uQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IEF1dGhvcml6YXRpb25BcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhvcml6YXRpb25BcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHJpZXZlIGEgbGlzdCBvZiBhbGwgcm9sZXMgZGVmaW5lZCBmb3IgdGhlIG9yZ2FuaXphdGlvblxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFRoZSB0b3RhbCBwYWdlIHNpemUgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gVGhlIHBhZ2UgbnVtYmVyIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCB0byBzb3J0IGJ5XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgYnkgZXhwYW5kIGxpc3RcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dFBhZ2UgLSBuZXh0IHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gcHJldmlvdXNQYWdlIC0gUHJldmlvdXMgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7YXJyYXl9IHBlcm1pc3Npb24gLSBcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZXJDb3VudCAtIFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUuZ2V0Um9sZXMgPSBmdW5jdGlvbiBnZXRSb2xlcyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBleHBhbmQsIG5leHRQYWdlLCBwcmV2aW91c1BhZ2UsIHBlcm1pc3Npb24sIHVzZXJDb3VudCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9yb2xlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwZXJtaXNzaW9uXCJdID0gcGVybWlzc2lvbjtcbiAgICByZXF1ZXN0UXVlcnlbXCJ1c2VyQ291bnRcIl0gPSB1c2VyQ291bnQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGFuIG9yZ2FuaXphdGlvbiByb2xlLlxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBPcmdhbml6YXRpb24gcm9sZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJkZWZhdWx0Um9sZUlkXCI6IFwiXCIsXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uUG9saWNpZXNcIjogW10sXG4gICBcInVzZXJDb3VudFwiOiAwLFxuICAgXCJyb2xlTmVlZHNVcGRhdGVcIjogdHJ1ZSxcbiAgIFwiZGVmYXVsdFwiOiB0cnVlLFxuICAgXCJiYXNlXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJkZWZhdWx0Um9sZUlkXCI6IFwiXCIsXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uUG9saWNpZXNcIjogW10sXG4gICBcInVzZXJDb3VudFwiOiAwLFxuICAgXCJyb2xlTmVlZHNVcGRhdGVcIjogdHJ1ZSxcbiAgIFwiZGVmYXVsdFwiOiB0cnVlLFxuICAgXCJiYXNlXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUucG9zdFJvbGVzID0gZnVuY3Rpb24gcG9zdFJvbGVzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F1dGhvcml6YXRpb24vcm9sZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYWxsIHBlcm1pc3Npb25zLlxuICAqIEBkZXNjcmlwdGlvbiBSZXRyaWV2ZSBhIGxpc3Qgb2YgYWxsIHBlcm1pc3Npb24gZGVmaW5lZCBpbiB0aGUgc3lzdGVtLlxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BdXRob3JpemF0aW9uQXBpLnByb3RvdHlwZS5nZXRQZXJtaXNzaW9ucyA9IGZ1bmN0aW9uIGdldFBlcm1pc3Npb25zKHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hdXRob3JpemF0aW9uL3Blcm1pc3Npb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZXN0b3JlcyBhbGwgZGVmYXVsdCByb2xlc1xuICAqIEBkZXNjcmlwdGlvbiBUaGlzIGVuZHBvaW50IHNlcnZlcyBzZXZlcmFsIHB1cnBvc2VzLiAxLiBJdCBwcm92aWRlcyB0aGUgb3JnIHdpdGggZGVmYXVsdCByb2xlcy4gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIGRlZmF1bHQgcm9sZXMgdGhhdCB3aWxsIGJlIGFkZGVkIGFmdGVyIGdvLWxpdmUgKHRoZXkgY2FuIHJldHJvYWN0aXZlbHkgYWRkIHRoZSBuZXcgZGVmYXVsdC1yb2xlKS4gTm90ZTogV2hlbiBub3QgdXNpbmcgYSBxdWVyeSBwYXJhbSBvZiBmb3JjZT10cnVlLCBpdCBvbmx5IGFkZHMgdGhlIGRlZmF1bHQgcm9sZXMgbm90IGNvbmZpZ3VyZWQgZm9yIHRoZSBvcmc7IGl0IGRvZXMgbm90IG92ZXJ3cml0ZSByb2xlcy4gMi4gVXNpbmcgdGhlIHF1ZXJ5IHBhcmFtIGZvcmNlPXRydWUsIHlvdSBjYW4gcmVzdG9yZSBhbGwgZGVmYXVsdCByb2xlcy4gTm90ZTogVGhpcyBkb2VzIG5vdCBoYXZlIGFuIGVmZmVjdCBvbiBjdXN0b20gcm9sZXMuXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlIC0gUmVzdG9yZSBkZWZhdWx0IHJvbGVzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BdXRob3JpemF0aW9uQXBpLnByb3RvdHlwZS5wb3N0Um9sZXNEZWZhdWx0ID0gZnVuY3Rpb24gcG9zdFJvbGVzRGVmYXVsdChmb3JjZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9yb2xlcy9kZWZhdWx0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZm9yY2VcIl0gPSBmb3JjZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVzdG9yZSBzcGVjaWZpZWQgZGVmYXVsdCByb2xlc1xuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBPcmdhbml6YXRpb24gcm9sZXMgbGlzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgXCJ1c2VyQ291bnRcIjogMCxcbiAgXCJyb2xlTmVlZHNVcGRhdGVcIjogdHJ1ZSxcbiAgXCJkZWZhdWx0XCI6IHRydWUsXG4gIFwiYmFzZVwiOiB0cnVlXG4gfVxuXVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUucHV0Um9sZXNEZWZhdWx0ID0gZnVuY3Rpb24gcHV0Um9sZXNEZWZhdWx0KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F1dGhvcml6YXRpb24vcm9sZXMvZGVmYXVsdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIGVuYWJsZWQgcHJvZHVjdHNcbiAgKiBAZGVzY3JpcHRpb24gR2V0cyB0aGUgbGlzdCBvZiBlbmFibGVkIHByb2R1Y3RzLiBTb21lIGV4YW1wbGUgcHJvZHVjdCBuYW1lcyBhcmU6IGNvbGxhYm9yYXRlRnJlZSwgY29sbGFib3JhdGVQcm8sIGNvbW11bmljYXRlLCBhbmQgZW5nYWdlLlxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5BdXRob3JpemF0aW9uQXBpLnByb3RvdHlwZS5nZXRQcm9kdWN0cyA9IGZ1bmN0aW9uIGdldFByb2R1Y3RzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9wcm9kdWN0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0aW5nIG9mIHJvbGVzIGFuZCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VyLlxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicm9sZXNcIjogW10sXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uUG9saWNpZXNcIjogW11cbn1cbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLmdldFVzZXJJZFJvbGVzID0gZnVuY3Rpb24gZ2V0VXNlcklkUm9sZXModXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb2xlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNldHMgdGhlIHVzZXIncyByb2xlc1xuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIExpc3Qgb2Ygcm9sZXNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicm9sZXNcIjogW10sXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uUG9saWNpZXNcIjogW11cbn1cbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLnB1dFVzZXJJZFJvbGVzID0gZnVuY3Rpb24gcHV0VXNlcklkUm9sZXModXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb2xlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVtb3ZlcyBhbGwgdGhlIHJvbGVzIGZyb20gdGhlIHVzZXIuXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUuZGVsZXRlVXNlcklkUm9sZXMgPSBmdW5jdGlvbiBkZWxldGVVc2VySWRSb2xlcyh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3JvbGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2V0cyB0aGUgdXNlcnMgZm9yIHRoZSByb2xlXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcm9sZUlkIC0gUm9sZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTGlzdCBvZiB1c2VyIElEc1xuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUucHV0Um9sZXNSb2xlSWRVc2Vyc0FkZCA9IGZ1bmN0aW9uIHB1dFJvbGVzUm9sZUlkVXNlcnNBZGQocm9sZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hdXRob3JpemF0aW9uL3JvbGVzL3tyb2xlSWR9L3VzZXJzL2FkZCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJvbGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcm9sZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JvbGVJZH0nLCByb2xlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVtb3ZlcyB0aGUgdXNlcnMgZnJvbSB0aGUgcm9sZVxuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJvbGVJZCAtIFJvbGUgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIExpc3Qgb2YgdXNlciBJRHNcbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLnB1dFJvbGVzUm9sZUlkVXNlcnNSZW1vdmUgPSBmdW5jdGlvbiBwdXRSb2xlc1JvbGVJZFVzZXJzUmVtb3ZlKHJvbGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9yb2xlcy97cm9sZUlkfS91c2Vycy9yZW1vdmUnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihyb2xlSWQgPT09IHVuZGVmaW5lZCB8fCByb2xlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJvbGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyb2xlSWR9Jywgcm9sZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBvcmcgcm9sZSB0byBkZWZhdWx0IHJvbGUgY29tcGFyaXNvbiBjb21wYXJpc29uXG4gICogQGRlc2NyaXB0aW9uIENvbXBhcmVzIGFueSBvcmdhbml6YXRpb24gcm9sZSB0byBhIGRlZmF1bHQgcm9sZSBpZCBhbmQgc2hvdyBkaWZmZXJlbmNlc1xuICAqIEBtZW1iZXJPZiBBdXRob3JpemF0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGxlZnRSb2xlSWQgLSBMZWZ0IFJvbGUgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmlnaHRSb2xlSWQgLSBSaWdodCBSb2xlIGlkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlbW92ZWRQZXJtaXNzaW9uUG9saWNpZXNcIjogW10sXG4gICBcImFkZGVkUGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJzYW1lUGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJ1c2VyT3JnUm9sZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgICAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICAgICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgICAgIFwiYmFzZVwiOiB0cnVlLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJvbGVGcm9tRGVmYXVsdFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgICAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICAgICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgICAgIFwiYmFzZVwiOiB0cnVlLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH1cbn1cbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLmdldFJvbGVzTGVmdHJvbGVJZENvbXBhcmVkZWZhdWx0UmlnaHRyb2xlSWQgPSBmdW5jdGlvbiBnZXRSb2xlc0xlZnRyb2xlSWRDb21wYXJlZGVmYXVsdFJpZ2h0cm9sZUlkKGxlZnRSb2xlSWQsIHJpZ2h0Um9sZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hdXRob3JpemF0aW9uL3JvbGVzL3tsZWZ0Um9sZUlkfS9jb21wYXJlZGVmYXVsdC97cmlnaHRSb2xlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGVmdFJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IGxlZnRSb2xlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxlZnRSb2xlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bGVmdFJvbGVJZH0nLCBsZWZ0Um9sZUlkKTtcbiAgICBpZihyaWdodFJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0Um9sZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByaWdodFJvbGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyaWdodFJvbGVJZH0nLCByaWdodFJvbGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGFuIHVuc2F2ZWQgb3JnIHJvbGUgdG8gZGVmYXVsdCByb2xlIGNvbXBhcmlzb25cbiAgKiBAZGVzY3JpcHRpb24gQWxsb3dzIHVzZXJzIHRvIGNvbXBhcmUgdGhlaXIgZXhpc3Rpbmcgcm9sZXMgaW4gYW4gdW5zYXZlZCBzdGF0ZSB0byBpdHMgZGVmYXVsdCByb2xlXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGVmdFJvbGVJZCAtIExlZnQgUm9sZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSByaWdodFJvbGVJZCAtIFJpZ2h0IFJvbGUgaWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIE9yZ2FuaXphdGlvbiByb2xlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImRlZmF1bHRSb2xlSWRcIjogXCJcIixcbiAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgIFwidXNlckNvdW50XCI6IDAsXG4gICBcInJvbGVOZWVkc1VwZGF0ZVwiOiB0cnVlLFxuICAgXCJkZWZhdWx0XCI6IHRydWUsXG4gICBcImJhc2VcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJyZW1vdmVkUGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJhZGRlZFBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgIFwic2FtZVBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgIFwidXNlck9yZ1JvbGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRlZmF1bHRSb2xlSWRcIjogXCJcIixcbiAgICAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICAgICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgICAgIFwidXNlckNvdW50XCI6IDAsXG4gICAgICBcInJvbGVOZWVkc1VwZGF0ZVwiOiB0cnVlLFxuICAgICAgXCJkZWZhdWx0XCI6IHRydWUsXG4gICAgICBcImJhc2VcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyb2xlRnJvbURlZmF1bHRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRlZmF1bHRSb2xlSWRcIjogXCJcIixcbiAgICAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICAgICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgICAgIFwidXNlckNvdW50XCI6IDAsXG4gICAgICBcInJvbGVOZWVkc1VwZGF0ZVwiOiB0cnVlLFxuICAgICAgXCJkZWZhdWx0XCI6IHRydWUsXG4gICAgICBcImJhc2VcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9XG59XG4gICovXG5BdXRob3JpemF0aW9uQXBpLnByb3RvdHlwZS5wb3N0Um9sZXNMZWZ0cm9sZUlkQ29tcGFyZWRlZmF1bHRSaWdodHJvbGVJZCA9IGZ1bmN0aW9uIHBvc3RSb2xlc0xlZnRyb2xlSWRDb21wYXJlZGVmYXVsdFJpZ2h0cm9sZUlkKGxlZnRSb2xlSWQsIHJpZ2h0Um9sZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hdXRob3JpemF0aW9uL3JvbGVzL3tsZWZ0Um9sZUlkfS9jb21wYXJlZGVmYXVsdC97cmlnaHRSb2xlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGVmdFJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IGxlZnRSb2xlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxlZnRSb2xlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bGVmdFJvbGVJZH0nLCBsZWZ0Um9sZUlkKTtcbiAgICBpZihyaWdodFJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0Um9sZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByaWdodFJvbGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyaWdodFJvbGVJZH0nLCByaWdodFJvbGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgc2luZ2xlIG9yZ2FuaXphdGlvbiByb2xlLlxuICAqIEBkZXNjcmlwdGlvbiBHZXQgdGhlIG9yZ2FuaXphdGlvbiByb2xlIHNwZWNpZmllZCBieSBpdHMgSUQuXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcm9sZUlkIC0gUm9sZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImRlZmF1bHRSb2xlSWRcIjogXCJcIixcbiAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXSxcbiAgIFwidXNlckNvdW50XCI6IDAsXG4gICBcInJvbGVOZWVkc1VwZGF0ZVwiOiB0cnVlLFxuICAgXCJkZWZhdWx0XCI6IHRydWUsXG4gICBcImJhc2VcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5BdXRob3JpemF0aW9uQXBpLnByb3RvdHlwZS5nZXRSb2xlc1JvbGVJZCA9IGZ1bmN0aW9uIGdldFJvbGVzUm9sZUlkKHJvbGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9yb2xlcy97cm9sZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJvbGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcm9sZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JvbGVJZH0nLCByb2xlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbiBvcmdhbml6YXRpb24gcm9sZS5cbiAgKiBAZGVzY3JpcHRpb24gVXBkYXRlXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcm9sZUlkIC0gUm9sZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gT3JnYW5pemF0aW9uIHJvbGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgIFwiYmFzZVwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgIFwiYmFzZVwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLnB1dFJvbGVzUm9sZUlkID0gZnVuY3Rpb24gcHV0Um9sZXNSb2xlSWQocm9sZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hdXRob3JpemF0aW9uL3JvbGVzL3tyb2xlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocm9sZUlkID09PSB1bmRlZmluZWQgfHwgcm9sZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByb2xlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cm9sZUlkfScsIHJvbGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYW4gb3JnYW5pemF0aW9uIHJvbGUuXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcm9sZUlkIC0gUm9sZSBJRFxuICAqL1xuQXV0aG9yaXphdGlvbkFwaS5wcm90b3R5cGUuZGVsZXRlUm9sZXNSb2xlSWQgPSBmdW5jdGlvbiBkZWxldGVSb2xlc1JvbGVJZChyb2xlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2F1dGhvcml6YXRpb24vcm9sZXMve3JvbGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihyb2xlSWQgPT09IHVuZGVmaW5lZCB8fCByb2xlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJvbGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyb2xlSWR9Jywgcm9sZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBQYXRjaCBPcmdhbml6YXRpb24gUm9sZSBmb3IgbmVlZHNVcGRhdGUgRmllbGRcbiAgKiBAZGVzY3JpcHRpb24gUGF0Y2ggT3JnYW5pemF0aW9uIFJvbGUgZm9yIG5lZWRzVXBkYXRlIEZpZWxkXG4gICogQG1lbWJlck9mIEF1dGhvcml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcm9sZUlkIC0gUm9sZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gT3JnYW5pemF0aW9uIHJvbGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgIFwiYmFzZVwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGVmYXVsdFJvbGVJZFwiOiBcIlwiLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdLFxuICAgXCJ1c2VyQ291bnRcIjogMCxcbiAgIFwicm9sZU5lZWRzVXBkYXRlXCI6IHRydWUsXG4gICBcImRlZmF1bHRcIjogdHJ1ZSxcbiAgIFwiYmFzZVwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkF1dGhvcml6YXRpb25BcGkucHJvdG90eXBlLnBhdGNoUm9sZXNSb2xlSWQgPSBmdW5jdGlvbiBwYXRjaFJvbGVzUm9sZUlkKHJvbGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYXV0aG9yaXphdGlvbi9yb2xlcy97cm9sZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJvbGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJvbGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcm9sZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JvbGVJZH0nLCByb2xlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gQXV0aG9yaXphdGlvbkFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkNvbnRlbnRNYW5hZ2VtZW50QXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIENvbnRlbnRNYW5hZ2VtZW50QXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBDb250ZW50TWFuYWdlbWVudEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250ZW50TWFuYWdlbWVudEFwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29udGVudE1hbmFnZW1lbnRBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERvd25sb2FkIGEgZG9jdW1lbnQuXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SWQgLSBEb2N1bWVudCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwb3NpdGlvbiAtIFJlcXVlc3QgaG93IHRoZSBjb250ZW50IHdpbGwgYmUgZG93bmxvYWRlZDogYSBmaWxlIGF0dGFjaG1lbnQgb3IgaW5saW5lLiBEZWZhdWx0IGlzIGF0dGFjaG1lbnQuXG4gIGF0dGFjaG1lbnQsXG4gIGlubGluZSxcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFR5cGUgLSBUaGUgcmVxdWVzdGVkIGZvcm1hdCBmb3IgdGhlIHNwZWNpZmllZCBkb2N1bWVudC4gSWYgc3VwcG9ydGVkLCB0aGUgZG9jdW1lbnQgd2lsbCBiZSByZXR1cm5lZCBpbiB0aGF0IGZvcm1hdC4gRXhhbXBsZSBjb250ZW50VHlwZT1hdWRpby93YXZcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY29udGVudExvY2F0aW9uVXJpXCI6IFwiXCIsXG4gICBcImltYWdlVXJpXCI6IFwiXCIsXG4gICBcInRodW1ibmFpbHNcIjogW11cbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXREb2N1bWVudHNEb2N1bWVudElkQ29udGVudCA9IGZ1bmN0aW9uIGdldERvY3VtZW50c0RvY3VtZW50SWRDb250ZW50KGRvY3VtZW50SWQsIGRpc3Bvc2l0aW9uLCBjb250ZW50VHlwZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvZG9jdW1lbnRzL3tkb2N1bWVudElkfS9jb250ZW50JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9jdW1lbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvY3VtZW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9jdW1lbnRJZH0nLCBkb2N1bWVudElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJkaXNwb3NpdGlvblwiXSA9IGRpc3Bvc2l0aW9uO1xuICAgIHJlcXVlc3RRdWVyeVtcImNvbnRlbnRUeXBlXCJdID0gY29udGVudFR5cGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVwbGFjZSB0aGUgY29udGVudHMgb2YgYSBkb2N1bWVudC5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSZXBsYWNlIFJlcXVlc3RcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gT3ZlcnJpZGUgYW55IGxvY2sgb24gdGhlIGRvY3VtZW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJjaGFuZ2VOdW1iZXJcIjogMCxcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJhdXRoVG9rZW5cIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnBvc3REb2N1bWVudHNEb2N1bWVudElkQ29udGVudCA9IGZ1bmN0aW9uIHBvc3REb2N1bWVudHNEb2N1bWVudElkQ29udGVudChkb2N1bWVudElkLCBib2R5LCBvdmVycmlkZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvZG9jdW1lbnRzL3tkb2N1bWVudElkfS9jb250ZW50JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9jdW1lbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvY3VtZW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9jdW1lbnRJZH0nLCBkb2N1bWVudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcIm92ZXJyaWRlXCJdID0gb3ZlcnJpZGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgd29ya3NwYWNlIG1lbWJlcnNcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IG1lbWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZE1lbWJlcnMgPSBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VzV29ya3NwYWNlSWRNZW1iZXJzKHdvcmtzcGFjZUlkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0vbWVtYmVycyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHdvcmtzcGFjZUlkID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHdvcmtzcGFjZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3dvcmtzcGFjZUlkfScsIHdvcmtzcGFjZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIHN0YXR1c2VzIGZvciBwZW5kaW5nIG9wZXJhdGlvbnNcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRTdGF0dXMgPSBmdW5jdGlvbiBnZXRTdGF0dXMocGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3N0YXR1cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiBkb2N1bWVudHMuXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZUlkIC0gV29ya3NwYWNlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZC4gVmFsaWQgVmFsdWVzOiBhY2wsIHdvcmtzcGFjZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBuYW1lIG9yIGRhdGVDcmVhdGVkXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzID0gZnVuY3Rpb24gZ2V0RG9jdW1lbnRzKHdvcmtzcGFjZUlkLCBuYW1lLCBleHBhbmQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIHNvcnRPcmRlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvZG9jdW1lbnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYod29ya3NwYWNlSWQgPT09IHVuZGVmaW5lZCB8fCB3b3Jrc3BhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogd29ya3NwYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wid29ya3NwYWNlSWRcIl0gPSB3b3Jrc3BhY2VJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEFkZCBhIGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gRG9jdW1lbnRcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29weVNvdXJjZSAtIENvcHkgYSBkb2N1bWVudCB3aXRoaW4gYSB3b3Jrc3BhY2Ugb3IgdG8gYSBuZXcgd29ya3NwYWNlLiBQcm92aWRlIGEgZG9jdW1lbnQgSUQgYXMgdGhlIGNvcHkgc291cmNlLlxuICAqIEBwYXJhbSB7c3RyaW5nfSBtb3ZlU291cmNlIC0gTW92ZSBhIGRvY3VtZW50IHRvIGEgbmV3IHdvcmtzcGFjZS4gUHJvdmlkZSBhIGRvY3VtZW50IElEIGFzIHRoZSBtb3ZlIHNvdXJjZS5cbiAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gT3ZlcnJpZGUgYW55IGxvY2sgb24gdGhlIHNvdXJjZSBkb2N1bWVudFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwidGFnc1wiOiBbXSxcbiAgIFwidGFnSWRzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhbmdlTnVtYmVyXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJkYXRlVXBsb2FkZWRcIjogXCJcIixcbiAgIFwiY29udGVudFVyaVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVwbG9hZGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGVudFR5cGVcIjogXCJcIixcbiAgIFwiY29udGVudExlbmd0aFwiOiAwLFxuICAgXCJzeXN0ZW1UeXBlXCI6IFwiXCIsXG4gICBcImZpbGVuYW1lXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcImNhbGxlckFkZHJlc3NcIjogXCJcIixcbiAgIFwicmVjZWl2ZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcInRhZ3NcIjogW10sXG4gICBcInRhZ1ZhbHVlc1wiOiBbXSxcbiAgIFwiYXR0cmlidXRlc1wiOiBbXSxcbiAgIFwidGh1bWJuYWlsc1wiOiBbXSxcbiAgIFwidXBsb2FkU3RhdHVzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVwbG9hZERlc3RpbmF0aW9uVXJpXCI6IFwiXCIsXG4gICBcInVwbG9hZE1ldGhvZFwiOiBcIlwiLFxuICAgXCJsb2NrSW5mb1wiOiB7XG4gICAgICBcImxvY2tlZEJ5XCI6IHt9LFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlRXhwaXJlc1wiOiBcIlwiLFxuICAgICAgXCJhY3Rpb25cIjogXCJcIlxuICAgfSxcbiAgIFwiYWNsXCI6IFtdLFxuICAgXCJzaGFyaW5nU3RhdHVzXCI6IFwiXCIsXG4gICBcInNoYXJpbmdVcmlcIjogXCJcIixcbiAgIFwiZG93bmxvYWRTaGFyaW5nVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnBvc3REb2N1bWVudHMgPSBmdW5jdGlvbiBwb3N0RG9jdW1lbnRzKGJvZHksIGNvcHlTb3VyY2UsIG1vdmVTb3VyY2UsIG92ZXJyaWRlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC9kb2N1bWVudHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImNvcHlTb3VyY2VcIl0gPSBjb3B5U291cmNlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm1vdmVTb3VyY2VcIl0gPSBtb3ZlU291cmNlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm92ZXJyaWRlXCJdID0gb3ZlcnJpZGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2Ygd29ya3NwYWNlcy5cbiAgKiBAZGVzY3JpcHRpb24gU3BlY2lmeWluZyAnY29udGVudCcgYWNjZXNzIHdpbGwgcmV0dXJuIGFsbCB3b3Jrc3BhY2VzIHRoZSB1c2VyIGhhcyBkb2N1bWVudCBhY2Nlc3MgdG8sIHdoaWxlICdhZG1pbicgYWNjZXNzIHdpbGwgcmV0dXJuIGFsbCBncm91cCB3b3Jrc3BhY2VzIHRoZSB1c2VyIGhhcyBhZG1pbmlzdHJhdGl2ZSByaWdodHMgdG8uXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHthcnJheX0gYWNjZXNzIC0gUmVxdWVzdGVkIGFjY2VzcyBsZXZlbC4gVmFsaWQgVmFsdWVzOiBjb250ZW50LCBhZG1pbiwgZG9jdW1lbnQ6Y3JlYXRlLCBkb2N1bWVudDp2aWV3Q29udGVudCwgZG9jdW1lbnQ6dmlld01ldGFkYXRhLCBkb2N1bWVudDpkb3dubG9hZCwgZG9jdW1lbnQ6ZGVsZXRlLCBkb2N1bWVudDp1cGRhdGUsIGRvY3VtZW50OnNoYXJlLCBkb2N1bWVudDpzaGFyZVZpZXcsIGRvY3VtZW50OmVtYWlsLCBkb2N1bWVudDpwcmludCwgZG9jdW1lbnQ6YXVkaXRWaWV3LCBkb2N1bWVudDpyZXBsYWNlLCBkb2N1bWVudDp0YWcsIHRhZzpjcmVhdGUsIHRhZzp2aWV3LCB0YWc6dXBkYXRlLCB0YWc6YXBwbHksIHRhZzpyZW1vdmUsIHRhZzpkZWxldGVcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IHN1bW1hcnksIGFjbFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFdvcmtzcGFjZXMgPSBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBhY2Nlc3MsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvd29ya3NwYWNlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiYWNjZXNzXCJdID0gYWNjZXNzO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBncm91cCB3b3Jrc3BhY2VcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFdvcmtzcGFjZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJidWNrZXRcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwiaXNDdXJyZW50VXNlcldvcmtzcGFjZVwiOiB0cnVlLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImJ1Y2tldFwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwic3VtbWFyeVwiOiB7XG4gICAgICBcInRvdGFsRG9jdW1lbnRDb3VudFwiOiAwLFxuICAgICAgXCJ0b3RhbERvY3VtZW50Qnl0ZUNvdW50XCI6IDBcbiAgIH0sXG4gICBcImFjbFwiOiBbXSxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUucG9zdFdvcmtzcGFjZXMgPSBmdW5jdGlvbiBwb3N0V29ya3NwYWNlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgY29udGVudFxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBuYW1lIG9yIGRhdGVDcmVhdGVkXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5UGhyYXNlIC0gUGhyYXNlIHRva2VucyBhcmUgQU5EZWQgdG9nZXRoZXIgb3ZlciBhbGwgc2VhcmNoYWJsZSBmaWVsZHNcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IGFjbCwgd29ya3NwYWNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgICAgIFwicGFnZVNpemVcIjogMCxcbiAgICAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgICAgXCJ0b3RhbFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICAgICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICAgICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICAgICBcIm5leHRVcmlcIjogXCJcIixcbiAgICAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwYWdlQ291bnRcIjogMFxuICAgfSxcbiAgIFwiZmFjZXRJbmZvXCI6IHtcbiAgICAgIFwiYXR0cmlidXRlc1wiOiBbXSxcbiAgICAgIFwiZmFjZXRzXCI6IFtdXG4gICB9XG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0UXVlcnkgPSBmdW5jdGlvbiBnZXRRdWVyeShwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBzb3J0T3JkZXIsIHF1ZXJ5UGhyYXNlLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIGlmKHF1ZXJ5UGhyYXNlID09PSB1bmRlZmluZWQgfHwgcXVlcnlQaHJhc2UgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXJ5UGhyYXNlJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInF1ZXJ5UGhyYXNlXCJdID0gcXVlcnlQaHJhc2U7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGNvbnRlbnRcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEFsbG93cyBmb3IgYSBmaWx0ZXJlZCBxdWVyeSByZXR1cm5pbmcgZmFjZXQgaW5mb3JtYXRpb25cbiAgKiBAcGFyYW0ge3N0cmluZ30gZXhwYW5kIC0gRXhwYW5kIHNvbWUgZG9jdW1lbnQgZmllbGRzXG4gIGFjbCxcbiAgd29ya3NwYWNlLFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicXVlcnlQaHJhc2VcIjogXCJcIixcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJmYWNldE5hbWVSZXF1ZXN0c1wiOiBbXSxcbiAgIFwic29ydFwiOiBbXSxcbiAgIFwiZmlsdGVyc1wiOiBbXSxcbiAgIFwiYXR0cmlidXRlRmlsdGVyc1wiOiBbXSxcbiAgIFwiaW5jbHVkZVNoYXJlc1wiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgICAgIFwicGFnZVNpemVcIjogMCxcbiAgICAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgICAgXCJ0b3RhbFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICAgICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICAgICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICAgICBcIm5leHRVcmlcIjogXCJcIixcbiAgICAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwYWdlQ291bnRcIjogMFxuICAgfSxcbiAgIFwiZmFjZXRJbmZvXCI6IHtcbiAgICAgIFwiYXR0cmlidXRlc1wiOiBbXSxcbiAgICAgIFwiZmFjZXRzXCI6IFtdXG4gICB9XG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUucG9zdFF1ZXJ5ID0gZnVuY3Rpb24gcG9zdFF1ZXJ5KGJvZHksIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhIGxpc3Qgb2Ygc2hhcmVzLiAgWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgZmlsdGVyIChlLmcuIGVudGl0eUlkKS5cbiAgKiBAZGVzY3JpcHRpb24gRmFpbGluZyB0byBzcGVjaWZ5IGEgZmlsdGVyIHdpbGwgcmV0dXJuIDQwMC5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW50aXR5SWQgLSBGaWx0ZXJzIHRoZSBzaGFyZXMgcmV0dXJuZWQgdG8gb25seSB0aGUgZW50aXR5IHNwZWNpZmllZCBieSB0aGUgdmFsdWUgb2YgdGhpcyBwYXJhbWV0ZXIuXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZC4gVmFsaWQgVmFsdWVzOiBtZW1iZXJcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRTaGFyZXMgPSBmdW5jdGlvbiBnZXRTaGFyZXMoZW50aXR5SWQsIGV4cGFuZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3NoYXJlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImVudGl0eUlkXCJdID0gZW50aXR5SWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlcyBhIG5ldyBzaGFyZSBvciB1cGRhdGVzIGFuIGV4aXN0aW5nIHNoYXJlIGlmIHRoZSBlbnRpdHkgaGFzIGFscmVhZHkgYmVlbiBzaGFyZWRcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIENyZWF0ZVNoYXJlUmVxdWVzdCAtIGVudGl0eSBpZCBhbmQgdHlwZSBhbmQgYSBzaW5nbGUgbWVtYmVyIG9yIGxpc3Qgb2YgbWVtYmVycyBhcmUgcmVxdWlyZWRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNoYXJlZEVudGl0eVR5cGVcIjogXCJcIixcbiAgIFwic2hhcmVkRW50aXR5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIlxuICAgfSxcbiAgIFwibWVtYmVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZW1iZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiXG4gICB9LFxuICAgXCJtZW1iZXJzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2hhcmVkRW50aXR5VHlwZVwiOiBcIlwiLFxuICAgXCJzaGFyZWRFbnRpdHlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWVtYmVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZW1iZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2hhcmVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInN1Y2NlZWRlZFwiOiBbXSxcbiAgIFwiZmFpbGVkXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0U2hhcmVzID0gZnVuY3Rpb24gcG9zdFNoYXJlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC9zaGFyZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIHdvcmtzcGFjZSB0YWdzXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZUlkIC0gV29ya3NwYWNlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gZmlsdGVyIHRoZSBsaXN0IG9mIHRhZ3MgcmV0dXJuZWRcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IGFjbFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlcyA9IGZ1bmN0aW9uIGdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlcyh3b3Jrc3BhY2VJZCwgdmFsdWUsIHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfS90YWd2YWx1ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1widmFsdWVcIl0gPSB2YWx1ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSB3b3Jrc3BhY2UgdGFnXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZUlkIC0gV29ya3NwYWNlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSB0YWdcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiaW5Vc2VcIjogdHJ1ZSxcbiAgIFwiYWNsXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiaW5Vc2VcIjogdHJ1ZSxcbiAgIFwiYWNsXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0V29ya3NwYWNlc1dvcmtzcGFjZUlkVGFndmFsdWVzID0gZnVuY3Rpb24gcG9zdFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlcyh3b3Jrc3BhY2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvd29ya3NwYWNlcy97d29ya3NwYWNlSWR9L3RhZ3ZhbHVlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHdvcmtzcGFjZUlkID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHdvcmtzcGFjZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3dvcmtzcGFjZUlkfScsIHdvcmtzcGFjZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSB3b3Jrc3BhY2UuXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZUlkIC0gV29ya3NwYWNlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZC4gVmFsaWQgVmFsdWVzOiBzdW1tYXJ5LCBhY2xcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcImlzQ3VycmVudFVzZXJXb3Jrc3BhY2VcIjogdHJ1ZSxcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJidWNrZXRcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN1bW1hcnlcIjoge1xuICAgICAgXCJ0b3RhbERvY3VtZW50Q291bnRcIjogMCxcbiAgICAgIFwidG90YWxEb2N1bWVudEJ5dGVDb3VudFwiOiAwXG4gICB9LFxuICAgXCJhY2xcIjogW10sXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZCA9IGZ1bmN0aW9uIGdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZCh3b3Jrc3BhY2VJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHdvcmtzcGFjZVxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB3b3Jrc3BhY2VJZCAtIFdvcmtzcGFjZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gV29ya3NwYWNlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwiaXNDdXJyZW50VXNlcldvcmtzcGFjZVwiOiB0cnVlLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImJ1Y2tldFwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwic3VtbWFyeVwiOiB7XG4gICAgICBcInRvdGFsRG9jdW1lbnRDb3VudFwiOiAwLFxuICAgICAgXCJ0b3RhbERvY3VtZW50Qnl0ZUNvdW50XCI6IDBcbiAgIH0sXG4gICBcImFjbFwiOiBbXSxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwiaXNDdXJyZW50VXNlcldvcmtzcGFjZVwiOiB0cnVlLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImJ1Y2tldFwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwic3VtbWFyeVwiOiB7XG4gICAgICBcInRvdGFsRG9jdW1lbnRDb3VudFwiOiAwLFxuICAgICAgXCJ0b3RhbERvY3VtZW50Qnl0ZUNvdW50XCI6IDBcbiAgIH0sXG4gICBcImFjbFwiOiBbXSxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUucHV0V29ya3NwYWNlc1dvcmtzcGFjZUlkID0gZnVuY3Rpb24gcHV0V29ya3NwYWNlc1dvcmtzcGFjZUlkKHdvcmtzcGFjZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSB3b3Jrc3BhY2VcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gbW92ZUNoaWxkcmVuVG9Xb3Jrc3BhY2VJZCAtIE5ldyBsb2NhdGlvbiBmb3Igb2JqZWN0cyBpbiBkZWxldGVkIHdvcmtzcGFjZS5cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5kZWxldGVXb3Jrc3BhY2VzV29ya3NwYWNlSWQgPSBmdW5jdGlvbiBkZWxldGVXb3Jrc3BhY2VzV29ya3NwYWNlSWQod29ya3NwYWNlSWQsIG1vdmVDaGlsZHJlblRvV29ya3NwYWNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHdvcmtzcGFjZUlkID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHdvcmtzcGFjZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3dvcmtzcGFjZUlkfScsIHdvcmtzcGFjZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJtb3ZlQ2hpbGRyZW5Ub1dvcmtzcGFjZUlkXCJdID0gbW92ZUNoaWxkcmVuVG9Xb3Jrc3BhY2VJZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdXNhZ2UgZGV0YWlscy5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidHlwZXNcIjogW11cbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRVc2FnZSA9IGZ1bmN0aW9uIGdldFVzYWdlKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvdXNhZ2UnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIGF1ZGl0cyBmb3IgYSBkb2N1bWVudC5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zYWN0aW9uRmlsdGVyIC0gVHJhbnNhY3Rpb24gZmlsdGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGxldmVsIC0gbGV2ZWxcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzRG9jdW1lbnRJZEF1ZGl0cyA9IGZ1bmN0aW9uIGdldERvY3VtZW50c0RvY3VtZW50SWRBdWRpdHMoZG9jdW1lbnRJZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIsIHRyYW5zYWN0aW9uRmlsdGVyLCBsZXZlbCwgc29ydEJ5LCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L2RvY3VtZW50cy97ZG9jdW1lbnRJZH0vYXVkaXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9jdW1lbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvY3VtZW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9jdW1lbnRJZH0nLCBkb2N1bWVudElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInRyYW5zYWN0aW9uRmlsdGVyXCJdID0gdHJhbnNhY3Rpb25GaWx0ZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibGV2ZWxcIl0gPSBsZXZlbDtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIExpc3Qgb2YgU2VjdXJpdHkgUHJvZmlsZXNcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRTZWN1cml0eXByb2ZpbGVzID0gZnVuY3Rpb24gZ2V0U2VjdXJpdHlwcm9maWxlcygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3NlY3VyaXR5cHJvZmlsZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSB3b3Jrc3BhY2UgdGFnXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHdvcmtzcGFjZUlkIC0gV29ya3NwYWNlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHRhZ0lkIC0gVGFnIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZC4gVmFsaWQgVmFsdWVzOiBhY2xcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJpblVzZVwiOiB0cnVlLFxuICAgXCJhY2xcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlc1RhZ0lkID0gZnVuY3Rpb24gZ2V0V29ya3NwYWNlc1dvcmtzcGFjZUlkVGFndmFsdWVzVGFnSWQod29ya3NwYWNlSWQsIHRhZ0lkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfS90YWd2YWx1ZXMve3RhZ0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHdvcmtzcGFjZUlkID09PSB1bmRlZmluZWQgfHwgd29ya3NwYWNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHdvcmtzcGFjZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3dvcmtzcGFjZUlkfScsIHdvcmtzcGFjZUlkKTtcbiAgICBpZih0YWdJZCA9PT0gdW5kZWZpbmVkIHx8IHRhZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB0YWdJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t0YWdJZH0nLCB0YWdJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHdvcmtzcGFjZSB0YWcuIFdpbGwgdXBkYXRlIGFsbCBkb2N1bWVudHMgd2l0aCB0aGUgbmV3IHRhZyB2YWx1ZS5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gdGFnSWQgLSBUYWcgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFdvcmtzcGFjZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJpblVzZVwiOiB0cnVlLFxuICAgXCJhY2xcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJpblVzZVwiOiB0cnVlLFxuICAgXCJhY2xcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnB1dFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlc1RhZ0lkID0gZnVuY3Rpb24gcHV0V29ya3NwYWNlc1dvcmtzcGFjZUlkVGFndmFsdWVzVGFnSWQod29ya3NwYWNlSWQsIHRhZ0lkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0vdGFndmFsdWVzL3t0YWdJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgaWYodGFnSWQgPT09IHVuZGVmaW5lZCB8fCB0YWdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdGFnSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dGFnSWR9JywgdGFnSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIHdvcmtzcGFjZSB0YWdcbiAgKiBAZGVzY3JpcHRpb24gRGVsZXRlIGEgdGFnIGZyb20gYSB3b3Jrc3BhY2UuIFdpbGwgcmVtb3ZlIHRoaXMgdGFnIGZyb20gYWxsIGRvY3VtZW50cy5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gdGFnSWQgLSBUYWcgSURcbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5kZWxldGVXb3Jrc3BhY2VzV29ya3NwYWNlSWRUYWd2YWx1ZXNUYWdJZCA9IGZ1bmN0aW9uIGRlbGV0ZVdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlc1RhZ0lkKHdvcmtzcGFjZUlkLCB0YWdJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvd29ya3NwYWNlcy97d29ya3NwYWNlSWR9L3RhZ3ZhbHVlcy97dGFnSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYod29ya3NwYWNlSWQgPT09IHVuZGVmaW5lZCB8fCB3b3Jrc3BhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogd29ya3NwYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7d29ya3NwYWNlSWR9Jywgd29ya3NwYWNlSWQpO1xuICAgIGlmKHRhZ0lkID09PSB1bmRlZmluZWQgfHwgdGFnSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHRhZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3RhZ0lkfScsIHRhZ0lkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgc2hhcmVkIGRvY3VtZW50cy4gU2VjdXJlbHkgZG93bmxvYWQgYSBzaGFyZWQgZG9jdW1lbnQuXG4gICogQGRlc2NyaXB0aW9uIFRoaXMgbWV0aG9kIHJlcXVpcmVzIHRoZSBkb3dubG9hZCBzaGFyaW5nIFVSSSBvYnRhaW5lZCBpbiB0aGUgZ2V0IGRvY3VtZW50IHJlc3BvbnNlIChkb3dubG9hZFNoYXJpbmdVcmkpLiBEb2N1bWVudHMgbWF5IGJlIHNoYXJlZCBiZXR3ZWVuIHVzZXJzIGluIHRoZSBzYW1lIHdvcmtzcGFjZS4gRG9jdW1lbnRzIG1heSBhbHNvIGJlIHNoYXJlZCBiZXR3ZWVuIGFueSB1c2VyIGJ5IGNyZWF0aW5nIGEgY29udGVudCBtYW5hZ2VtZW50IHNoYXJlLlxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaGFyZWRJZCAtIFNoYXJlZCBJRFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVkaXJlY3QgLSBUdXJuIG9uIG9yIG9mZiByZWRpcmVjdFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwb3NpdGlvbiAtIFJlcXVlc3QgaG93IHRoZSBzaGFyZSBjb250ZW50IHdpbGwgYmUgZG93bmxvYWRlZDogYXR0YWNoZWQgYXMgYSBmaWxlIG9yIGlubGluZS4gRGVmYXVsdCBpcyBhdHRhY2htZW50LlxuICBhdHRhY2htZW50LFxuICBpbmxpbmUsXG4gIG5vbmUsXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRUeXBlIC0gVGhlIHJlcXVlc3RlZCBmb3JtYXQgZm9yIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnQuIElmIHN1cHBvcnRlZCwgdGhlIGRvY3VtZW50IHdpbGwgYmUgcmV0dXJuZWQgaW4gdGhhdCBmb3JtYXQuIEV4YW1wbGUgY29udGVudFR5cGU9YXVkaW8vd2F2XG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIEV4cGFuZCBzb21lIGRvY3VtZW50IGZpZWxkc1xuICBkb2N1bWVudC5hY2wsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcImRvd25sb2FkVXJpXCI6IFwiXCIsXG4gICBcInZpZXdVcmlcIjogXCJcIixcbiAgIFwiZG9jdW1lbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZU51bWJlclwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZVVwbG9hZGVkXCI6IFwiXCIsXG4gICAgICBcImNvbnRlbnRVcmlcIjogXCJcIixcbiAgICAgIFwid29ya3NwYWNlXCI6IHt9LFxuICAgICAgXCJjcmVhdGVkQnlcIjoge30sXG4gICAgICBcInVwbG9hZGVkQnlcIjoge30sXG4gICAgICBcImNvbnRlbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgICAgIFwic3lzdGVtVHlwZVwiOiBcIlwiLFxuICAgICAgXCJmaWxlbmFtZVwiOiBcIlwiLFxuICAgICAgXCJwYWdlQ291bnRcIjogMCxcbiAgICAgIFwicmVhZFwiOiB0cnVlLFxuICAgICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInJlY2VpdmVyQWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJ0YWdzXCI6IFtdLFxuICAgICAgXCJ0YWdWYWx1ZXNcIjogW10sXG4gICAgICBcImF0dHJpYnV0ZXNcIjogW10sXG4gICAgICBcInRodW1ibmFpbHNcIjogW10sXG4gICAgICBcInVwbG9hZFN0YXR1c1wiOiB7fSxcbiAgICAgIFwidXBsb2FkRGVzdGluYXRpb25VcmlcIjogXCJcIixcbiAgICAgIFwidXBsb2FkTWV0aG9kXCI6IFwiXCIsXG4gICAgICBcImxvY2tJbmZvXCI6IHt9LFxuICAgICAgXCJhY2xcIjogW10sXG4gICAgICBcInNoYXJpbmdTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2hhcmluZ1VyaVwiOiBcIlwiLFxuICAgICAgXCJkb3dubG9hZFNoYXJpbmdVcmlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzaGFyZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2hhcmVkRW50aXR5VHlwZVwiOiBcIlwiLFxuICAgICAgXCJzaGFyZWRFbnRpdHlcIjoge30sXG4gICAgICBcIm1lbWJlclR5cGVcIjogXCJcIixcbiAgICAgIFwibWVtYmVyXCI6IHt9LFxuICAgICAgXCJzaGFyZWRCeVwiOiB7fSxcbiAgICAgIFwid29ya3NwYWNlXCI6IHt9LFxuICAgICAgXCJ1c2VyXCI6IHt9LFxuICAgICAgXCJncm91cFwiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9XG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0U2hhcmVkU2hhcmVkSWQgPSBmdW5jdGlvbiBnZXRTaGFyZWRTaGFyZWRJZChzaGFyZWRJZCwgcmVkaXJlY3QsIGRpc3Bvc2l0aW9uLCBjb250ZW50VHlwZSwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC9zaGFyZWQve3NoYXJlZElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNoYXJlZElkID09PSB1bmRlZmluZWQgfHwgc2hhcmVkSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNoYXJlZElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NoYXJlZElkfScsIHNoYXJlZElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJyZWRpcmVjdFwiXSA9IHJlZGlyZWN0O1xuICAgIHJlcXVlc3RRdWVyeVtcImRpc3Bvc2l0aW9uXCJdID0gZGlzcG9zaXRpb247XG4gICAgcmVxdWVzdFF1ZXJ5W1wiY29udGVudFR5cGVcIl0gPSBjb250ZW50VHlwZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgc3RhdHVzLlxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXNJZCAtIFN0YXR1cyBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImV4cGlyYXRpb25cIjogXCJcIixcbiAgIFwidXNlcklkXCI6IFwiXCIsXG4gICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgIFwiY29tbWFuZFR5cGVcIjogXCJcIixcbiAgIFwiZG9jdW1lbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZU51bWJlclwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZVVwbG9hZGVkXCI6IFwiXCIsXG4gICAgICBcImNvbnRlbnRVcmlcIjogXCJcIixcbiAgICAgIFwid29ya3NwYWNlXCI6IHt9LFxuICAgICAgXCJjcmVhdGVkQnlcIjoge30sXG4gICAgICBcInVwbG9hZGVkQnlcIjoge30sXG4gICAgICBcImNvbnRlbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgICAgIFwic3lzdGVtVHlwZVwiOiBcIlwiLFxuICAgICAgXCJmaWxlbmFtZVwiOiBcIlwiLFxuICAgICAgXCJwYWdlQ291bnRcIjogMCxcbiAgICAgIFwicmVhZFwiOiB0cnVlLFxuICAgICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInJlY2VpdmVyQWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJ0YWdzXCI6IFtdLFxuICAgICAgXCJ0YWdWYWx1ZXNcIjogW10sXG4gICAgICBcImF0dHJpYnV0ZXNcIjogW10sXG4gICAgICBcInRodW1ibmFpbHNcIjogW10sXG4gICAgICBcInVwbG9hZFN0YXR1c1wiOiB7fSxcbiAgICAgIFwidXBsb2FkRGVzdGluYXRpb25VcmlcIjogXCJcIixcbiAgICAgIFwidXBsb2FkTWV0aG9kXCI6IFwiXCIsXG4gICAgICBcImxvY2tJbmZvXCI6IHt9LFxuICAgICAgXCJhY2xcIjogW10sXG4gICAgICBcInNoYXJpbmdTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2hhcmluZ1VyaVwiOiBcIlwiLFxuICAgICAgXCJkb3dubG9hZFNoYXJpbmdVcmlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRTdGF0dXNTdGF0dXNJZCA9IGZ1bmN0aW9uIGdldFN0YXR1c1N0YXR1c0lkKHN0YXR1c0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC9zdGF0dXMve3N0YXR1c0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHN0YXR1c0lkID09PSB1bmRlZmluZWQgfHwgc3RhdHVzSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHN0YXR1c0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3N0YXR1c0lkfScsIHN0YXR1c0lkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDYW5jZWwgdGhlIGNvbW1hbmQgZm9yIHRoaXMgc3RhdHVzXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1c0lkIC0gU3RhdHVzIElEXG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZGVsZXRlU3RhdHVzU3RhdHVzSWQgPSBmdW5jdGlvbiBkZWxldGVTdGF0dXNTdGF0dXNJZChzdGF0dXNJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvc3RhdHVzL3tzdGF0dXNJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzdGF0dXNJZCA9PT0gdW5kZWZpbmVkIHx8IHN0YXR1c0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzdGF0dXNJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzdGF0dXNJZH0nLCBzdGF0dXNJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgZG9jdW1lbnQuXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SWQgLSBEb2N1bWVudCBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQuIFZhbGlkIFZhbHVlczogbG9ja0luZm8sIGFjbCwgd29ya3NwYWNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhbmdlTnVtYmVyXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJkYXRlVXBsb2FkZWRcIjogXCJcIixcbiAgIFwiY29udGVudFVyaVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVwbG9hZGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGVudFR5cGVcIjogXCJcIixcbiAgIFwiY29udGVudExlbmd0aFwiOiAwLFxuICAgXCJzeXN0ZW1UeXBlXCI6IFwiXCIsXG4gICBcImZpbGVuYW1lXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcImNhbGxlckFkZHJlc3NcIjogXCJcIixcbiAgIFwicmVjZWl2ZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcInRhZ3NcIjogW10sXG4gICBcInRhZ1ZhbHVlc1wiOiBbXSxcbiAgIFwiYXR0cmlidXRlc1wiOiBbXSxcbiAgIFwidGh1bWJuYWlsc1wiOiBbXSxcbiAgIFwidXBsb2FkU3RhdHVzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVwbG9hZERlc3RpbmF0aW9uVXJpXCI6IFwiXCIsXG4gICBcInVwbG9hZE1ldGhvZFwiOiBcIlwiLFxuICAgXCJsb2NrSW5mb1wiOiB7XG4gICAgICBcImxvY2tlZEJ5XCI6IHt9LFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlRXhwaXJlc1wiOiBcIlwiLFxuICAgICAgXCJhY3Rpb25cIjogXCJcIlxuICAgfSxcbiAgIFwiYWNsXCI6IFtdLFxuICAgXCJzaGFyaW5nU3RhdHVzXCI6IFwiXCIsXG4gICBcInNoYXJpbmdVcmlcIjogXCJcIixcbiAgIFwiZG93bmxvYWRTaGFyaW5nVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldERvY3VtZW50c0RvY3VtZW50SWQgPSBmdW5jdGlvbiBnZXREb2N1bWVudHNEb2N1bWVudElkKGRvY3VtZW50SWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udGVudG1hbmFnZW1lbnQvZG9jdW1lbnRzL3tkb2N1bWVudElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRvY3VtZW50SWQgPT09IHVuZGVmaW5lZCB8fCBkb2N1bWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBkb2N1bWVudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RvY3VtZW50SWR9JywgZG9jdW1lbnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb2N1bWVudElkIC0gRG9jdW1lbnQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIERvY3VtZW50XG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIEV4cGFuZCBzb21lIGRvY3VtZW50IGZpZWxkc1xuICBhY2wsXG4gICogQHBhcmFtIHtib29sZWFufSBvdmVycmlkZSAtIE92ZXJyaWRlIGFueSBsb2NrIG9uIHRoZSBkb2N1bWVudFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY2hhbmdlTnVtYmVyXCI6IDAsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicmVhZFwiOiB0cnVlLFxuICAgXCJhZGRUYWdzXCI6IFtdLFxuICAgXCJyZW1vdmVUYWdzXCI6IFtdLFxuICAgXCJhZGRUYWdJZHNcIjogW10sXG4gICBcInJlbW92ZVRhZ0lkc1wiOiBbXSxcbiAgIFwidXBkYXRlQXR0cmlidXRlc1wiOiBbXSxcbiAgIFwicmVtb3ZlQXR0cmlidXRlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNoYW5nZU51bWJlclwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwiZGF0ZVVwbG9hZGVkXCI6IFwiXCIsXG4gICBcImNvbnRlbnRVcmlcIjogXCJcIixcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJ1cGxvYWRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnRlbnRUeXBlXCI6IFwiXCIsXG4gICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgIFwic3lzdGVtVHlwZVwiOiBcIlwiLFxuICAgXCJmaWxlbmFtZVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicmVhZFwiOiB0cnVlLFxuICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcInJlY2VpdmVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ0YWdzXCI6IFtdLFxuICAgXCJ0YWdWYWx1ZXNcIjogW10sXG4gICBcImF0dHJpYnV0ZXNcIjogW10sXG4gICBcInRodW1ibmFpbHNcIjogW10sXG4gICBcInVwbG9hZFN0YXR1c1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJ1cGxvYWREZXN0aW5hdGlvblVyaVwiOiBcIlwiLFxuICAgXCJ1cGxvYWRNZXRob2RcIjogXCJcIixcbiAgIFwibG9ja0luZm9cIjoge1xuICAgICAgXCJsb2NrZWRCeVwiOiB7fSxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZUV4cGlyZXNcIjogXCJcIixcbiAgICAgIFwiYWN0aW9uXCI6IFwiXCJcbiAgIH0sXG4gICBcImFjbFwiOiBbXSxcbiAgIFwic2hhcmluZ1N0YXR1c1wiOiBcIlwiLFxuICAgXCJzaGFyaW5nVXJpXCI6IFwiXCIsXG4gICBcImRvd25sb2FkU2hhcmluZ1VyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0RG9jdW1lbnRzRG9jdW1lbnRJZCA9IGZ1bmN0aW9uIHBvc3REb2N1bWVudHNEb2N1bWVudElkKGRvY3VtZW50SWQsIGJvZHksIGV4cGFuZCwgb3ZlcnJpZGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L2RvY3VtZW50cy97ZG9jdW1lbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb2N1bWVudElkID09PSB1bmRlZmluZWQgfHwgZG9jdW1lbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9jdW1lbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb2N1bWVudElkfScsIGRvY3VtZW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJlcXVlc3RRdWVyeVtcIm92ZXJyaWRlXCJdID0gb3ZlcnJpZGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb2N1bWVudElkIC0gRG9jdW1lbnQgSURcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gT3ZlcnJpZGUgYW55IGxvY2sgb24gdGhlIGRvY3VtZW50XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZGVsZXRlRG9jdW1lbnRzRG9jdW1lbnRJZCA9IGZ1bmN0aW9uIGRlbGV0ZURvY3VtZW50c0RvY3VtZW50SWQoZG9jdW1lbnRJZCwgb3ZlcnJpZGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L2RvY3VtZW50cy97ZG9jdW1lbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb2N1bWVudElkID09PSB1bmRlZmluZWQgfHwgZG9jdW1lbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9jdW1lbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb2N1bWVudElkfScsIGRvY3VtZW50SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcIm92ZXJyaWRlXCJdID0gb3ZlcnJpZGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgd29ya3NwYWNlIG1lbWJlclxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB3b3Jrc3BhY2VJZCAtIFdvcmtzcGFjZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZW1iZXJJZCAtIE1lbWJlciBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQuIFZhbGlkIFZhbHVlczogbWVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm1lbWJlclR5cGVcIjogXCJcIixcbiAgIFwibWVtYmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZ3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInJ1bGVzVmlzaWJsZVwiOiB0cnVlLFxuICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VjdXJpdHlQcm9maWxlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRXb3Jrc3BhY2VzV29ya3NwYWNlSWRNZW1iZXJzTWVtYmVySWQgPSBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VzV29ya3NwYWNlSWRNZW1iZXJzTWVtYmVySWQod29ya3NwYWNlSWQsIG1lbWJlcklkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfS9tZW1iZXJzL3ttZW1iZXJJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgaWYobWVtYmVySWQgPT09IHVuZGVmaW5lZCB8fCBtZW1iZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbWVtYmVySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bWVtYmVySWR9JywgbWVtYmVySWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBBZGQgYSBtZW1iZXIgdG8gYSB3b3Jrc3BhY2VcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gbWVtYmVySWQgLSBNZW1iZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFdvcmtzcGFjZSBNZW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm1lbWJlclR5cGVcIjogXCJcIixcbiAgIFwibWVtYmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiZ3JvdXBcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInJ1bGVzVmlzaWJsZVwiOiB0cnVlLFxuICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwiXCJcbiAgIH0sXG4gICBcInNlY3VyaXR5UHJvZmlsZVwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwicGVybWlzc2lvbnNcIjogW11cbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWVtYmVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZW1iZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJncm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICAgICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWN1cml0eVByb2ZpbGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnB1dFdvcmtzcGFjZXNXb3Jrc3BhY2VJZE1lbWJlcnNNZW1iZXJJZCA9IGZ1bmN0aW9uIHB1dFdvcmtzcGFjZXNXb3Jrc3BhY2VJZE1lbWJlcnNNZW1iZXJJZCh3b3Jrc3BhY2VJZCwgbWVtYmVySWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfS9tZW1iZXJzL3ttZW1iZXJJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgaWYobWVtYmVySWQgPT09IHVuZGVmaW5lZCB8fCBtZW1iZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbWVtYmVySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bWVtYmVySWR9JywgbWVtYmVySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgbWVtYmVyIGZyb20gYSB3b3Jrc3BhY2VcbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gbWVtYmVySWQgLSBNZW1iZXIgSURcbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5kZWxldGVXb3Jrc3BhY2VzV29ya3NwYWNlSWRNZW1iZXJzTWVtYmVySWQgPSBmdW5jdGlvbiBkZWxldGVXb3Jrc3BhY2VzV29ya3NwYWNlSWRNZW1iZXJzTWVtYmVySWQod29ya3NwYWNlSWQsIG1lbWJlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0vbWVtYmVycy97bWVtYmVySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYod29ya3NwYWNlSWQgPT09IHVuZGVmaW5lZCB8fCB3b3Jrc3BhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogd29ya3NwYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7d29ya3NwYWNlSWR9Jywgd29ya3NwYWNlSWQpO1xuICAgIGlmKG1lbWJlcklkID09PSB1bmRlZmluZWQgfHwgbWVtYmVySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG1lbWJlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne21lbWJlcklkfScsIG1lbWJlcklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBTZWN1cml0eSBQcm9maWxlXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNlY3VyaXR5UHJvZmlsZUlkIC0gU2VjdXJpdHkgUHJvZmlsZSBJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRTZWN1cml0eXByb2ZpbGVzU2VjdXJpdHlwcm9maWxlSWQgPSBmdW5jdGlvbiBnZXRTZWN1cml0eXByb2ZpbGVzU2VjdXJpdHlwcm9maWxlSWQoc2VjdXJpdHlQcm9maWxlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3NlY3VyaXR5cHJvZmlsZXMve3NlY3VyaXR5UHJvZmlsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNlY3VyaXR5UHJvZmlsZUlkID09PSB1bmRlZmluZWQgfHwgc2VjdXJpdHlQcm9maWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNlY3VyaXR5UHJvZmlsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NlY3VyaXR5UHJvZmlsZUlkfScsIHNlY3VyaXR5UHJvZmlsZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIGRvY3VtZW50cy5cbiAgKiBAbWVtYmVyT2YgQ29udGVudE1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gd29ya3NwYWNlSWQgLSBXb3Jrc3BhY2UgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IGFjbCwgd29ya3NwYWNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIG5hbWUgb3IgZGF0ZUNyZWF0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmdcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRXb3Jrc3BhY2VzV29ya3NwYWNlSWREb2N1bWVudHMgPSBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VzV29ya3NwYWNlSWREb2N1bWVudHMod29ya3NwYWNlSWQsIGV4cGFuZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC93b3Jrc3BhY2VzL3t3b3Jrc3BhY2VJZH0vZG9jdW1lbnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYod29ya3NwYWNlSWQgPT09IHVuZGVmaW5lZCB8fCB3b3Jrc3BhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogd29ya3NwYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7d29ya3NwYWNlSWR9Jywgd29ya3NwYWNlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgYXVkaXRzXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBbGxvd3MgZm9yIGEgZmlsdGVyZWQgcXVlcnkgcmV0dXJuaW5nIGZhY2V0IGluZm9ybWF0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJxdWVyeVBocmFzZVwiOiBcIlwiLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcImZhY2V0TmFtZVJlcXVlc3RzXCI6IFtdLFxuICAgXCJzb3J0XCI6IFtdLFxuICAgXCJmaWx0ZXJzXCI6IFtdLFxuICAgXCJhdHRyaWJ1dGVGaWx0ZXJzXCI6IFtdLFxuICAgXCJpbmNsdWRlU2hhcmVzXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicmVzdWx0c1wiOiB7XG4gICAgICBcImVudGl0aWVzXCI6IFtdLFxuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICAgICBcInRvdGFsXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgICAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgICAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICAgICBcInBhZ2VDb3VudFwiOiAwXG4gICB9LFxuICAgXCJmYWNldEluZm9cIjoge1xuICAgICAgXCJhdHRyaWJ1dGVzXCI6IFtdLFxuICAgICAgXCJmYWNldHNcIjogW11cbiAgIH1cbn1cbiAgKi9cbkNvbnRlbnRNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0QXVkaXRxdWVyeSA9IGZ1bmN0aW9uIHBvc3RBdWRpdHF1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L2F1ZGl0cXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBQZXJmb3JtIGEgcHJlZml4IHF1ZXJ5IG9uIHRhZ3MgaW4gdGhlIHdvcmtzcGFjZVxuICAqIEBtZW1iZXJPZiBDb250ZW50TWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB3b3Jrc3BhY2VJZCAtIFdvcmtzcGFjZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gcXVlcnlcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IGFjbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicXVlcnlcIjogXCJcIixcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUucG9zdFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlc1F1ZXJ5ID0gZnVuY3Rpb24gcG9zdFdvcmtzcGFjZXNXb3Jrc3BhY2VJZFRhZ3ZhbHVlc1F1ZXJ5KHdvcmtzcGFjZUlkLCBib2R5LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3dvcmtzcGFjZXMve3dvcmtzcGFjZUlkfS90YWd2YWx1ZXMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih3b3Jrc3BhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHdvcmtzcGFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB3b3Jrc3BhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t3b3Jrc3BhY2VJZH0nLCB3b3Jrc3BhY2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHJpZXZlIGRldGFpbHMgYWJvdXQgYW4gZXhpc3Rpbmcgc2hhcmUuXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNoYXJlSWQgLSBTaGFyZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQuIFZhbGlkIFZhbHVlczogbWVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2hhcmVkRW50aXR5VHlwZVwiOiBcIlwiLFxuICAgXCJzaGFyZWRFbnRpdHlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWVtYmVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZW1iZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2hhcmVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZ3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInJ1bGVzVmlzaWJsZVwiOiB0cnVlLFxuICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db250ZW50TWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0U2hhcmVzU2hhcmVJZCA9IGZ1bmN0aW9uIGdldFNoYXJlc1NoYXJlSWQoc2hhcmVJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb250ZW50bWFuYWdlbWVudC9zaGFyZXMve3NoYXJlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2hhcmVJZCA9PT0gdW5kZWZpbmVkIHx8IHNoYXJlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNoYXJlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2hhcmVJZH0nLCBzaGFyZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlcyBhbiBleGlzdGluZyBzaGFyZS5cbiAgKiBAZGVzY3JpcHRpb24gVGhpcyByZXZva2VzIHNoYXJpbmcgcmlnaHRzIHNwZWNpZmllZCBpbiB0aGUgc2hhcmUgcmVjb3JkXG4gICogQG1lbWJlck9mIENvbnRlbnRNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNoYXJlSWQgLSBTaGFyZSBJRFxuICAqL1xuQ29udGVudE1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmRlbGV0ZVNoYXJlc1NoYXJlSWQgPSBmdW5jdGlvbiBkZWxldGVTaGFyZXNTaGFyZUlkKHNoYXJlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnRlbnRtYW5hZ2VtZW50L3NoYXJlcy97c2hhcmVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzaGFyZUlkID09PSB1bmRlZmluZWQgfHwgc2hhcmVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2hhcmVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzaGFyZUlkfScsIHNoYXJlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBDb250ZW50TWFuYWdlbWVudEFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIENvbnZlcnNhdGlvbnNBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uQ29udmVyc2F0aW9uc0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBDb252ZXJzYXRpb25zQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBDb252ZXJzYXRpb25zQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnZlcnNhdGlvbnNBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnZlcnNhdGlvbnNBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGZvciBjb252ZXJzYXRpb24gYWdncmVnYXRlc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwiZ3JhbnVsYXJpdHlcIjogXCJcIixcbiAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgIFwiZ3JvdXBCeVwiOiBbXSxcbiAgIFwiZmlsdGVyXCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJjbGF1c2VzXCI6IFtdLFxuICAgICAgXCJwcmVkaWNhdGVzXCI6IFtdXG4gICB9LFxuICAgXCJtZXRyaWNzXCI6IFtdLFxuICAgXCJmbGF0dGVuTXVsdGl2YWx1ZWREaW1lbnNpb25zXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicmVzdWx0c1wiOiBbXVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENvbnZlcnNhdGlvbnNBZ2dyZWdhdGVzUXVlcnkgPSBmdW5jdGlvbiBwb3N0Q29udmVyc2F0aW9uc0FnZ3JlZ2F0ZXNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvY29udmVyc2F0aW9ucy9hZ2dyZWdhdGVzL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgZm9yIGNvbnZlcnNhdGlvbiBkZXRhaWxzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIHF1ZXJ5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJpbnRlcnZhbFwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25GaWx0ZXJzXCI6IFtdLFxuICAgXCJldmFsdWF0aW9uRmlsdGVyc1wiOiBbXSxcbiAgIFwic2VnbWVudEZpbHRlcnNcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXSxcbiAgIFwicGFnaW5nXCI6IHtcbiAgICAgIFwicGFnZVNpemVcIjogMCxcbiAgICAgIFwicGFnZU51bWJlclwiOiAwXG4gICB9LFxuICAgXCJvcmRlclwiOiBcIlwiLFxuICAgXCJvcmRlckJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY29udmVyc2F0aW9uc1wiOiBbXSxcbiAgIFwiYWdncmVnYXRpb25zXCI6IFtdXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q29udmVyc2F0aW9uc0RldGFpbHNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RDb252ZXJzYXRpb25zRGV0YWlsc1F1ZXJ5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2FuYWx5dGljcy9jb252ZXJzYXRpb25zL2RldGFpbHMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBjb252ZXJzYXRpb24gYnkgaWRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbklkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvbnZlcnNhdGlvbklkXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvblN0YXJ0XCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbkVuZFwiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImV2YWx1YXRpb25zXCI6IFtdXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25zQ29udmVyc2F0aW9uSWREZXRhaWxzID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRGV0YWlscyhjb252ZXJzYXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9kZXRhaWxzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEluZGV4IGNvbnZlcnNhdGlvbiBwcm9wZXJ0aWVzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBjb252ZXJzYXRpb25JZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gcmVxdWVzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic2Vzc2lvbklkXCI6IFwiXCIsXG4gICBcInRhcmdldERhdGVcIjogXCJcIixcbiAgIFwicHJvcGVydGllc1wiOiBbXVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZERldGFpbHNQcm9wZXJ0aWVzID0gZnVuY3Rpb24gcG9zdENvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZERldGFpbHNQcm9wZXJ0aWVzKGNvbnZlcnNhdGlvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L2RldGFpbHMvcHJvcGVydGllcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcmVjZW50IGNvbnZlcnNhdGlvbnNcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q2FsbHMgPSBmdW5jdGlvbiBnZXRDYWxscygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBjYWxsIGNvbnZlcnNhdGlvblxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDYWxsIHJlcXVlc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImNhbGxGcm9tUXVldWVJZFwiOiBcIlwiLFxuICAgXCJjYWxsUXVldWVJZFwiOiBcIlwiLFxuICAgXCJjYWxsVXNlcklkXCI6IFwiXCIsXG4gICBcInByaW9yaXR5XCI6IDAsXG4gICBcImxhbmd1YWdlSWRcIjogXCJcIixcbiAgIFwicm91dGluZ1NraWxsc0lkc1wiOiBbXSxcbiAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RDYWxscyA9IGZ1bmN0aW9uIHBvc3RDYWxscyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudCdzIGNvbW11bmljYXRpb24gYnkgZGlzY29ubmVjdGluZyBpdC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsSWQgLSBjYWxsSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29tbXVuaWNhdGlvbklkIC0gY29tbXVuaWNhdGlvbklkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQYXJ0aWNpcGFudFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwid3JhcHVwXCI6IHtcbiAgICAgIFwiY29kZVwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm5vdGVzXCI6IFwiXCIsXG4gICAgICBcInRhZ3NcIjogW10sXG4gICAgICBcImR1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvbmFsXCI6IHRydWVcbiAgIH0sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInJlY29yZGluZ1wiOiB0cnVlLFxuICAgXCJtdXRlZFwiOiB0cnVlLFxuICAgXCJjb25maW5lZFwiOiB0cnVlLFxuICAgXCJoZWxkXCI6IHRydWUsXG4gICBcIndyYXB1cFNraXBwZWRcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge31cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29tbXVuaWNhdGlvbnNDb21tdW5pY2F0aW9uSWQgPSBmdW5jdGlvbiBwYXRjaENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENvbW11bmljYXRpb25zQ29tbXVuaWNhdGlvbklkKGNhbGxJZCwgcGFydGljaXBhbnRJZCwgY29tbXVuaWNhdGlvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vY29tbXVuaWNhdGlvbnMve2NvbW11bmljYXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxsSWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxsSWR9JywgY2FsbElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGNvbW11bmljYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbW11bmljYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29tbXVuaWNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbW11bmljYXRpb25JZH0nLCBjb21tdW5pY2F0aW9uSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50XG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkIC0gY2FsbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQYXJ0aWNpcGFudCByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ3cmFwdXBcIjoge1xuICAgICAgXCJjb2RlXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwibm90ZXNcIjogXCJcIixcbiAgICAgIFwidGFnc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxuICAgfSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwicmVjb3JkaW5nXCI6IHRydWUsXG4gICBcIm11dGVkXCI6IHRydWUsXG4gICBcImNvbmZpbmVkXCI6IHRydWUsXG4gICBcImhlbGRcIjogdHJ1ZSxcbiAgIFwid3JhcHVwU2tpcHBlZFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZCA9IGZ1bmN0aW9uIHBhdGNoQ2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkKGNhbGxJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy97Y2FsbElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVwbGFjZSB0aGlzIHBhcnRpY2lwYW50IHdpdGggdGhlIHNwZWNpZmllZCB1c2VyIGFuZC9vciBhZGRyZXNzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkIC0gY2FsbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUcmFuc2ZlciByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ1c2VyTmFtZVwiOiBcIlwiLFxuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInZvaWNlbWFpbFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkUmVwbGFjZSA9IGZ1bmN0aW9uIHBvc3RDYWxsc0NhbGxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRSZXBsYWNlKGNhbGxJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy97Y2FsbElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3JlcGxhY2UnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxsSWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxsSWR9JywgY2FsbElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IExpc3RlbiBpbiBvbiB0aGUgY29udmVyc2F0aW9uIGZyb20gdGhlIHBvaW50IG9mIHZpZXcgb2YgYSBnaXZlbiBwYXJ0aWNpcGFudC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsSWQgLSBjYWxsSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RDYWxsc0NhbGxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRNb25pdG9yID0gZnVuY3Rpb24gcG9zdENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZE1vbml0b3IoY2FsbElkLCBwYXJ0aWNpcGFudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vbW9uaXRvcic7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxJZH0nLCBjYWxsSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEluaXRpYXRlIGFuZCB1cGRhdGUgY29uc3VsdCB0cmFuc2ZlclxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxJZCAtIGNhbGxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gRGVzdGluYXRpb24gYWRkcmVzcyAmIGluaXRpYWwgc3BlYWsgdG9cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNwZWFrVG9cIjogXCJcIixcbiAgIFwiZGVzdGluYXRpb25cIjoge1xuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidXNlcklkXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlSWRcIjogXCJcIlxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJkZXN0aW5hdGlvblBhcnRpY2lwYW50SWRcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENvbnN1bHQgPSBmdW5jdGlvbiBwb3N0Q2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29uc3VsdChjYWxsSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbHMve2NhbGxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jb25zdWx0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDYW5jZWwgdGhlIHRyYW5zZmVyXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkIC0gY2FsbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5kZWxldGVDYWxsc0NhbGxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRDb25zdWx0ID0gZnVuY3Rpb24gZGVsZXRlQ2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29uc3VsdChjYWxsSWQsIHBhcnRpY2lwYW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbHMve2NhbGxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jb25zdWx0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDaGFuZ2Ugd2hvIGNhbiBzcGVha1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxJZCAtIGNhbGxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gbmV3IHNwZWFrIHRvXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJzcGVha1RvXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZGVzdGluYXRpb25QYXJ0aWNpcGFudElkXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29uc3VsdCA9IGZ1bmN0aW9uIHBhdGNoQ2FsbHNDYWxsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29uc3VsdChjYWxsSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbHMve2NhbGxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jb25zdWx0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGxpc3Qgb2Ygd3JhcHVwIGNvZGVzIGZvciB0aGlzIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxJZCAtIGNhbGxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDYWxsc0NhbGxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXBjb2RlcyA9IGZ1bmN0aW9uIGdldENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cGNvZGVzKGNhbGxJZCwgcGFydGljaXBhbnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy97Y2FsbElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY2FsbCBjb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsSWQgLSBjYWxsSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcIm90aGVyTWVkaWFVcmlzXCI6IFtdLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENhbGxzQ2FsbElkID0gZnVuY3Rpb24gZ2V0Q2FsbHNDYWxsSWQoY2FsbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQWRkIGEgbmV3IGNhbGwgdG8gYSBjb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsSWQgLSBjYWxsSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIENvbnZlcnNhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY2FsbE51bWJlclwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENhbGxzQ2FsbElkID0gZnVuY3Rpb24gcG9zdENhbGxzQ2FsbElkKGNhbGxJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy97Y2FsbElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxJZH0nLCBjYWxsSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGNvbnZlcnNhdGlvbiBieSBzZXR0aW5nIGl0J3MgcmVjb3JkaW5nIHN0YXRlLCBtZXJnaW5nIGluIG90aGVyIGNvbnZlcnNhdGlvbnMgdG8gY3JlYXRlIGEgY29uZmVyZW5jZSwgb3IgZGlzY29ubmVjdGluZyBhbGwgb2YgdGhlIHBhcnRpY2lwYW50c1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxJZCAtIGNhbGxJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ29udmVyc2F0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hDYWxsc0NhbGxJZCA9IGZ1bmN0aW9uIHBhdGNoQ2FsbHNDYWxsSWQoY2FsbElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbWF4aW11bSBudW1iZXIgb2YgcGFydGljaXBhbnRzIHRoYXQgdGhpcyB1c2VyIGNhbiBoYXZlIG9uIGEgY29uZmVyZW5jZVxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDYWxsc01heGltdW1jb25mZXJlbmNlcGFydGllcyA9IGZ1bmN0aW9uIGdldENhbGxzTWF4aW11bWNvbmZlcmVuY2VwYXJ0aWVzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy9tYXhpbXVtY29uZmVyZW5jZXBhcnRpZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgdGhlIGF0dHJpYnV0ZXMgb24gYSBjb252ZXJzYXRpb24gcGFydGljaXBhbnQuXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkIC0gY2FsbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQYXJ0aWNpcGFudCBhdHRyaWJ1dGVzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJhdHRyaWJ1dGVzXCI6IHt9XG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBwYXRjaENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZEF0dHJpYnV0ZXMoY2FsbElkLCBwYXJ0aWNpcGFudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vYXR0cmlidXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxJZH0nLCBjYWxsSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgd3JhcC11cCBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnQuIFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxJZCAtIGNhbGxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvdmlzaW9uYWwgLSBJbmRpY2F0ZXMgaWYgdGhlIHdyYXAtdXAgY29kZSBpcyBwcm92aXNpb25hbC5cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY29kZVwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm5vdGVzXCI6IFwiXCIsXG4gICBcInRhZ3NcIjogW10sXG4gICBcImR1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcInByb3Zpc2lvbmFsXCI6IHRydWVcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cCA9IGZ1bmN0aW9uIGdldENhbGxzQ2FsbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cChjYWxsSWQsIHBhcnRpY2lwYW50SWQsIHByb3Zpc2lvbmFsKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxzL3tjYWxsSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vd3JhcHVwJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwcm92aXNpb25hbFwiXSA9IHByb3Zpc2lvbmFsO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEFkZCBwYXJ0aWNpcGFudHMgdG8gYSBjb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsSWQgLSBjYWxsSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIENvbnZlcnNhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RDYWxsc0NhbGxJZFBhcnRpY2lwYW50cyA9IGZ1bmN0aW9uIHBvc3RDYWxsc0NhbGxJZFBhcnRpY2lwYW50cyhjYWxsSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbHMve2NhbGxJZH0vcGFydGljaXBhbnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbElkID09PSB1bmRlZmluZWQgfHwgY2FsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbElkfScsIGNhbGxJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGNhbGwgaGlzdG9yeVxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGludGVydmFsIC0gSW50ZXJ2YWwgc3RyaW5nOyBmb3JtYXQgaXMgSVNPLTg2MDEuIFNlcGFyYXRlIHN0YXJ0IGFuZCBlbmQgdGltZXMgd2l0aCBmb3J3YXJkIHNsYXNoICcvJ1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q2FsbHNIaXN0b3J5ID0gZnVuY3Rpb24gZ2V0Q2FsbHNIaXN0b3J5KHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBpbnRlcnZhbCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxscy9oaXN0b3J5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJpbnRlcnZhbFwiXSA9IGludGVydmFsO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBjb252ZXJzYXRpb25zXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29tbXVuaWNhdGlvblR5cGUgLSBDYWxsIG9yIENoYXQgY29tbXVuaWNhdGlvbiBmaWx0ZXJpbmdcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbnMgPSBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25zKGNvbW11bmljYXRpb25UeXBlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiY29tbXVuaWNhdGlvblR5cGVcIl0gPSBjb21tdW5pY2F0aW9uVHlwZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcmVjZW50IGNoYXQgY29udmVyc2F0aW9uc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDaGF0cyA9IGZ1bmN0aW9uIGdldENoYXRzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIHdlYiBjaGF0IGNvbnZlcnNhdGlvblxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDcmVhdGUgd2ViIGNoYXQgcmVxdWVzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicXVldWVJZFwiOiBcIlwiLFxuICAgXCJwcm92aWRlclwiOiBcIlwiLFxuICAgXCJza2lsbElkc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VJZFwiOiBcIlwiLFxuICAgXCJwcmlvcml0eVwiOiAwLFxuICAgXCJhdHRyaWJ1dGVzXCI6IHt9LFxuICAgXCJjdXN0b21lck5hbWVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwib3RoZXJNZWRpYVVyaXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENoYXRzID0gZnVuY3Rpb24gcG9zdENoYXRzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2hhdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50J3MgY29tbXVuaWNhdGlvbiBieSBkaXNjb25uZWN0aW5nIGl0LlxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNoYXRJZCAtIGNoYXRJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tdW5pY2F0aW9uSWQgLSBjb21tdW5pY2F0aW9uSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBhcnRpY2lwYW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ3cmFwdXBcIjoge1xuICAgICAgXCJjb2RlXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwibm90ZXNcIjogXCJcIixcbiAgICAgIFwidGFnc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxuICAgfSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwicmVjb3JkaW5nXCI6IHRydWUsXG4gICBcIm11dGVkXCI6IHRydWUsXG4gICBcImNvbmZpbmVkXCI6IHRydWUsXG4gICBcImhlbGRcIjogdHJ1ZSxcbiAgIFwid3JhcHVwU2tpcHBlZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7fVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRDb21tdW5pY2F0aW9uc0NvbW11bmljYXRpb25JZCA9IGZ1bmN0aW9uIHBhdGNoQ2hhdHNDaGF0SWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29tbXVuaWNhdGlvbnNDb21tdW5pY2F0aW9uSWQoY2hhdElkLCBwYXJ0aWNpcGFudElkLCBjb21tdW5pY2F0aW9uSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2hhdHMve2NoYXRJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jb21tdW5pY2F0aW9ucy97Y29tbXVuaWNhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYXRJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYXRJZH0nLCBjaGF0SWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoY29tbXVuaWNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29tbXVuaWNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb21tdW5pY2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29tbXVuaWNhdGlvbklkfScsIGNvbW11bmljYXRpb25JZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjaGF0SWQgLSBjaGF0SWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVwZGF0ZSByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ3cmFwdXBcIjoge1xuICAgICAgXCJjb2RlXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwibm90ZXNcIjogXCJcIixcbiAgICAgIFwidGFnc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxuICAgfSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwicmVjb3JkaW5nXCI6IHRydWUsXG4gICBcIm11dGVkXCI6IHRydWUsXG4gICBcImNvbmZpbmVkXCI6IHRydWUsXG4gICBcImhlbGRcIjogdHJ1ZSxcbiAgIFwid3JhcHVwU2tpcHBlZFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENoYXRzQ2hhdElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZCA9IGZ1bmN0aW9uIHBhdGNoQ2hhdHNDaGF0SWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkKGNoYXRJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cy97Y2hhdElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2hhdElkID09PSB1bmRlZmluZWQgfHwgY2hhdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjaGF0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2hhdElkfScsIGNoYXRJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVwbGFjZSB0aGlzIHBhcnRpY2lwYW50IHdpdGggdGhlIHNwZWNpZmllZCB1c2VyIGFuZC9vciBhZGRyZXNzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2hhdElkIC0gY2hhdElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUcmFuc2ZlciByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ1c2VyTmFtZVwiOiBcIlwiLFxuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInZvaWNlbWFpbFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q2hhdHNDaGF0SWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkUmVwbGFjZSA9IGZ1bmN0aW9uIHBvc3RDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRSZXBsYWNlKGNoYXRJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cy97Y2hhdElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3JlcGxhY2UnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjaGF0SWQgPT09IHVuZGVmaW5lZCB8fCBjaGF0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNoYXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjaGF0SWR9JywgY2hhdElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBsaXN0IG9mIHdyYXB1cCBjb2RlcyBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjaGF0SWQgLSBjaGF0SWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIixcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q2hhdHNDaGF0SWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwY29kZXMgPSBmdW5jdGlvbiBnZXRDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXBjb2RlcyhjaGF0SWQsIHBhcnRpY2lwYW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2hhdHMve2NoYXRJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS93cmFwdXBjb2Rlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYXRJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYXRJZH0nLCBjaGF0SWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGNoYXQgY29udmVyc2F0aW9uXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2hhdElkIC0gY2hhdElkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJvdGhlck1lZGlhVXJpc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDaGF0c0NoYXRJZCA9IGZ1bmN0aW9uIGdldENoYXRzQ2hhdElkKGNoYXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cy97Y2hhdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYXRJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYXRJZH0nLCBjaGF0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGNvbnZlcnNhdGlvbiBieSBkaXNjb25uZWN0aW5nIGFsbCBvZiB0aGUgcGFydGljaXBhbnRzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2hhdElkIC0gY2hhdElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDb252ZXJzYXRpb25cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENoYXRzQ2hhdElkID0gZnVuY3Rpb24gcGF0Y2hDaGF0c0NoYXRJZChjaGF0SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2hhdHMve2NoYXRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjaGF0SWQgPT09IHVuZGVmaW5lZCB8fCBjaGF0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNoYXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjaGF0SWR9JywgY2hhdElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIHRoZSBhdHRyaWJ1dGVzIG9uIGEgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LlxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNoYXRJZCAtIGNoYXRJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGFydGljaXBhbnQgYXR0cmlidXRlc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiYXR0cmlidXRlc1wiOiB7fVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gcGF0Y2hDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRBdHRyaWJ1dGVzKGNoYXRJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cy97Y2hhdElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2F0dHJpYnV0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjaGF0SWQgPT09IHVuZGVmaW5lZCB8fCBjaGF0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNoYXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjaGF0SWR9JywgY2hhdElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHdyYXAtdXAgZm9yIHRoaXMgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LiBcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjaGF0SWQgLSBjaGF0SWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb3Zpc2lvbmFsIC0gSW5kaWNhdGVzIGlmIHRoZSB3cmFwLXVwIGNvZGUgaXMgcHJvdmlzaW9uYWwuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvZGVcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJub3Rlc1wiOiBcIlwiLFxuICAgXCJ0YWdzXCI6IFtdLFxuICAgXCJkdXJhdGlvblNlY29uZHNcIjogMCxcbiAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgXCJwcm92aXNpb25hbFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXAgPSBmdW5jdGlvbiBnZXRDaGF0c0NoYXRJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXAoY2hhdElkLCBwYXJ0aWNpcGFudElkLCBwcm92aXNpb25hbCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jaGF0cy97Y2hhdElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3dyYXB1cCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYXRJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYXRJZH0nLCBjaGF0SWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvdmlzaW9uYWxcIl0gPSBwcm92aXNpb25hbDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50XG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxJZCAtIGVtYWlsSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVwZGF0ZSByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ3cmFwdXBcIjoge1xuICAgICAgXCJjb2RlXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwibm90ZXNcIjogXCJcIixcbiAgICAgIFwidGFnc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxuICAgfSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwicmVjb3JkaW5nXCI6IHRydWUsXG4gICBcIm11dGVkXCI6IHRydWUsXG4gICBcImNvbmZpbmVkXCI6IHRydWUsXG4gICBcImhlbGRcIjogdHJ1ZSxcbiAgIFwid3JhcHVwU2tpcHBlZFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaEVtYWlsc0VtYWlsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkID0gZnVuY3Rpb24gcGF0Y2hFbWFpbHNFbWFpbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZChlbWFpbElkLCBwYXJ0aWNpcGFudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscy97ZW1haWxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVtYWlsSWQgPT09IHVuZGVmaW5lZCB8fCBlbWFpbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbWFpbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VtYWlsSWR9JywgZW1haWxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudCdzIGNvbW11bmljYXRpb24gYnkgZGlzY29ubmVjdGluZyBpdC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tdW5pY2F0aW9uSWQgLSBjb21tdW5pY2F0aW9uSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBhcnRpY2lwYW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ3cmFwdXBcIjoge1xuICAgICAgXCJjb2RlXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwibm90ZXNcIjogXCJcIixcbiAgICAgIFwidGFnc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxuICAgfSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwicmVjb3JkaW5nXCI6IHRydWUsXG4gICBcIm11dGVkXCI6IHRydWUsXG4gICBcImNvbmZpbmVkXCI6IHRydWUsXG4gICBcImhlbGRcIjogdHJ1ZSxcbiAgIFwid3JhcHVwU2tpcHBlZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7fVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hFbWFpbHNFbWFpbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENvbW11bmljYXRpb25zQ29tbXVuaWNhdGlvbklkID0gZnVuY3Rpb24gcGF0Y2hFbWFpbHNFbWFpbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENvbW11bmljYXRpb25zQ29tbXVuaWNhdGlvbklkKGVtYWlsSWQsIHBhcnRpY2lwYW50SWQsIGNvbW11bmljYXRpb25JZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vY29tbXVuaWNhdGlvbnMve2NvbW11bmljYXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlbWFpbElkID09PSB1bmRlZmluZWQgfHwgZW1haWxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZW1haWxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlbWFpbElkfScsIGVtYWlsSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoY29tbXVuaWNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29tbXVuaWNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb21tdW5pY2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29tbXVuaWNhdGlvbklkfScsIGNvbW11bmljYXRpb25JZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlcGxhY2UgdGhpcyBwYXJ0aWNpcGFudCB3aXRoIHRoZSBzcGVjaWZpZWQgdXNlciBhbmQvb3IgYWRkcmVzc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsSWQgLSBlbWFpbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUcmFuc2ZlciByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ1c2VyTmFtZVwiOiBcIlwiLFxuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInZvaWNlbWFpbFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0RW1haWxzRW1haWxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRSZXBsYWNlID0gZnVuY3Rpb24gcG9zdEVtYWlsc0VtYWlsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkUmVwbGFjZShlbWFpbElkLCBwYXJ0aWNpcGFudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscy97ZW1haWxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9yZXBsYWNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBjb252ZXJzYXRpb24gbWVzc2FnZVxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsSWQgLSBlbWFpbElkXG4gICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VJZCAtIG1lc3NhZ2VJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRvXCI6IFtdLFxuICAgXCJjY1wiOiBbXSxcbiAgIFwiYmNjXCI6IFtdLFxuICAgXCJmcm9tXCI6IHtcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdWJqZWN0XCI6IFwiXCIsXG4gICBcImF0dGFjaG1lbnRzXCI6IFtdLFxuICAgXCJ0ZXh0Qm9keVwiOiBcIlwiLFxuICAgXCJodG1sQm9keVwiOiBcIlwiLFxuICAgXCJ0aW1lXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0RW1haWxzRW1haWxJZE1lc3NhZ2VzTWVzc2FnZUlkID0gZnVuY3Rpb24gZ2V0RW1haWxzRW1haWxJZE1lc3NhZ2VzTWVzc2FnZUlkKGVtYWlsSWQsIG1lc3NhZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L21lc3NhZ2VzL3ttZXNzYWdlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihtZXNzYWdlSWQgPT09IHVuZGVmaW5lZCB8fCBtZXNzYWdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG1lc3NhZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttZXNzYWdlSWR9JywgbWVzc2FnZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcmVjZW50IGVtYWlsIGNvbnZlcnNhdGlvbnNcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0RW1haWxzID0gZnVuY3Rpb24gZ2V0RW1haWxzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYW4gZW1haWwgY29udmVyc2F0aW9uXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIENyZWF0ZSBlbWFpbCByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyXCI6IFwiXCIsXG4gICBcInNraWxsSWRzXCI6IFtdLFxuICAgXCJsYW5ndWFnZUlkXCI6IFwiXCIsXG4gICBcInByaW9yaXR5XCI6IDAsXG4gICBcImF0dHJpYnV0ZXNcIjoge30sXG4gICBcInRvQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ0b05hbWVcIjogXCJcIixcbiAgIFwiZnJvbUFkZHJlc3NcIjogXCJcIixcbiAgIFwiZnJvbU5hbWVcIjogXCJcIixcbiAgIFwic3ViamVjdFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJvdGhlck1lZGlhVXJpc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0RW1haWxzID0gZnVuY3Rpb24gcG9zdEVtYWlscyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBsaXN0IG9mIHdyYXB1cCBjb2RlcyBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRFbWFpbHNFbWFpbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cGNvZGVzID0gZnVuY3Rpb24gZ2V0RW1haWxzRW1haWxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXBjb2RlcyhlbWFpbElkLCBwYXJ0aWNpcGFudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscy97ZW1haWxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS93cmFwdXBjb2Rlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVtYWlsSWQgPT09IHVuZGVmaW5lZCB8fCBlbWFpbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbWFpbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VtYWlsSWR9JywgZW1haWxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY29udmVyc2F0aW9uIG1lc3NhZ2VzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxJZCAtIGVtYWlsSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldEVtYWlsc0VtYWlsSWRNZXNzYWdlcyA9IGZ1bmN0aW9uIGdldEVtYWlsc0VtYWlsSWRNZXNzYWdlcyhlbWFpbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscy97ZW1haWxJZH0vbWVzc2FnZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlbWFpbElkID09PSB1bmRlZmluZWQgfHwgZW1haWxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZW1haWxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlbWFpbElkfScsIGVtYWlsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlbmQgYW4gZW1haWwgcmVwbHlcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUmVwbHlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidG9cIjogW10sXG4gICBcImNjXCI6IFtdLFxuICAgXCJiY2NcIjogW10sXG4gICBcImZyb21cIjoge1xuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCJcbiAgIH0sXG4gICBcInN1YmplY3RcIjogXCJcIixcbiAgIFwiYXR0YWNobWVudHNcIjogW10sXG4gICBcInRleHRCb2R5XCI6IFwiXCIsXG4gICBcImh0bWxCb2R5XCI6IFwiXCIsXG4gICBcInRpbWVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRvXCI6IFtdLFxuICAgXCJjY1wiOiBbXSxcbiAgIFwiYmNjXCI6IFtdLFxuICAgXCJmcm9tXCI6IHtcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdWJqZWN0XCI6IFwiXCIsXG4gICBcImF0dGFjaG1lbnRzXCI6IFtdLFxuICAgXCJ0ZXh0Qm9keVwiOiBcIlwiLFxuICAgXCJodG1sQm9keVwiOiBcIlwiLFxuICAgXCJ0aW1lXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdEVtYWlsc0VtYWlsSWRNZXNzYWdlcyA9IGZ1bmN0aW9uIHBvc3RFbWFpbHNFbWFpbElkTWVzc2FnZXMoZW1haWxJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L21lc3NhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZW1haWwgY29udmVyc2F0aW9uXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxJZCAtIGVtYWlsSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcIm90aGVyTWVkaWFVcmlzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldEVtYWlsc0VtYWlsSWQgPSBmdW5jdGlvbiBnZXRFbWFpbHNFbWFpbElkKGVtYWlsSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvZW1haWxzL3tlbWFpbElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVtYWlsSWQgPT09IHVuZGVmaW5lZCB8fCBlbWFpbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbWFpbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VtYWlsSWR9JywgZW1haWxJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgY29udmVyc2F0aW9uIGJ5IGRpc2Nvbm5lY3RpbmcgYWxsIG9mIHRoZSBwYXJ0aWNpcGFudHNcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ29udmVyc2F0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hFbWFpbHNFbWFpbElkID0gZnVuY3Rpb24gcGF0Y2hFbWFpbHNFbWFpbElkKGVtYWlsSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvZW1haWxzL3tlbWFpbElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVtYWlsSWQgPT09IHVuZGVmaW5lZCB8fCBlbWFpbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbWFpbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VtYWlsSWR9JywgZW1haWxJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgYXR0cmlidXRlcyBvbiBhIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGFydGljaXBhbnQgYXR0cmlidXRlc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiYXR0cmlidXRlc1wiOiB7fVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hFbWFpbHNFbWFpbElkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBwYXRjaEVtYWlsc0VtYWlsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQXR0cmlidXRlcyhlbWFpbElkLCBwYXJ0aWNpcGFudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2VtYWlscy97ZW1haWxJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9hdHRyaWJ1dGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHdyYXAtdXAgZm9yIHRoaXMgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LiBcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvdmlzaW9uYWwgLSBJbmRpY2F0ZXMgaWYgdGhlIHdyYXAtdXAgY29kZSBpcyBwcm92aXNpb25hbC5cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY29kZVwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm5vdGVzXCI6IFwiXCIsXG4gICBcInRhZ3NcIjogW10sXG4gICBcImR1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcInByb3Zpc2lvbmFsXCI6IHRydWVcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldEVtYWlsc0VtYWlsSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwID0gZnVuY3Rpb24gZ2V0RW1haWxzRW1haWxJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXAoZW1haWxJZCwgcGFydGljaXBhbnRJZCwgcHJvdmlzaW9uYWwpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvZW1haWxzL3tlbWFpbElkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3dyYXB1cCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVtYWlsSWQgPT09IHVuZGVmaW5lZCB8fCBlbWFpbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbWFpbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VtYWlsSWR9JywgZW1haWxJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwcm92aXNpb25hbFwiXSA9IHByb3Zpc2lvbmFsO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhdHRhY2htZW50IGZyb20gZHJhZnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbElkIC0gZW1haWxJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRhY2htZW50SWQgLSBhdHRhY2htZW50SWRcbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmRlbGV0ZUVtYWlsc0VtYWlsSWRNZXNzYWdlc0RyYWZ0QXR0YWNobWVudHNBdHRhY2htZW50SWQgPSBmdW5jdGlvbiBkZWxldGVFbWFpbHNFbWFpbElkTWVzc2FnZXNEcmFmdEF0dGFjaG1lbnRzQXR0YWNobWVudElkKGVtYWlsSWQsIGF0dGFjaG1lbnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L21lc3NhZ2VzL2RyYWZ0L2F0dGFjaG1lbnRzL3thdHRhY2htZW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihhdHRhY2htZW50SWQgPT09IHVuZGVmaW5lZCB8fCBhdHRhY2htZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGF0dGFjaG1lbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3thdHRhY2htZW50SWR9JywgYXR0YWNobWVudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY29udmVyc2F0aW9uIGRyYWZ0IHJlcGx5XG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxJZCAtIGVtYWlsSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0b1wiOiBbXSxcbiAgIFwiY2NcIjogW10sXG4gICBcImJjY1wiOiBbXSxcbiAgIFwiZnJvbVwiOiB7XG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwic3ViamVjdFwiOiBcIlwiLFxuICAgXCJhdHRhY2htZW50c1wiOiBbXSxcbiAgIFwidGV4dEJvZHlcIjogXCJcIixcbiAgIFwiaHRtbEJvZHlcIjogXCJcIixcbiAgIFwidGltZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldEVtYWlsc0VtYWlsSWRNZXNzYWdlc0RyYWZ0ID0gZnVuY3Rpb24gZ2V0RW1haWxzRW1haWxJZE1lc3NhZ2VzRHJhZnQoZW1haWxJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L21lc3NhZ2VzL2RyYWZ0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIGRyYWZ0IHJlcGx5XG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxJZCAtIGVtYWlsSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIERyYWZ0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRvXCI6IFtdLFxuICAgXCJjY1wiOiBbXSxcbiAgIFwiYmNjXCI6IFtdLFxuICAgXCJmcm9tXCI6IHtcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdWJqZWN0XCI6IFwiXCIsXG4gICBcImF0dGFjaG1lbnRzXCI6IFtdLFxuICAgXCJ0ZXh0Qm9keVwiOiBcIlwiLFxuICAgXCJodG1sQm9keVwiOiBcIlwiLFxuICAgXCJ0aW1lXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0b1wiOiBbXSxcbiAgIFwiY2NcIjogW10sXG4gICBcImJjY1wiOiBbXSxcbiAgIFwiZnJvbVwiOiB7XG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwic3ViamVjdFwiOiBcIlwiLFxuICAgXCJhdHRhY2htZW50c1wiOiBbXSxcbiAgIFwidGV4dEJvZHlcIjogXCJcIixcbiAgIFwiaHRtbEJvZHlcIjogXCJcIixcbiAgIFwidGltZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnB1dEVtYWlsc0VtYWlsSWRNZXNzYWdlc0RyYWZ0ID0gZnVuY3Rpb24gcHV0RW1haWxzRW1haWxJZE1lc3NhZ2VzRHJhZnQoZW1haWxJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9lbWFpbHMve2VtYWlsSWR9L21lc3NhZ2VzL2RyYWZ0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZW1haWxJZCA9PT0gdW5kZWZpbmVkIHx8IGVtYWlsSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVtYWlsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZW1haWxJZH0nLCBlbWFpbElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHBhcnRpY2lwYW50LlxuICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LlxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnZlcnNhdGlvbklkIC0gY29udmVyc2F0aW9uIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVXBkYXRlIHJlcXVlc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIndyYXB1cFwiOiB7XG4gICAgICBcImNvZGVcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJub3Rlc1wiOiBcIlwiLFxuICAgICAgXCJ0YWdzXCI6IFtdLFxuICAgICAgXCJkdXJhdGlvblNlY29uZHNcIjogMCxcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25hbFwiOiB0cnVlXG4gICB9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJyZWNvcmRpbmdcIjogdHJ1ZSxcbiAgIFwibXV0ZWRcIjogdHJ1ZSxcbiAgIFwiY29uZmluZWRcIjogdHJ1ZSxcbiAgIFwiaGVsZFwiOiB0cnVlLFxuICAgXCJ3cmFwdXBTa2lwcGVkXCI6IHRydWVcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkID0gZnVuY3Rpb24gcGF0Y2hDb252ZXJzYXRpb25JZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWQoY29udmVyc2F0aW9uSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlcGxhY2UgdGhpcyBwYXJ0aWNpcGFudCB3aXRoIHRoZSBzcGVjaWZpZWQgdXNlciBhbmQvb3IgYWRkcmVzc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnZlcnNhdGlvbklkIC0gY29udmVyc2F0aW9uIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVHJhbnNmZXIgcmVxdWVzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidXNlcklkXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwidXNlck5hbWVcIjogXCJcIixcbiAgIFwicXVldWVJZFwiOiBcIlwiLFxuICAgXCJ2b2ljZW1haWxcIjogdHJ1ZVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENvbnZlcnNhdGlvbklkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFJlcGxhY2UgPSBmdW5jdGlvbiBwb3N0Q29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkUmVwbGFjZShjb252ZXJzYXRpb25JZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vcmVwbGFjZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBsaXN0IG9mIHdyYXB1cCBjb2RlcyBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnQgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIixcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwY29kZXMgPSBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25JZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXBjb2Rlcyhjb252ZXJzYXRpb25JZCwgcGFydGljaXBhbnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vd3JhcHVwY29kZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBuZXcgY2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgcGFydGljaXBhbnQgb24gdGhlIGNvbnZlcnNhdGlvbi5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic2NyaXB0SWRcIjogXCJcIixcbiAgIFwicXVldWVJZFwiOiBcIlwiLFxuICAgXCJyb3V0aW5nRGF0YVwiOiB7XG4gICAgICBcInF1ZXVlSWRcIjogXCJcIixcbiAgICAgIFwibGFuZ3VhZ2VJZFwiOiBcIlwiLFxuICAgICAgXCJwcmlvcml0eVwiOiAwLFxuICAgICAgXCJza2lsbElkc1wiOiBbXSxcbiAgICAgIFwicHJlZmVycmVkQWdlbnRJZHNcIjogW11cbiAgIH0sXG4gICBcImNhbGxiYWNrVXNlck5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGJhY2tOdW1iZXJzXCI6IFtdLFxuICAgXCJjYWxsYmFja1NjaGVkdWxlZFRpbWVcIjogXCJcIixcbiAgIFwiY291bnRyeUNvZGVcIjogXCJcIixcbiAgIFwiZGF0YVwiOiB7fVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucG9zdENvbnZlcnNhdGlvbklkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENhbGxiYWNrcyA9IGZ1bmN0aW9uIHBvc3RDb252ZXJzYXRpb25JZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRDYWxsYmFja3MoY29udmVyc2F0aW9uSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2NhbGxiYWNrcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgYXR0cmlidXRlcyBvbiBhIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBhcnRpY2lwYW50IGF0dHJpYnV0ZXNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImF0dHJpYnV0ZXNcIjoge31cbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQXR0cmlidXRlcyA9IGZ1bmN0aW9uIHBhdGNoQ29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQXR0cmlidXRlcyhjb252ZXJzYXRpb25JZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vYXR0cmlidXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHdyYXAtdXAgZm9yIHRoaXMgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LiBcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnQgSURcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb3Zpc2lvbmFsIC0gSW5kaWNhdGVzIGlmIHRoZSB3cmFwLXVwIGNvZGUgaXMgcHJvdmlzaW9uYWwuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwKGNvbnZlcnNhdGlvbklkLCBwYXJ0aWNpcGFudElkLCBwcm92aXNpb25hbCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vd3JhcHVwJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvdmlzaW9uYWxcIl0gPSBwcm92aXNpb25hbDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50XG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29icm93c2VJZCAtIGNvYnJvd3NlSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwid3JhcHVwXCI6IHtcbiAgICAgIFwiY29kZVwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm5vdGVzXCI6IFwiXCIsXG4gICAgICBcInRhZ3NcIjogW10sXG4gICAgICBcImR1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvbmFsXCI6IHRydWVcbiAgIH0sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInJlY29yZGluZ1wiOiB0cnVlLFxuICAgXCJtdXRlZFwiOiB0cnVlLFxuICAgXCJjb25maW5lZFwiOiB0cnVlLFxuICAgXCJoZWxkXCI6IHRydWUsXG4gICBcIndyYXB1cFNraXBwZWRcIjogdHJ1ZVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hDb2Jyb3dzZXNlc3Npb25zQ29icm93c2VJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWQgPSBmdW5jdGlvbiBwYXRjaENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZChjb2Jyb3dzZUlkLCBwYXJ0aWNpcGFudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NvYnJvd3Nlc2Vzc2lvbnMve2NvYnJvd3NlSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb2Jyb3dzZUlkID09PSB1bmRlZmluZWQgfHwgY29icm93c2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29icm93c2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb2Jyb3dzZUlkfScsIGNvYnJvd3NlSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBjb252ZXJzYXRpb24gcGFydGljaXBhbnQncyBjb21tdW5pY2F0aW9uIGJ5IGRpc2Nvbm5lY3RpbmcgaXQuXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29icm93c2VJZCAtIGNvYnJvd3NlSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29tbXVuaWNhdGlvbklkIC0gY29tbXVuaWNhdGlvbklkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQYXJ0aWNpcGFudFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwid3JhcHVwXCI6IHtcbiAgICAgIFwiY29kZVwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm5vdGVzXCI6IFwiXCIsXG4gICAgICBcInRhZ3NcIjogW10sXG4gICAgICBcImR1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvbmFsXCI6IHRydWVcbiAgIH0sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInJlY29yZGluZ1wiOiB0cnVlLFxuICAgXCJtdXRlZFwiOiB0cnVlLFxuICAgXCJjb25maW5lZFwiOiB0cnVlLFxuICAgXCJoZWxkXCI6IHRydWUsXG4gICBcIndyYXB1cFNraXBwZWRcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge31cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29tbXVuaWNhdGlvbnNDb21tdW5pY2F0aW9uSWQgPSBmdW5jdGlvbiBwYXRjaENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZENvbW11bmljYXRpb25zQ29tbXVuaWNhdGlvbklkKGNvYnJvd3NlSWQsIHBhcnRpY2lwYW50SWQsIGNvbW11bmljYXRpb25JZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jb2Jyb3dzZXNlc3Npb25zL3tjb2Jyb3dzZUlkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2NvbW11bmljYXRpb25zL3tjb21tdW5pY2F0aW9uSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29icm93c2VJZCA9PT0gdW5kZWZpbmVkIHx8IGNvYnJvd3NlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvYnJvd3NlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29icm93c2VJZH0nLCBjb2Jyb3dzZUlkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGNvbW11bmljYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbW11bmljYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29tbXVuaWNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbW11bmljYXRpb25JZH0nLCBjb21tdW5pY2F0aW9uSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZXBsYWNlIHRoaXMgcGFydGljaXBhbnQgd2l0aCB0aGUgc3BlY2lmaWVkIHVzZXIgYW5kL29yIGFkZHJlc3NcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2Jyb3dzZUlkIC0gY29icm93c2VJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ1c2VyTmFtZVwiOiBcIlwiLFxuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInZvaWNlbWFpbFwiOiB0cnVlXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkUmVwbGFjZSA9IGZ1bmN0aW9uIHBvc3RDb2Jyb3dzZXNlc3Npb25zQ29icm93c2VJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRSZXBsYWNlKGNvYnJvd3NlSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY29icm93c2VzZXNzaW9ucy97Y29icm93c2VJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9yZXBsYWNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29icm93c2VJZCA9PT0gdW5kZWZpbmVkIHx8IGNvYnJvd3NlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvYnJvd3NlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29icm93c2VJZH0nLCBjb2Jyb3dzZUlkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCByZWNlbnQgY29icm93c2UgY29udmVyc2F0aW9uc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDb2Jyb3dzZXNlc3Npb25zID0gZnVuY3Rpb24gZ2V0Q29icm93c2VzZXNzaW9ucygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY29icm93c2VzZXNzaW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBsaXN0IG9mIHdyYXB1cCBjb2RlcyBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2Jyb3dzZUlkIC0gY29icm93c2VJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDb2Jyb3dzZXNlc3Npb25zQ29icm93c2VJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXBjb2RlcyA9IGZ1bmN0aW9uIGdldENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cGNvZGVzKGNvYnJvd3NlSWQsIHBhcnRpY2lwYW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY29icm93c2VzZXNzaW9ucy97Y29icm93c2VJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS93cmFwdXBjb2Rlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvYnJvd3NlSWQgPT09IHVuZGVmaW5lZCB8fCBjb2Jyb3dzZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb2Jyb3dzZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvYnJvd3NlSWR9JywgY29icm93c2VJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY29icm93c2UgY29udmVyc2F0aW9uXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29icm93c2VJZCAtIGNvYnJvd3NlSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcIm90aGVyTWVkaWFVcmlzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkID0gZnVuY3Rpb24gZ2V0Q29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWQoY29icm93c2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jb2Jyb3dzZXNlc3Npb25zL3tjb2Jyb3dzZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvYnJvd3NlSWQgPT09IHVuZGVmaW5lZCB8fCBjb2Jyb3dzZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb2Jyb3dzZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvYnJvd3NlSWR9JywgY29icm93c2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgY29udmVyc2F0aW9uIGJ5IGRpc2Nvbm5lY3RpbmcgYWxsIG9mIHRoZSBwYXJ0aWNpcGFudHNcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2Jyb3dzZUlkIC0gY29icm93c2VJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ29udmVyc2F0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUucGF0Y2hDb2Jyb3dzZXNlc3Npb25zQ29icm93c2VJZCA9IGZ1bmN0aW9uIHBhdGNoQ29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWQoY29icm93c2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jb2Jyb3dzZXNlc3Npb25zL3tjb2Jyb3dzZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvYnJvd3NlSWQgPT09IHVuZGVmaW5lZCB8fCBjb2Jyb3dzZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb2Jyb3dzZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvYnJvd3NlSWR9JywgY29icm93c2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgYXR0cmlidXRlcyBvbiBhIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudC5cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2Jyb3dzZUlkIC0gY29icm93c2VJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJhdHRyaWJ1dGVzXCI6IHt9XG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBwYXRjaENvYnJvd3Nlc2Vzc2lvbnNDb2Jyb3dzZUlkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZEF0dHJpYnV0ZXMoY29icm93c2VJZCwgcGFydGljaXBhbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jb2Jyb3dzZXNlc3Npb25zL3tjb2Jyb3dzZUlkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2F0dHJpYnV0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb2Jyb3dzZUlkID09PSB1bmRlZmluZWQgfHwgY29icm93c2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29icm93c2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb2Jyb3dzZUlkfScsIGNvYnJvd3NlSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgd3JhcC11cCBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnQuIFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvYnJvd3NlSWQgLSBjb2Jyb3dzZUlkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHtib29sZWFufSBwcm92aXNpb25hbCAtIEluZGljYXRlcyBpZiB0aGUgd3JhcC11cCBjb2RlIGlzIHByb3Zpc2lvbmFsLlxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjb2RlXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibm90ZXNcIjogXCJcIixcbiAgIFwidGFnc1wiOiBbXSxcbiAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwID0gZnVuY3Rpb24gZ2V0Q29icm93c2VzZXNzaW9uc0NvYnJvd3NlSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwKGNvYnJvd3NlSWQsIHBhcnRpY2lwYW50SWQsIHByb3Zpc2lvbmFsKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NvYnJvd3Nlc2Vzc2lvbnMve2NvYnJvd3NlSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vd3JhcHVwJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29icm93c2VJZCA9PT0gdW5kZWZpbmVkIHx8IGNvYnJvd3NlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvYnJvd3NlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29icm93c2VJZH0nLCBjb2Jyb3dzZUlkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInByb3Zpc2lvbmFsXCJdID0gcHJvdmlzaW9uYWw7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgY29kZSB1c2VkIHRvIGFkZCBhIGNvbW11bmljYXRpb24gdG8gdGhpcyBwYXJ0aWNpcGFudFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnZlcnNhdGlvbklkIC0gY29udmVyc2F0aW9uIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBhZGRDb21tdW5pY2F0aW9uQ29kZSAtIGFkZENvbW11bmljYXRpb25Db2RlXG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5kZWxldGVDb252ZXJzYXRpb25JZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRDb2Rlc0FkZGNvbW11bmljYXRpb25jb2RlID0gZnVuY3Rpb24gZGVsZXRlQ29udmVyc2F0aW9uSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29kZXNBZGRjb21tdW5pY2F0aW9uY29kZShjb252ZXJzYXRpb25JZCwgcGFydGljaXBhbnRJZCwgYWRkQ29tbXVuaWNhdGlvbkNvZGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2NvZGVzL3thZGRDb21tdW5pY2F0aW9uQ29kZX0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihhZGRDb21tdW5pY2F0aW9uQ29kZSA9PT0gdW5kZWZpbmVkIHx8IGFkZENvbW11bmljYXRpb25Db2RlID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhZGRDb21tdW5pY2F0aW9uQ29kZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3thZGRDb21tdW5pY2F0aW9uQ29kZX0nLCBhZGRDb21tdW5pY2F0aW9uQ29kZSk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIEZheCBDb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gRmF4XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwiZG9jdW1lbnRJZFwiOiBcIlwiLFxuICAgXCJjb250ZW50VHlwZVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaXNDdXJyZW50VXNlcldvcmtzcGFjZVwiOiB0cnVlLFxuICAgICAgXCJ1c2VyXCI6IHt9LFxuICAgICAgXCJidWNrZXRcIjogXCJcIixcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcInN1bW1hcnlcIjoge30sXG4gICAgICBcImFjbFwiOiBbXSxcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIlxuICAgfSxcbiAgIFwiY292ZXJTaGVldFwiOiB7XG4gICAgICBcIm5vdGVzXCI6IFwiXCIsXG4gICAgICBcImxvY2FsZVwiOiBcIlwiXG4gICB9LFxuICAgXCJ0aW1lWm9uZU9mZnNldE1pbnV0ZXNcIjogMFxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInVwbG9hZERlc3RpbmF0aW9uVXJpXCI6IFwiXCIsXG4gICBcInVwbG9hZE1ldGhvZFR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0RmF4ZXMgPSBmdW5jdGlvbiBwb3N0RmF4ZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9mYXhlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBjb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICBcImFkZHJlc3NcIjogXCJcIixcbiAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbklkID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSWQoY29udmVyc2F0aW9uSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY2FsbGJhY2sgY29udmVyc2F0aW9uc1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDYWxsYmFja3MgPSBmdW5jdGlvbiBnZXRDYWxsYmFja3MoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxiYWNrcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIENhbGxiYWNrXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIENhbGxiYWNrXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJzY3JpcHRJZFwiOiBcIlwiLFxuICAgXCJxdWV1ZUlkXCI6IFwiXCIsXG4gICBcInJvdXRpbmdEYXRhXCI6IHtcbiAgICAgIFwicXVldWVJZFwiOiBcIlwiLFxuICAgICAgXCJsYW5ndWFnZUlkXCI6IFwiXCIsXG4gICAgICBcInByaW9yaXR5XCI6IDAsXG4gICAgICBcInNraWxsSWRzXCI6IFtdLFxuICAgICAgXCJwcmVmZXJyZWRBZ2VudElkc1wiOiBbXVxuICAgfSxcbiAgIFwiY2FsbGJhY2tVc2VyTmFtZVwiOiBcIlwiLFxuICAgXCJjYWxsYmFja051bWJlcnNcIjogW10sXG4gICBcImNhbGxiYWNrU2NoZWR1bGVkVGltZVwiOiBcIlwiLFxuICAgXCJjb3VudHJ5Q29kZVwiOiBcIlwiLFxuICAgXCJkYXRhXCI6IHt9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvbnZlcnNhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsYmFja0lkZW50aWZpZXJzXCI6IFtdXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q2FsbGJhY2tzID0gZnVuY3Rpb24gcG9zdENhbGxiYWNrcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxiYWNrcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBjb252ZXJzYXRpb24gcGFydGljaXBhbnRcbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja0lkIC0gY2FsbGJhY2tJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJ0aWNpcGFudElkIC0gcGFydGljaXBhbnRJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGFydGljaXBhbnRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIndyYXB1cFwiOiB7XG4gICAgICBcImNvZGVcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJub3Rlc1wiOiBcIlwiLFxuICAgICAgXCJ0YWdzXCI6IFtdLFxuICAgICAgXCJkdXJhdGlvblNlY29uZHNcIjogMCxcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25hbFwiOiB0cnVlXG4gICB9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJyZWNvcmRpbmdcIjogdHJ1ZSxcbiAgIFwibXV0ZWRcIjogdHJ1ZSxcbiAgIFwiY29uZmluZWRcIjogdHJ1ZSxcbiAgIFwiaGVsZFwiOiB0cnVlLFxuICAgXCJ3cmFwdXBTa2lwcGVkXCI6IHRydWVcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBhdGNoQ2FsbGJhY2tzQ2FsbGJhY2tJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWQgPSBmdW5jdGlvbiBwYXRjaENhbGxiYWNrc0NhbGxiYWNrSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkKGNhbGxiYWNrSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbGJhY2tzL3tjYWxsYmFja0lkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGJhY2tJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxiYWNrSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxiYWNrSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGJhY2tJZH0nLCBjYWxsYmFja0lkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50J3MgY29tbXVuaWNhdGlvbiBieSBkaXNjb25uZWN0aW5nIGl0LlxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSWQgLSBjYWxsYmFja0lkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbW11bmljYXRpb25JZCAtIGNvbW11bmljYXRpb25JZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGFydGljaXBhbnRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIndyYXB1cFwiOiB7XG4gICAgICBcImNvZGVcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJub3Rlc1wiOiBcIlwiLFxuICAgICAgXCJ0YWdzXCI6IFtdLFxuICAgICAgXCJkdXJhdGlvblNlY29uZHNcIjogMCxcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25hbFwiOiB0cnVlXG4gICB9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJyZWNvcmRpbmdcIjogdHJ1ZSxcbiAgIFwibXV0ZWRcIjogdHJ1ZSxcbiAgIFwiY29uZmluZWRcIjogdHJ1ZSxcbiAgIFwiaGVsZFwiOiB0cnVlLFxuICAgXCJ3cmFwdXBTa2lwcGVkXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHt9XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENhbGxiYWNrc0NhbGxiYWNrSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29tbXVuaWNhdGlvbnNDb21tdW5pY2F0aW9uSWQgPSBmdW5jdGlvbiBwYXRjaENhbGxiYWNrc0NhbGxiYWNrSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQ29tbXVuaWNhdGlvbnNDb21tdW5pY2F0aW9uSWQoY2FsbGJhY2tJZCwgcGFydGljaXBhbnRJZCwgY29tbXVuaWNhdGlvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL2NhbGxiYWNrcy97Y2FsbGJhY2tJZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jb21tdW5pY2F0aW9ucy97Y29tbXVuaWNhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxiYWNrSWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsYmFja0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsYmFja0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxiYWNrSWR9JywgY2FsbGJhY2tJZCk7XG4gICAgaWYocGFydGljaXBhbnRJZCA9PT0gdW5kZWZpbmVkIHx8IHBhcnRpY2lwYW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhcnRpY2lwYW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGFydGljaXBhbnRJZH0nLCBwYXJ0aWNpcGFudElkKTtcbiAgICBpZihjb21tdW5pY2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb21tdW5pY2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbW11bmljYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb21tdW5pY2F0aW9uSWR9JywgY29tbXVuaWNhdGlvbklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVwbGFjZSB0aGlzIHBhcnRpY2lwYW50IHdpdGggdGhlIHNwZWNpZmllZCB1c2VyIGFuZC9vciBhZGRyZXNzXG4gICogQG1lbWJlck9mIENvbnZlcnNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGJhY2tJZCAtIGNhbGxiYWNrSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGFydGljaXBhbnRJZCAtIHBhcnRpY2lwYW50SWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRyYW5zZmVyIHJlcXVlc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICBcInVzZXJOYW1lXCI6IFwiXCIsXG4gICBcInF1ZXVlSWRcIjogXCJcIixcbiAgIFwidm9pY2VtYWlsXCI6IHRydWVcbn1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RDYWxsYmFja3NDYWxsYmFja0lkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFJlcGxhY2UgPSBmdW5jdGlvbiBwb3N0Q2FsbGJhY2tzQ2FsbGJhY2tJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRSZXBsYWNlKGNhbGxiYWNrSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbGJhY2tzL3tjYWxsYmFja0lkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3JlcGxhY2UnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxsYmFja0lkID09PSB1bmRlZmluZWQgfHwgY2FsbGJhY2tJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbGJhY2tJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxsYmFja0lkfScsIGNhbGxiYWNrSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGxpc3Qgb2Ygd3JhcHVwIGNvZGVzIGZvciB0aGlzIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSWQgLSBjYWxsYmFja0lkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCIsXG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cbkNvbnZlcnNhdGlvbnNBcGkucHJvdG90eXBlLmdldENhbGxiYWNrc0NhbGxiYWNrSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkV3JhcHVwY29kZXMgPSBmdW5jdGlvbiBnZXRDYWxsYmFja3NDYWxsYmFja0lkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cGNvZGVzKGNhbGxiYWNrSWQsIHBhcnRpY2lwYW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbGJhY2tzL3tjYWxsYmFja0lkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGJhY2tJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxiYWNrSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxiYWNrSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGJhY2tJZH0nLCBjYWxsYmFja0lkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBjYWxsYmFjayBjb252ZXJzYXRpb25cbiAgKiBAbWVtYmVyT2YgQ29udmVyc2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja0lkIC0gY2FsbGJhY2tJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwib3RoZXJNZWRpYVVyaXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q2FsbGJhY2tzQ2FsbGJhY2tJZCA9IGZ1bmN0aW9uIGdldENhbGxiYWNrc0NhbGxiYWNrSWQoY2FsbGJhY2tJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxsYmFja3Mve2NhbGxiYWNrSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGJhY2tJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxiYWNrSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxiYWNrSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGJhY2tJZH0nLCBjYWxsYmFja0lkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBjb252ZXJzYXRpb24gYnkgZGlzY29ubmVjdGluZyBhbGwgb2YgdGhlIHBhcnRpY2lwYW50c1xuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSWQgLSBjYWxsYmFja0lkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDb252ZXJzYXRpb25cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENhbGxiYWNrc0NhbGxiYWNrSWQgPSBmdW5jdGlvbiBwYXRjaENhbGxiYWNrc0NhbGxiYWNrSWQoY2FsbGJhY2tJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxsYmFja3Mve2NhbGxiYWNrSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGJhY2tJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxiYWNrSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxiYWNrSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGJhY2tJZH0nLCBjYWxsYmFja0lkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIHRoZSBhdHRyaWJ1dGVzIG9uIGEgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50LlxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSWQgLSBjYWxsYmFja0lkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBdHRyaWJ1dGVzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJhdHRyaWJ1dGVzXCI6IHt9XG59XG4gICovXG5Db252ZXJzYXRpb25zQXBpLnByb3RvdHlwZS5wYXRjaENhbGxiYWNrc0NhbGxiYWNrSWRQYXJ0aWNpcGFudHNQYXJ0aWNpcGFudElkQXR0cmlidXRlcyA9IGZ1bmN0aW9uIHBhdGNoQ2FsbGJhY2tzQ2FsbGJhY2tJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRBdHRyaWJ1dGVzKGNhbGxiYWNrSWQsIHBhcnRpY2lwYW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMvY2FsbGJhY2tzL3tjYWxsYmFja0lkfS9wYXJ0aWNpcGFudHMve3BhcnRpY2lwYW50SWR9L2F0dHJpYnV0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxsYmFja0lkID09PSB1bmRlZmluZWQgfHwgY2FsbGJhY2tJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbGJhY2tJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxsYmFja0lkfScsIGNhbGxiYWNrSWQpO1xuICAgIGlmKHBhcnRpY2lwYW50SWQgPT09IHVuZGVmaW5lZCB8fCBwYXJ0aWNpcGFudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwYXJ0aWNpcGFudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhcnRpY2lwYW50SWR9JywgcGFydGljaXBhbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgd3JhcC11cCBmb3IgdGhpcyBjb252ZXJzYXRpb24gcGFydGljaXBhbnQuIFxuICAqIEBtZW1iZXJPZiBDb252ZXJzYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrSWQgLSBjYWxsYmFja0lkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhcnRpY2lwYW50SWQgLSBwYXJ0aWNpcGFudElkXG4gICogQHBhcmFtIHtib29sZWFufSBwcm92aXNpb25hbCAtIEluZGljYXRlcyBpZiB0aGUgd3JhcC11cCBjb2RlIGlzIHByb3Zpc2lvbmFsLlxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjb2RlXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibm90ZXNcIjogXCJcIixcbiAgIFwidGFnc1wiOiBbXSxcbiAgIFwiZHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwicHJvdmlzaW9uYWxcIjogdHJ1ZVxufVxuICAqL1xuQ29udmVyc2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0Q2FsbGJhY2tzQ2FsbGJhY2tJZFBhcnRpY2lwYW50c1BhcnRpY2lwYW50SWRXcmFwdXAgPSBmdW5jdGlvbiBnZXRDYWxsYmFja3NDYWxsYmFja0lkUGFydGljaXBhbnRzUGFydGljaXBhbnRJZFdyYXB1cChjYWxsYmFja0lkLCBwYXJ0aWNpcGFudElkLCBwcm92aXNpb25hbCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy9jYWxsYmFja3Mve2NhbGxiYWNrSWR9L3BhcnRpY2lwYW50cy97cGFydGljaXBhbnRJZH0vd3JhcHVwJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGJhY2tJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxiYWNrSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxiYWNrSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGJhY2tJZH0nLCBjYWxsYmFja0lkKTtcbiAgICBpZihwYXJ0aWNpcGFudElkID09PSB1bmRlZmluZWQgfHwgcGFydGljaXBhbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFydGljaXBhbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYXJ0aWNpcGFudElkfScsIHBhcnRpY2lwYW50SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInByb3Zpc2lvbmFsXCJdID0gcHJvdmlzaW9uYWw7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnZlcnNhdGlvbnNBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBGYXhBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uRmF4QXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIEZheEFwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgRmF4QXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IEZheEFwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmF4QXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBEb3dubG9hZCBhIGZheCBkb2N1bWVudC5cbiAgKiBAbWVtYmVyT2YgRmF4QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SWQgLSBEb2N1bWVudCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjb250ZW50TG9jYXRpb25VcmlcIjogXCJcIixcbiAgIFwiaW1hZ2VVcmlcIjogXCJcIixcbiAgIFwidGh1bWJuYWlsc1wiOiBbXVxufVxuICAqL1xuRmF4QXBpLnByb3RvdHlwZS5nZXREb2N1bWVudHNEb2N1bWVudElkQ29udGVudCA9IGZ1bmN0aW9uIGdldERvY3VtZW50c0RvY3VtZW50SWRDb250ZW50KGRvY3VtZW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2ZheC9kb2N1bWVudHMve2RvY3VtZW50SWR9L2NvbnRlbnQnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb2N1bWVudElkID09PSB1bmRlZmluZWQgfHwgZG9jdW1lbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9jdW1lbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb2N1bWVudElkfScsIGRvY3VtZW50SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBGYXhBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcImNvbnRlbnRVcmlcIjogXCJcIixcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjb250ZW50VHlwZVwiOiBcIlwiLFxuICAgXCJjb250ZW50TGVuZ3RoXCI6IDAsXG4gICBcImZpbGVuYW1lXCI6IFwiXCIsXG4gICBcInJlYWRcIjogdHJ1ZSxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcImNhbGxlckFkZHJlc3NcIjogXCJcIixcbiAgIFwicmVjZWl2ZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcInRodW1ibmFpbHNcIjogW10sXG4gICBcInNoYXJpbmdVcmlcIjogXCJcIixcbiAgIFwiZG93bmxvYWRTaGFyaW5nVXJpXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuRmF4QXBpLnByb3RvdHlwZS5nZXREb2N1bWVudHNEb2N1bWVudElkID0gZnVuY3Rpb24gZ2V0RG9jdW1lbnRzRG9jdW1lbnRJZChkb2N1bWVudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9mYXgvZG9jdW1lbnRzL3tkb2N1bWVudElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRvY3VtZW50SWQgPT09IHVuZGVmaW5lZCB8fCBkb2N1bWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBkb2N1bWVudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RvY3VtZW50SWR9JywgZG9jdW1lbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgZmF4IGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBGYXhBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBEb2N1bWVudFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwiY29udGVudFVyaVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnRlbnRUeXBlXCI6IFwiXCIsXG4gICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgIFwiZmlsZW5hbWVcIjogXCJcIixcbiAgIFwicmVhZFwiOiB0cnVlLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwiY2FsbGVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJyZWNlaXZlckFkZHJlc3NcIjogXCJcIixcbiAgIFwidGh1bWJuYWlsc1wiOiBbXSxcbiAgIFwic2hhcmluZ1VyaVwiOiBcIlwiLFxuICAgXCJkb3dubG9hZFNoYXJpbmdVcmlcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJjb250ZW50VXJpXCI6IFwiXCIsXG4gICBcIndvcmtzcGFjZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGVudFR5cGVcIjogXCJcIixcbiAgIFwiY29udGVudExlbmd0aFwiOiAwLFxuICAgXCJmaWxlbmFtZVwiOiBcIlwiLFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcInJlY2VpdmVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJ0aHVtYm5haWxzXCI6IFtdLFxuICAgXCJzaGFyaW5nVXJpXCI6IFwiXCIsXG4gICBcImRvd25sb2FkU2hhcmluZ1VyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkZheEFwaS5wcm90b3R5cGUucHV0RG9jdW1lbnRzRG9jdW1lbnRJZCA9IGZ1bmN0aW9uIHB1dERvY3VtZW50c0RvY3VtZW50SWQoZG9jdW1lbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZmF4L2RvY3VtZW50cy97ZG9jdW1lbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb2N1bWVudElkID09PSB1bmRlZmluZWQgfHwgZG9jdW1lbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9jdW1lbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb2N1bWVudElkfScsIGRvY3VtZW50SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgZmF4IGRvY3VtZW50LlxuICAqIEBtZW1iZXJPZiBGYXhBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRJZCAtIERvY3VtZW50IElEXG4gICovXG5GYXhBcGkucHJvdG90eXBlLmRlbGV0ZURvY3VtZW50c0RvY3VtZW50SWQgPSBmdW5jdGlvbiBkZWxldGVEb2N1bWVudHNEb2N1bWVudElkKGRvY3VtZW50SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2ZheC9kb2N1bWVudHMve2RvY3VtZW50SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9jdW1lbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvY3VtZW50SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9jdW1lbnRJZH0nLCBkb2N1bWVudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZmF4IHN1bW1hcnlcbiAgKiBAbWVtYmVyT2YgRmF4QXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlYWRDb3VudFwiOiAwLFxuICAgXCJ1bnJlYWRDb3VudFwiOiAwLFxuICAgXCJ0b3RhbENvdW50XCI6IDBcbn1cbiAgKi9cbkZheEFwaS5wcm90b3R5cGUuZ2V0U3VtbWFyeSA9IGZ1bmN0aW9uIGdldFN1bW1hcnkoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9mYXgvc3VtbWFyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgZmF4IGRvY3VtZW50cy5cbiAgKiBAbWVtYmVyT2YgRmF4QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5GYXhBcGkucHJvdG90eXBlLmdldERvY3VtZW50cyA9IGZ1bmN0aW9uIGdldERvY3VtZW50cyhwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZmF4L2RvY3VtZW50cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEZheEFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIEdlb2xvY2F0aW9uQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkdlb2xvY2F0aW9uQXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIEdlb2xvY2F0aW9uQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBHZW9sb2NhdGlvbkFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW9sb2NhdGlvbkFwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2VvbG9jYXRpb25BcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIncyBHZW9sb2NhdGlvblxuICAqIEBtZW1iZXJPZiBHZW9sb2NhdGlvbkFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSB1c2VyIElkXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkIC0gY2xpZW50IElkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcImxhdGl0dWRlXCI6IHt9LFxuICAgXCJsb25naXR1ZGVcIjoge30sXG4gICBcImNvdW50cnlcIjogXCJcIixcbiAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICBcImNpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HZW9sb2NhdGlvbkFwaS5wcm90b3R5cGUuZ2V0VXNlcklkR2VvbG9jYXRpb25zQ2xpZW50SWQgPSBmdW5jdGlvbiBnZXRVc2VySWRHZW9sb2NhdGlvbnNDbGllbnRJZCh1c2VySWQsIGNsaWVudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9nZW9sb2NhdGlvbnMve2NsaWVudElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGNsaWVudElkID09PSB1bmRlZmluZWQgfHwgY2xpZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNsaWVudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NsaWVudElkfScsIGNsaWVudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBQYXRjaCBhIHVzZXIncyBHZW9sb2NhdGlvblxuICAqIEBkZXNjcmlwdGlvbiBUaGUgZ2VvbG9jYXRpb24gb2JqZWN0IGNhbiBiZSBwYXRjaGVkIG9uZSBvZiB0aHJlZSB3YXlzLiBPcHRpb24gMTogU2V0IHRoZSAncHJpbWFyeScgcHJvcGVydHkgdG8gdHJ1ZS4gVGhpcyB3aWxsIHNldCB0aGUgY2xpZW50IGFzIHRoZSB1c2VyJ3MgcHJpbWFyeSBnZW9sb2NhdGlvbiBzb3VyY2UuICBPcHRpb24gMjogUHJvdmlkZSB0aGUgJ2xhdGl0dWRlJyBhbmQgJ2xvbmdpdHVkZScgdmFsdWVzLiAgVGhpcyB3aWxsIGVucXVldWUgYW4gYXN5bmNocm9ub3VzIHVwZGF0ZSBvZiB0aGUgJ2NpdHknLCAncmVnaW9uJywgYW5kICdjb3VudHJ5JywgZ2VuZXJhdGluZyBhIG5vdGlmaWNhdGlvbi4gQSBzdWJzZXF1ZW50IEdFVCBvcGVyYXRpb24gd2lsbCBpbmNsdWRlIHRoZSBuZXcgdmFsdWVzIGZvciAnY2l0eScsICdyZWdpb24nIGFuZCAnY291bnRyeScuICBPcHRpb24gMzogIFByb3ZpZGUgdGhlICdjaXR5JywgJ3JlZ2lvbicsICdjb3VudHJ5JyB2YWx1ZXMuICBPcHRpb24gMSBjYW4gYmUgY29tYmluZWQgd2l0aCBPcHRpb24gMiBvciBPcHRpb24gMy4gIEZvciBleGFtcGxlLCB1cGRhdGUgdGhlIGNsaWVudCBhcyBwcmltYXJ5IGFuZCBwcm92aWRlIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgdmFsdWVzLlxuICAqIEBtZW1iZXJPZiBHZW9sb2NhdGlvbkFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSB1c2VyIElkXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkIC0gY2xpZW50IElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBHZW9sb2NhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwibGF0aXR1ZGVcIjoge30sXG4gICBcImxvbmdpdHVkZVwiOiB7fSxcbiAgIFwiY291bnRyeVwiOiBcIlwiLFxuICAgXCJyZWdpb25cIjogXCJcIixcbiAgIFwiY2l0eVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcImxhdGl0dWRlXCI6IHt9LFxuICAgXCJsb25naXR1ZGVcIjoge30sXG4gICBcImNvdW50cnlcIjogXCJcIixcbiAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICBcImNpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HZW9sb2NhdGlvbkFwaS5wcm90b3R5cGUucGF0Y2hVc2VySWRHZW9sb2NhdGlvbnNDbGllbnRJZCA9IGZ1bmN0aW9uIHBhdGNoVXNlcklkR2VvbG9jYXRpb25zQ2xpZW50SWQodXNlcklkLCBjbGllbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vZ2VvbG9jYXRpb25zL3tjbGllbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihjbGllbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGNsaWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjbGllbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjbGllbnRJZH0nLCBjbGllbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIG9yZ2FuaXphdGlvbidzIEdlb2xvY2F0aW9uU2V0dGluZ3NcbiAgKiBAbWVtYmVyT2YgR2VvbG9jYXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcIm1hcGJveEtleVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdlb2xvY2F0aW9uQXBpLnByb3RvdHlwZS5nZXRTZXR0aW5ncyA9IGZ1bmN0aW9uIGdldFNldHRpbmdzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ2VvbG9jYXRpb25zL3NldHRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUGF0Y2ggYSBvcmdhbml6YXRpb24ncyBHZW9sb2NhdGlvblNldHRpbmdzXG4gICogQG1lbWJlck9mIEdlb2xvY2F0aW9uQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBHZW9sb2NhdGlvbiBzZXR0aW5nc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcIm1hcGJveEtleVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJtYXBib3hLZXlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HZW9sb2NhdGlvbkFwaS5wcm90b3R5cGUucGF0Y2hTZXR0aW5ncyA9IGZ1bmN0aW9uIHBhdGNoU2V0dGluZ3MoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ2VvbG9jYXRpb25zL3NldHRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBHZW9sb2NhdGlvbkFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIEdyZWV0aW5nc0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5HcmVldGluZ3NBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gR3JlZXRpbmdzQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBHcmVldGluZ3NBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgR3JlZXRpbmdzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHcmVldGluZ3NBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBPcmdhbml6YXRpb24ncyBEZWZhdWx0R3JlZXRpbmdMaXN0XG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJncmVldGluZ3NcIjoge30sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyZWV0aW5nc0FwaS5wcm90b3R5cGUuZ2V0RGVmYXVsdHMgPSBmdW5jdGlvbiBnZXREZWZhdWx0cygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyZWV0aW5ncy9kZWZhdWx0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbiBPcmdhbml6YXRpb24ncyBEZWZhdWx0R3JlZXRpbmdMaXN0XG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIHVwZGF0ZWQgZGVmYXVsdEdyZWV0aW5nTGlzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwib3duZXJUeXBlXCI6IFwiXCIsXG4gICBcImdyZWV0aW5nc1wiOiB7fSxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwiZ3JlZXRpbmdzXCI6IHt9LFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLnB1dERlZmF1bHRzID0gZnVuY3Rpb24gcHV0RGVmYXVsdHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JlZXRpbmdzL2RlZmF1bHRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHcmFicyB0aGUgbGlzdCBvZiBEZWZhdWx0IEdyZWV0aW5ncyBnaXZlbiBhIFVzZXIncyBJRFxuICAqIEBtZW1iZXJPZiBHcmVldGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJncmVldGluZ3NcIjoge30sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyZWV0aW5nc0FwaS5wcm90b3R5cGUuZ2V0VXNlcklkR3JlZXRpbmdzRGVmYXVsdHMgPSBmdW5jdGlvbiBnZXRVc2VySWRHcmVldGluZ3NEZWZhdWx0cyh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L2dyZWV0aW5ncy9kZWZhdWx0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZXMgdGhlIERlZmF1bHRHcmVldGluZ0xpc3Qgb2YgdGhlIHNwZWNpZmllZCBVc2VyXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUaGUgdXBkYXRlZCBkZWZhdWx0R3JlZXRpbmdMaXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwiZ3JlZXRpbmdzXCI6IHt9LFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJncmVldGluZ3NcIjoge30sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyZWV0aW5nc0FwaS5wcm90b3R5cGUucHV0VXNlcklkR3JlZXRpbmdzRGVmYXVsdHMgPSBmdW5jdGlvbiBwdXRVc2VySWRHcmVldGluZ3NEZWZhdWx0cyh1c2VySWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L2dyZWV0aW5ncy9kZWZhdWx0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR3JhYnMgdGhlIGxpc3Qgb2YgRGVmYXVsdCBHcmVldGluZ3MgZ2l2ZW4gYSBHcm91cCdzIElEXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwiZ3JlZXRpbmdzXCI6IHt9LFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLmdldEdyb3VwSWRHcmVldGluZ3NEZWZhdWx0cyA9IGZ1bmN0aW9uIGdldEdyb3VwSWRHcmVldGluZ3NEZWZhdWx0cyhncm91cElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9ncm91cHMve2dyb3VwSWR9L2dyZWV0aW5ncy9kZWZhdWx0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyb3VwSWQgPT09IHVuZGVmaW5lZCB8fCBncm91cElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncm91cElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyb3VwSWR9JywgZ3JvdXBJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlcyB0aGUgRGVmYXVsdEdyZWV0aW5nTGlzdCBvZiB0aGUgc3BlY2lmaWVkIEdyb3VwXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRoZSB1cGRhdGVkIGRlZmF1bHRHcmVldGluZ0xpc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJncmVldGluZ3NcIjoge30sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwib3duZXJUeXBlXCI6IFwiXCIsXG4gICBcImdyZWV0aW5nc1wiOiB7fSxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuR3JlZXRpbmdzQXBpLnByb3RvdHlwZS5wdXRHcm91cElkR3JlZXRpbmdzRGVmYXVsdHMgPSBmdW5jdGlvbiBwdXRHcm91cElkR3JlZXRpbmdzRGVmYXVsdHMoZ3JvdXBJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3tncm91cElkfS9ncmVldGluZ3MvZGVmYXVsdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhbiBPcmdhbml6YXRpb24ncyBHcmVldGluZ3NcbiAgKiBAbWVtYmVyT2YgR3JlZXRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLmdldEdyZWV0aW5ncyA9IGZ1bmN0aW9uIGdldEdyZWV0aW5ncyhwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JlZXRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBHcmVldGluZyBmb3IgYW4gT3JnYW5pemF0aW9uXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIEdyZWV0aW5nIHRvIGNyZWF0ZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9GaWxlXCI6IHtcbiAgICAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgICAgIFwic2l6ZUJ5dGVzXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9UVFNcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwiZ3JlZXRpbmdzXCI6IHt9LFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLnBvc3RHcmVldGluZ3MgPSBmdW5jdGlvbiBwb3N0R3JlZXRpbmdzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyZWV0aW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIEdyZWV0aW5nIHdpdGggdGhlIGdpdmVuIEdyZWV0aW5nSWRcbiAgKiBAbWVtYmVyT2YgR3JlZXRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyZWV0aW5nSWQgLSBHcmVldGluZyBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwib3duZXJUeXBlXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvRmlsZVwiOiB7XG4gICAgICBcImR1cmF0aW9uTWlsbGlzZWNvbmRzXCI6IDAsXG4gICAgICBcInNpemVCeXRlc1wiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvVFRTXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyZWV0aW5nc0FwaS5wcm90b3R5cGUuZ2V0R3JlZXRpbmdJZCA9IGZ1bmN0aW9uIGdldEdyZWV0aW5nSWQoZ3JlZXRpbmdJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JlZXRpbmdzL3tncmVldGluZ0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyZWV0aW5nSWQgPT09IHVuZGVmaW5lZCB8fCBncmVldGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncmVldGluZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyZWV0aW5nSWR9JywgZ3JlZXRpbmdJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlcyB0aGUgR3JlZXRpbmcgd2l0aCB0aGUgZ2l2ZW4gR3JlZXRpbmdJZFxuICAqIEBtZW1iZXJPZiBHcmVldGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZ3JlZXRpbmdJZCAtIEdyZWV0aW5nIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUaGUgdXBkYXRlZCBHcmVldGluZ1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9GaWxlXCI6IHtcbiAgICAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgICAgIFwic2l6ZUJ5dGVzXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9UVFNcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJhdWRpb0ZpbGVcIjoge1xuICAgICAgXCJkdXJhdGlvbk1pbGxpc2Vjb25kc1wiOiAwLFxuICAgICAgXCJzaXplQnl0ZXNcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJhdWRpb1RUU1wiOiBcIlwiLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLnB1dEdyZWV0aW5nSWQgPSBmdW5jdGlvbiBwdXRHcmVldGluZ0lkKGdyZWV0aW5nSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyZWV0aW5ncy97Z3JlZXRpbmdJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncmVldGluZ0lkID09PSB1bmRlZmluZWQgfHwgZ3JlZXRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JlZXRpbmdJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncmVldGluZ0lkfScsIGdyZWV0aW5nSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlcyBhIEdyZWV0aW5nIHdpdGggdGhlIGdpdmVuIEdyZWV0aW5nSWRcbiAgKiBAbWVtYmVyT2YgR3JlZXRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyZWV0aW5nSWQgLSBHcmVldGluZyBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwib3duZXJUeXBlXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvRmlsZVwiOiB7XG4gICAgICBcImR1cmF0aW9uTWlsbGlzZWNvbmRzXCI6IDAsXG4gICAgICBcInNpemVCeXRlc1wiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvVFRTXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyZWV0aW5nc0FwaS5wcm90b3R5cGUuZGVsZXRlR3JlZXRpbmdJZCA9IGZ1bmN0aW9uIGRlbGV0ZUdyZWV0aW5nSWQoZ3JlZXRpbmdJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JlZXRpbmdzL3tncmVldGluZ0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyZWV0aW5nSWQgPT09IHVuZGVmaW5lZCB8fCBncmVldGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncmVldGluZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyZWV0aW5nSWR9JywgZ3JlZXRpbmdJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiB0aGUgVXNlcidzIEdyZWV0aW5nc1xuICAqIEBtZW1iZXJPZiBHcmVldGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuR3JlZXRpbmdzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRHcmVldGluZ3MgPSBmdW5jdGlvbiBnZXRVc2VySWRHcmVldGluZ3ModXNlcklkLCBwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vZ3JlZXRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgR3JlZXRpbmcgZm9yIGEgVXNlclxuICAqIEBtZW1iZXJPZiBHcmVldGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIEdyZWV0aW5nIHRvIGNyZWF0ZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9GaWxlXCI6IHtcbiAgICAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgICAgIFwic2l6ZUJ5dGVzXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9UVFNcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJhdWRpb0ZpbGVcIjoge1xuICAgICAgXCJkdXJhdGlvbk1pbGxpc2Vjb25kc1wiOiAwLFxuICAgICAgXCJzaXplQnl0ZXNcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJhdWRpb1RUU1wiOiBcIlwiLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLnBvc3RVc2VySWRHcmVldGluZ3MgPSBmdW5jdGlvbiBwb3N0VXNlcklkR3JlZXRpbmdzKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vZ3JlZXRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiB0aGUgR3JvdXAncyBHcmVldGluZ3NcbiAgKiBAbWVtYmVyT2YgR3JlZXRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWQgLSBHcm91cCBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuR3JlZXRpbmdzQXBpLnByb3RvdHlwZS5nZXRHcm91cElkR3JlZXRpbmdzID0gZnVuY3Rpb24gZ2V0R3JvdXBJZEdyZWV0aW5ncyhncm91cElkLCBwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3tncm91cElkfS9ncmVldGluZ3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlcyBhIEdyZWV0aW5nIGZvciBhIEdyb3VwXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRoZSBHcmVldGluZyB0byBjcmVhdGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvRmlsZVwiOiB7XG4gICAgICBcImR1cmF0aW9uTWlsbGlzZWNvbmRzXCI6IDAsXG4gICAgICBcInNpemVCeXRlc1wiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImF1ZGlvVFRTXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9GaWxlXCI6IHtcbiAgICAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgICAgIFwic2l6ZUJ5dGVzXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYXVkaW9UVFNcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuR3JlZXRpbmdzQXBpLnByb3RvdHlwZS5wb3N0R3JvdXBJZEdyZWV0aW5ncyA9IGZ1bmN0aW9uIHBvc3RHcm91cElkR3JlZXRpbmdzKGdyb3VwSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyb3Vwcy97Z3JvdXBJZH0vZ3JlZXRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZ3JvdXBJZCA9PT0gdW5kZWZpbmVkIHx8IGdyb3VwSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGdyb3VwSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Z3JvdXBJZH0nLCBncm91cElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbWVkaWEgcGxheWJhY2sgVVJJIGZvciB0aGlzIGdyZWV0aW5nXG4gICogQG1lbWJlck9mIEdyZWV0aW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncmVldGluZ0lkIC0gR3JlZXRpbmcgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0SWQgLSBUaGUgZGVzaXJlZCBtZWRpYSBmb3JtYXQuXG4gIFdBVixcbiAgV0VCTSxcbiAgV0FWX1VMQVcsXG4gIE9HR19WT1JCSVMsXG4gIE9HR19PUFVTLFxuICBOT05FLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJtZWRpYUZpbGVVcmlcIjogXCJcIixcbiAgIFwibWVkaWFJbWFnZVVyaVwiOiBcIlwiXG59XG4gICovXG5HcmVldGluZ3NBcGkucHJvdG90eXBlLmdldEdyZWV0aW5nSWRNZWRpYSA9IGZ1bmN0aW9uIGdldEdyZWV0aW5nSWRNZWRpYShncmVldGluZ0lkLCBmb3JtYXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JlZXRpbmdzL3tncmVldGluZ0lkfS9tZWRpYSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyZWV0aW5nSWQgPT09IHVuZGVmaW5lZCB8fCBncmVldGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncmVldGluZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyZWV0aW5nSWR9JywgZ3JlZXRpbmdJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZm9ybWF0SWRcIl0gPSBmb3JtYXRJZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gR3JlZXRpbmdzQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgR3JvdXBzQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLkdyb3Vwc0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBHcm91cHNBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIEdyb3Vwc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcm91cHNBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dyb3Vwc0FwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIGdyb3VwcyB1c2luZyB0aGUgcTY0IHZhbHVlIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBzZWFyY2hcbiAgKiBAbWVtYmVyT2YgR3JvdXBzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHE2NCAtIHE2NFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIGV4cGFuZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cbkdyb3Vwc0FwaS5wcm90b3R5cGUuZ2V0U2VhcmNoID0gZnVuY3Rpb24gZ2V0U2VhcmNoKHE2NCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9ncm91cHMvc2VhcmNoJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocTY0ID09PSB1bmRlZmluZWQgfHwgcTY0ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxNjQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicTY0XCJdID0gcTY0O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTZWFyY2ggZ3JvdXBzXG4gICogQG1lbWJlck9mIEdyb3Vwc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cbkdyb3Vwc0FwaS5wcm90b3R5cGUucG9zdFNlYXJjaCA9IGZ1bmN0aW9uIHBvc3RTZWFyY2goYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBncm91cCBtZW1iZXJzXG4gICogQG1lbWJlck9mIEdyb3Vwc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gQXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcgc29ydCBvcmRlclxuICBhc2NlbmRpbmcsXG4gIGRlc2NlbmRpbmcsXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlLCBjb252ZXJzYXRpb25TdW1tYXJ5LCBvdXRPZk9mZmljZSwgZ2VvbG9jYXRpb24sIHN0YXRpb24sIGF1dGhvcml6YXRpb24sIHByb2ZpbGVTa2lsbHMsIGxvY2F0aW9uc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuR3JvdXBzQXBpLnByb3RvdHlwZS5nZXRHcm91cElkTWVtYmVycyA9IGZ1bmN0aW9uIGdldEdyb3VwSWRNZW1iZXJzKGdyb3VwSWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0T3JkZXIsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3tncm91cElkfS9tZW1iZXJzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZ3JvdXBJZCA9PT0gdW5kZWZpbmVkIHx8IGdyb3VwSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGdyb3VwSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Z3JvdXBJZH0nLCBncm91cElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQWRkIG1lbWJlcnNcbiAgKiBAbWVtYmVyT2YgR3JvdXBzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWQgLSBHcm91cCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQWRkIG1lbWJlcnNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm1lbWJlcklkc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwXG59XG4gICovXG5Hcm91cHNBcGkucHJvdG90eXBlLnBvc3RHcm91cElkTWVtYmVycyA9IGZ1bmN0aW9uIHBvc3RHcm91cElkTWVtYmVycyhncm91cElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9ncm91cHMve2dyb3VwSWR9L21lbWJlcnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlbW92ZSBtZW1iZXJzXG4gICogQG1lbWJlck9mIEdyb3Vwc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gaWRzIC0gQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgdXNlcklkcyB0byByZW1vdmVcbiAgKi9cbkdyb3Vwc0FwaS5wcm90b3R5cGUuZGVsZXRlR3JvdXBJZE1lbWJlcnMgPSBmdW5jdGlvbiBkZWxldGVHcm91cElkTWVtYmVycyhncm91cElkLCBpZHMpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyb3Vwcy97Z3JvdXBJZH0vbWVtYmVycyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyb3VwSWQgPT09IHVuZGVmaW5lZCB8fCBncm91cElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncm91cElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyb3VwSWR9JywgZ3JvdXBJZCk7XG4gICAgaWYoaWRzID09PSB1bmRlZmluZWQgfHwgaWRzID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBpZHMnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaWRzXCJdID0gaWRzO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEZldGNoIGZpZWxkIGNvbmZpZyBmb3IgYW4gZW50aXR5IHR5cGVcbiAgKiBAbWVtYmVyT2YgR3JvdXBzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBGaWVsZCB0eXBlXG4gIHBlcnNvbixcbiAgZ3JvdXAsXG4gIG9yZyxcbiAgZXh0ZXJuYWxDb250YWN0LFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImVudGl0eVR5cGVcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwic2VjdGlvbnNcIjogW10sXG4gICBcInZlcnNpb25cIjogXCJcIixcbiAgIFwic2NoZW1hVmVyc2lvblwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbkdyb3Vwc0FwaS5wcm90b3R5cGUuZ2V0RmllbGRjb25maWcgPSBmdW5jdGlvbiBnZXRGaWVsZGNvbmZpZyh0eXBlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9maWVsZGNvbmZpZyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHR5cGUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB0eXBlJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInR5cGVcIl0gPSB0eXBlO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGdyb3VwIGxpc3RcbiAgKiBAbWVtYmVyT2YgR3JvdXBzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIEFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuR3JvdXBzQXBpLnByb3RvdHlwZS5nZXRHcm91cHMgPSBmdW5jdGlvbiBnZXRHcm91cHMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRPcmRlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgZ3JvdXBcbiAgKiBAbWVtYmVyT2YgR3JvdXBzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBHcm91cFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJydWxlc1Zpc2libGVcIjogdHJ1ZSxcbiAgIFwidmlzaWJpbGl0eVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJpbWFnZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Hcm91cHNBcGkucHJvdG90eXBlLnBvc3RHcm91cHMgPSBmdW5jdGlvbiBwb3N0R3JvdXBzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyb3Vwcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBncm91cFxuICAqIEBtZW1iZXJPZiBHcm91cHNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXBJZCAtIEdyb3VwIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJpbWFnZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Hcm91cHNBcGkucHJvdG90eXBlLmdldEdyb3VwSWQgPSBmdW5jdGlvbiBnZXRHcm91cElkKGdyb3VwSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyb3Vwcy97Z3JvdXBJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBncm91cFxuICAqIEBtZW1iZXJPZiBHcm91cHNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXBJZCAtIEdyb3VwIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBHcm91cFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJydWxlc1Zpc2libGVcIjogdHJ1ZSxcbiAgIFwidmlzaWJpbGl0eVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJpbWFnZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Hcm91cHNBcGkucHJvdG90eXBlLnB1dEdyb3VwSWQgPSBmdW5jdGlvbiBwdXRHcm91cElkKGdyb3VwSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2dyb3Vwcy97Z3JvdXBJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGdyb3VwXG4gICogQG1lbWJlck9mIEdyb3Vwc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gR3JvdXAgSURcbiAgKi9cbkdyb3Vwc0FwaS5wcm90b3R5cGUuZGVsZXRlR3JvdXBJZCA9IGZ1bmN0aW9uIGRlbGV0ZUdyb3VwSWQoZ3JvdXBJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3tncm91cElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGdyb3VwSWQgPT09IHVuZGVmaW5lZCB8fCBncm91cElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBncm91cElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2dyb3VwSWR9JywgZ3JvdXBJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3Vwc0FwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIElkZW50aXR5UHJvdmlkZXJBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uSWRlbnRpdHlQcm92aWRlckFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBJZGVudGl0eVByb3ZpZGVyQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBJZGVudGl0eVByb3ZpZGVyQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IElkZW50aXR5UHJvdmlkZXJBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lkZW50aXR5UHJvdmlkZXJBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBDdXN0b21lciBJbnRlcmFjdGlvbiBDZW50ZXIgKENJQykgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInNzb1RhcmdldFVSSVwiOiBcIlwiLFxuICAgXCJpc3N1ZXJVUklcIjogXCJcIixcbiAgIFwiZGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5nZXRDaWMgPSBmdW5jdGlvbiBnZXRDaWMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9jaWMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUvQ3JlYXRlIEN1c3RvbWVyIEludGVyYWN0aW9uIENlbnRlciAoQ0lDKSBJZGVudGl0eSBQcm92aWRlclxuICAqIEBtZW1iZXJPZiBJZGVudGl0eVByb3ZpZGVyQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQcm92aWRlclxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjZXJ0aWZpY2F0ZVwiOiBcIlwiLFxuICAgXCJzc29UYXJnZXRVUklcIjogXCJcIixcbiAgIFwiaXNzdWVyVVJJXCI6IFwiXCIsXG4gICBcImRpc2FibGVkXCI6IHRydWVcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLnB1dENpYyA9IGZ1bmN0aW9uIHB1dENpYyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9jaWMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBDdXN0b21lciBJbnRlcmFjdGlvbiBDZW50ZXIgKENJQykgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqL1xuSWRlbnRpdHlQcm92aWRlckFwaS5wcm90b3R5cGUuZGVsZXRlQ2ljID0gZnVuY3Rpb24gZGVsZXRlQ2ljKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMvY2ljJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IFB1cmVDbG91ZCBJZGVudGl0eSBQcm92aWRlclxuICAqIEBtZW1iZXJPZiBJZGVudGl0eVByb3ZpZGVyQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5nZXRQdXJlY2xvdWQgPSBmdW5jdGlvbiBnZXRQdXJlY2xvdWQoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9wdXJlY2xvdWQnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUvQ3JlYXRlIFB1cmVDbG91ZCBJZGVudGl0eSBQcm92aWRlclxuICAqIEBtZW1iZXJPZiBJZGVudGl0eVByb3ZpZGVyQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQcm92aWRlclxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkaXNhYmxlZFwiOiB0cnVlXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5wdXRQdXJlY2xvdWQgPSBmdW5jdGlvbiBwdXRQdXJlY2xvdWQoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMvcHVyZWNsb3VkJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgUHVyZUNsb3VkIElkZW50aXR5IFByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmRlbGV0ZVB1cmVjbG91ZCA9IGZ1bmN0aW9uIGRlbGV0ZVB1cmVjbG91ZCgpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL3B1cmVjbG91ZCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBTYWxlc2ZvcmNlIElkZW50aXR5IFByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjZXJ0aWZpY2F0ZVwiOiBcIlwiLFxuICAgXCJzc29UYXJnZXRVUklcIjogXCJcIixcbiAgIFwiaXNzdWVyVVJJXCI6IFwiXCIsXG4gICBcImRpc2FibGVkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuSWRlbnRpdHlQcm92aWRlckFwaS5wcm90b3R5cGUuZ2V0U2FsZXNmb3JjZSA9IGZ1bmN0aW9uIGdldFNhbGVzZm9yY2UoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9zYWxlc2ZvcmNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlL0NyZWF0ZSBTYWxlc2ZvcmNlIElkZW50aXR5IFByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFByb3ZpZGVyXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInNzb1RhcmdldFVSSVwiOiBcIlwiLFxuICAgXCJpc3N1ZXJVUklcIjogXCJcIixcbiAgIFwiZGlzYWJsZWRcIjogdHJ1ZVxufVxuICAqL1xuSWRlbnRpdHlQcm92aWRlckFwaS5wcm90b3R5cGUucHV0U2FsZXNmb3JjZSA9IGZ1bmN0aW9uIHB1dFNhbGVzZm9yY2UoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMvc2FsZXNmb3JjZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIFNhbGVzZm9yY2UgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqL1xuSWRlbnRpdHlQcm92aWRlckFwaS5wcm90b3R5cGUuZGVsZXRlU2FsZXNmb3JjZSA9IGZ1bmN0aW9uIGRlbGV0ZVNhbGVzZm9yY2UoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9zYWxlc2ZvcmNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVGhlIGxpc3Qgb2YgaWRlbnRpdHkgcHJvdmlkZXJzXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmdldElkZW50aXR5cHJvdmlkZXJzID0gZnVuY3Rpb24gZ2V0SWRlbnRpdHlwcm92aWRlcnMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBBREZTIElkZW50aXR5IFByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJyZWx5aW5nUGFydHlJZGVudGlmaWVyXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInNzb1RhcmdldFVSSVwiOiBcIlwiLFxuICAgXCJpc3N1ZXJVUklcIjogXCJcIixcbiAgIFwiZGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5nZXRBZGZzID0gZnVuY3Rpb24gZ2V0QWRmcygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL2FkZnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUvQ3JlYXRlIEFERlMgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUHJvdmlkZXJcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicmVseWluZ1BhcnR5SWRlbnRpZmllclwiOiBcIlwiLFxuICAgXCJjZXJ0aWZpY2F0ZVwiOiBcIlwiLFxuICAgXCJzc29UYXJnZXRVUklcIjogXCJcIixcbiAgIFwiaXNzdWVyVVJJXCI6IFwiXCIsXG4gICBcImRpc2FibGVkXCI6IHRydWVcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLnB1dEFkZnMgPSBmdW5jdGlvbiBwdXRBZGZzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL2FkZnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBBREZTIElkZW50aXR5IFByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmRlbGV0ZUFkZnMgPSBmdW5jdGlvbiBkZWxldGVBZGZzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMvYWRmcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBPbmVMb2dpbiBJZGVudGl0eSBQcm92aWRlclxuICAqIEBtZW1iZXJPZiBJZGVudGl0eVByb3ZpZGVyQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2VydGlmaWNhdGVcIjogXCJcIixcbiAgIFwic3NvVGFyZ2V0VVJJXCI6IFwiXCIsXG4gICBcImlzc3VlclVSSVwiOiBcIlwiLFxuICAgXCJkaXNhYmxlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmdldE9uZWxvZ2luID0gZnVuY3Rpb24gZ2V0T25lbG9naW4oKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9vbmVsb2dpbic7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZS9DcmVhdGUgT25lTG9naW4gSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUHJvdmlkZXJcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2VydGlmaWNhdGVcIjogXCJcIixcbiAgIFwic3NvVGFyZ2V0VVJJXCI6IFwiXCIsXG4gICBcImlzc3VlclVSSVwiOiBcIlwiLFxuICAgXCJkaXNhYmxlZFwiOiB0cnVlXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5wdXRPbmVsb2dpbiA9IGZ1bmN0aW9uIHB1dE9uZWxvZ2luKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL29uZWxvZ2luJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgT25lTG9naW4gSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqL1xuSWRlbnRpdHlQcm92aWRlckFwaS5wcm90b3R5cGUuZGVsZXRlT25lbG9naW4gPSBmdW5jdGlvbiBkZWxldGVPbmVsb2dpbigpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL29uZWxvZ2luJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGFuIGlkZW50aXR5IHByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkaXNhYmxlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmdldFByb3ZpZGVySWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcklkKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMve3Byb3ZpZGVySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGFuIGlkZW50aXR5IHByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFByb3ZpZGVyXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRpc2FibGVkXCI6IHRydWVcbn1cbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVySWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcklkKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL3twcm92aWRlcklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGFuIGlkZW50aXR5IHByb3ZpZGVyXG4gICogQG1lbWJlck9mIElkZW50aXR5UHJvdmlkZXJBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cbklkZW50aXR5UHJvdmlkZXJBcGkucHJvdG90eXBlLmRlbGV0ZVByb3ZpZGVySWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcklkKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvaWRlbnRpdHlwcm92aWRlcnMve3Byb3ZpZGVySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IE9rdGEgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInNzb1RhcmdldFVSSVwiOiBcIlwiLFxuICAgXCJpc3N1ZXJVUklcIjogXCJcIixcbiAgIFwiZGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5nZXRPa3RhID0gZnVuY3Rpb24gZ2V0T2t0YSgpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL29rdGEnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUvQ3JlYXRlIE9rdGEgSWRlbnRpdHkgUHJvdmlkZXJcbiAgKiBAbWVtYmVyT2YgSWRlbnRpdHlQcm92aWRlckFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUHJvdmlkZXJcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2VydGlmaWNhdGVcIjogXCJcIixcbiAgIFwic3NvVGFyZ2V0VVJJXCI6IFwiXCIsXG4gICBcImlzc3VlclVSSVwiOiBcIlwiLFxuICAgXCJkaXNhYmxlZFwiOiB0cnVlXG59XG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5wdXRPa3RhID0gZnVuY3Rpb24gcHV0T2t0YShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9pZGVudGl0eXByb3ZpZGVycy9va3RhJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgT2t0YSBJZGVudGl0eSBQcm92aWRlclxuICAqIEBtZW1iZXJPZiBJZGVudGl0eVByb3ZpZGVyQXBpXG4gICogQGluc3RhbmNlXG4gICovXG5JZGVudGl0eVByb3ZpZGVyQXBpLnByb3RvdHlwZS5kZWxldGVPa3RhID0gZnVuY3Rpb24gZGVsZXRlT2t0YSgpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2lkZW50aXR5cHJvdmlkZXJzL29rdGEnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gSWRlbnRpdHlQcm92aWRlckFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIExhbmd1YWdlc0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5MYW5ndWFnZXNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gTGFuZ3VhZ2VzQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBMYW5ndWFnZXNBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMYW5ndWFnZXNBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBsYW5ndWFnZVxuICAqIEBtZW1iZXJPZiBMYW5ndWFnZXNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VJZCAtIExhbmd1YWdlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5MYW5ndWFnZXNBcGkucHJvdG90eXBlLmdldExhbmd1YWdlc0xhbmd1YWdlSWQgPSBmdW5jdGlvbiBnZXRMYW5ndWFnZXNMYW5ndWFnZUlkKGxhbmd1YWdlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvbGFuZ3VhZ2VzL3tsYW5ndWFnZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGxhbmd1YWdlSWQgPT09IHVuZGVmaW5lZCB8fCBsYW5ndWFnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBsYW5ndWFnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2xhbmd1YWdlSWR9JywgbGFuZ3VhZ2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIExhbmd1YWdlXG4gICogQG1lbWJlck9mIExhbmd1YWdlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZUlkIC0gTGFuZ3VhZ2UgSURcbiAgKi9cbkxhbmd1YWdlc0FwaS5wcm90b3R5cGUuZGVsZXRlTGFuZ3VhZ2VzTGFuZ3VhZ2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZUxhbmd1YWdlc0xhbmd1YWdlSWQobGFuZ3VhZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9sYW5ndWFnZXMve2xhbmd1YWdlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGFuZ3VhZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGxhbmd1YWdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxhbmd1YWdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bGFuZ3VhZ2VJZH0nLCBsYW5ndWFnZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYWxsIGF2YWlsYWJsZSBsYW5ndWFnZXMgZm9yIHRyYW5zbGF0aW9uXG4gICogQG1lbWJlck9mIExhbmd1YWdlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJvcmdTcGVjaWZpY1wiOiBbXSxcbiAgIFwiYnVpbHRpblwiOiBbXVxufVxuICAqL1xuTGFuZ3VhZ2VzQXBpLnByb3RvdHlwZS5nZXRUcmFuc2xhdGlvbnMgPSBmdW5jdGlvbiBnZXRUcmFuc2xhdGlvbnMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9sYW5ndWFnZXMvdHJhbnNsYXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBidWlsdGluIHRyYW5zbGF0aW9uIGZvciBhIGxhbmd1YWdlXG4gICogQG1lbWJlck9mIExhbmd1YWdlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIFRoZSBsYW5ndWFnZSBvZiB0aGUgYnVpbHRpbiB0cmFuc2xhdGlvbiB0byByZXRyaWV2ZVxuICAqL1xuTGFuZ3VhZ2VzQXBpLnByb3RvdHlwZS5nZXRUcmFuc2xhdGlvbnNCdWlsdGluID0gZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb25zQnVpbHRpbihsYW5ndWFnZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbGFuZ3VhZ2VzL3RyYW5zbGF0aW9ucy9idWlsdGluJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCB8fCBsYW5ndWFnZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGFuZ3VhZ2UnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wibGFuZ3VhZ2VcIl0gPSBsYW5ndWFnZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZWZmZWN0aXZlIHRyYW5zbGF0aW9uIGZvciBhbiBvcmdhbml6YXRpb24gYnkgbGFuZ3VhZ2VcbiAgKiBAbWVtYmVyT2YgTGFuZ3VhZ2VzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gVGhlIGxhbmd1YWdlIG9mIHRoZSB0cmFuc2xhdGlvbiB0byByZXRyaWV2ZSBmb3IgdGhlIG9yZ2FuaXphdGlvblxuICAqL1xuTGFuZ3VhZ2VzQXBpLnByb3RvdHlwZS5nZXRUcmFuc2xhdGlvbnNPcmdhbml6YXRpb24gPSBmdW5jdGlvbiBnZXRUcmFuc2xhdGlvbnNPcmdhbml6YXRpb24obGFuZ3VhZ2Upe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xhbmd1YWdlcy90cmFuc2xhdGlvbnMvb3JnYW5pemF0aW9uJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCB8fCBsYW5ndWFnZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGFuZ3VhZ2UnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wibGFuZ3VhZ2VcIl0gPSBsYW5ndWFnZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZWZmZWN0aXZlIGxhbmd1YWdlIHRyYW5zbGF0aW9uIGZvciBhIHVzZXJcbiAgKiBAbWVtYmVyT2YgTGFuZ3VhZ2VzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFRoZSB1c2VyIGlkXG4gICovXG5MYW5ndWFnZXNBcGkucHJvdG90eXBlLmdldFRyYW5zbGF0aW9uc1VzZXJzVXNlcklkID0gZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb25zVXNlcnNVc2VySWQodXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9sYW5ndWFnZXMvdHJhbnNsYXRpb25zL3VzZXJzL3t1c2VySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBsYW5ndWFnZXMuIChEZXByZWNhdGVkKVxuICAqIEBkZXNjcmlwdGlvbiBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWQuIEl0IGhhcyBiZWVuIG1vdmVkIHRvIC9yb3V0aW5nL2xhbmd1YWdlc1xuICAqIEBtZW1iZXJPZiBMYW5ndWFnZXNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gQXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcgc29ydCBvcmRlclxuICBhc2NlbmRpbmcsXG4gIGRlc2NlbmRpbmcsXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5MYW5ndWFnZXNBcGkucHJvdG90eXBlLmdldExhbmd1YWdlcyA9IGZ1bmN0aW9uIGdldExhbmd1YWdlcyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydE9yZGVyLCBuYW1lKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9sYW5ndWFnZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgTGFuZ3VhZ2UgKERlcHJlY2F0ZWQpXG4gICogQGRlc2NyaXB0aW9uIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZC4gSXQgaGFzIGJlZW4gbW92ZWQgdG8gL3JvdXRpbmcvbGFuZ3VhZ2VzXG4gICogQG1lbWJlck9mIExhbmd1YWdlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gTGFuZ3VhZ2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuTGFuZ3VhZ2VzQXBpLnByb3RvdHlwZS5wb3N0TGFuZ3VhZ2VzID0gZnVuY3Rpb24gcG9zdExhbmd1YWdlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9sYW5ndWFnZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbGFuZ3VhZ2UgKERlcHJlY2F0ZWQpXG4gICogQGRlc2NyaXB0aW9uIFRoaXMgZW5kcG9pbnQgaXMgZGVwcmVjYXRlZC4gSXQgaGFzIGJlZW4gbW92ZWQgdG8gL3JvdXRpbmcvbGFuZ3VhZ2VzL3tsYW5ndWFnZUlkfVxuICAqIEBtZW1iZXJPZiBMYW5ndWFnZXNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VJZCAtIExhbmd1YWdlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5MYW5ndWFnZXNBcGkucHJvdG90eXBlLmdldExhbmd1YWdlSWQgPSBmdW5jdGlvbiBnZXRMYW5ndWFnZUlkKGxhbmd1YWdlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xhbmd1YWdlcy97bGFuZ3VhZ2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsYW5ndWFnZUlkID09PSB1bmRlZmluZWQgfHwgbGFuZ3VhZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGFuZ3VhZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsYW5ndWFnZUlkfScsIGxhbmd1YWdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBMYW5ndWFnZSAoRGVwcmVjYXRlZClcbiAgKiBAZGVzY3JpcHRpb24gVGhpcyBlbmRwb2ludCBpcyBkZXByZWNhdGVkLiBJdCBoYXMgYmVlbiBtb3ZlZCB0byAvcm91dGluZy9sYW5ndWFnZXMve2xhbmd1YWdlSWR9XG4gICogQG1lbWJlck9mIExhbmd1YWdlc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZUlkIC0gTGFuZ3VhZ2UgSURcbiAgKi9cbkxhbmd1YWdlc0FwaS5wcm90b3R5cGUuZGVsZXRlTGFuZ3VhZ2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZUxhbmd1YWdlSWQobGFuZ3VhZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbGFuZ3VhZ2VzL3tsYW5ndWFnZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGxhbmd1YWdlSWQgPT09IHVuZGVmaW5lZCB8fCBsYW5ndWFnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBsYW5ndWFnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2xhbmd1YWdlSWR9JywgbGFuZ3VhZ2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IExhbmd1YWdlc0FwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIExvY2F0aW9uc0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5Mb2NhdGlvbnNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gTG9jYXRpb25zQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBMb2NhdGlvbnNBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTG9jYXRpb25zQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMb2NhdGlvbnNBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgYWxsIGxvY2F0aW9ucy5cbiAgKiBAbWVtYmVyT2YgTG9jYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgYXNjLFxuICBkZXNjLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJhZGRyZXNzXCI6IHtcbiAgIFwiY2l0eVwiOiBcIlwiLFxuICAgXCJjb3VudHJ5XCI6IFwiXCIsXG4gICBcImNvdW50cnlOYW1lXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInN0cmVldDFcIjogXCJcIixcbiAgIFwic3RyZWV0MlwiOiBcIlwiLFxuICAgXCJ6aXBjb2RlXCI6IFwiXCJcbiAgfSxcbiAgXCJhZGRyZXNzVmVyaWZpZWRcIjogdHJ1ZSxcbiAgXCJlbWVyZ2VuY3lOdW1iZXJcIjoge1xuICAgXCJlMTY0XCI6IFwiXCIsXG4gICBcIm51bWJlclwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCJcbiAgfSxcbiAgXCJzdGF0ZVwiOiBcIlwiLFxuICBcInZlcnNpb25cIjogMCxcbiAgXCJwYXRoXCI6IFtdLFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cbkxvY2F0aW9uc0FwaS5wcm90b3R5cGUuZ2V0TG9jYXRpb25zID0gZnVuY3Rpb24gZ2V0TG9jYXRpb25zKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xvY2F0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCBsb2NhdGlvbnMgdXNpbmcgdGhlIHE2NCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgc2VhcmNoXG4gICogQG1lbWJlck9mIExvY2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxNjQgLSBxNjRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBleHBhbmRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5Mb2NhdGlvbnNBcGkucHJvdG90eXBlLmdldFNlYXJjaCA9IGZ1bmN0aW9uIGdldFNlYXJjaChxNjQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbG9jYXRpb25zL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHE2NCA9PT0gdW5kZWZpbmVkIHx8IHE2NCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcTY0Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInE2NFwiXSA9IHE2NDtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIGxvY2F0aW9uc1xuICAqIEBtZW1iZXJPZiBMb2NhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNlYXJjaCByZXF1ZXN0IG9wdGlvbnNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNvcnRPcmRlclwiOiBcIlwiLFxuICAgXCJzb3J0QnlcIjogXCJcIixcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJyZXR1cm5GaWVsZHNcIjogW10sXG4gICBcImV4cGFuZFwiOiBbXSxcbiAgIFwicXVlcnlcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5Mb2NhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RTZWFyY2ggPSBmdW5jdGlvbiBwb3N0U2VhcmNoKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xvY2F0aW9ucy9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgTG9jYXRpb24gYnkgSUQuXG4gICogQG1lbWJlck9mIExvY2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbklkIC0gTG9jYXRpb24gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJhZGRyZXNzXCI6IHtcbiAgICAgIFwiY2l0eVwiOiBcIlwiLFxuICAgICAgXCJjb3VudHJ5XCI6IFwiXCIsXG4gICAgICBcImNvdW50cnlOYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInN0cmVldDFcIjogXCJcIixcbiAgICAgIFwic3RyZWV0MlwiOiBcIlwiLFxuICAgICAgXCJ6aXBjb2RlXCI6IFwiXCJcbiAgIH0sXG4gICBcImFkZHJlc3NWZXJpZmllZFwiOiB0cnVlLFxuICAgXCJlbWVyZ2VuY3lOdW1iZXJcIjoge1xuICAgICAgXCJlMTY0XCI6IFwiXCIsXG4gICAgICBcIm51bWJlclwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCJcbiAgIH0sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwicGF0aFwiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Mb2NhdGlvbnNBcGkucHJvdG90eXBlLmdldExvY2F0aW9uSWQgPSBmdW5jdGlvbiBnZXRMb2NhdGlvbklkKGxvY2F0aW9uSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xvY2F0aW9ucy97bG9jYXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsb2NhdGlvbklkID09PSB1bmRlZmluZWQgfHwgbG9jYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbG9jYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsb2NhdGlvbklkfScsIGxvY2F0aW9uSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBMb2NhdGlvbnNBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBOb3RpZmljYXRpb25zQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLk5vdGlmaWNhdGlvbnNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gTm90aWZpY2F0aW9uc0FwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgTm90aWZpY2F0aW9uc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb25zQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3RpZmljYXRpb25zQXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBUaGUgbGlzdCBvZiBleGlzdGluZyBjaGFubmVsc1xuICAqIEBtZW1iZXJPZiBOb3RpZmljYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Ob3RpZmljYXRpb25zQXBpLnByb3RvdHlwZS5nZXRDaGFubmVscyA9IGZ1bmN0aW9uIGdldENoYW5uZWxzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbm90aWZpY2F0aW9ucy9jaGFubmVscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIG5ldyBjaGFubmVsXG4gICogQGRlc2NyaXB0aW9uIFRoZXJlIGlzIGEgbGltaXQgb2YgMTAgY2hhbm5lbHMuIENyZWF0aW5nIGFuIDExdGggY2hhbm5lbCB3aWxsIHJlbW92ZSB0aGUgY2hhbm5lbCB3aXRoIG9sZGVzdCBsYXN0IHVzZWQgZGF0ZS5cbiAgKiBAbWVtYmVyT2YgTm90aWZpY2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJjb25uZWN0VXJpXCI6IFwiXCJcbn1cbiAgKi9cbk5vdGlmaWNhdGlvbnNBcGkucHJvdG90eXBlLnBvc3RDaGFubmVscyA9IGZ1bmN0aW9uIHBvc3RDaGFubmVscygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL25vdGlmaWNhdGlvbnMvY2hhbm5lbHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVGhlIGxpc3Qgb2YgYWxsIHN1YnNjcmlwdGlvbnMgZm9yIHRoaXMgY2hhbm5lbFxuICAqIEBtZW1iZXJPZiBOb3RpZmljYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNoYW5uZWxJZCAtIENoYW5uZWwgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW11cbn1cbiAgKi9cbk5vdGlmaWNhdGlvbnNBcGkucHJvdG90eXBlLmdldENoYW5uZWxzQ2hhbm5lbElkU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIGdldENoYW5uZWxzQ2hhbm5lbElkU3Vic2NyaXB0aW9ucyhjaGFubmVsSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL25vdGlmaWNhdGlvbnMvY2hhbm5lbHMve2NoYW5uZWxJZH0vc3Vic2NyaXB0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYW5uZWxJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYW5uZWxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhbm5lbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYW5uZWxJZH0nLCBjaGFubmVsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEFkZCBhIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyB0byB0aGUgZXhpc3RpbmcgbGlzdCBvZiBzdWJzY3JpcHRpb25zXG4gICogQG1lbWJlck9mIE5vdGlmaWNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2hhbm5lbElkIC0gQ2hhbm5lbCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVG9waWNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCJcbiB9XG5dXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdXG59XG4gICovXG5Ob3RpZmljYXRpb25zQXBpLnByb3RvdHlwZS5wb3N0Q2hhbm5lbHNDaGFubmVsSWRTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24gcG9zdENoYW5uZWxzQ2hhbm5lbElkU3Vic2NyaXB0aW9ucyhjaGFubmVsSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL25vdGlmaWNhdGlvbnMvY2hhbm5lbHMve2NoYW5uZWxJZH0vc3Vic2NyaXB0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYW5uZWxJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYW5uZWxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhbm5lbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYW5uZWxJZH0nLCBjaGFubmVsSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlcGxhY2UgdGhlIGN1cnJlbnQgbGlzdCBvZiBzdWJzY3JpcHRpb25zIHdpdGggYSBuZXcgbGlzdC5cbiAgKiBAbWVtYmVyT2YgTm90aWZpY2F0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFubmVsSWQgLSBDaGFubmVsIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUb3BpY1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIlxuIH1cbl1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW11cbn1cbiAgKi9cbk5vdGlmaWNhdGlvbnNBcGkucHJvdG90eXBlLnB1dENoYW5uZWxzQ2hhbm5lbElkU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIHB1dENoYW5uZWxzQ2hhbm5lbElkU3Vic2NyaXB0aW9ucyhjaGFubmVsSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL25vdGlmaWNhdGlvbnMvY2hhbm5lbHMve2NoYW5uZWxJZH0vc3Vic2NyaXB0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNoYW5uZWxJZCA9PT0gdW5kZWZpbmVkIHx8IGNoYW5uZWxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2hhbm5lbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NoYW5uZWxJZH0nLCBjaGFubmVsSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVtb3ZlIGFsbCBzdWJzY3JpcHRpb25zXG4gICogQG1lbWJlck9mIE5vdGlmaWNhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2hhbm5lbElkIC0gQ2hhbm5lbCBJRFxuICAqL1xuTm90aWZpY2F0aW9uc0FwaS5wcm90b3R5cGUuZGVsZXRlQ2hhbm5lbHNDaGFubmVsSWRTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24gZGVsZXRlQ2hhbm5lbHNDaGFubmVsSWRTdWJzY3JpcHRpb25zKGNoYW5uZWxJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbm90aWZpY2F0aW9ucy9jaGFubmVscy97Y2hhbm5lbElkfS9zdWJzY3JpcHRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2hhbm5lbElkID09PSB1bmRlZmluZWQgfHwgY2hhbm5lbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjaGFubmVsSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2hhbm5lbElkfScsIGNoYW5uZWxJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGF2YWlsYWJsZSBub3RpZmljYXRpb24gdG9waWNzLlxuICAqIEBtZW1iZXJPZiBOb3RpZmljYXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IGRlc2NyaXB0aW9uLCByZXF1aXJlc1Blcm1pc3Npb25zLCBzY2hlbWFcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW11cbn1cbiAgKi9cbk5vdGlmaWNhdGlvbnNBcGkucHJvdG90eXBlLmdldEF2YWlsYWJsZXRvcGljcyA9IGZ1bmN0aW9uIGdldEF2YWlsYWJsZXRvcGljcyhleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL25vdGlmaWNhdGlvbnMvYXZhaWxhYmxldG9waWNzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBOb3RpZmljYXRpb25zQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgT0F1dGhBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uT0F1dGhBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gT0F1dGhBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIE9BdXRoQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IE9BdXRoQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPQXV0aEFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IE9BdXRoIENsaWVudFxuICAqIEBtZW1iZXJPZiBPQXV0aEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjbGllbnRJZCAtIENsaWVudCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFjY2Vzc1Rva2VuVmFsaWRpdHlTZWNvbmRzXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInJlZ2lzdGVyZWRSZWRpcmVjdFVyaVwiOiBbXSxcbiAgIFwic2VjcmV0XCI6IFwiXCIsXG4gICBcInJvbGVJZHNcIjogW10sXG4gICBcImF1dGhvcml6ZWRHcmFudFR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PQXV0aEFwaS5wcm90b3R5cGUuZ2V0Q2xpZW50c0NsaWVudElkID0gZnVuY3Rpb24gZ2V0Q2xpZW50c0NsaWVudElkKGNsaWVudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vYXV0aC9jbGllbnRzL3tjbGllbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjbGllbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGNsaWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjbGllbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjbGllbnRJZH0nLCBjbGllbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIE9BdXRoIENsaWVudFxuICAqIEBtZW1iZXJPZiBPQXV0aEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjbGllbnRJZCAtIENsaWVudCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ2xpZW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFjY2Vzc1Rva2VuVmFsaWRpdHlTZWNvbmRzXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInJlZ2lzdGVyZWRSZWRpcmVjdFVyaVwiOiBbXSxcbiAgIFwic2VjcmV0XCI6IFwiXCIsXG4gICBcInJvbGVJZHNcIjogW10sXG4gICBcImF1dGhvcml6ZWRHcmFudFR5cGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFjY2Vzc1Rva2VuVmFsaWRpdHlTZWNvbmRzXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInJlZ2lzdGVyZWRSZWRpcmVjdFVyaVwiOiBbXSxcbiAgIFwic2VjcmV0XCI6IFwiXCIsXG4gICBcInJvbGVJZHNcIjogW10sXG4gICBcImF1dGhvcml6ZWRHcmFudFR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PQXV0aEFwaS5wcm90b3R5cGUucHV0Q2xpZW50c0NsaWVudElkID0gZnVuY3Rpb24gcHV0Q2xpZW50c0NsaWVudElkKGNsaWVudElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vYXV0aC9jbGllbnRzL3tjbGllbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjbGllbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGNsaWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjbGllbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjbGllbnRJZH0nLCBjbGllbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgT0F1dGggQ2xpZW50XG4gICogQG1lbWJlck9mIE9BdXRoQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkIC0gQ2xpZW50IElEXG4gICovXG5PQXV0aEFwaS5wcm90b3R5cGUuZGVsZXRlQ2xpZW50c0NsaWVudElkID0gZnVuY3Rpb24gZGVsZXRlQ2xpZW50c0NsaWVudElkKGNsaWVudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vYXV0aC9jbGllbnRzL3tjbGllbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjbGllbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGNsaWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjbGllbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjbGllbnRJZH0nLCBjbGllbnRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVnZW5lcmF0ZSBDbGllbnQgU2VjcmV0XG4gICogQGRlc2NyaXB0aW9uIFRoaXMgb3BlcmF0aW9uIHdpbGwgc2V0IHRoZSBjbGllbnQgc2VjcmV0IHRvIGEgcmFuZG9tbHkgZ2VuZXJhdGVkIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSB2YWx1ZS4gQWxsIGNsaWVudHMgbXVzdCBiZSB1cGRhdGVkIHdpdGggdGhlIG5ldyBzZWNyZXQuIFRoaXMgb3BlcmF0aW9uIHNob3VsZCBiZSB1c2VkIHdpdGggY2F1dGlvbi5cbiAgKiBAbWVtYmVyT2YgT0F1dGhBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2xpZW50SWQgLSBDbGllbnQgSURcbiAgKi9cbk9BdXRoQXBpLnByb3RvdHlwZS5wb3N0Q2xpZW50c0NsaWVudElkU2VjcmV0ID0gZnVuY3Rpb24gcG9zdENsaWVudHNDbGllbnRJZFNlY3JldChjbGllbnRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb2F1dGgvY2xpZW50cy97Y2xpZW50SWR9L3NlY3JldCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNsaWVudElkID09PSB1bmRlZmluZWQgfHwgY2xpZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNsaWVudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NsaWVudElkfScsIGNsaWVudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVGhlIGxpc3Qgb2YgT0F1dGggY2xpZW50c1xuICAqIEBtZW1iZXJPZiBPQXV0aEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuT0F1dGhBcGkucHJvdG90eXBlLmdldENsaWVudHMgPSBmdW5jdGlvbiBnZXRDbGllbnRzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb2F1dGgvY2xpZW50cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBPQXV0aCBjbGllbnRcbiAgKiBAZGVzY3JpcHRpb24gVGhlIE9BdXRoIEdyYW50L0NsaWVudCBpcyByZXF1aXJlZCBpbiBvcmRlciB0byBjcmVhdGUgYW4gYXV0aGVudGljYXRpb24gdG9rZW4gYW5kIGdhaW4gYWNjZXNzIHRvIFB1cmVDbG91ZC4gXG5UaGUgcHJlZmVycmVkIGF1dGhvcml6ZWRHcmFudFR5cGVzIGlzICdDT0RFJyB3aGljaCByZXF1aXJlcyBhcHBsaWNhdGlvbnMgdG8gc2VuZCBhIGNsaWVudCBJRCBhbmQgY2xpZW50IHNlY3JldC4gVGhpcyBpcyB0eXBpY2FsbHkgYSB3ZWIgc2VydmVyLiBcbklmIHRoZSBjbGllbnQgaXMgdW5hYmxlIHRvIHNlY3VyZSB0aGUgY2xpZW50IHNlY3JldCB0aGVuIHRoZSAnVE9LRU4nIGdyYW50IHR5cGUgYWthIElNUExJQ0lUIHNob3VsZCBiZSB1c2VkLiBUaGlzIGlzIHdvdWxkIGJlIGZvciBicm93c2VyIG9yIG1vYmlsZSBhcHBzLiBcbklmIGEgY2xpZW50IGlzIHRvIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgY29udGV4dCBvZiBhIHVzZXIgdGhlbiB0aGUgJ0NMSUVOVC1DUkVERU5USUFMUycgZ3JhbnQgbWF5IGJlIHVzZWQuIEluIHRoaXMgY2FzZSB0aGUgY2xpZW50IG11c3QgYmUgZ3JhbnRlZCByb2xlcyBcbnZpYSB0aGUgJ3JvbGVJZHMnIGZpZWxkLlxuICAqIEBtZW1iZXJPZiBPQXV0aEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ2xpZW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFjY2Vzc1Rva2VuVmFsaWRpdHlTZWNvbmRzXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInJlZ2lzdGVyZWRSZWRpcmVjdFVyaVwiOiBbXSxcbiAgIFwic2VjcmV0XCI6IFwiXCIsXG4gICBcInJvbGVJZHNcIjogW10sXG4gICBcImF1dGhvcml6ZWRHcmFudFR5cGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImFjY2Vzc1Rva2VuVmFsaWRpdHlTZWNvbmRzXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInJlZ2lzdGVyZWRSZWRpcmVjdFVyaVwiOiBbXSxcbiAgIFwic2VjcmV0XCI6IFwiXCIsXG4gICBcInJvbGVJZHNcIjogW10sXG4gICBcImF1dGhvcml6ZWRHcmFudFR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PQXV0aEFwaS5wcm90b3R5cGUucG9zdENsaWVudHMgPSBmdW5jdGlvbiBwb3N0Q2xpZW50cyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vYXV0aC9jbGllbnRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IE9BdXRoQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgT3JnYW5pemF0aW9uQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLk9yZ2FuaXphdGlvbkFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBPcmdhbml6YXRpb25BcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIE9yZ2FuaXphdGlvbkFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPcmdhbml6YXRpb25BcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09yZ2FuaXphdGlvbkFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIG9yZ2FuaXphdGlvblxuICAqIEBtZW1iZXJPZiBPcmdhbml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEZlYXR1cmUgdG8gdXBkYXRlLlxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidmFsdWVcIjogdHJ1ZSxcbiAgIFwia2V5XCI6IFwiXCJcbn1cbiAgKi9cbk9yZ2FuaXphdGlvbkFwaS5wcm90b3R5cGUucGF0Y2hGZWF0dXJlcyA9IGZ1bmN0aW9uIHBhdGNoRmVhdHVyZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3JnYW5pemF0aW9ucy9mZWF0dXJlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBGZXRjaCBmaWVsZCBjb25maWcgZm9yIGFuIGVudGl0eSB0eXBlXG4gICogQG1lbWJlck9mIE9yZ2FuaXphdGlvbkFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gRmllbGQgdHlwZVxuICBwZXJzb24sXG4gIGdyb3VwLFxuICBvcmcsXG4gIGV4dGVybmFsQ29udGFjdCxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJlbnRpdHlUeXBlXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInNlY3Rpb25zXCI6IFtdLFxuICAgXCJ2ZXJzaW9uXCI6IFwiXCIsXG4gICBcInNjaGVtYVZlcnNpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Pcmdhbml6YXRpb25BcGkucHJvdG90eXBlLmdldEZpZWxkY29uZmlnID0gZnVuY3Rpb24gZ2V0RmllbGRjb25maWcodHlwZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZmllbGRjb25maWcnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih0eXBlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdHlwZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJ0eXBlXCJdID0gdHlwZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgb3JnYW5pemF0aW9uLlxuICAqIEBtZW1iZXJPZiBPcmdhbml6YXRpb25BcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0aGlyZFBhcnR5T3JnSWRcIjogXCJcIixcbiAgIFwidGhpcmRQYXJ0eU9yZ05hbWVcIjogXCJcIixcbiAgIFwidGhpcmRQYXJ0eVVSSVwiOiBcIlwiLFxuICAgXCJkb21haW5cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJkZWZhdWx0U2l0ZUlkXCI6IFwiXCIsXG4gICBcImRlbGV0YWJsZVwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZlYXR1cmVzXCI6IHt9XG59XG4gICovXG5Pcmdhbml6YXRpb25BcGkucHJvdG90eXBlLmdldE1lID0gZnVuY3Rpb24gZ2V0TWUoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vcmdhbml6YXRpb25zL21lJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IE9yZ2FuaXphdGlvbkFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIE91dGJvdW5kQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLk91dGJvdW5kQXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIE91dGJvdW5kQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBPdXRib3VuZEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPdXRib3VuZEFwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT3V0Ym91bmRBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGEgbGlzdCBvZiBjb250YWN0IGxpc3RzLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZUltcG9ydFN0YXR1cyAtIEluY2x1ZGUgaW1wb3J0IHN0YXR1c1xuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZVNpemUgLSBJbmNsdWRlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVHlwZSAtIEZpbHRlciB0eXBlXG4gIEVxdWFscyxcbiAgUmVnRXgsXG4gIENvbnRhaW5zLFxuICBQcmVmaXgsXG4gIExlc3NUaGFuLFxuICBMZXNzVGhhbkVxdWFsVG8sXG4gIEdyZWF0ZXJUaGFuLFxuICBHcmVhdGVyVGhhbkVxdWFsVG8sXG4gIEJlZ2luc1dpdGgsXG4gIEVuZHNXaXRoLFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENvbnRhY3RsaXN0cyA9IGZ1bmN0aW9uIGdldENvbnRhY3RsaXN0cyhpbmNsdWRlSW1wb3J0U3RhdHVzLCBpbmNsdWRlU2l6ZSwgcGFnZVNpemUsIHBhZ2VOdW1iZXIsIGZpbHRlclR5cGUsIG5hbWUsIHNvcnRCeSwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJpbmNsdWRlSW1wb3J0U3RhdHVzXCJdID0gaW5jbHVkZUltcG9ydFN0YXR1cztcbiAgICByZXF1ZXN0UXVlcnlbXCJpbmNsdWRlU2l6ZVwiXSA9IGluY2x1ZGVTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZmlsdGVyVHlwZVwiXSA9IGZpbHRlclR5cGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBjb250YWN0IExpc3QuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDb250YWN0TGlzdFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNvbHVtbk5hbWVzXCI6IFtdLFxuICAgXCJwaG9uZUNvbHVtbnNcIjogW10sXG4gICBcInByZXZpZXdNb2RlQ29sdW1uTmFtZVwiOiBcIlwiLFxuICAgXCJwcmV2aWV3TW9kZUFjY2VwdGVkVmFsdWVzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29sdW1uTmFtZXNcIjogW10sXG4gICBcInBob25lQ29sdW1uc1wiOiBbXSxcbiAgIFwiaW1wb3J0U3RhdHVzXCI6IHtcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidG90YWxSZWNvcmRzXCI6IDAsXG4gICAgICBcImNvbXBsZXRlZFJlY29yZHNcIjogMCxcbiAgICAgIFwicGVyY2VudENvbXBsZXRlXCI6IDAsXG4gICAgICBcImZhaWx1cmVSZWFzb25cIjogXCJcIlxuICAgfSxcbiAgIFwicHJldmlld01vZGVDb2x1bW5OYW1lXCI6IFwiXCIsXG4gICBcInByZXZpZXdNb2RlQWNjZXB0ZWRWYWx1ZXNcIjogW10sXG4gICBcInNpemVcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdENvbnRhY3RsaXN0cyA9IGZ1bmN0aW9uIHBvc3RDb250YWN0bGlzdHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY29udGFjdGxpc3RzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHByb2dyZXNzIGZvciBhIGxpc3Qgb2YgY2FtcGFpZ25zXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDYW1wYWlnbiBJRHNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiY2FtcGFpZ25cIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcImNvbnRhY3RMaXN0XCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJudW1iZXJPZkNvbnRhY3RzQ2FsbGVkXCI6IDAsXG4gIFwidG90YWxOdW1iZXJPZkNvbnRhY3RzXCI6IDAsXG4gIFwicGVyY2VudGFnZVwiOiAwXG4gfVxuXVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnBvc3RDYW1wYWlnbnNQcm9ncmVzcyA9IGZ1bmN0aW9uIHBvc3RDYW1wYWlnbnNQcm9ncmVzcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMvcHJvZ3Jlc3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBjYWxsYWJsZSB0aW1lIHNldCBsaXN0XG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclR5cGUgLSBGaWx0ZXIgdHlwZVxuICBFcXVhbHMsXG4gIFJlZ0V4LFxuICBDb250YWlucyxcbiAgUHJlZml4LFxuICBMZXNzVGhhbixcbiAgTGVzc1RoYW5FcXVhbFRvLFxuICBHcmVhdGVyVGhhbixcbiAgR3JlYXRlclRoYW5FcXVhbFRvLFxuICBCZWdpbnNXaXRoLFxuICBFbmRzV2l0aCxcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDYWxsYWJsZXRpbWVzZXRzID0gZnVuY3Rpb24gZ2V0Q2FsbGFibGV0aW1lc2V0cyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgZmlsdGVyVHlwZSwgbmFtZSwgc29ydEJ5LCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbGxhYmxldGltZXNldHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpbHRlclR5cGVcIl0gPSBmaWx0ZXJUeXBlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGNhbGxhYmxlIHRpbWUgc2V0XG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBEaWFsZXJDYWxsYWJsZVRpbWVTZXRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYWxsYWJsZVRpbWVzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY2FsbGFibGVUaW1lc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdENhbGxhYmxldGltZXNldHMgPSBmdW5jdGlvbiBwb3N0Q2FsbGFibGV0aW1lc2V0cyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYWxsYWJsZXRpbWVzZXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGRpYWxlciBjb250YWN0TGlzdCBpbXBvcnQgc3RhdHVzLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0TGlzdElkIC0gQ29udGFjdExpc3QgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwidG90YWxSZWNvcmRzXCI6IDAsXG4gICBcImNvbXBsZXRlZFJlY29yZHNcIjogMCxcbiAgIFwicGVyY2VudENvbXBsZXRlXCI6IDAsXG4gICBcImZhaWx1cmVSZWFzb25cIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRJbXBvcnRzdGF0dXMgPSBmdW5jdGlvbiBnZXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkSW1wb3J0c3RhdHVzKGNvbnRhY3RMaXN0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NvbnRhY3RsaXN0cy97Y29udGFjdExpc3RJZH0vaW1wb3J0c3RhdHVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udGFjdExpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udGFjdExpc3RJZH0nLCBjb250YWN0TGlzdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYXVkaXRzIGZvciBkaWFsZXIuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBdWRpdFNlYXJjaFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGZhY2V0c09ubHkgLSBGYWNldHMgb25seVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicXVlcnlQaHJhc2VcIjogXCJcIixcbiAgIFwicXVlcnlGaWVsZHNcIjogW10sXG4gICBcImZhY2V0c1wiOiBbXSxcbiAgIFwiZmlsdGVyc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJmYWNldEluZm9cIjogW10sXG4gICBcImF1ZGl0TWVzc2FnZXNcIjogW11cbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0QXVkaXRzID0gZnVuY3Rpb24gcG9zdEF1ZGl0cyhib2R5LCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBzb3J0T3JkZXIsIGZhY2V0c09ubHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2F1ZGl0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImZhY2V0c09ubHlcIl0gPSBmYWNldHNPbmx5O1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBhIGxpc3Qgb2YgZGlhbGVyIGNhbGwgYW5hbHlzaXMgcmVzcG9uc2Ugc2V0cy5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVHlwZSAtIEZpbHRlciB0eXBlXG4gIEVxdWFscyxcbiAgUmVnRXgsXG4gIENvbnRhaW5zLFxuICBQcmVmaXgsXG4gIExlc3NUaGFuLFxuICBMZXNzVGhhbkVxdWFsVG8sXG4gIEdyZWF0ZXJUaGFuLFxuICBHcmVhdGVyVGhhbkVxdWFsVG8sXG4gIEJlZ2luc1dpdGgsXG4gIEVuZHNXaXRoLFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENhbGxhbmFseXNpc3Jlc3BvbnNlc2V0cyA9IGZ1bmN0aW9uIGdldENhbGxhbmFseXNpc3Jlc3BvbnNlc2V0cyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgZmlsdGVyVHlwZSwgbmFtZSwgc29ydEJ5LCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbGxhbmFseXNpc3Jlc3BvbnNlc2V0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZmlsdGVyVHlwZVwiXSA9IGZpbHRlclR5cGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBkaWFsZXIgY2FsbCBhbmFseXNpcyByZXNwb25zZSBzZXQuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSZXNwb25zZVNldFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInJlc3BvbnNlc1wiOiB7fVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInJlc3BvbnNlc1wiOiB7fSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdENhbGxhbmFseXNpc3Jlc3BvbnNlc2V0cyA9IGZ1bmN0aW9uIHBvc3RDYWxsYW5hbHlzaXNyZXNwb25zZXNldHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FsbGFuYWx5c2lzcmVzcG9uc2VzZXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgYSBsaXN0IG9mIGRpYWxlciBjYW1wYWlnbiBzZXF1ZW5jZXMuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclR5cGUgLSBGaWx0ZXIgdHlwZVxuICBFcXVhbHMsXG4gIFJlZ0V4LFxuICBDb250YWlucyxcbiAgUHJlZml4LFxuICBMZXNzVGhhbixcbiAgTGVzc1RoYW5FcXVhbFRvLFxuICBHcmVhdGVyVGhhbixcbiAgR3JlYXRlclRoYW5FcXVhbFRvLFxuICBCZWdpbnNXaXRoLFxuICBFbmRzV2l0aCxcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRTZXF1ZW5jZXMgPSBmdW5jdGlvbiBnZXRTZXF1ZW5jZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIGZpbHRlclR5cGUsIG5hbWUsIHNvcnRCeSwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9zZXF1ZW5jZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpbHRlclR5cGVcIl0gPSBmaWx0ZXJUeXBlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgbmV3IGNhbXBhaWduIHNlcXVlbmNlLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gT3JnYW5pemF0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY2FtcGFpZ25zXCI6IFtdLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwicmVwZWF0XCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYW1wYWlnbnNcIjogW10sXG4gICBcImN1cnJlbnRDYW1wYWlnblwiOiAwLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwic3RvcE1lc3NhZ2VcIjogXCJcIixcbiAgIFwicmVwZWF0XCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnBvc3RTZXF1ZW5jZXMgPSBmdW5jdGlvbiBwb3N0U2VxdWVuY2VzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3NlcXVlbmNlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgVVJJIG9mIGEgY29udGFjdCBsaXN0IGV4cG9ydC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdExpc3RJZCAtIENvbnRhY3RMaXN0IElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvd25sb2FkIC0gUmVkaXJlY3QgdG8gZG93bmxvYWQgdXJpXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVyaVwiOiBcIlwiLFxuICAgXCJleHBvcnRUaW1lc3RhbXBcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRFeHBvcnQgPSBmdW5jdGlvbiBnZXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkRXhwb3J0KGNvbnRhY3RMaXN0SWQsIGRvd25sb2FkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9L2V4cG9ydCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnRhY3RMaXN0SWQgPT09IHVuZGVmaW5lZCB8fCBjb250YWN0TGlzdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb250YWN0TGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnRhY3RMaXN0SWR9JywgY29udGFjdExpc3RJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZG93bmxvYWRcIl0gPSBkb3dubG9hZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBJbml0aWF0ZSB0aGUgZXhwb3J0IG9mIGEgY29udGFjdCBsaXN0LlxuICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIDIwMCBpZiByZWNlaXZlZCBPSy5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdExpc3RJZCAtIENvbnRhY3RMaXN0IElEXG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdENvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRFeHBvcnQgPSBmdW5jdGlvbiBwb3N0Q29udGFjdGxpc3RzQ29udGFjdGxpc3RJZEV4cG9ydChjb250YWN0TGlzdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9L2V4cG9ydCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnRhY3RMaXN0SWQgPT09IHVuZGVmaW5lZCB8fCBjb250YWN0TGlzdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb250YWN0TGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnRhY3RMaXN0SWR9JywgY29udGFjdExpc3RJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkaWFsZXIgY2FtcGFpZ24uXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduSWQgLSBDYW1wYWlnbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNvbnRhY3RMaXN0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRpYWxpbmdNb2RlXCI6IFwiXCIsXG4gICBcInNjcmlwdFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlZGdlR3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FtcGFpZ25TdGF0dXNcIjogXCJcIixcbiAgIFwicGhvbmVDb2x1bW5zXCI6IFtdLFxuICAgXCJhYmFuZG9uUmF0ZVwiOiB7fSxcbiAgIFwiZG5jTGlzdHNcIjogW10sXG4gICBcImNhbGxhYmxlVGltZVNldFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsQW5hbHlzaXNSZXNwb25zZVNldFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlcnJvcnNcIjogW10sXG4gICBcImNhbGxlck5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJvdXRib3VuZExpbmVDb3VudFwiOiAwLFxuICAgXCJydWxlU2V0c1wiOiBbXSxcbiAgIFwic2tpcFByZXZpZXdEaXNhYmxlZFwiOiB0cnVlLFxuICAgXCJwcmV2aWV3VGltZU91dFNlY29uZHNcIjogMCxcbiAgIFwiY29udGFjdFNvcnRcIjoge1xuICAgICAgXCJmaWVsZE5hbWVcIjogXCJcIixcbiAgICAgIFwiZGlyZWN0aW9uXCI6IFwiXCIsXG4gICAgICBcIm51bWVyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwibm9BbnN3ZXJUaW1lb3V0XCI6IDAsXG4gICBcImNhbGxBbmFseXNpc0xhbmd1YWdlXCI6IFwiXCIsXG4gICBcInByaW9yaXR5XCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENhbXBhaWduc0NhbXBhaWduSWQgPSBmdW5jdGlvbiBnZXRDYW1wYWlnbnNDYW1wYWlnbklkKGNhbXBhaWduSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbXBhaWducy97Y2FtcGFpZ25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYW1wYWlnbklkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYW1wYWlnbklkfScsIGNhbXBhaWduSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGNhbXBhaWduLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENhbXBhaWduXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGlhbGluZ01vZGVcIjogXCJcIixcbiAgIFwic2NyaXB0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYW1wYWlnblN0YXR1c1wiOiBcIlwiLFxuICAgXCJwaG9uZUNvbHVtbnNcIjogW10sXG4gICBcImFiYW5kb25SYXRlXCI6IHt9LFxuICAgXCJkbmNMaXN0c1wiOiBbXSxcbiAgIFwiY2FsbGFibGVUaW1lU2V0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbGxBbmFseXNpc1Jlc3BvbnNlU2V0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbGxlck5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJvdXRib3VuZExpbmVDb3VudFwiOiAwLFxuICAgXCJydWxlU2V0c1wiOiBbXSxcbiAgIFwic2tpcFByZXZpZXdEaXNhYmxlZFwiOiB0cnVlLFxuICAgXCJwcmV2aWV3VGltZU91dFNlY29uZHNcIjogMCxcbiAgIFwiY29udGFjdFNvcnRcIjoge1xuICAgICAgXCJmaWVsZE5hbWVcIjogXCJcIixcbiAgICAgIFwiZGlyZWN0aW9uXCI6IFwiXCIsXG4gICAgICBcIm51bWVyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwibm9BbnN3ZXJUaW1lb3V0XCI6IDAsXG4gICBcImNhbGxBbmFseXNpc0xhbmd1YWdlXCI6IFwiXCIsXG4gICBcInByaW9yaXR5XCI6IDBcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjb250YWN0TGlzdFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkaWFsaW5nTW9kZVwiOiBcIlwiLFxuICAgXCJzY3JpcHRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbXBhaWduU3RhdHVzXCI6IFwiXCIsXG4gICBcInBob25lQ29sdW1uc1wiOiBbXSxcbiAgIFwiYWJhbmRvblJhdGVcIjoge30sXG4gICBcImRuY0xpc3RzXCI6IFtdLFxuICAgXCJjYWxsYWJsZVRpbWVTZXRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsbEFuYWx5c2lzUmVzcG9uc2VTZXRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZXJyb3JzXCI6IFtdLFxuICAgXCJjYWxsZXJOYW1lXCI6IFwiXCIsXG4gICBcImNhbGxlckFkZHJlc3NcIjogXCJcIixcbiAgIFwib3V0Ym91bmRMaW5lQ291bnRcIjogMCxcbiAgIFwicnVsZVNldHNcIjogW10sXG4gICBcInNraXBQcmV2aWV3RGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwicHJldmlld1RpbWVPdXRTZWNvbmRzXCI6IDAsXG4gICBcImNvbnRhY3RTb3J0XCI6IHtcbiAgICAgIFwiZmllbGROYW1lXCI6IFwiXCIsXG4gICAgICBcImRpcmVjdGlvblwiOiBcIlwiLFxuICAgICAgXCJudW1lcmljXCI6IHRydWVcbiAgIH0sXG4gICBcIm5vQW5zd2VyVGltZW91dFwiOiAwLFxuICAgXCJjYWxsQW5hbHlzaXNMYW5ndWFnZVwiOiBcIlwiLFxuICAgXCJwcmlvcml0eVwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wdXRDYW1wYWlnbnNDYW1wYWlnbklkID0gZnVuY3Rpb24gcHV0Q2FtcGFpZ25zQ2FtcGFpZ25JZChjYW1wYWlnbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMve2NhbXBhaWduSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FtcGFpZ25JZCA9PT0gdW5kZWZpbmVkIHx8IGNhbXBhaWduSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FtcGFpZ25JZH0nLCBjYW1wYWlnbklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGNhbXBhaWduLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVDYW1wYWlnbnNDYW1wYWlnbklkID0gZnVuY3Rpb24gZGVsZXRlQ2FtcGFpZ25zQ2FtcGFpZ25JZChjYW1wYWlnbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMve2NhbXBhaWduSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FtcGFpZ25JZCA9PT0gdW5kZWZpbmVkIHx8IGNhbXBhaWduSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FtcGFpZ25JZH0nLCBjYW1wYWlnbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY2FtcGFpZ24gZGlhZ25vc3RpY3NcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FtcGFpZ25JZCAtIENhbXBhaWduIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNhbGxhYmxlQ29udGFjdHNcIjoge1xuICAgICAgXCJhdHRlbXB0TGltaXRzXCI6IHt9LFxuICAgICAgXCJkbmNMaXN0c1wiOiBbXSxcbiAgICAgIFwiY2FsbGFibGVUaW1lU2V0XCI6IHt9LFxuICAgICAgXCJydWxlU2V0c1wiOiBbXVxuICAgfSxcbiAgIFwicXVldWVVdGlsaXphdGlvbkRpYWdub3N0aWNcIjoge1xuICAgICAgXCJxdWV1ZVwiOiB7fSxcbiAgICAgIFwidXNlcnNJblF1ZXVlXCI6IDAsXG4gICAgICBcImFjdGl2ZVVzZXJzSW5RdWV1ZVwiOiAwLFxuICAgICAgXCJ1c2Vyc09uUXVldWVcIjogMCxcbiAgICAgIFwidXNlcnNOb3RVdGlsaXplZFwiOiAwLFxuICAgICAgXCJ1c2Vyc09uUXVldWVXaXRoU3RhdGlvblwiOiAwLFxuICAgICAgXCJ1c2Vyc09uQUNhbXBhaWduQ2FsbFwiOiAwLFxuICAgICAgXCJ1c2Vyc09uRGlmZmVyZW50RWRnZUdyb3VwXCI6IDAsXG4gICAgICBcInVzZXJzT25BTm9uQ2FtcGFpZ25DYWxsXCI6IDBcbiAgIH0sXG4gICBcInJ1bGVTZXREaWFnbm9zdGljc1wiOiBbXSxcbiAgIFwib3V0c3RhbmRpbmdJbnRlcmFjdGlvbnNDb3VudFwiOiAwXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0Q2FtcGFpZ25zQ2FtcGFpZ25JZERpYWdub3N0aWNzID0gZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zQ2FtcGFpZ25JZERpYWdub3N0aWNzKGNhbXBhaWduSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbXBhaWducy97Y2FtcGFpZ25JZH0vZGlhZ25vc3RpY3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYW1wYWlnbklkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYW1wYWlnbklkfScsIGNhbXBhaWduSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBjYW1wYWlnbiBwcm9ncmVzc1xuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY2FtcGFpZ25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibnVtYmVyT2ZDb250YWN0c0NhbGxlZFwiOiAwLFxuICAgXCJ0b3RhbE51bWJlck9mQ29udGFjdHNcIjogMCxcbiAgIFwicGVyY2VudGFnZVwiOiAwXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0Q2FtcGFpZ25zQ2FtcGFpZ25JZFByb2dyZXNzID0gZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zQ2FtcGFpZ25JZFByb2dyZXNzKGNhbXBhaWduSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbXBhaWducy97Y2FtcGFpZ25JZH0vcHJvZ3Jlc3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYW1wYWlnbklkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYW1wYWlnbklkfScsIGNhbXBhaWduSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlc2V0IGNhbXBhaWduIHByb2dyZXNzIGFuZCByZWN5Y2xlIHRoZSBjYW1wYWlnblxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVDYW1wYWlnbnNDYW1wYWlnbklkUHJvZ3Jlc3MgPSBmdW5jdGlvbiBkZWxldGVDYW1wYWlnbnNDYW1wYWlnbklkUHJvZ3Jlc3MoY2FtcGFpZ25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25zL3tjYW1wYWlnbklkfS9wcm9ncmVzcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduSWQgPT09IHVuZGVmaW5lZCB8fCBjYW1wYWlnbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYW1wYWlnbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduSWR9JywgY2FtcGFpZ25JZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGF0dGVtcHQgbGltaXRzXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGF0dGVtcHRMaW1pdHNJZCAtIEF0dGVtcHQgbGltaXRzIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwibWF4QXR0ZW1wdHNQZXJDb250YWN0XCI6IDAsXG4gICBcIm1heEF0dGVtcHRzUGVyTnVtYmVyXCI6IDAsXG4gICBcInRpbWVab25lSWRcIjogXCJcIixcbiAgIFwicmVzZXRQZXJpb2RcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0QXR0ZW1wdGxpbWl0c0F0dGVtcHRsaW1pdHNJZCA9IGZ1bmN0aW9uIGdldEF0dGVtcHRsaW1pdHNBdHRlbXB0bGltaXRzSWQoYXR0ZW1wdExpbWl0c0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9hdHRlbXB0bGltaXRzL3thdHRlbXB0TGltaXRzSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYXR0ZW1wdExpbWl0c0lkID09PSB1bmRlZmluZWQgfHwgYXR0ZW1wdExpbWl0c0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhdHRlbXB0TGltaXRzSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YXR0ZW1wdExpbWl0c0lkfScsIGF0dGVtcHRMaW1pdHNJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGF0dGVtcHQgbGltaXRzXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGF0dGVtcHRMaW1pdHNJZCAtIEF0dGVtcHQgbGltaXRzIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBBdHRlbXB0TGltaXRzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwibWF4QXR0ZW1wdHNQZXJDb250YWN0XCI6IDAsXG4gICBcIm1heEF0dGVtcHRzUGVyTnVtYmVyXCI6IDAsXG4gICBcInRpbWVab25lSWRcIjogXCJcIixcbiAgIFwicmVzZXRQZXJpb2RcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcIm1heEF0dGVtcHRzUGVyQ29udGFjdFwiOiAwLFxuICAgXCJtYXhBdHRlbXB0c1Blck51bWJlclwiOiAwLFxuICAgXCJ0aW1lWm9uZUlkXCI6IFwiXCIsXG4gICBcInJlc2V0UGVyaW9kXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnB1dEF0dGVtcHRsaW1pdHNBdHRlbXB0bGltaXRzSWQgPSBmdW5jdGlvbiBwdXRBdHRlbXB0bGltaXRzQXR0ZW1wdGxpbWl0c0lkKGF0dGVtcHRMaW1pdHNJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvYXR0ZW1wdGxpbWl0cy97YXR0ZW1wdExpbWl0c0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGF0dGVtcHRMaW1pdHNJZCA9PT0gdW5kZWZpbmVkIHx8IGF0dGVtcHRMaW1pdHNJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYXR0ZW1wdExpbWl0c0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2F0dGVtcHRMaW1pdHNJZH0nLCBhdHRlbXB0TGltaXRzSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGF0dGVtcHQgbGltaXRzXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGF0dGVtcHRMaW1pdHNJZCAtIEF0dGVtcHQgbGltaXRzIElEXG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZGVsZXRlQXR0ZW1wdGxpbWl0c0F0dGVtcHRsaW1pdHNJZCA9IGZ1bmN0aW9uIGRlbGV0ZUF0dGVtcHRsaW1pdHNBdHRlbXB0bGltaXRzSWQoYXR0ZW1wdExpbWl0c0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9hdHRlbXB0bGltaXRzL3thdHRlbXB0TGltaXRzSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYXR0ZW1wdExpbWl0c0lkID09PSB1bmRlZmluZWQgfHwgYXR0ZW1wdExpbWl0c0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhdHRlbXB0TGltaXRzSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YXR0ZW1wdExpbWl0c0lkfScsIGF0dGVtcHRMaW1pdHNJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgZGlhbGVyIGNhbGwgYW5hbHlzaXMgcmVzcG9uc2Ugc2V0LlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsQW5hbHlzaXNTZXRJZCAtIENhbGwgQW5hbHlzaXMgUmVzcG9uc2UgU2V0IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwicmVzcG9uc2VzXCI6IHt9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDYWxsYW5hbHlzaXNyZXNwb25zZXNldHNDYWxsYW5hbHlzaXNzZXRJZCA9IGZ1bmN0aW9uIGdldENhbGxhbmFseXNpc3Jlc3BvbnNlc2V0c0NhbGxhbmFseXNpc3NldElkKGNhbGxBbmFseXNpc1NldElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYWxsYW5hbHlzaXNyZXNwb25zZXNldHMve2NhbGxBbmFseXNpc1NldElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxBbmFseXNpc1NldElkID09PSB1bmRlZmluZWQgfHwgY2FsbEFuYWx5c2lzU2V0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxBbmFseXNpc1NldElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxBbmFseXNpc1NldElkfScsIGNhbGxBbmFseXNpc1NldElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBkaWFsZXIgY2FsbCBhbmFseXNpcyByZXNwb25zZSBzZXQuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGxBbmFseXNpc1NldElkIC0gQ2FsbCBBbmFseXNpcyBSZXNwb25zZSBTZXQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJlc3BvbnNlU2V0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwicmVzcG9uc2VzXCI6IHt9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwicmVzcG9uc2VzXCI6IHt9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wdXRDYWxsYW5hbHlzaXNyZXNwb25zZXNldHNDYWxsYW5hbHlzaXNzZXRJZCA9IGZ1bmN0aW9uIHB1dENhbGxhbmFseXNpc3Jlc3BvbnNlc2V0c0NhbGxhbmFseXNpc3NldElkKGNhbGxBbmFseXNpc1NldElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYWxsYW5hbHlzaXNyZXNwb25zZXNldHMve2NhbGxBbmFseXNpc1NldElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGxBbmFseXNpc1NldElkID09PSB1bmRlZmluZWQgfHwgY2FsbEFuYWx5c2lzU2V0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGxBbmFseXNpc1NldElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGxBbmFseXNpc1NldElkfScsIGNhbGxBbmFseXNpc1NldElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGRpYWxlciBjYWxsIGFuYWx5c2lzIHJlc3BvbnNlIHNldC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbEFuYWx5c2lzU2V0SWQgLSBDYWxsIEFuYWx5c2lzIFJlc3BvbnNlIFNldCBJRFxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmRlbGV0ZUNhbGxhbmFseXNpc3Jlc3BvbnNlc2V0c0NhbGxhbmFseXNpc3NldElkID0gZnVuY3Rpb24gZGVsZXRlQ2FsbGFuYWx5c2lzcmVzcG9uc2VzZXRzQ2FsbGFuYWx5c2lzc2V0SWQoY2FsbEFuYWx5c2lzU2V0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbGxhbmFseXNpc3Jlc3BvbnNlc2V0cy97Y2FsbEFuYWx5c2lzU2V0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbEFuYWx5c2lzU2V0SWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsQW5hbHlzaXNTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbEFuYWx5c2lzU2V0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbEFuYWx5c2lzU2V0SWR9JywgY2FsbEFuYWx5c2lzU2V0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGNvbnRhY3QuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RMaXN0SWQgLSBDb250YWN0IExpc3QgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdElkIC0gQ29udGFjdCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnRhY3RMaXN0SWRcIjogXCJcIixcbiAgIFwiZGF0YVwiOiB7fSxcbiAgIFwiY2FsbFJlY29yZHNcIjoge30sXG4gICBcImNhbGxhYmxlXCI6IHRydWUsXG4gICBcInBob25lTnVtYmVyU3RhdHVzXCI6IHt9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkQ29udGFjdHNDb250YWN0SWQgPSBmdW5jdGlvbiBnZXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkQ29udGFjdHNDb250YWN0SWQoY29udGFjdExpc3RJZCwgY29udGFjdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9L2NvbnRhY3RzL3tjb250YWN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udGFjdExpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udGFjdExpc3RJZH0nLCBjb250YWN0TGlzdElkKTtcbiAgICBpZihjb250YWN0SWQgPT09IHVuZGVmaW5lZCB8fCBjb250YWN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb250YWN0SWR9JywgY29udGFjdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBjb250YWN0LlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0TGlzdElkIC0gQ29udGFjdCBMaXN0IElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RJZCAtIENvbnRhY3QgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENvbnRhY3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY29udGFjdExpc3RJZFwiOiBcIlwiLFxuICAgXCJkYXRhXCI6IHt9LFxuICAgXCJjYWxsYWJsZVwiOiB0cnVlLFxuICAgXCJwaG9uZU51bWJlclN0YXR1c1wiOiB7fVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnRhY3RMaXN0SWRcIjogXCJcIixcbiAgIFwiZGF0YVwiOiB7fSxcbiAgIFwiY2FsbFJlY29yZHNcIjoge30sXG4gICBcImNhbGxhYmxlXCI6IHRydWUsXG4gICBcInBob25lTnVtYmVyU3RhdHVzXCI6IHt9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wdXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkQ29udGFjdHNDb250YWN0SWQgPSBmdW5jdGlvbiBwdXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkQ29udGFjdHNDb250YWN0SWQoY29udGFjdExpc3RJZCwgY29udGFjdElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9L2NvbnRhY3RzL3tjb250YWN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udGFjdExpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udGFjdExpc3RJZH0nLCBjb250YWN0TGlzdElkKTtcbiAgICBpZihjb250YWN0SWQgPT09IHVuZGVmaW5lZCB8fCBjb250YWN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb250YWN0SWR9JywgY29udGFjdElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGNvbnRhY3QuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RMaXN0SWQgLSBDb250YWN0IExpc3QgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdElkIC0gQ29udGFjdCBJRFxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmRlbGV0ZUNvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRDb250YWN0c0NvbnRhY3RJZCA9IGZ1bmN0aW9uIGRlbGV0ZUNvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRDb250YWN0c0NvbnRhY3RJZChjb250YWN0TGlzdElkLCBjb250YWN0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NvbnRhY3RsaXN0cy97Y29udGFjdExpc3RJZH0vY29udGFjdHMve2NvbnRhY3RJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb250YWN0TGlzdElkID09PSB1bmRlZmluZWQgfHwgY29udGFjdExpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udGFjdExpc3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb250YWN0TGlzdElkfScsIGNvbnRhY3RMaXN0SWQpO1xuICAgIGlmKGNvbnRhY3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udGFjdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnRhY3RJZH0nLCBjb250YWN0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGEgbGlzdCBvZiBSdWxlIFNldHMuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclR5cGUgLSBGaWx0ZXIgdHlwZVxuICBFcXVhbHMsXG4gIFJlZ0V4LFxuICBDb250YWlucyxcbiAgUHJlZml4LFxuICBMZXNzVGhhbixcbiAgTGVzc1RoYW5FcXVhbFRvLFxuICBHcmVhdGVyVGhhbixcbiAgR3JlYXRlclRoYW5FcXVhbFRvLFxuICBCZWdpbnNXaXRoLFxuICBFbmRzV2l0aCxcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRSdWxlc2V0cyA9IGZ1bmN0aW9uIGdldFJ1bGVzZXRzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBmaWx0ZXJUeXBlLCBuYW1lLCBzb3J0QnksIHNvcnRPcmRlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvcnVsZXNldHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpbHRlclR5cGVcIl0gPSBmaWx0ZXJUeXBlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgRGlhbGVyIENhbGwgQW5hbHlzaXMgUmVzcG9uc2UgU2V0LlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUnVsZVNldFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNvbnRhY3RMaXN0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJ1bGVzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicnVsZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnBvc3RSdWxlc2V0cyA9IGZ1bmN0aW9uIHBvc3RSdWxlc2V0cyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9ydWxlc2V0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGRpYWxlciBETkMgbGlzdHNcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVJbXBvcnRTdGF0dXMgLSBJbXBvcnQgc3RhdHVzXG4gICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlU2l6ZSAtIEluY2x1ZGUgc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUeXBlIC0gRmlsdGVyIHR5cGVcbiAgRXF1YWxzLFxuICBSZWdFeCxcbiAgQ29udGFpbnMsXG4gIFByZWZpeCxcbiAgTGVzc1RoYW4sXG4gIExlc3NUaGFuRXF1YWxUbyxcbiAgR3JlYXRlclRoYW4sXG4gIEdyZWF0ZXJUaGFuRXF1YWxUbyxcbiAgQmVnaW5zV2l0aCxcbiAgRW5kc1dpdGgsXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFNvcnQgYnlcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gU29ydCBvcmRlclxuICBhc2NlbmRpbmcsXG4gIGRlc2NlbmRpbmcsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0RG5jbGlzdHMgPSBmdW5jdGlvbiBnZXREbmNsaXN0cyhpbmNsdWRlSW1wb3J0U3RhdHVzLCBpbmNsdWRlU2l6ZSwgcGFnZVNpemUsIHBhZ2VOdW1iZXIsIGZpbHRlclR5cGUsIG5hbWUsIHNvcnRCeSwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9kbmNsaXN0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImluY2x1ZGVJbXBvcnRTdGF0dXNcIl0gPSBpbmNsdWRlSW1wb3J0U3RhdHVzO1xuICAgIHJlcXVlc3RRdWVyeVtcImluY2x1ZGVTaXplXCJdID0gaW5jbHVkZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJmaWx0ZXJUeXBlXCJdID0gZmlsdGVyVHlwZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBkaWFsZXIgRE5DIGxpc3RcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIERuY0xpc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiaW1wb3J0U3RhdHVzXCI6IHtcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidG90YWxSZWNvcmRzXCI6IDAsXG4gICAgICBcImNvbXBsZXRlZFJlY29yZHNcIjogMCxcbiAgICAgIFwicGVyY2VudENvbXBsZXRlXCI6IDAsXG4gICAgICBcImZhaWx1cmVSZWFzb25cIjogXCJcIlxuICAgfSxcbiAgIFwic2l6ZVwiOiAwLFxuICAgXCJkbmNTb3VyY2VUeXBlXCI6IFwiXCIsXG4gICBcImxvZ2luSWRcIjogXCJcIixcbiAgIFwiZG5jQ29kZXNcIjogW10sXG4gICBcImxpY2Vuc2VJZFwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0RG5jbGlzdHMgPSBmdW5jdGlvbiBwb3N0RG5jbGlzdHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvZG5jbGlzdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBDYW1wYWlnbiBSdWxlIGxpc3RcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVHlwZSAtIEZpbHRlciB0eXBlXG4gIEVxdWFscyxcbiAgUmVnRXgsXG4gIENvbnRhaW5zLFxuICBQcmVmaXgsXG4gIExlc3NUaGFuLFxuICBMZXNzVGhhbkVxdWFsVG8sXG4gIEdyZWF0ZXJUaGFuLFxuICBHcmVhdGVyVGhhbkVxdWFsVG8sXG4gIEJlZ2luc1dpdGgsXG4gIEVuZHNXaXRoLFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENhbXBhaWducnVsZXMgPSBmdW5jdGlvbiBnZXRDYW1wYWlnbnJ1bGVzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBmaWx0ZXJUeXBlLCBuYW1lLCBzb3J0QnksIHNvcnRPcmRlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZmlsdGVyVHlwZVwiXSA9IGZpbHRlclR5cGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgQ2FtcGFpZ24gUnVsZVxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ2FtcGFpZ25SdWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY2FtcGFpZ25SdWxlRW50aXRpZXNcIjoge1xuICAgICAgXCJjYW1wYWlnbnNcIjogW10sXG4gICAgICBcInNlcXVlbmNlc1wiOiBbXVxuICAgfSxcbiAgIFwiY2FtcGFpZ25SdWxlQ29uZGl0aW9uc1wiOiBbXSxcbiAgIFwiY2FtcGFpZ25SdWxlQWN0aW9uc1wiOiBbXSxcbiAgIFwibWF0Y2hBbnlDb25kaXRpb25zXCI6IHRydWUsXG4gICBcImVuYWJsZWRcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNhbXBhaWduUnVsZUVudGl0aWVzXCI6IHtcbiAgICAgIFwiY2FtcGFpZ25zXCI6IFtdLFxuICAgICAgXCJzZXF1ZW5jZXNcIjogW11cbiAgIH0sXG4gICBcImNhbXBhaWduUnVsZUNvbmRpdGlvbnNcIjogW10sXG4gICBcImNhbXBhaWduUnVsZUFjdGlvbnNcIjogW10sXG4gICBcIm1hdGNoQW55Q29uZGl0aW9uc1wiOiB0cnVlLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnBvc3RDYW1wYWlnbnJ1bGVzID0gZnVuY3Rpb24gcG9zdENhbXBhaWducnVsZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25ydWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGRpYWxlciBzZXF1ZW5jZSBzY2hlZHVsZS5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2VxdWVuY2VJZCAtIFNlcXVlbmNlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiaW50ZXJ2YWxzXCI6IFtdLFxuICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgXCJzZXF1ZW5jZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRTY2hlZHVsZXNTZXF1ZW5jZXNTZXF1ZW5jZUlkID0gZnVuY3Rpb24gZ2V0U2NoZWR1bGVzU2VxdWVuY2VzU2VxdWVuY2VJZChzZXF1ZW5jZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9zY2hlZHVsZXMvc2VxdWVuY2VzL3tzZXF1ZW5jZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNlcXVlbmNlSWQgPT09IHVuZGVmaW5lZCB8fCBzZXF1ZW5jZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzZXF1ZW5jZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NlcXVlbmNlSWR9Jywgc2VxdWVuY2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgbmV3IHNlcXVlbmNlIHNjaGVkdWxlLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzZXF1ZW5jZUlkIC0gU2VxdWVuY2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNlcXVlbmNlU2NoZWR1bGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJpbnRlcnZhbHNcIjogW10sXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcInNlcXVlbmNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJpbnRlcnZhbHNcIjogW10sXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcInNlcXVlbmNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnB1dFNjaGVkdWxlc1NlcXVlbmNlc1NlcXVlbmNlSWQgPSBmdW5jdGlvbiBwdXRTY2hlZHVsZXNTZXF1ZW5jZXNTZXF1ZW5jZUlkKHNlcXVlbmNlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3NjaGVkdWxlcy9zZXF1ZW5jZXMve3NlcXVlbmNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2VxdWVuY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHNlcXVlbmNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNlcXVlbmNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2VxdWVuY2VJZH0nLCBzZXF1ZW5jZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGRpYWxlciBzZXF1ZW5jZSBzY2hlZHVsZS5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2VxdWVuY2VJZCAtIFNlcXVlbmNlIElEXG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZGVsZXRlU2NoZWR1bGVzU2VxdWVuY2VzU2VxdWVuY2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZVNjaGVkdWxlc1NlcXVlbmNlc1NlcXVlbmNlSWQoc2VxdWVuY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvc2NoZWR1bGVzL3NlcXVlbmNlcy97c2VxdWVuY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzZXF1ZW5jZUlkID09PSB1bmRlZmluZWQgfHwgc2VxdWVuY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2VxdWVuY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzZXF1ZW5jZUlkfScsIHNlcXVlbmNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlbmQgbm90aWZpY2F0aW9uIHRoYXQgYW4gYWdlbnQncyBzdGF0ZSBjaGFuZ2VkIFxuICAqIEBkZXNjcmlwdGlvbiBOZXcgYWdlbnQgc3RhdGUuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduSWQgLSBDYW1wYWlnbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBBZ2VudCdzIHVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIGFnZW50XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJzdGFnZVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0Q2FtcGFpZ25zQ2FtcGFpZ25JZEFnZW50c1VzZXJJZCA9IGZ1bmN0aW9uIHB1dENhbXBhaWduc0NhbXBhaWduSWRBZ2VudHNVc2VySWQoY2FtcGFpZ25JZCwgdXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMve2NhbXBhaWduSWR9L2FnZW50cy97dXNlcklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduSWQgPT09IHVuZGVmaW5lZCB8fCBjYW1wYWlnbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYW1wYWlnbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduSWR9JywgY2FtcGFpZ25JZCk7XG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBkaWFsZXIgY2FtcGFpZ24gc2VxdWVuY2UuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNlcXVlbmNlSWQgLSBDYW1wYWlnbiBTZXF1ZW5jZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNhbXBhaWduc1wiOiBbXSxcbiAgIFwiY3VycmVudENhbXBhaWduXCI6IDAsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJzdG9wTWVzc2FnZVwiOiBcIlwiLFxuICAgXCJyZXBlYXRcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0U2VxdWVuY2VzU2VxdWVuY2VJZCA9IGZ1bmN0aW9uIGdldFNlcXVlbmNlc1NlcXVlbmNlSWQoc2VxdWVuY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvc2VxdWVuY2VzL3tzZXF1ZW5jZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNlcXVlbmNlSWQgPT09IHVuZGVmaW5lZCB8fCBzZXF1ZW5jZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzZXF1ZW5jZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NlcXVlbmNlSWR9Jywgc2VxdWVuY2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgbmV3IGNhbXBhaWduIHNlcXVlbmNlLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzZXF1ZW5jZUlkIC0gQ2FtcGFpZ24gU2VxdWVuY2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIE9yZ2FuaXphdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNhbXBhaWduc1wiOiBbXSxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcInJlcGVhdFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY2FtcGFpZ25zXCI6IFtdLFxuICAgXCJjdXJyZW50Q2FtcGFpZ25cIjogMCxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcInN0b3BNZXNzYWdlXCI6IFwiXCIsXG4gICBcInJlcGVhdFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wdXRTZXF1ZW5jZXNTZXF1ZW5jZUlkID0gZnVuY3Rpb24gcHV0U2VxdWVuY2VzU2VxdWVuY2VJZChzZXF1ZW5jZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9zZXF1ZW5jZXMve3NlcXVlbmNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2VxdWVuY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHNlcXVlbmNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNlcXVlbmNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2VxdWVuY2VJZH0nLCBzZXF1ZW5jZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGRpYWxlciBjYW1wYWlnbiBzZXF1ZW5jZS5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2VxdWVuY2VJZCAtIENhbXBhaWduIFNlcXVlbmNlIElEXG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZGVsZXRlU2VxdWVuY2VzU2VxdWVuY2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZVNlcXVlbmNlc1NlcXVlbmNlSWQoc2VxdWVuY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvc2VxdWVuY2VzL3tzZXF1ZW5jZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNlcXVlbmNlSWQgPT09IHVuZGVmaW5lZCB8fCBzZXF1ZW5jZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzZXF1ZW5jZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NlcXVlbmNlSWR9Jywgc2VxdWVuY2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGRpYWxlciBjYW1wYWlnbiBpbnRlcmFjdGlvbnMuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduSWQgLSBDYW1wYWlnbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjYW1wYWlnblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwZW5kaW5nSW50ZXJhY3Rpb25zXCI6IFtdLFxuICAgXCJwcm9jZWVkaW5nSW50ZXJhY3Rpb25zXCI6IFtdLFxuICAgXCJwcmV2aWV3aW5nSW50ZXJhY3Rpb25zXCI6IFtdLFxuICAgXCJpbnRlcmFjdGluZ0ludGVyYWN0aW9uc1wiOiBbXSxcbiAgIFwic2NoZWR1bGVkSW50ZXJhY3Rpb25zXCI6IFtdXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0Q2FtcGFpZ25zQ2FtcGFpZ25JZEludGVyYWN0aW9ucyA9IGZ1bmN0aW9uIGdldENhbXBhaWduc0NhbXBhaWduSWRJbnRlcmFjdGlvbnMoY2FtcGFpZ25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25zL3tjYW1wYWlnbklkfS9pbnRlcmFjdGlvbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYW1wYWlnbklkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYW1wYWlnbklkfScsIGNhbXBhaWduSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEFkZCBwaG9uZSBudW1iZXJzIHRvIGEgRGlhbGVyIEROQyBsaXN0LlxuICAqIEBkZXNjcmlwdGlvbiBPbmx5IEludGVybmFsIEROQyBsaXN0cyBtYXkgYmUgYXBwZW5kZWQgdG9cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG5jTGlzdElkIC0gRG5jTGlzdCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gRE5DIFBob25lIE51bWJlcnNcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0RG5jbGlzdHNEbmNsaXN0SWRQaG9uZW51bWJlcnMgPSBmdW5jdGlvbiBwb3N0RG5jbGlzdHNEbmNsaXN0SWRQaG9uZW51bWJlcnMoZG5jTGlzdElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9kbmNsaXN0cy97ZG5jTGlzdElkfS9waG9uZW51bWJlcnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkbmNMaXN0SWQgPT09IHVuZGVmaW5lZCB8fCBkbmNMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRuY0xpc3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkbmNMaXN0SWR9JywgZG5jTGlzdElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIFVSSSBvZiBhIEROQyBsaXN0IGV4cG9ydC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG5jTGlzdElkIC0gRG5jTGlzdCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb3dubG9hZCAtIFJlZGlyZWN0IHRvIGRvd25sb2FkIHVyaVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ1cmlcIjogXCJcIixcbiAgIFwiZXhwb3J0VGltZXN0YW1wXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXREbmNsaXN0c0RuY2xpc3RJZEV4cG9ydCA9IGZ1bmN0aW9uIGdldERuY2xpc3RzRG5jbGlzdElkRXhwb3J0KGRuY0xpc3RJZCwgZG93bmxvYWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2RuY2xpc3RzL3tkbmNMaXN0SWR9L2V4cG9ydCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRuY0xpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGRuY0xpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG5jTGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RuY0xpc3RJZH0nLCBkbmNMaXN0SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImRvd25sb2FkXCJdID0gZG93bmxvYWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgSW5pdGlhdGUgdGhlIGV4cG9ydCBvZiBhIGRuYyBsaXN0LlxuICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIDIwMCBpZiByZWNlaXZlZCBPSy5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG5jTGlzdElkIC0gRG5jTGlzdCBJRFxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnBvc3REbmNsaXN0c0RuY2xpc3RJZEV4cG9ydCA9IGZ1bmN0aW9uIHBvc3REbmNsaXN0c0RuY2xpc3RJZEV4cG9ydChkbmNMaXN0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2RuY2xpc3RzL3tkbmNMaXN0SWR9L2V4cG9ydCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRuY0xpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGRuY0xpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG5jTGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RuY0xpc3RJZH0nLCBkbmNMaXN0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZGlhbGVyIEROQyBsaXN0XG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRuY0xpc3RJZCAtIERuY0xpc3QgSURcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVJbXBvcnRTdGF0dXMgLSBJbXBvcnQgc3RhdHVzXG4gICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlU2l6ZSAtIEluY2x1ZGUgc2l6ZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImltcG9ydFN0YXR1c1wiOiB7XG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRvdGFsUmVjb3Jkc1wiOiAwLFxuICAgICAgXCJjb21wbGV0ZWRSZWNvcmRzXCI6IDAsXG4gICAgICBcInBlcmNlbnRDb21wbGV0ZVwiOiAwLFxuICAgICAgXCJmYWlsdXJlUmVhc29uXCI6IFwiXCJcbiAgIH0sXG4gICBcInNpemVcIjogMCxcbiAgIFwiZG5jU291cmNlVHlwZVwiOiBcIlwiLFxuICAgXCJsb2dpbklkXCI6IFwiXCIsXG4gICBcImRuY0NvZGVzXCI6IFtdLFxuICAgXCJsaWNlbnNlSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0RG5jbGlzdHNEbmNsaXN0SWQgPSBmdW5jdGlvbiBnZXREbmNsaXN0c0RuY2xpc3RJZChkbmNMaXN0SWQsIGluY2x1ZGVJbXBvcnRTdGF0dXMsIGluY2x1ZGVTaXplKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9kbmNsaXN0cy97ZG5jTGlzdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRuY0xpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGRuY0xpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG5jTGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RuY0xpc3RJZH0nLCBkbmNMaXN0SWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImluY2x1ZGVJbXBvcnRTdGF0dXNcIl0gPSBpbmNsdWRlSW1wb3J0U3RhdHVzO1xuICAgIHJlcXVlc3RRdWVyeVtcImluY2x1ZGVTaXplXCJdID0gaW5jbHVkZVNpemU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGRpYWxlciBETkMgbGlzdFxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkbmNMaXN0SWQgLSBEbmNMaXN0IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBEbmNMaXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMFxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImltcG9ydFN0YXR1c1wiOiB7XG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRvdGFsUmVjb3Jkc1wiOiAwLFxuICAgICAgXCJjb21wbGV0ZWRSZWNvcmRzXCI6IDAsXG4gICAgICBcInBlcmNlbnRDb21wbGV0ZVwiOiAwLFxuICAgICAgXCJmYWlsdXJlUmVhc29uXCI6IFwiXCJcbiAgIH0sXG4gICBcInNpemVcIjogMCxcbiAgIFwiZG5jU291cmNlVHlwZVwiOiBcIlwiLFxuICAgXCJsb2dpbklkXCI6IFwiXCIsXG4gICBcImRuY0NvZGVzXCI6IFtdLFxuICAgXCJsaWNlbnNlSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0RG5jbGlzdHNEbmNsaXN0SWQgPSBmdW5jdGlvbiBwdXREbmNsaXN0c0RuY2xpc3RJZChkbmNMaXN0SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2RuY2xpc3RzL3tkbmNMaXN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG5jTGlzdElkID09PSB1bmRlZmluZWQgfHwgZG5jTGlzdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBkbmNMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG5jTGlzdElkfScsIGRuY0xpc3RJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgZGlhbGVyIEROQyBsaXN0XG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRuY0xpc3RJZCAtIERuY0xpc3QgSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVEbmNsaXN0c0RuY2xpc3RJZCA9IGZ1bmN0aW9uIGRlbGV0ZURuY2xpc3RzRG5jbGlzdElkKGRuY0xpc3RJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvZG5jbGlzdHMve2RuY0xpc3RJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkbmNMaXN0SWQgPT09IHVuZGVmaW5lZCB8fCBkbmNMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRuY0xpc3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkbmNMaXN0SWR9JywgZG5jTGlzdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBBZGQgY29udGFjdHMgdG8gYSBjb250YWN0IGxpc3QuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RMaXN0SWQgLSBDb250YWN0IExpc3QgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENvbnRhY3RcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByaW9yaXR5IC0gQ29udGFjdCBwcmlvcml0eS4gIFRydWUgbWVhbnMgdGhlIGNvbnRhY3Qocykgd2lsbCBnbyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0LCBmYWxzZSBtZWFucyBhdCB0aGUgZW5kLlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xlYXJTeXN0ZW1EYXRhIC0gQ2xlYXIgc3lzdGVtIGRhdGEuICBUcnVlIG1lYW5zIHRoZSBzeXN0ZW0gZGF0YSBzdG9yZWQgb24gdGhlIGNvbnRhY3Qgd2lsbCBiZSBjbGVhcmVkIGlmIHRoZSBjb250YWN0IGFscmVhZHkgZXhpc3RzIChhdHRlbXB0cywgY2FsbGFibGUgc3RhdHVzLCBldGMpLCBmYWxzZSBtZWFucyBpdCB3b24ndC5cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcIm5hbWVcIjogXCJcIixcbiAgXCJjb250YWN0TGlzdElkXCI6IFwiXCIsXG4gIFwiZGF0YVwiOiB7fSxcbiAgXCJjYWxsYWJsZVwiOiB0cnVlLFxuICBcInBob25lTnVtYmVyU3RhdHVzXCI6IHt9XG4gfVxuXVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJjb250YWN0TGlzdElkXCI6IFwiXCIsXG4gIFwiZGF0YVwiOiB7fSxcbiAgXCJjYWxsUmVjb3Jkc1wiOiB7fSxcbiAgXCJjYWxsYWJsZVwiOiB0cnVlLFxuICBcInBob25lTnVtYmVyU3RhdHVzXCI6IHt9LFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0Q29udGFjdGxpc3RzQ29udGFjdGxpc3RJZENvbnRhY3RzID0gZnVuY3Rpb24gcG9zdENvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWRDb250YWN0cyhjb250YWN0TGlzdElkLCBib2R5LCBwcmlvcml0eSwgY2xlYXJTeXN0ZW1EYXRhKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9L2NvbnRhY3RzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udGFjdExpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udGFjdExpc3RJZH0nLCBjb250YWN0TGlzdElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInByaW9yaXR5XCJdID0gcHJpb3JpdHk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiY2xlYXJTeXN0ZW1EYXRhXCJdID0gY2xlYXJTeXN0ZW1EYXRhO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgQ2FtcGFpZ24gUnVsZVxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnblJ1bGVJZCAtIENhbXBhaWduIFJ1bGUgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYW1wYWlnblJ1bGVFbnRpdGllc1wiOiB7XG4gICAgICBcImNhbXBhaWduc1wiOiBbXSxcbiAgICAgIFwic2VxdWVuY2VzXCI6IFtdXG4gICB9LFxuICAgXCJjYW1wYWlnblJ1bGVDb25kaXRpb25zXCI6IFtdLFxuICAgXCJjYW1wYWlnblJ1bGVBY3Rpb25zXCI6IFtdLFxuICAgXCJtYXRjaEFueUNvbmRpdGlvbnNcIjogdHJ1ZSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDYW1wYWlnbnJ1bGVzQ2FtcGFpZ25ydWxlSWQgPSBmdW5jdGlvbiBnZXRDYW1wYWlnbnJ1bGVzQ2FtcGFpZ25ydWxlSWQoY2FtcGFpZ25SdWxlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbXBhaWducnVsZXMve2NhbXBhaWduUnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduUnVsZUlkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25SdWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduUnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduUnVsZUlkfScsIGNhbXBhaWduUnVsZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgQ2FtcGFpZ24gUnVsZVxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnblJ1bGVJZCAtIENhbXBhaWduIFJ1bGUgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENhbXBhaWduUnVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNhbXBhaWduUnVsZUVudGl0aWVzXCI6IHtcbiAgICAgIFwiY2FtcGFpZ25zXCI6IFtdLFxuICAgICAgXCJzZXF1ZW5jZXNcIjogW11cbiAgIH0sXG4gICBcImNhbXBhaWduUnVsZUNvbmRpdGlvbnNcIjogW10sXG4gICBcImNhbXBhaWduUnVsZUFjdGlvbnNcIjogW10sXG4gICBcIm1hdGNoQW55Q29uZGl0aW9uc1wiOiB0cnVlLFxuICAgXCJlbmFibGVkXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYW1wYWlnblJ1bGVFbnRpdGllc1wiOiB7XG4gICAgICBcImNhbXBhaWduc1wiOiBbXSxcbiAgICAgIFwic2VxdWVuY2VzXCI6IFtdXG4gICB9LFxuICAgXCJjYW1wYWlnblJ1bGVDb25kaXRpb25zXCI6IFtdLFxuICAgXCJjYW1wYWlnblJ1bGVBY3Rpb25zXCI6IFtdLFxuICAgXCJtYXRjaEFueUNvbmRpdGlvbnNcIjogdHJ1ZSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wdXRDYW1wYWlnbnJ1bGVzQ2FtcGFpZ25ydWxlSWQgPSBmdW5jdGlvbiBwdXRDYW1wYWlnbnJ1bGVzQ2FtcGFpZ25ydWxlSWQoY2FtcGFpZ25SdWxlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NhbXBhaWducnVsZXMve2NhbXBhaWduUnVsZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduUnVsZUlkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25SdWxlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduUnVsZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduUnVsZUlkfScsIGNhbXBhaWduUnVsZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBDYW1wYWlnbiBSdWxlXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduUnVsZUlkIC0gQ2FtcGFpZ24gUnVsZSBJRFxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmRlbGV0ZUNhbXBhaWducnVsZXNDYW1wYWlnbnJ1bGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZUNhbXBhaWducnVsZXNDYW1wYWlnbnJ1bGVJZChjYW1wYWlnblJ1bGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25ydWxlcy97Y2FtcGFpZ25SdWxlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FtcGFpZ25SdWxlSWQgPT09IHVuZGVmaW5lZCB8fCBjYW1wYWlnblJ1bGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25SdWxlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FtcGFpZ25SdWxlSWR9JywgY2FtcGFpZ25SdWxlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgRGlhbGVyIHdyYXAgdXAgY29kZSBtYXBwaW5nLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRlZmF1bHRTZXRcIjogW10sXG4gICBcIm1hcHBpbmdcIjoge30sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldFdyYXB1cGNvZGVtYXBwaW5ncyA9IGZ1bmN0aW9uIGdldFdyYXB1cGNvZGVtYXBwaW5ncygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3dyYXB1cGNvZGVtYXBwaW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgRGlhbGVyIHdyYXAgdXAgY29kZSBtYXBwaW5nLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gd3JhcFVwQ29kZU1hcHBpbmdcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkZWZhdWx0U2V0XCI6IFtdLFxuICAgXCJtYXBwaW5nXCI6IHt9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGVmYXVsdFNldFwiOiBbXSxcbiAgIFwibWFwcGluZ1wiOiB7fSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0V3JhcHVwY29kZW1hcHBpbmdzID0gZnVuY3Rpb24gcHV0V3JhcHVwY29kZW1hcHBpbmdzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3dyYXB1cGNvZGVtYXBwaW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgZGlhbGVyIGNhbXBhaWduIHNjaGVkdWxlLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJpbnRlcnZhbHNcIjogW10sXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcImNhbXBhaWduXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldFNjaGVkdWxlc0NhbXBhaWduc0NhbXBhaWduSWQgPSBmdW5jdGlvbiBnZXRTY2hlZHVsZXNDYW1wYWlnbnNDYW1wYWlnbklkKGNhbXBhaWduSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3NjaGVkdWxlcy9jYW1wYWlnbnMve2NhbXBhaWduSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FtcGFpZ25JZCA9PT0gdW5kZWZpbmVkIHx8IGNhbXBhaWduSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FtcGFpZ25JZH0nLCBjYW1wYWlnbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBuZXcgY2FtcGFpZ24gc2NoZWR1bGUuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduSWQgLSBDYW1wYWlnbiBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ2FtcGFpZ25TY2hlZHVsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImludGVydmFsc1wiOiBbXSxcbiAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgIFwiY2FtcGFpZ25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImludGVydmFsc1wiOiBbXSxcbiAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgIFwiY2FtcGFpZ25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0U2NoZWR1bGVzQ2FtcGFpZ25zQ2FtcGFpZ25JZCA9IGZ1bmN0aW9uIHB1dFNjaGVkdWxlc0NhbXBhaWduc0NhbXBhaWduSWQoY2FtcGFpZ25JZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvc2NoZWR1bGVzL2NhbXBhaWducy97Y2FtcGFpZ25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYW1wYWlnbklkID09PSB1bmRlZmluZWQgfHwgY2FtcGFpZ25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FtcGFpZ25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYW1wYWlnbklkfScsIGNhbXBhaWduSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgZGlhbGVyIGNhbXBhaWduIHNjaGVkdWxlLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVTY2hlZHVsZXNDYW1wYWlnbnNDYW1wYWlnbklkID0gZnVuY3Rpb24gZGVsZXRlU2NoZWR1bGVzQ2FtcGFpZ25zQ2FtcGFpZ25JZChjYW1wYWlnbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9zY2hlZHVsZXMvY2FtcGFpZ25zL3tjYW1wYWlnbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduSWQgPT09IHVuZGVmaW5lZCB8fCBjYW1wYWlnbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYW1wYWlnbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduSWR9JywgY2FtcGFpZ25JZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgZGlhbGVyIGNvbnRhY3QgbGlzdC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdExpc3RJZCAtIENvbnRhY3RMaXN0IElEXG4gICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlSW1wb3J0U3RhdHVzIC0gSW1wb3J0IHN0YXR1c1xuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZVNpemUgLSBJbmNsdWRlIHNpemVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjb2x1bW5OYW1lc1wiOiBbXSxcbiAgIFwicGhvbmVDb2x1bW5zXCI6IFtdLFxuICAgXCJpbXBvcnRTdGF0dXNcIjoge1xuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0b3RhbFJlY29yZHNcIjogMCxcbiAgICAgIFwiY29tcGxldGVkUmVjb3Jkc1wiOiAwLFxuICAgICAgXCJwZXJjZW50Q29tcGxldGVcIjogMCxcbiAgICAgIFwiZmFpbHVyZVJlYXNvblwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmV2aWV3TW9kZUNvbHVtbk5hbWVcIjogXCJcIixcbiAgIFwicHJldmlld01vZGVBY2NlcHRlZFZhbHVlc1wiOiBbXSxcbiAgIFwic2l6ZVwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkID0gZnVuY3Rpb24gZ2V0Q29udGFjdGxpc3RzQ29udGFjdGxpc3RJZChjb250YWN0TGlzdElkLCBpbmNsdWRlSW1wb3J0U3RhdHVzLCBpbmNsdWRlU2l6ZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY29udGFjdGxpc3RzL3tjb250YWN0TGlzdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnRhY3RMaXN0SWQgPT09IHVuZGVmaW5lZCB8fCBjb250YWN0TGlzdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb250YWN0TGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnRhY3RMaXN0SWR9JywgY29udGFjdExpc3RJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaW5jbHVkZUltcG9ydFN0YXR1c1wiXSA9IGluY2x1ZGVJbXBvcnRTdGF0dXM7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaW5jbHVkZVNpemVcIl0gPSBpbmNsdWRlU2l6ZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBjb250YWN0IGxpc3QuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RMaXN0SWQgLSBDb250YWN0TGlzdCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ29udGFjdExpc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjb2x1bW5OYW1lc1wiOiBbXSxcbiAgIFwicGhvbmVDb2x1bW5zXCI6IFtdLFxuICAgXCJwcmV2aWV3TW9kZUNvbHVtbk5hbWVcIjogXCJcIixcbiAgIFwicHJldmlld01vZGVBY2NlcHRlZFZhbHVlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNvbHVtbk5hbWVzXCI6IFtdLFxuICAgXCJwaG9uZUNvbHVtbnNcIjogW10sXG4gICBcImltcG9ydFN0YXR1c1wiOiB7XG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRvdGFsUmVjb3Jkc1wiOiAwLFxuICAgICAgXCJjb21wbGV0ZWRSZWNvcmRzXCI6IDAsXG4gICAgICBcInBlcmNlbnRDb21wbGV0ZVwiOiAwLFxuICAgICAgXCJmYWlsdXJlUmVhc29uXCI6IFwiXCJcbiAgIH0sXG4gICBcInByZXZpZXdNb2RlQ29sdW1uTmFtZVwiOiBcIlwiLFxuICAgXCJwcmV2aWV3TW9kZUFjY2VwdGVkVmFsdWVzXCI6IFtdLFxuICAgXCJzaXplXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLnB1dENvbnRhY3RsaXN0c0NvbnRhY3RsaXN0SWQgPSBmdW5jdGlvbiBwdXRDb250YWN0bGlzdHNDb250YWN0bGlzdElkKGNvbnRhY3RMaXN0SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2NvbnRhY3RsaXN0cy97Y29udGFjdExpc3RJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb250YWN0TGlzdElkID09PSB1bmRlZmluZWQgfHwgY29udGFjdExpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udGFjdExpc3RJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb250YWN0TGlzdElkfScsIGNvbnRhY3RMaXN0SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgY29udGFjdCBsaXN0LlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0TGlzdElkIC0gQ29udGFjdExpc3QgSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVDb250YWN0bGlzdHNDb250YWN0bGlzdElkID0gZnVuY3Rpb24gZGVsZXRlQ29udGFjdGxpc3RzQ29udGFjdGxpc3RJZChjb250YWN0TGlzdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jb250YWN0bGlzdHMve2NvbnRhY3RMaXN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udGFjdExpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRhY3RMaXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnRhY3RMaXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udGFjdExpc3RJZH0nLCBjb250YWN0TGlzdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZGlhbGVyIGRuY0xpc3QgaW1wb3J0IHN0YXR1cy5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG5jTGlzdElkIC0gRG5jTGlzdCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ0b3RhbFJlY29yZHNcIjogMCxcbiAgIFwiY29tcGxldGVkUmVjb3Jkc1wiOiAwLFxuICAgXCJwZXJjZW50Q29tcGxldGVcIjogMCxcbiAgIFwiZmFpbHVyZVJlYXNvblwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0RG5jbGlzdHNEbmNsaXN0SWRJbXBvcnRzdGF0dXMgPSBmdW5jdGlvbiBnZXREbmNsaXN0c0RuY2xpc3RJZEltcG9ydHN0YXR1cyhkbmNMaXN0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL2RuY2xpc3RzL3tkbmNMaXN0SWR9L2ltcG9ydHN0YXR1cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRuY0xpc3RJZCA9PT0gdW5kZWZpbmVkIHx8IGRuY0xpc3RJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG5jTGlzdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RuY0xpc3RJZH0nLCBkbmNMaXN0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGF0dGVtcHQgbGltaXRzIGxpc3RcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVHlwZSAtIEZpbHRlciB0eXBlXG4gIEVxdWFscyxcbiAgUmVnRXgsXG4gIENvbnRhaW5zLFxuICBQcmVmaXgsXG4gIExlc3NUaGFuLFxuICBMZXNzVGhhbkVxdWFsVG8sXG4gIEdyZWF0ZXJUaGFuLFxuICBHcmVhdGVyVGhhbkVxdWFsVG8sXG4gIEJlZ2luc1dpdGgsXG4gIEVuZHNXaXRoLFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldEF0dGVtcHRsaW1pdHMgPSBmdW5jdGlvbiBnZXRBdHRlbXB0bGltaXRzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBmaWx0ZXJUeXBlLCBuYW1lLCBzb3J0QnksIHNvcnRPcmRlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvYXR0ZW1wdGxpbWl0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZmlsdGVyVHlwZVwiXSA9IGZpbHRlclR5cGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYXR0ZW1wdCBsaW1pdHNcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEF0dGVtcHRMaW1pdHNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJtYXhBdHRlbXB0c1BlckNvbnRhY3RcIjogMCxcbiAgIFwibWF4QXR0ZW1wdHNQZXJOdW1iZXJcIjogMCxcbiAgIFwidGltZVpvbmVJZFwiOiBcIlwiLFxuICAgXCJyZXNldFBlcmlvZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwibWF4QXR0ZW1wdHNQZXJDb250YWN0XCI6IDAsXG4gICBcIm1heEF0dGVtcHRzUGVyTnVtYmVyXCI6IDAsXG4gICBcInRpbWVab25lSWRcIjogXCJcIixcbiAgIFwicmVzZXRQZXJpb2RcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdEF0dGVtcHRsaW1pdHMgPSBmdW5jdGlvbiBwb3N0QXR0ZW1wdGxpbWl0cyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9hdHRlbXB0bGltaXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgZm9yIGEgbGlzdCBvZiBkaWFsZXIgc2VxdWVuY2Ugc2NoZWR1bGVzLlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcInZlcnNpb25cIjogMCxcbiAgXCJpbnRlcnZhbHNcIjogW10sXG4gIFwidGltZVpvbmVcIjogXCJcIixcbiAgXCJzZXF1ZW5jZVwiOiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG4gIH0sXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldFNjaGVkdWxlc1NlcXVlbmNlcyA9IGZ1bmN0aW9uIGdldFNjaGVkdWxlc1NlcXVlbmNlcygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3NjaGVkdWxlcy9zZXF1ZW5jZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBBZGQgcGhvbmUgbnVtYmVycyB0byBhIERpYWxlciBETkMgbGlzdC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRG5jID0gZnVuY3Rpb24gcG9zdENvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZERuYyhjb252ZXJzYXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L2RuYyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgYSBsaXN0IG9mIGRpYWxlciBjYW1wYWlnbnMuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclR5cGUgLSBGaWx0ZXIgdHlwZVxuICBFcXVhbHMsXG4gIFJlZ0V4LFxuICBDb250YWlucyxcbiAgUHJlZml4LFxuICBMZXNzVGhhbixcbiAgTGVzc1RoYW5FcXVhbFRvLFxuICBHcmVhdGVyVGhhbixcbiAgR3JlYXRlclRoYW5FcXVhbFRvLFxuICBCZWdpbnNXaXRoLFxuICBFbmRzV2l0aCxcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdExpc3RJZCAtIENvbnRhY3QgTGlzdCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkbmNMaXN0SWQgLSBETkMgbGlzdCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkaXN0cmlidXRpb25RdWV1ZUlkIC0gRGlzdHJpYnV0aW9uIHF1ZXVlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VHcm91cElkIC0gRWRnZSBncm91cCBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsQW5hbHlzaXNSZXNwb25zZVNldElkIC0gQ2FsbCBhbmFseXNpcyByZXNwb25zZSBzZXQgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5nZXRDYW1wYWlnbnMgPSBmdW5jdGlvbiBnZXRDYW1wYWlnbnMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIGZpbHRlclR5cGUsIG5hbWUsIGNvbnRhY3RMaXN0SWQsIGRuY0xpc3RJZCwgZGlzdHJpYnV0aW9uUXVldWVJZCwgZWRnZUdyb3VwSWQsIGNhbGxBbmFseXNpc1Jlc3BvbnNlU2V0SWQsIHNvcnRCeSwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpbHRlclR5cGVcIl0gPSBmaWx0ZXJUeXBlO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcImNvbnRhY3RMaXN0SWRcIl0gPSBjb250YWN0TGlzdElkO1xuICAgIHJlcXVlc3RRdWVyeVtcImRuY0xpc3RJZFwiXSA9IGRuY0xpc3RJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJkaXN0cmlidXRpb25RdWV1ZUlkXCJdID0gZGlzdHJpYnV0aW9uUXVldWVJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJlZGdlR3JvdXBJZFwiXSA9IGVkZ2VHcm91cElkO1xuICAgIHJlcXVlc3RRdWVyeVtcImNhbGxBbmFseXNpc1Jlc3BvbnNlU2V0SWRcIl0gPSBjYWxsQW5hbHlzaXNSZXNwb25zZVNldElkO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgY2FtcGFpZ24uXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDYW1wYWlnblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNvbnRhY3RMaXN0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRpYWxpbmdNb2RlXCI6IFwiXCIsXG4gICBcInNjcmlwdFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlZGdlR3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FtcGFpZ25TdGF0dXNcIjogXCJcIixcbiAgIFwicGhvbmVDb2x1bW5zXCI6IFtdLFxuICAgXCJhYmFuZG9uUmF0ZVwiOiB7fSxcbiAgIFwiZG5jTGlzdHNcIjogW10sXG4gICBcImNhbGxhYmxlVGltZVNldFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsQW5hbHlzaXNSZXNwb25zZVNldFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsZXJOYW1lXCI6IFwiXCIsXG4gICBcImNhbGxlckFkZHJlc3NcIjogXCJcIixcbiAgIFwib3V0Ym91bmRMaW5lQ291bnRcIjogMCxcbiAgIFwicnVsZVNldHNcIjogW10sXG4gICBcInNraXBQcmV2aWV3RGlzYWJsZWRcIjogdHJ1ZSxcbiAgIFwicHJldmlld1RpbWVPdXRTZWNvbmRzXCI6IDAsXG4gICBcImNvbnRhY3RTb3J0XCI6IHtcbiAgICAgIFwiZmllbGROYW1lXCI6IFwiXCIsXG4gICAgICBcImRpcmVjdGlvblwiOiBcIlwiLFxuICAgICAgXCJudW1lcmljXCI6IHRydWVcbiAgIH0sXG4gICBcIm5vQW5zd2VyVGltZW91dFwiOiAwLFxuICAgXCJjYWxsQW5hbHlzaXNMYW5ndWFnZVwiOiBcIlwiLFxuICAgXCJwcmlvcml0eVwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGlhbGluZ01vZGVcIjogXCJcIixcbiAgIFwic2NyaXB0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYW1wYWlnblN0YXR1c1wiOiBcIlwiLFxuICAgXCJwaG9uZUNvbHVtbnNcIjogW10sXG4gICBcImFiYW5kb25SYXRlXCI6IHt9LFxuICAgXCJkbmNMaXN0c1wiOiBbXSxcbiAgIFwiY2FsbGFibGVUaW1lU2V0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbGxBbmFseXNpc1Jlc3BvbnNlU2V0XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVycm9yc1wiOiBbXSxcbiAgIFwiY2FsbGVyTmFtZVwiOiBcIlwiLFxuICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcIm91dGJvdW5kTGluZUNvdW50XCI6IDAsXG4gICBcInJ1bGVTZXRzXCI6IFtdLFxuICAgXCJza2lwUHJldmlld0Rpc2FibGVkXCI6IHRydWUsXG4gICBcInByZXZpZXdUaW1lT3V0U2Vjb25kc1wiOiAwLFxuICAgXCJjb250YWN0U29ydFwiOiB7XG4gICAgICBcImZpZWxkTmFtZVwiOiBcIlwiLFxuICAgICAgXCJkaXJlY3Rpb25cIjogXCJcIixcbiAgICAgIFwibnVtZXJpY1wiOiB0cnVlXG4gICB9LFxuICAgXCJub0Fuc3dlclRpbWVvdXRcIjogMCxcbiAgIFwiY2FsbEFuYWx5c2lzTGFuZ3VhZ2VcIjogXCJcIixcbiAgIFwicHJpb3JpdHlcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucG9zdENhbXBhaWducyA9IGZ1bmN0aW9uIHBvc3RDYW1wYWlnbnMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgUnVsZSBTZXQgYnkgSUQuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVTZXRJZCAtIFJ1bGUgU2V0IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicnVsZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldFJ1bGVzZXRzUnVsZXNldElkID0gZnVuY3Rpb24gZ2V0UnVsZXNldHNSdWxlc2V0SWQocnVsZVNldElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9ydWxlc2V0cy97cnVsZVNldElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJ1bGVTZXRJZCA9PT0gdW5kZWZpbmVkIHx8IHJ1bGVTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcnVsZVNldElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3J1bGVTZXRJZH0nLCBydWxlU2V0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIFJ1bGVTZXQuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVTZXRJZCAtIFJ1bGUgU2V0IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSdWxlU2V0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY29udGFjdExpc3RcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicnVsZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjb250YWN0TGlzdFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJydWxlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0UnVsZXNldHNSdWxlc2V0SWQgPSBmdW5jdGlvbiBwdXRSdWxlc2V0c1J1bGVzZXRJZChydWxlU2V0SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL291dGJvdW5kL3J1bGVzZXRzL3tydWxlU2V0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocnVsZVNldElkID09PSB1bmRlZmluZWQgfHwgcnVsZVNldElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBydWxlU2V0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cnVsZVNldElkfScsIHJ1bGVTZXRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSBSdWxlIHNldC5cbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZVNldElkIC0gUnVsZSBTZXQgSURcbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5kZWxldGVSdWxlc2V0c1J1bGVzZXRJZCA9IGZ1bmN0aW9uIGRlbGV0ZVJ1bGVzZXRzUnVsZXNldElkKHJ1bGVTZXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvcnVsZXNldHMve3J1bGVTZXRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihydWxlU2V0SWQgPT09IHVuZGVmaW5lZCB8fCBydWxlU2V0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJ1bGVTZXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tydWxlU2V0SWR9JywgcnVsZVNldElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY2FsbGFibGUgdGltZSBzZXRcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGFibGVUaW1lU2V0SWQgLSBDYWxsYWJsZSBUaW1lIFNldCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNhbGxhYmxlVGltZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENhbGxhYmxldGltZXNldHNDYWxsYWJsZXRpbWVzZXRJZCA9IGZ1bmN0aW9uIGdldENhbGxhYmxldGltZXNldHNDYWxsYWJsZXRpbWVzZXRJZChjYWxsYWJsZVRpbWVTZXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FsbGFibGV0aW1lc2V0cy97Y2FsbGFibGVUaW1lU2V0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGFibGVUaW1lU2V0SWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsYWJsZVRpbWVTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbGFibGVUaW1lU2V0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGFibGVUaW1lU2V0SWR9JywgY2FsbGFibGVUaW1lU2V0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBjYWxsYWJsZSB0aW1lIHNldFxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYWJsZVRpbWVTZXRJZCAtIENhbGxhYmxlIFRpbWUgU2V0IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBEaWFsZXJDYWxsYWJsZVRpbWVTZXRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYWxsYWJsZVRpbWVzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY2FsbGFibGVUaW1lc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUucHV0Q2FsbGFibGV0aW1lc2V0c0NhbGxhYmxldGltZXNldElkID0gZnVuY3Rpb24gcHV0Q2FsbGFibGV0aW1lc2V0c0NhbGxhYmxldGltZXNldElkKGNhbGxhYmxlVGltZVNldElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYWxsYWJsZXRpbWVzZXRzL3tjYWxsYWJsZVRpbWVTZXRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxsYWJsZVRpbWVTZXRJZCA9PT0gdW5kZWZpbmVkIHx8IGNhbGxhYmxlVGltZVNldElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxsYWJsZVRpbWVTZXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxsYWJsZVRpbWVTZXRJZH0nLCBjYWxsYWJsZVRpbWVTZXRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgY2FsbGFibGUgdGltZSBzZXRcbiAgKiBAbWVtYmVyT2YgT3V0Ym91bmRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGFibGVUaW1lU2V0SWQgLSBDYWxsYWJsZSBUaW1lIFNldCBJRFxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmRlbGV0ZUNhbGxhYmxldGltZXNldHNDYWxsYWJsZXRpbWVzZXRJZCA9IGZ1bmN0aW9uIGRlbGV0ZUNhbGxhYmxldGltZXNldHNDYWxsYWJsZXRpbWVzZXRJZChjYWxsYWJsZVRpbWVTZXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FsbGFibGV0aW1lc2V0cy97Y2FsbGFibGVUaW1lU2V0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FsbGFibGVUaW1lU2V0SWQgPT09IHVuZGVmaW5lZCB8fCBjYWxsYWJsZVRpbWVTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsbGFibGVUaW1lU2V0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FsbGFibGVUaW1lU2V0SWR9JywgY2FsbGFibGVUaW1lU2V0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBzdGF0aXN0aWNzIGFib3V0IGEgRGlhbGVyIENhbXBhaWduXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbXBhaWduSWQgLSBDYW1wYWlnbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjb250YWN0UmF0ZVwiOiB7XG4gICAgICBcImF0dGVtcHRzXCI6IDAsXG4gICAgICBcImNvbm5lY3RzXCI6IDAsXG4gICAgICBcImNvbm5lY3RSYXRpb1wiOiB7fVxuICAgfSxcbiAgIFwiaWRsZUFnZW50c1wiOiAwLFxuICAgXCJhZGp1c3RlZENhbGxzUGVyQWdlbnRcIjoge30sXG4gICBcIm91dHN0YW5kaW5nQ2FsbHNcIjogMFxufVxuICAqL1xuT3V0Ym91bmRBcGkucHJvdG90eXBlLmdldENhbXBhaWduc0NhbXBhaWduSWRTdGF0cyA9IGZ1bmN0aW9uIGdldENhbXBhaWduc0NhbXBhaWduSWRTdGF0cyhjYW1wYWlnbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vdXRib3VuZC9jYW1wYWlnbnMve2NhbXBhaWduSWR9L3N0YXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2FtcGFpZ25JZCA9PT0gdW5kZWZpbmVkIHx8IGNhbXBhaWduSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbXBhaWduSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2FtcGFpZ25JZH0nLCBjYW1wYWlnbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgYSBsaXN0IG9mIGRpYWxlciBjYW1wYWlnbiBzY2hlZHVsZXMuXG4gICogQG1lbWJlck9mIE91dGJvdW5kQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCIsXG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gIFwidmVyc2lvblwiOiAwLFxuICBcImludGVydmFsc1wiOiBbXSxcbiAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICBcImNhbXBhaWduXCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5PdXRib3VuZEFwaS5wcm90b3R5cGUuZ2V0U2NoZWR1bGVzQ2FtcGFpZ25zID0gZnVuY3Rpb24gZ2V0U2NoZWR1bGVzQ2FtcGFpZ25zKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvc2NoZWR1bGVzL2NhbXBhaWducyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNjaGVkdWxlIGEgQ2FsbGJhY2sgZm9yIGEgRGlhbGVyIENhbXBhaWduIChEZXByZWNhdGVkKVxuICAqIEBkZXNjcmlwdGlvbiBUaGlzIGVuZHBvaW50IGlzIGRlcHJlY2F0ZWQgYW5kIG1heSBoYXZlIHVuZXhwZWN0ZWQgcmVzdWx0cy4gUGxlYXNlIHVzZSBcIi9jb252ZXJzYXRpb25zL3tjb252ZXJzYXRpb25JZH0vcGFydGljaXBhbnRzL3twYXJ0aWNpcGFudElkfS9jYWxsYmFja3MgaW5zdGVhZC5cIlxuICAqIEBtZW1iZXJPZiBPdXRib3VuZEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYW1wYWlnbklkIC0gQ2FtcGFpZ24gSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENvbnRhY3RDYWxsYmFja1JlcXVlc3RcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNhbXBhaWduSWRcIjogXCJcIixcbiAgIFwiY29udGFjdExpc3RJZFwiOiBcIlwiLFxuICAgXCJjb250YWN0SWRcIjogXCJcIixcbiAgIFwicGhvbmVDb2x1bW5cIjogXCJcIixcbiAgIFwic2NoZWR1bGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjYW1wYWlnbklkXCI6IFwiXCIsXG4gICBcImNvbnRhY3RMaXN0SWRcIjogXCJcIixcbiAgIFwiY29udGFjdElkXCI6IFwiXCIsXG4gICBcInBob25lQ29sdW1uXCI6IFwiXCIsXG4gICBcInNjaGVkdWxlXCI6IFwiXCJcbn1cbiAgKi9cbk91dGJvdW5kQXBpLnByb3RvdHlwZS5wb3N0Q2FtcGFpZ25zQ2FtcGFpZ25JZENhbGxiYWNrU2NoZWR1bGUgPSBmdW5jdGlvbiBwb3N0Q2FtcGFpZ25zQ2FtcGFpZ25JZENhbGxiYWNrU2NoZWR1bGUoY2FtcGFpZ25JZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3V0Ym91bmQvY2FtcGFpZ25zL3tjYW1wYWlnbklkfS9jYWxsYmFjay9zY2hlZHVsZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbXBhaWduSWQgPT09IHVuZGVmaW5lZCB8fCBjYW1wYWlnbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYW1wYWlnbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbXBhaWduSWR9JywgY2FtcGFpZ25JZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IE91dGJvdW5kQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgUHJlc2VuY2VBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uUHJlc2VuY2VBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gUHJlc2VuY2VBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFByZXNlbmNlQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IFByZXNlbmNlQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmVzZW5jZUFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgUHJlc2VuY2UgRGVmaW5pdGlvblxuICAqIEBtZW1iZXJPZiBQcmVzZW5jZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVzZW5jZUlkIC0gT3JnYW5pemF0aW9uIFByZXNlbmNlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGxvY2FsZUNvZGUgLSBUaGUgbG9jYWxlIGNvZGUgdG8gZmV0Y2ggZm9yIHRoZSBwcmVzZW5jZSBkZWZpbml0aW9uLiBVc2UgQUxMIHRvIGZldGNoIGV2ZXJ5dGhpbmcuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibGFuZ3VhZ2VMYWJlbHNcIjoge30sXG4gICBcInN5c3RlbVByZXNlbmNlXCI6IFwiXCIsXG4gICBcImRlYWN0aXZhdGVkXCI6IHRydWUsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUHJlc2VuY2VBcGkucHJvdG90eXBlLmdldFByZXNlbmNlSWQgPSBmdW5jdGlvbiBnZXRQcmVzZW5jZUlkKHByZXNlbmNlSWQsIGxvY2FsZUNvZGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ByZXNlbmNlZGVmaW5pdGlvbnMve3ByZXNlbmNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocHJlc2VuY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHByZXNlbmNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHByZXNlbmNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cHJlc2VuY2VJZH0nLCBwcmVzZW5jZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJsb2NhbGVDb2RlXCJdID0gbG9jYWxlQ29kZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBQcmVzZW5jZSBEZWZpbml0aW9uXG4gICogQG1lbWJlck9mIFByZXNlbmNlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHByZXNlbmNlSWQgLSBPcmdhbml6YXRpb24gUHJlc2VuY2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRoZSBPcmdhbml6YXRpb25QcmVzZW5jZSB0byB1cGRhdGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibGFuZ3VhZ2VMYWJlbHNcIjoge30sXG4gICBcInN5c3RlbVByZXNlbmNlXCI6IFwiXCIsXG4gICBcImRlYWN0aXZhdGVkXCI6IHRydWUsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJsYW5ndWFnZUxhYmVsc1wiOiB7fSxcbiAgIFwic3lzdGVtUHJlc2VuY2VcIjogXCJcIixcbiAgIFwiZGVhY3RpdmF0ZWRcIjogdHJ1ZSxcbiAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5QcmVzZW5jZUFwaS5wcm90b3R5cGUucHV0UHJlc2VuY2VJZCA9IGZ1bmN0aW9uIHB1dFByZXNlbmNlSWQocHJlc2VuY2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcHJlc2VuY2VkZWZpbml0aW9ucy97cHJlc2VuY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihwcmVzZW5jZUlkID09PSB1bmRlZmluZWQgfHwgcHJlc2VuY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcHJlc2VuY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twcmVzZW5jZUlkfScsIHByZXNlbmNlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgUHJlc2VuY2UgRGVmaW5pdGlvblxuICAqIEBtZW1iZXJPZiBQcmVzZW5jZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVzZW5jZUlkIC0gT3JnYW5pemF0aW9uIFByZXNlbmNlIElEXG4gICovXG5QcmVzZW5jZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJlc2VuY2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZVByZXNlbmNlSWQocHJlc2VuY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcHJlc2VuY2VkZWZpbml0aW9ucy97cHJlc2VuY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihwcmVzZW5jZUlkID09PSB1bmRlZmluZWQgfHwgcHJlc2VuY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcHJlc2VuY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twcmVzZW5jZUlkfScsIHByZXNlbmNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIncyBQcmVzZW5jZVxuICAqIEBtZW1iZXJPZiBQcmVzZW5jZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSB1c2VyIElkXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZUlkIC0gU291cmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic291cmNlXCI6IFwiXCIsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwicHJlc2VuY2VEZWZpbml0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJsYW5ndWFnZUxhYmVsc1wiOiB7fSxcbiAgICAgIFwic3lzdGVtUHJlc2VuY2VcIjogXCJcIixcbiAgICAgIFwiZGVhY3RpdmF0ZWRcIjogdHJ1ZSxcbiAgICAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgICAgXCJjcmVhdGVkQnlcIjoge30sXG4gICAgICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjoge30sXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm1lc3NhZ2VcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUHJlc2VuY2VBcGkucHJvdG90eXBlLmdldFVzZXJJZFByZXNlbmNlc1NvdXJjZUlkID0gZnVuY3Rpb24gZ2V0VXNlcklkUHJlc2VuY2VzU291cmNlSWQodXNlcklkLCBzb3VyY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcHJlc2VuY2VzL3tzb3VyY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihzb3VyY2VJZCA9PT0gdW5kZWZpbmVkIHx8IHNvdXJjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzb3VyY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzb3VyY2VJZH0nLCBzb3VyY2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUGF0Y2ggYSB1c2VyJ3MgUHJlc2VuY2VcbiAgKiBAZGVzY3JpcHRpb24gVGhlIHByZXNlbmNlIG9iamVjdCBjYW4gYmUgcGF0Y2hlZCBvbmUgb2YgdGhyZWUgd2F5cy4gT3B0aW9uIDE6IFNldCB0aGUgJ3ByaW1hcnknIHByb3BlcnR5IHRvIHRydWUuIFRoaXMgd2lsbCBzZXQgdGhlICdzb3VyY2UnIGRlZmluZWQgaW4gdGhlIHBhdGggYXMgdGhlIHVzZXIncyBwcmltYXJ5IHByZXNlbmNlIHNvdXJjZS4gT3B0aW9uIDI6IFByb3ZpZGUgdGhlIHByZXNlbmNlRGVmaW5pdGlvbiB2YWx1ZS4gVGhlICdpZCcgaXMgdGhlIG9ubHkgdmFsdWUgcmVxdWlyZWQgd2l0aGluIHRoZSBwcmVzZW5jZURlZmluaXRpb24uIE9wdGlvbiAzOiBQcm92aWRlIHRoZSBtZXNzYWdlIHZhbHVlLiBPcHRpb24gMSBjYW4gYmUgY29tYmluZWQgd2l0aCBPcHRpb24gMiBhbmQvb3IgT3B0aW9uIDMuXG4gICogQG1lbWJlck9mIFByZXNlbmNlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIHVzZXIgSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlSWQgLSBTb3VyY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVzZXIgcHJlc2VuY2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic291cmNlXCI6IFwiXCIsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwicHJlc2VuY2VEZWZpbml0aW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJsYW5ndWFnZUxhYmVsc1wiOiB7fSxcbiAgICAgIFwic3lzdGVtUHJlc2VuY2VcIjogXCJcIixcbiAgICAgIFwiZGVhY3RpdmF0ZWRcIjogdHJ1ZSxcbiAgICAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgICAgXCJjcmVhdGVkQnlcIjoge30sXG4gICAgICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjoge30sXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiXG4gICB9LFxuICAgXCJtZXNzYWdlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwic291cmNlXCI6IFwiXCIsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwicHJlc2VuY2VEZWZpbml0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJsYW5ndWFnZUxhYmVsc1wiOiB7fSxcbiAgICAgIFwic3lzdGVtUHJlc2VuY2VcIjogXCJcIixcbiAgICAgIFwiZGVhY3RpdmF0ZWRcIjogdHJ1ZSxcbiAgICAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgICAgXCJjcmVhdGVkQnlcIjoge30sXG4gICAgICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjoge30sXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm1lc3NhZ2VcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUHJlc2VuY2VBcGkucHJvdG90eXBlLnBhdGNoVXNlcklkUHJlc2VuY2VzU291cmNlSWQgPSBmdW5jdGlvbiBwYXRjaFVzZXJJZFByZXNlbmNlc1NvdXJjZUlkKHVzZXJJZCwgc291cmNlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3ByZXNlbmNlcy97c291cmNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoc291cmNlSWQgPT09IHVuZGVmaW5lZCB8fCBzb3VyY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc291cmNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c291cmNlSWR9Jywgc291cmNlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW4gT3JnYW5pemF0aW9uJ3MgbGlzdCBvZiBQcmVzZW5jZSBEZWZpbml0aW9uc1xuICAqIEBtZW1iZXJPZiBQcmVzZW5jZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb0RlbGV0ZWQgLSBEZWxldGVkIHF1ZXJ5IGNhbiBiZSBUUlVFLCBGQUxTRSBvciBBTExcbiAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxlQ29kZSAtIFRoZSBsb2NhbGUgY29kZSB0byBmZXRjaCBmb3IgZWFjaCBwcmVzZW5jZSBkZWZpbml0aW9uLiBVc2UgQUxMIHRvIGZldGNoIGV2ZXJ5dGhpbmcuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5QcmVzZW5jZUFwaS5wcm90b3R5cGUuZ2V0UHJlc2VuY2VkZWZpbml0aW9ucyA9IGZ1bmN0aW9uIGdldFByZXNlbmNlZGVmaW5pdGlvbnMocGFnZU51bWJlciwgcGFnZVNpemUsIGRvRGVsZXRlZCwgbG9jYWxlQ29kZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcHJlc2VuY2VkZWZpbml0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZGVsZXRlZFwiXSA9IGRvRGVsZXRlZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJsb2NhbGVDb2RlXCJdID0gbG9jYWxlQ29kZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBQcmVzZW5jZSBEZWZpbml0aW9uXG4gICogQG1lbWJlck9mIFByZXNlbmNlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUaGUgUHJlc2VuY2UgRGVmaW5pdGlvbiB0byBjcmVhdGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibGFuZ3VhZ2VMYWJlbHNcIjoge30sXG4gICBcInN5c3RlbVByZXNlbmNlXCI6IFwiXCIsXG4gICBcImRlYWN0aXZhdGVkXCI6IHRydWUsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJsYW5ndWFnZUxhYmVsc1wiOiB7fSxcbiAgIFwic3lzdGVtUHJlc2VuY2VcIjogXCJcIixcbiAgIFwiZGVhY3RpdmF0ZWRcIjogdHJ1ZSxcbiAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5QcmVzZW5jZUFwaS5wcm90b3R5cGUucG9zdFByZXNlbmNlZGVmaW5pdGlvbnMgPSBmdW5jdGlvbiBwb3N0UHJlc2VuY2VkZWZpbml0aW9ucyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9wcmVzZW5jZWRlZmluaXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIFN5c3RlbVByZXNlbmNlc1xuICAqIEBtZW1iZXJPZiBQcmVzZW5jZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5QcmVzZW5jZUFwaS5wcm90b3R5cGUuZ2V0U3lzdGVtcHJlc2VuY2VzID0gZnVuY3Rpb24gZ2V0U3lzdGVtcHJlc2VuY2VzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc3lzdGVtcHJlc2VuY2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFByZXNlbmNlQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgUXVhbGl0eUFwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5RdWFsaXR5QXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIFF1YWxpdHlBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFF1YWxpdHlBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVhbGl0eUFwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUXVhbGl0eUFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGFuIGV2YWx1YXRpb24gZm9ybVxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGZvcm1JZCAtIEZvcm0gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7XG4gICAgICBcImVudGl0aWVzXCI6IFtdLFxuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICAgICBcInRvdGFsXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgICAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgICAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICAgICBcInBhZ2VDb3VudFwiOiAwXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmdldEZvcm1zRm9ybUlkID0gZnVuY3Rpb24gZ2V0Rm9ybXNGb3JtSWQoZm9ybUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2Zvcm1zL3tmb3JtSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZm9ybUlkID09PSB1bmRlZmluZWQgfHwgZm9ybUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBmb3JtSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Zm9ybUlkfScsIGZvcm1JZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGFuIGV2YWx1YXRpb24gZm9ybS5cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtSWQgLSBGb3JtIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBFdmFsdWF0aW9uIGZvcm1cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge1xuICAgICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgICAgIFwicGFnZVNpemVcIjogMCxcbiAgICAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgICAgXCJ0b3RhbFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICAgICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICAgICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICAgICBcIm5leHRVcmlcIjogXCJcIixcbiAgICAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwYWdlQ291bnRcIjogMFxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHtcbiAgICAgIFwiZW50aXRpZXNcIjogW10sXG4gICAgICBcInBhZ2VTaXplXCI6IDAsXG4gICAgICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgICAgIFwidG90YWxcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICAgICBcImxhc3RVcmlcIjogXCJcIixcbiAgICAgIFwicGFnZUNvdW50XCI6IDBcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUucHV0Rm9ybXNGb3JtSWQgPSBmdW5jdGlvbiBwdXRGb3Jtc0Zvcm1JZChmb3JtSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvZm9ybXMve2Zvcm1JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihmb3JtSWQgPT09IHVuZGVmaW5lZCB8fCBmb3JtSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGZvcm1JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tmb3JtSWR9JywgZm9ybUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbiBldmFsdWF0aW9uIGZvcm0uXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIC0gRm9ybSBJRFxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZGVsZXRlRm9ybXNGb3JtSWQgPSBmdW5jdGlvbiBkZWxldGVGb3Jtc0Zvcm1JZChmb3JtSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvZm9ybXMve2Zvcm1JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihmb3JtSWQgPT09IHVuZGVmaW5lZCB8fCBmb3JtSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGZvcm1JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tmb3JtSWR9JywgZm9ybUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZXRyaWV2ZSB0aGUgc3BvdGFiaWxpdHkgc3RhdGlzdGljXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEtleXdvcmQgU2V0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwXG4gICB9LFxuICAgXCJxdWV1ZXNcIjogW10sXG4gICBcImxhbmd1YWdlXCI6IFwiXCIsXG4gICBcImFnZW50c1wiOiBbXSxcbiAgIFwia2V5d29yZHNcIjogW10sXG4gICBcInBhcnRpY2lwYW50UHVycG9zZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwiYnVsbHNleWVcIjoge30sXG4gICAgICBcImFjd1NldHRpbmdzXCI6IHt9LFxuICAgICAgXCJza2lsbEV2YWx1YXRpb25NZXRob2RcIjogXCJcIixcbiAgICAgIFwicXVldWVGbG93XCI6IHt9LFxuICAgICAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGxpbmdQYXJ0eU51bWJlclwiOiBcIlwiLFxuICAgICAgXCJvdXRib3VuZEVtYWlsQWRkcmVzc1wiOiB7fSxcbiAgICAgIFwibWVtYmVyQ291bnRcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJxdWV1ZXNcIjogW10sXG4gICBcImxhbmd1YWdlXCI6IFwiXCIsXG4gICBcImFnZW50c1wiOiBbXSxcbiAgIFwia2V5d29yZHNcIjogW10sXG4gICBcInBhcnRpY2lwYW50UHVycG9zZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUucG9zdFNwb3RhYmlsaXR5ID0gZnVuY3Rpb24gcG9zdFNwb3RhYmlsaXR5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvc3BvdGFiaWxpdHknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBrZXl3b3JkU2V0IGJ5IGlkLlxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGtleXdvcmRTZXRJZCAtIEtleXdvcmRTZXQgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwiYnVsbHNleWVcIjoge30sXG4gICAgICBcImFjd1NldHRpbmdzXCI6IHt9LFxuICAgICAgXCJza2lsbEV2YWx1YXRpb25NZXRob2RcIjogXCJcIixcbiAgICAgIFwicXVldWVGbG93XCI6IHt9LFxuICAgICAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGxpbmdQYXJ0eU51bWJlclwiOiBcIlwiLFxuICAgICAgXCJvdXRib3VuZEVtYWlsQWRkcmVzc1wiOiB7fSxcbiAgICAgIFwibWVtYmVyQ291bnRcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJxdWV1ZXNcIjogW10sXG4gICBcImxhbmd1YWdlXCI6IFwiXCIsXG4gICBcImFnZW50c1wiOiBbXSxcbiAgIFwia2V5d29yZHNcIjogW10sXG4gICBcInBhcnRpY2lwYW50UHVycG9zZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZ2V0S2V5d29yZHNldHNLZXl3b3Jkc2V0SWQgPSBmdW5jdGlvbiBnZXRLZXl3b3Jkc2V0c0tleXdvcmRzZXRJZChrZXl3b3JkU2V0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkva2V5d29yZHNldHMve2tleXdvcmRTZXRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihrZXl3b3JkU2V0SWQgPT09IHVuZGVmaW5lZCB8fCBrZXl3b3JkU2V0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGtleXdvcmRTZXRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3trZXl3b3JkU2V0SWR9Jywga2V5d29yZFNldElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBrZXl3b3JkU2V0IHRvIHRoZSBzcGVjaWZpZWQga2V5d29yZFNldCB2aWEgUFVULlxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGtleXdvcmRTZXRJZCAtIEtleXdvcmRTZXQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIGtleXdvcmRTZXRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gICAgICBcImJ1bGxzZXllXCI6IHt9LFxuICAgICAgXCJhY3dTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlRmxvd1wiOiB7fSxcbiAgICAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgICAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge30sXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDBcbiAgIH0sXG4gICBcInF1ZXVlc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VcIjogXCJcIixcbiAgIFwiYWdlbnRzXCI6IFtdLFxuICAgXCJrZXl3b3Jkc1wiOiBbXSxcbiAgIFwicGFydGljaXBhbnRQdXJwb3Nlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInF1ZXVlc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VcIjogXCJcIixcbiAgIFwiYWdlbnRzXCI6IFtdLFxuICAgXCJrZXl3b3Jkc1wiOiBbXSxcbiAgIFwicGFydGljaXBhbnRQdXJwb3Nlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wdXRLZXl3b3Jkc2V0c0tleXdvcmRzZXRJZCA9IGZ1bmN0aW9uIHB1dEtleXdvcmRzZXRzS2V5d29yZHNldElkKGtleXdvcmRTZXRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcXVhbGl0eS9rZXl3b3Jkc2V0cy97a2V5d29yZFNldElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGtleXdvcmRTZXRJZCA9PT0gdW5kZWZpbmVkIHx8IGtleXdvcmRTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjoga2V5d29yZFNldElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2tleXdvcmRTZXRJZH0nLCBrZXl3b3JkU2V0SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEga2V5d29yZFNldCBieSBpZC5cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBrZXl3b3JkU2V0SWQgLSBLZXl3b3JkU2V0IElEXG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5kZWxldGVLZXl3b3Jkc2V0c0tleXdvcmRzZXRJZCA9IGZ1bmN0aW9uIGRlbGV0ZUtleXdvcmRzZXRzS2V5d29yZHNldElkKGtleXdvcmRTZXRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcXVhbGl0eS9rZXl3b3Jkc2V0cy97a2V5d29yZFNldElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGtleXdvcmRTZXRJZCA9PT0gdW5kZWZpbmVkIHx8IGtleXdvcmRTZXRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjoga2V5d29yZFNldElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2tleXdvcmRTZXRJZH0nLCBrZXl3b3JkU2V0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldHMgYSBsaXN0IG9mIEFnZW50IEFjdGl2aXRpZXNcbiAgKiBAZGVzY3JpcHRpb24gSW5jbHVkaW5nIHRoZSBudW1iZXIgb2YgZXZhbHVhdGlvbnMgYW5kIGF2ZXJhZ2UgZXZhbHVhdGlvbiBzY29yZVxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFRoZSB0b3RhbCBwYWdlIHNpemUgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gVGhlIHBhZ2UgbnVtYmVyIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCB0byBzb3J0IGJ5XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgYnkgZXhwYW5kIGxpc3RcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dFBhZ2UgLSBuZXh0IHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gcHJldmlvdXNQYWdlIC0gUHJldmlvdXMgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7c3RyaW5nfSBzdGFydFRpbWUgLSBTdGFydCB0aW1lIG9mIGFnZW50IGFjdGl2aXR5LiBEYXRlIHRpbWUgaXMgcmVwcmVzZW50ZWQgYXMgYW4gSVNPLTg2MDEgc3RyaW5nLiBGb3IgZXhhbXBsZTogeXl5eS1NTS1kZFRISDptbTpzcy5TU1NaXG4gICogQHBhcmFtIHtzdHJpbmd9IGVuZFRpbWUgLSBFbmQgdGltZSBvZiBhZ2VudCBhY3Rpdml0eS4gRGF0ZSB0aW1lIGlzIHJlcHJlc2VudGVkIGFzIGFuIElTTy04NjAxIHN0cmluZy4gRm9yIGV4YW1wbGU6IHl5eXktTU0tZGRUSEg6bW06c3MuU1NTWlxuICAqIEBwYXJhbSB7YXJyYXl9IGFnZW50VXNlcklkIC0gdXNlciBpZCBvZiBhZ2VudCByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXZhbHVhdG9yVXNlcklkIC0gdXNlciBpZCBvZiB0aGUgZXZhbHVhdG9yXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBuYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwIC0gZ3JvdXAgaWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmdldEFnZW50c0FjdGl2aXR5ID0gZnVuY3Rpb24gZ2V0QWdlbnRzQWN0aXZpdHkocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgZXhwYW5kLCBuZXh0UGFnZSwgcHJldmlvdXNQYWdlLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFnZW50VXNlcklkLCBldmFsdWF0b3JVc2VySWQsIG5hbWUsIGdyb3VwKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2FnZW50cy9hY3Rpdml0eSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzdGFydFRpbWVcIl0gPSBzdGFydFRpbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZW5kVGltZVwiXSA9IGVuZFRpbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiYWdlbnRVc2VySWRcIl0gPSBhZ2VudFVzZXJJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJldmFsdWF0b3JVc2VySWRcIl0gPSBldmFsdWF0b3JVc2VySWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZ3JvdXBcIl0gPSBncm91cDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYXVkaXRzIGZvciBjb252ZXJzYXRpb24gb3IgcmVjb3JkaW5nXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gVGhlIHRvdGFsIHBhZ2Ugc2l6ZSByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBUaGUgcGFnZSBudW1iZXIgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIHZhcmlhYmxlIG5hbWUgcmVxdWVzdGVkIHRvIHNvcnQgYnlcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCBieSBleHBhbmQgbGlzdFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0UGFnZSAtIG5leHQgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7c3RyaW5nfSBwcmV2aW91c1BhZ2UgLSBQcmV2aW91cyBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IHJlY29yZGluZ0lkIC0gaWQgb2YgdGhlIHJlY29yZGluZ1xuICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRpdHlUeXBlIC0gZW50aXR5IHR5cGUgb3B0aW9uczogUmVjb3JkaW5nLCBDYWxpYnJhdGlvbiwgRXZhbHVhdGlvbiwgQW5ub3RhdGlvblxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkQXVkaXRzID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkQXVkaXRzKGNvbnZlcnNhdGlvbklkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBleHBhbmQsIG5leHRQYWdlLCBwcmV2aW91c1BhZ2UsIHJlY29yZGluZ0lkLCBlbnRpdHlUeXBlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9hdWRpdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5leHRQYWdlXCJdID0gbmV4dFBhZ2U7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJldmlvdXNQYWdlXCJdID0gcHJldmlvdXNQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInJlY29yZGluZ0lkXCJdID0gcmVjb3JkaW5nSWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZW50aXR5VHlwZVwiXSA9IGVudGl0eVR5cGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhbGwgdGhlIHJldmlzaW9ucyBmb3IgYSBzcGVjaWZpYyBldmFsdWF0aW9uLlxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGZvcm1JZCAtIEZvcm0gSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmdldEZvcm1zRm9ybUlkVmVyc2lvbnMgPSBmdW5jdGlvbiBnZXRGb3Jtc0Zvcm1JZFZlcnNpb25zKGZvcm1JZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvZm9ybXMve2Zvcm1JZH0vdmVyc2lvbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihmb3JtSWQgPT09IHVuZGVmaW5lZCB8fCBmb3JtSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGZvcm1JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tmb3JtSWR9JywgZm9ybUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBldmFsdWF0aW9uXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBjb252ZXJzYXRpb25JZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBldmFsdWF0aW9uSWQgLSBldmFsdWF0aW9uSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXhwYW5kIC0gYWdlbnQsIGV2YWx1YXRvciwgZXZhbHVhdGlvbkZvcm1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjogXCJcIixcbiAgICAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICAgICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImV2YWx1YXRpb25Gb3JtXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgICAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICAgICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsaWJyYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGlicmF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICAgICBcImhpZ2hTY29yZVwiOiAwLFxuICAgICAgXCJsb3dTY29yZVwiOiAwLFxuICAgICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgICAgIFwic2NvcmluZ0luZGV4XCI6IHt9LFxuICAgICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcImFuc3dlcnNcIjoge1xuICAgICAgXCJ0b3RhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJ0b3RhbENyaXRpY2FsU2NvcmVcIjoge30sXG4gICAgICBcInF1ZXN0aW9uR3JvdXBTY29yZXNcIjogW10sXG4gICAgICBcImFueUZhaWxlZEtpbGxRdWVzdGlvbnNcIjogdHJ1ZSxcbiAgICAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgICAgIFwiYWdlbnRDb21tZW50c1wiOiBcIlwiXG4gICB9LFxuICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm5ldmVyUmVsZWFzZVwiOiB0cnVlLFxuICAgXCJyZXNvdXJjZUlkXCI6IFwiXCIsXG4gICBcInJlc291cmNlVHlwZVwiOiBcIlwiLFxuICAgXCJyZWRhY3RlZFwiOiB0cnVlLFxuICAgXCJpc1Njb3JpbmdJbmRleFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZEV2YWx1YXRpb25zRXZhbHVhdGlvbklkID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRXZhbHVhdGlvbnNFdmFsdWF0aW9uSWQoY29udmVyc2F0aW9uSWQsIGV2YWx1YXRpb25JZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9ldmFsdWF0aW9ucy97ZXZhbHVhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihldmFsdWF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBldmFsdWF0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV2YWx1YXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tldmFsdWF0aW9uSWR9JywgZXZhbHVhdGlvbklkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGFuIGV2YWx1YXRpb25cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbklkXG4gICogQHBhcmFtIHtzdHJpbmd9IGV2YWx1YXRpb25JZCAtIGV2YWx1YXRpb25JZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gZXZhbHVhdGlvblxuICAqIEBwYXJhbSB7c3RyaW5nfSBleHBhbmQgLSBldmFsdWF0b3JJZFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjogXCJcIixcbiAgICAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICAgICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgICAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge31cbiAgIH0sXG4gICBcImV2YWx1YXRvclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJhZ2VudFwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJjYWxpYnJhdGlvblwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsaWJyYXRvclwiOiB7fSxcbiAgICAgIFwiYWdlbnRcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge30sXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJhdmVyYWdlU2NvcmVcIjogMCxcbiAgICAgIFwiaGlnaFNjb3JlXCI6IDAsXG4gICAgICBcImxvd1Njb3JlXCI6IDAsXG4gICAgICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJldmFsdWF0b3JzXCI6IFtdLFxuICAgICAgXCJzY29yaW5nSW5kZXhcIjoge30sXG4gICAgICBcImV4cGVydEV2YWx1YXRvclwiOiB7fVxuICAgfSxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcImFuc3dlcnNcIjoge1xuICAgICAgXCJ0b3RhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJ0b3RhbENyaXRpY2FsU2NvcmVcIjoge30sXG4gICAgICBcInF1ZXN0aW9uR3JvdXBTY29yZXNcIjogW10sXG4gICAgICBcImFueUZhaWxlZEtpbGxRdWVzdGlvbnNcIjogdHJ1ZSxcbiAgICAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgICAgIFwiYWdlbnRDb21tZW50c1wiOiBcIlwiXG4gICB9LFxuICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwXG4gICB9LFxuICAgXCJuZXZlclJlbGVhc2VcIjogdHJ1ZSxcbiAgIFwicmVzb3VyY2VJZFwiOiBcIlwiLFxuICAgXCJyZXNvdXJjZVR5cGVcIjogXCJcIixcbiAgIFwicmVkYWN0ZWRcIjogdHJ1ZSxcbiAgIFwiaXNTY29yaW5nSW5kZXhcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICAgICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgICAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICAgICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICAgICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHt9LFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImV2YWx1YXRvclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJhZ2VudFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxpYnJhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsaWJyYXRvclwiOiB7fSxcbiAgICAgIFwiYWdlbnRcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge30sXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJhdmVyYWdlU2NvcmVcIjogMCxcbiAgICAgIFwiaGlnaFNjb3JlXCI6IDAsXG4gICAgICBcImxvd1Njb3JlXCI6IDAsXG4gICAgICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJldmFsdWF0b3JzXCI6IFtdLFxuICAgICAgXCJzY29yaW5nSW5kZXhcIjoge30sXG4gICAgICBcImV4cGVydEV2YWx1YXRvclwiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwiYW5zd2Vyc1wiOiB7XG4gICAgICBcInRvdGFsU2NvcmVcIjoge30sXG4gICAgICBcInRvdGFsQ3JpdGljYWxTY29yZVwiOiB7fSxcbiAgICAgIFwicXVlc3Rpb25Hcm91cFNjb3Jlc1wiOiBbXSxcbiAgICAgIFwiYW55RmFpbGVkS2lsbFF1ZXN0aW9uc1wiOiB0cnVlLFxuICAgICAgXCJjb21tZW50c1wiOiBcIlwiLFxuICAgICAgXCJhZ2VudENvbW1lbnRzXCI6IFwiXCJcbiAgIH0sXG4gICBcImFnZW50SGFzUmVhZFwiOiB0cnVlLFxuICAgXCJyZWxlYXNlRGF0ZVwiOiBcIlwiLFxuICAgXCJhc3NpZ25lZERhdGVcIjogXCJcIixcbiAgIFwiY2hhbmdlZERhdGVcIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gICAgICBcImJ1bGxzZXllXCI6IHt9LFxuICAgICAgXCJhY3dTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlRmxvd1wiOiB7fSxcbiAgICAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgICAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge30sXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibmV2ZXJSZWxlYXNlXCI6IHRydWUsXG4gICBcInJlc291cmNlSWRcIjogXCJcIixcbiAgIFwicmVzb3VyY2VUeXBlXCI6IFwiXCIsXG4gICBcInJlZGFjdGVkXCI6IHRydWUsXG4gICBcImlzU2NvcmluZ0luZGV4XCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUucHV0Q29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRXZhbHVhdGlvbnNFdmFsdWF0aW9uSWQgPSBmdW5jdGlvbiBwdXRDb252ZXJzYXRpb25zQ29udmVyc2F0aW9uSWRFdmFsdWF0aW9uc0V2YWx1YXRpb25JZChjb252ZXJzYXRpb25JZCwgZXZhbHVhdGlvbklkLCBib2R5LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L2V2YWx1YXRpb25zL3tldmFsdWF0aW9uSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIGlmKGV2YWx1YXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGV2YWx1YXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZXZhbHVhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2V2YWx1YXRpb25JZH0nLCBldmFsdWF0aW9uSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbiBldmFsdWF0aW9uXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBjb252ZXJzYXRpb25JZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBldmFsdWF0aW9uSWQgLSBldmFsdWF0aW9uSWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXhwYW5kIC0gZXZhbHVhdG9ySWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjogXCJcIixcbiAgICAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICAgICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImV2YWx1YXRpb25Gb3JtXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgICAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICAgICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsaWJyYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGlicmF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICAgICBcImhpZ2hTY29yZVwiOiAwLFxuICAgICAgXCJsb3dTY29yZVwiOiAwLFxuICAgICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgICAgIFwic2NvcmluZ0luZGV4XCI6IHt9LFxuICAgICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcImFuc3dlcnNcIjoge1xuICAgICAgXCJ0b3RhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJ0b3RhbENyaXRpY2FsU2NvcmVcIjoge30sXG4gICAgICBcInF1ZXN0aW9uR3JvdXBTY29yZXNcIjogW10sXG4gICAgICBcImFueUZhaWxlZEtpbGxRdWVzdGlvbnNcIjogdHJ1ZSxcbiAgICAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgICAgIFwiYWdlbnRDb21tZW50c1wiOiBcIlwiXG4gICB9LFxuICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm5ldmVyUmVsZWFzZVwiOiB0cnVlLFxuICAgXCJyZXNvdXJjZUlkXCI6IFwiXCIsXG4gICBcInJlc291cmNlVHlwZVwiOiBcIlwiLFxuICAgXCJyZWRhY3RlZFwiOiB0cnVlLFxuICAgXCJpc1Njb3JpbmdJbmRleFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmRlbGV0ZUNvbnZlcnNhdGlvbnNDb252ZXJzYXRpb25JZEV2YWx1YXRpb25zRXZhbHVhdGlvbklkID0gZnVuY3Rpb24gZGVsZXRlQ29udmVyc2F0aW9uc0NvbnZlcnNhdGlvbklkRXZhbHVhdGlvbnNFdmFsdWF0aW9uSWQoY29udmVyc2F0aW9uSWQsIGV2YWx1YXRpb25JZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9ldmFsdWF0aW9ucy97ZXZhbHVhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihldmFsdWF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBldmFsdWF0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV2YWx1YXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tldmFsdWF0aW9uSWR9JywgZXZhbHVhdGlvbklkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2NvcmUgZXZhbHVhdGlvblxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBldmFsdWF0aW9uQW5kU2NvcmluZ1NldFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICAgICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHt9XG4gICB9LFxuICAgXCJhbnN3ZXJzXCI6IHtcbiAgICAgIFwidG90YWxTY29yZVwiOiB7fSxcbiAgICAgIFwidG90YWxDcml0aWNhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJxdWVzdGlvbkdyb3VwU2NvcmVzXCI6IFtdLFxuICAgICAgXCJhbnlGYWlsZWRLaWxsUXVlc3Rpb25zXCI6IHRydWUsXG4gICAgICBcImNvbW1lbnRzXCI6IFwiXCIsXG4gICAgICBcImFnZW50Q29tbWVudHNcIjogXCJcIlxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFNjb3JlXCI6IHt9LFxuICAgXCJ0b3RhbENyaXRpY2FsU2NvcmVcIjoge30sXG4gICBcInF1ZXN0aW9uR3JvdXBTY29yZXNcIjogW10sXG4gICBcImFueUZhaWxlZEtpbGxRdWVzdGlvbnNcIjogdHJ1ZSxcbiAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgIFwiYWdlbnRDb21tZW50c1wiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wb3N0RXZhbHVhdGlvbnNTY29yaW5nID0gZnVuY3Rpb24gcG9zdEV2YWx1YXRpb25zU2NvcmluZyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2V2YWx1YXRpb25zL3Njb3JpbmcnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgZXZhbHVhdGlvbiBhZ2dyZWdhdGVzXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIHF1ZXJ5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJpbnRlcnZhbFwiOiBcIlwiLFxuICAgXCJncmFudWxhcml0eVwiOiBcIlwiLFxuICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgXCJncm91cEJ5XCI6IFtdLFxuICAgXCJmaWx0ZXJcIjoge1xuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcImNsYXVzZXNcIjogW10sXG4gICAgICBcInByZWRpY2F0ZXNcIjogW11cbiAgIH0sXG4gICBcIm1ldHJpY3NcIjogW10sXG4gICBcImZsYXR0ZW5NdWx0aXZhbHVlZERpbWVuc2lvbnNcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wb3N0RXZhbHVhdGlvbnNBZ2dyZWdhdGVzUXVlcnkgPSBmdW5jdGlvbiBwb3N0RXZhbHVhdGlvbnNBZ2dyZWdhdGVzUXVlcnkoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL2V2YWx1YXRpb25zL2FnZ3JlZ2F0ZXMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW4gZXZhbHVhdG9yIGFjdGl2aXR5XG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gVGhlIHRvdGFsIHBhZ2Ugc2l6ZSByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBUaGUgcGFnZSBudW1iZXIgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIHZhcmlhYmxlIG5hbWUgcmVxdWVzdGVkIHRvIHNvcnQgYnlcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCBieSBleHBhbmQgbGlzdFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0UGFnZSAtIG5leHQgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7c3RyaW5nfSBwcmV2aW91c1BhZ2UgLSBQcmV2aW91cyBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IHN0YXJ0VGltZSAtIFRoZSBzdGFydCB0aW1lIHNwZWNpZmllZC4gRGF0ZSB0aW1lIGlzIHJlcHJlc2VudGVkIGFzIGFuIElTTy04NjAxIHN0cmluZy4gRm9yIGV4YW1wbGU6IHl5eXktTU0tZGRUSEg6bW06c3MuU1NTWlxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRUaW1lIC0gVGhlIGVuZCB0aW1lIHNwZWNpZmllZC4gRGF0ZSB0aW1lIGlzIHJlcHJlc2VudGVkIGFzIGFuIElTTy04NjAxIHN0cmluZy4gRm9yIGV4YW1wbGU6IHl5eXktTU0tZGRUSEg6bW06c3MuU1NTWlxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gRXZhbHVhdG9yIG5hbWVcbiAgKiBAcGFyYW0ge2FycmF5fSBwZXJtaXNzaW9uIC0gcGVybWlzc2lvbiBzdHJpbmdzXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwIC0gZ3JvdXAgaWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLmdldEV2YWx1YXRvcnNBY3Rpdml0eSA9IGZ1bmN0aW9uIGdldEV2YWx1YXRvcnNBY3Rpdml0eShwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBleHBhbmQsIG5leHRQYWdlLCBwcmV2aW91c1BhZ2UsIHN0YXJ0VGltZSwgZW5kVGltZSwgbmFtZSwgcGVybWlzc2lvbiwgZ3JvdXApe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvZXZhbHVhdG9ycy9hY3Rpdml0eSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzdGFydFRpbWVcIl0gPSBzdGFydFRpbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZW5kVGltZVwiXSA9IGVuZFRpbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGVybWlzc2lvblwiXSA9IHBlcm1pc3Npb247XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZ3JvdXBcIl0gPSBncm91cDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHB1Ymxpc2hlZCBldmFsdWF0aW9uIGZvcm1zLlxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5nZXRQdWJsaXNoZWRmb3JtcyA9IGZ1bmN0aW9uIGdldFB1Ymxpc2hlZGZvcm1zKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBuYW1lKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L3B1Ymxpc2hlZGZvcm1zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBQdWJsaXNoIGFuIGV2YWx1YXRpb24gZm9ybS5cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gRXZhbHVhdGlvbiBmb3JtXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHtcbiAgICAgIFwiZW50aXRpZXNcIjogW10sXG4gICAgICBcInBhZ2VTaXplXCI6IDAsXG4gICAgICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgICAgIFwidG90YWxcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICAgICBcImxhc3RVcmlcIjogXCJcIixcbiAgICAgIFwicGFnZUNvdW50XCI6IDBcbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7XG4gICAgICBcImVudGl0aWVzXCI6IFtdLFxuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICAgICBcInRvdGFsXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgICAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgICAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICAgICBcInBhZ2VDb3VudFwiOiAwXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLnBvc3RQdWJsaXNoZWRmb3JtcyA9IGZ1bmN0aW9uIHBvc3RQdWJsaXNoZWRmb3Jtcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L3B1Ymxpc2hlZGZvcm1zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcmllcyBFdmFsdWF0aW9ucyBhbmQgcmV0dXJucyBhIHBhZ2VkIGxpc3RcbiAgKiBAZGVzY3JpcHRpb24gUXVlcnkgcGFyYW1zIG11c3QgaW5jbHVkZSBvbmUgb2YgY29udmVyc2F0aW9uSWQsIGV2YWx1YXRvclVzZXJJZCwgb3IgYWdlbnRVc2VySWRcbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBUaGUgdG90YWwgcGFnZSBzaXplIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFRoZSBwYWdlIG51bWJlciByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgdG8gc29ydCBieVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIHZhcmlhYmxlIG5hbWUgcmVxdWVzdGVkIGJ5IGV4cGFuZCBsaXN0XG4gICogQHBhcmFtIHtzdHJpbmd9IG5leHRQYWdlIC0gbmV4dCBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IHByZXZpb3VzUGFnZSAtIFByZXZpb3VzIHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBjb252ZXJzYXRpb25JZCBzcGVjaWZpZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gYWdlbnRVc2VySWQgLSB1c2VyIGlkIG9mIHRoZSBhZ2VudFxuICAqIEBwYXJhbSB7c3RyaW5nfSBldmFsdWF0b3JVc2VySWQgLSBldmFsdWF0b3IgdXNlciBpZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gcXVldWUgaWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc3RhcnRUaW1lIC0gc3RhcnQgdGltZSBvZiB0aGUgZXZhbHVhdGlvbiBxdWVyeVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRUaW1lIC0gZW5kIHRpbWUgb2YgdGhlIGV2YWx1YXRpb24gcXVlcnlcbiAgKiBAcGFyYW0ge2FycmF5fSBldmFsdWF0aW9uU3RhdGUgLSBldmFsdWF0aW9uIHN0YXRlIG9wdGlvbnM6IFBlbmRpbmcsIEluUHJvZ3Jlc3MsIEZpbmlzaGVkXG4gICogQHBhcmFtIHtib29sZWFufSBpc1JlbGVhc2VkIC0gdGhlIGV2YWx1YXRpb24gaGFzIGJlZW4gcmVsZWFzZWRcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGFnZW50SGFzUmVhZCAtIGFnZW50IGhhcyB0aGUgZXZhbHVhdGlvblxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXhwYW5kQW5zd2VyVG90YWxTY29yZXMgLSBnZXQgdGhlIHRvdGFsIHNjb3JlcyBmb3IgZXZhbHVhdGlvbnNcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IG1heGltdW0gLSBtYXhpbXVtXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5nZXRFdmFsdWF0aW9uc1F1ZXJ5ID0gZnVuY3Rpb24gZ2V0RXZhbHVhdGlvbnNRdWVyeShwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBleHBhbmQsIG5leHRQYWdlLCBwcmV2aW91c1BhZ2UsIGNvbnZlcnNhdGlvbklkLCBhZ2VudFVzZXJJZCwgZXZhbHVhdG9yVXNlcklkLCBxdWV1ZUlkLCBzdGFydFRpbWUsIGVuZFRpbWUsIGV2YWx1YXRpb25TdGF0ZSwgaXNSZWxlYXNlZCwgYWdlbnRIYXNSZWFkLCBleHBhbmRBbnN3ZXJUb3RhbFNjb3JlcywgbWF4aW11bSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcXVhbGl0eS9ldmFsdWF0aW9ucy9xdWVyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJjb252ZXJzYXRpb25JZFwiXSA9IGNvbnZlcnNhdGlvbklkO1xuICAgIHJlcXVlc3RRdWVyeVtcImFnZW50VXNlcklkXCJdID0gYWdlbnRVc2VySWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXZhbHVhdG9yVXNlcklkXCJdID0gZXZhbHVhdG9yVXNlcklkO1xuICAgIHJlcXVlc3RRdWVyeVtcInF1ZXVlSWRcIl0gPSBxdWV1ZUlkO1xuICAgIHJlcXVlc3RRdWVyeVtcInN0YXJ0VGltZVwiXSA9IHN0YXJ0VGltZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJlbmRUaW1lXCJdID0gZW5kVGltZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJldmFsdWF0aW9uU3RhdGVcIl0gPSBldmFsdWF0aW9uU3RhdGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaXNSZWxlYXNlZFwiXSA9IGlzUmVsZWFzZWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiYWdlbnRIYXNSZWFkXCJdID0gYWdlbnRIYXNSZWFkO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZEFuc3dlclRvdGFsU2NvcmVzXCJdID0gZXhwYW5kQW5zd2VyVG90YWxTY29yZXM7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibWF4aW11bVwiXSA9IG1heGltdW07XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIGV2YWx1YXRpb24gZm9ybXNcbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBUaGUgdG90YWwgcGFnZSBzaXplIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFRoZSBwYWdlIG51bWJlciByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgdG8gc29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBuZXh0UGFnZSAtIG5leHQgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7c3RyaW5nfSBwcmV2aW91c1BhZ2UgLSBQcmV2aW91cyBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIEV4cGFuZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZ2V0Rm9ybXMgPSBmdW5jdGlvbiBnZXRGb3JtcyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBuZXh0UGFnZSwgcHJldmlvdXNQYWdlLCBleHBhbmQsIG5hbWUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvZm9ybXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGFuIGV2YWx1YXRpb24gZm9ybS5cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gRXZhbHVhdGlvbiBmb3JtXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHtcbiAgICAgIFwiZW50aXRpZXNcIjogW10sXG4gICAgICBcInBhZ2VTaXplXCI6IDAsXG4gICAgICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgICAgIFwidG90YWxcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICAgICBcImxhc3RVcmlcIjogXCJcIixcbiAgICAgIFwicGFnZUNvdW50XCI6IDBcbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7XG4gICAgICBcImVudGl0aWVzXCI6IFtdLFxuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICAgICBcInRvdGFsXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgICAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgICAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICAgICBcInBhZ2VDb3VudFwiOiAwXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLnBvc3RGb3JtcyA9IGZ1bmN0aW9uIHBvc3RGb3Jtcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2Zvcm1zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIGNhbGlicmF0aW9uc1xuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFRoZSB0b3RhbCBwYWdlIHNpemUgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gVGhlIHBhZ2UgbnVtYmVyIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCB0byBzb3J0IGJ5XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgYnkgZXhwYW5kIGxpc3RcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dFBhZ2UgLSBuZXh0IHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gcHJldmlvdXNQYWdlIC0gUHJldmlvdXMgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbiBpZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzdGFydFRpbWUgLSBCZWdpbm5pbmcgb2YgdGhlIGNhbGlicmF0aW9uIHF1ZXJ5LiBEYXRlIHRpbWUgaXMgcmVwcmVzZW50ZWQgYXMgYW4gSVNPLTg2MDEgc3RyaW5nLiBGb3IgZXhhbXBsZTogeXl5eS1NTS1kZFRISDptbTpzcy5TU1NaXG4gICogQHBhcmFtIHtzdHJpbmd9IGVuZFRpbWUgLSBlbmQgb2YgdGhlIGNhbGlicmF0aW9uIHF1ZXJ5LiBEYXRlIHRpbWUgaXMgcmVwcmVzZW50ZWQgYXMgYW4gSVNPLTg2MDEgc3RyaW5nLiBGb3IgZXhhbXBsZTogeXl5eS1NTS1kZFRISDptbTpzcy5TU1NaXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGlicmF0b3JJZCAtIHVzZXIgaWQgb2YgY2FsaWJyYXRvclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZ2V0Q2FsaWJyYXRpb25zID0gZnVuY3Rpb24gZ2V0Q2FsaWJyYXRpb25zKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIGV4cGFuZCwgbmV4dFBhZ2UsIHByZXZpb3VzUGFnZSwgY29udmVyc2F0aW9uSWQsIHN0YXJ0VGltZSwgZW5kVGltZSwgY2FsaWJyYXRvcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NhbGlicmF0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJjb252ZXJzYXRpb25JZFwiXSA9IGNvbnZlcnNhdGlvbklkO1xuICAgIHJlcXVlc3RRdWVyeVtcInN0YXJ0VGltZVwiXSA9IHN0YXJ0VGltZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJlbmRUaW1lXCJdID0gZW5kVGltZTtcbiAgICBpZihjYWxpYnJhdG9ySWQgPT09IHVuZGVmaW5lZCB8fCBjYWxpYnJhdG9ySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNhbGlicmF0b3JJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJjYWxpYnJhdG9ySWRcIl0gPSBjYWxpYnJhdG9ySWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgY2FsaWJyYXRpb25cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gY2FsaWJyYXRpb25cbiAgKiBAcGFyYW0ge3N0cmluZ30gZXhwYW5kIC0gY2FsaWJyYXRvcklkXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIlxuICAgfSxcbiAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICAgICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHt9XG4gICB9LFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICBcImhpZ2hTY29yZVwiOiAwLFxuICAgXCJsb3dTY29yZVwiOiAwLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgIFwic2NvcmluZ0luZGV4XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJldmFsdWF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjYWxpYnJhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImFuc3dlcnNcIjoge30sXG4gICAgICBcImFnZW50SGFzUmVhZFwiOiB0cnVlLFxuICAgICAgXCJyZWxlYXNlRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhc3NpZ25lZERhdGVcIjogXCJcIixcbiAgICAgIFwiY2hhbmdlZERhdGVcIjogXCJcIixcbiAgICAgIFwicXVldWVcIjoge30sXG4gICAgICBcIm5ldmVyUmVsZWFzZVwiOiB0cnVlLFxuICAgICAgXCJyZXNvdXJjZUlkXCI6IFwiXCIsXG4gICAgICBcInJlc291cmNlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJyZWRhY3RlZFwiOiB0cnVlLFxuICAgICAgXCJpc1Njb3JpbmdJbmRleFwiOiB0cnVlXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgICAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcImF2ZXJhZ2VTY29yZVwiOiAwLFxuICAgXCJoaWdoU2NvcmVcIjogMCxcbiAgIFwibG93U2NvcmVcIjogMCxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiZXZhbHVhdGlvbnNcIjogW10sXG4gICBcImV2YWx1YXRvcnNcIjogW10sXG4gICBcInNjb3JpbmdJbmRleFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uXCI6IHt9LFxuICAgICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdG9yXCI6IHt9LFxuICAgICAgXCJhZ2VudFwiOiB7fSxcbiAgICAgIFwiY2FsaWJyYXRpb25cIjoge30sXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJhbnN3ZXJzXCI6IHt9LFxuICAgICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgICAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgICAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlXCI6IHt9LFxuICAgICAgXCJuZXZlclJlbGVhc2VcIjogdHJ1ZSxcbiAgICAgIFwicmVzb3VyY2VJZFwiOiBcIlwiLFxuICAgICAgXCJyZXNvdXJjZVR5cGVcIjogXCJcIixcbiAgICAgIFwicmVkYWN0ZWRcIjogdHJ1ZSxcbiAgICAgIFwiaXNTY29yaW5nSW5kZXhcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wb3N0Q2FsaWJyYXRpb25zID0gZnVuY3Rpb24gcG9zdENhbGlicmF0aW9ucyhib2R5LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvY2FsaWJyYXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgcHVibGlzaGVkIGV2YWx1YXRpb24gZm9ybXMuXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIC0gRm9ybSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHtcbiAgICAgIFwiZW50aXRpZXNcIjogW10sXG4gICAgICBcInBhZ2VTaXplXCI6IDAsXG4gICAgICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgICAgIFwidG90YWxcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICAgICBcImxhc3RVcmlcIjogXCJcIixcbiAgICAgIFwicGFnZUNvdW50XCI6IDBcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUXVhbGl0eUFwaS5wcm90b3R5cGUuZ2V0UHVibGlzaGVkZm9ybXNGb3JtSWQgPSBmdW5jdGlvbiBnZXRQdWJsaXNoZWRmb3Jtc0Zvcm1JZChmb3JtSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvcHVibGlzaGVkZm9ybXMve2Zvcm1JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihmb3JtSWQgPT09IHVuZGVmaW5lZCB8fCBmb3JtSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGZvcm1JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tmb3JtSWR9JywgZm9ybUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYW4gZXZhbHVhdGlvblxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvbnZlcnNhdGlvbklkIC0gY29udmVyc2F0aW9uSWRcbiAgKiBAcGFyYW0ge30gYm9keSAtIGV2YWx1YXRpb25cbiAgKiBAcGFyYW0ge3N0cmluZ30gZXhwYW5kIC0gZXZhbHVhdG9ySWRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIlxuICAgfSxcbiAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICAgICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHt9XG4gICB9LFxuICAgXCJldmFsdWF0b3JcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiY2FsaWJyYXRpb25cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGlicmF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICAgICBcImhpZ2hTY29yZVwiOiAwLFxuICAgICAgXCJsb3dTY29yZVwiOiAwLFxuICAgICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgICAgIFwic2NvcmluZ0luZGV4XCI6IHt9LFxuICAgICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge31cbiAgIH0sXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJhbnN3ZXJzXCI6IHtcbiAgICAgIFwidG90YWxTY29yZVwiOiB7fSxcbiAgICAgIFwidG90YWxDcml0aWNhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJxdWVzdGlvbkdyb3VwU2NvcmVzXCI6IFtdLFxuICAgICAgXCJhbnlGYWlsZWRLaWxsUXVlc3Rpb25zXCI6IHRydWUsXG4gICAgICBcImNvbW1lbnRzXCI6IFwiXCIsXG4gICAgICBcImFnZW50Q29tbWVudHNcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRIYXNSZWFkXCI6IHRydWUsXG4gICBcInJlbGVhc2VEYXRlXCI6IFwiXCIsXG4gICBcImFzc2lnbmVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjaGFuZ2VkRGF0ZVwiOiBcIlwiLFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwiYnVsbHNleWVcIjoge30sXG4gICAgICBcImFjd1NldHRpbmdzXCI6IHt9LFxuICAgICAgXCJza2lsbEV2YWx1YXRpb25NZXRob2RcIjogXCJcIixcbiAgICAgIFwicXVldWVGbG93XCI6IHt9LFxuICAgICAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGxpbmdQYXJ0eU51bWJlclwiOiBcIlwiLFxuICAgICAgXCJvdXRib3VuZEVtYWlsQWRkcmVzc1wiOiB7fSxcbiAgICAgIFwibWVtYmVyQ291bnRcIjogMFxuICAgfSxcbiAgIFwibmV2ZXJSZWxlYXNlXCI6IHRydWUsXG4gICBcInJlc291cmNlSWRcIjogXCJcIixcbiAgIFwicmVzb3VyY2VUeXBlXCI6IFwiXCIsXG4gICBcInJlZGFjdGVkXCI6IHRydWUsXG4gICBcImlzU2NvcmluZ0luZGV4XCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjogXCJcIixcbiAgICAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICAgICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImV2YWx1YXRpb25Gb3JtXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJwdWJsaXNoZWRcIjogdHJ1ZSxcbiAgICAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICAgICBcInF1ZXN0aW9uR3JvdXBzXCI6IFtdLFxuICAgICAgXCJwdWJsaXNoZWRWZXJzaW9uc1wiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsaWJyYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNhbGlicmF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICAgICBcImhpZ2hTY29yZVwiOiAwLFxuICAgICAgXCJsb3dTY29yZVwiOiAwLFxuICAgICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgICAgIFwic2NvcmluZ0luZGV4XCI6IHt9LFxuICAgICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcImFuc3dlcnNcIjoge1xuICAgICAgXCJ0b3RhbFNjb3JlXCI6IHt9LFxuICAgICAgXCJ0b3RhbENyaXRpY2FsU2NvcmVcIjoge30sXG4gICAgICBcInF1ZXN0aW9uR3JvdXBTY29yZXNcIjogW10sXG4gICAgICBcImFueUZhaWxlZEtpbGxRdWVzdGlvbnNcIjogdHJ1ZSxcbiAgICAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgICAgIFwiYWdlbnRDb21tZW50c1wiOiBcIlwiXG4gICB9LFxuICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm5ldmVyUmVsZWFzZVwiOiB0cnVlLFxuICAgXCJyZXNvdXJjZUlkXCI6IFwiXCIsXG4gICBcInJlc291cmNlVHlwZVwiOiBcIlwiLFxuICAgXCJyZWRhY3RlZFwiOiB0cnVlLFxuICAgXCJpc1Njb3JpbmdJbmRleFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblF1YWxpdHlBcGkucHJvdG90eXBlLnBvc3RDb252ZXJzYXRpb25zQ29udmVyc2F0aW9uSWRFdmFsdWF0aW9ucyA9IGZ1bmN0aW9uIHBvc3RDb252ZXJzYXRpb25zQ29udmVyc2F0aW9uSWRFdmFsdWF0aW9ucyhjb252ZXJzYXRpb25JZCwgYm9keSwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9ldmFsdWF0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgY2FsaWJyYXRpb24gYnkgaWQuXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsaWJyYXRpb25JZCAtIENhbGlicmF0aW9uIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGlicmF0b3JJZCAtIGNhbGlicmF0b3JJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgICAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcImF2ZXJhZ2VTY29yZVwiOiAwLFxuICAgXCJoaWdoU2NvcmVcIjogMCxcbiAgIFwibG93U2NvcmVcIjogMCxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiZXZhbHVhdGlvbnNcIjogW10sXG4gICBcImV2YWx1YXRvcnNcIjogW10sXG4gICBcInNjb3JpbmdJbmRleFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uXCI6IHt9LFxuICAgICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdG9yXCI6IHt9LFxuICAgICAgXCJhZ2VudFwiOiB7fSxcbiAgICAgIFwiY2FsaWJyYXRpb25cIjoge30sXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJhbnN3ZXJzXCI6IHt9LFxuICAgICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgICAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgICAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlXCI6IHt9LFxuICAgICAgXCJuZXZlclJlbGVhc2VcIjogdHJ1ZSxcbiAgICAgIFwicmVzb3VyY2VJZFwiOiBcIlwiLFxuICAgICAgXCJyZXNvdXJjZVR5cGVcIjogXCJcIixcbiAgICAgIFwicmVkYWN0ZWRcIjogdHJ1ZSxcbiAgICAgIFwiaXNTY29yaW5nSW5kZXhcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5nZXRDYWxpYnJhdGlvbnNDYWxpYnJhdGlvbklkID0gZnVuY3Rpb24gZ2V0Q2FsaWJyYXRpb25zQ2FsaWJyYXRpb25JZChjYWxpYnJhdGlvbklkLCBjYWxpYnJhdG9ySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvY2FsaWJyYXRpb25zL3tjYWxpYnJhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGlicmF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjYWxpYnJhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxpYnJhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGlicmF0aW9uSWR9JywgY2FsaWJyYXRpb25JZCk7XG4gICAgaWYoY2FsaWJyYXRvcklkID09PSB1bmRlZmluZWQgfHwgY2FsaWJyYXRvcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxpYnJhdG9ySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiY2FsaWJyYXRvcklkXCJdID0gY2FsaWJyYXRvcklkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGNhbGlicmF0aW9uIHRvIHRoZSBzcGVjaWZpZWQgY2FsaWJyYXRpb24gdmlhIFBVVC4gIEVkaXRhYmxlIGZpZWxkcyBpbmNsdWRlOiBldmFsdWF0b3JzLCBleHBlcnRFdmFsdWF0b3IsIGFuZCBzY29yaW5nSW5kZXhcbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxpYnJhdGlvbklkIC0gQ2FsaWJyYXRpb24gSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENhbGlicmF0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIlxuICAgfSxcbiAgIFwiZXZhbHVhdGlvbkZvcm1cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInB1Ymxpc2hlZFwiOiB0cnVlLFxuICAgICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgICAgIFwicXVlc3Rpb25Hcm91cHNcIjogW10sXG4gICAgICBcInB1Ymxpc2hlZFZlcnNpb25zXCI6IHt9XG4gICB9LFxuICAgXCJjb250ZXh0SWRcIjogXCJcIixcbiAgIFwiYXZlcmFnZVNjb3JlXCI6IDAsXG4gICBcImhpZ2hTY29yZVwiOiAwLFxuICAgXCJsb3dTY29yZVwiOiAwLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJldmFsdWF0aW9uc1wiOiBbXSxcbiAgIFwiZXZhbHVhdG9yc1wiOiBbXSxcbiAgIFwic2NvcmluZ0luZGV4XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25cIjoge30sXG4gICAgICBcImV2YWx1YXRpb25Gb3JtXCI6IHt9LFxuICAgICAgXCJldmFsdWF0b3JcIjoge30sXG4gICAgICBcImFnZW50XCI6IHt9LFxuICAgICAgXCJjYWxpYnJhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImFuc3dlcnNcIjoge30sXG4gICAgICBcImFnZW50SGFzUmVhZFwiOiB0cnVlLFxuICAgICAgXCJyZWxlYXNlRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhc3NpZ25lZERhdGVcIjogXCJcIixcbiAgICAgIFwiY2hhbmdlZERhdGVcIjogXCJcIixcbiAgICAgIFwicXVldWVcIjoge30sXG4gICAgICBcIm5ldmVyUmVsZWFzZVwiOiB0cnVlLFxuICAgICAgXCJyZXNvdXJjZUlkXCI6IFwiXCIsXG4gICAgICBcInJlc291cmNlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJyZWRhY3RlZFwiOiB0cnVlLFxuICAgICAgXCJpc1Njb3JpbmdJbmRleFwiOiB0cnVlXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgICAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcImF2ZXJhZ2VTY29yZVwiOiAwLFxuICAgXCJoaWdoU2NvcmVcIjogMCxcbiAgIFwibG93U2NvcmVcIjogMCxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiZXZhbHVhdGlvbnNcIjogW10sXG4gICBcImV2YWx1YXRvcnNcIjogW10sXG4gICBcInNjb3JpbmdJbmRleFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uXCI6IHt9LFxuICAgICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdG9yXCI6IHt9LFxuICAgICAgXCJhZ2VudFwiOiB7fSxcbiAgICAgIFwiY2FsaWJyYXRpb25cIjoge30sXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJhbnN3ZXJzXCI6IHt9LFxuICAgICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgICAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgICAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlXCI6IHt9LFxuICAgICAgXCJuZXZlclJlbGVhc2VcIjogdHJ1ZSxcbiAgICAgIFwicmVzb3VyY2VJZFwiOiBcIlwiLFxuICAgICAgXCJyZXNvdXJjZVR5cGVcIjogXCJcIixcbiAgICAgIFwicmVkYWN0ZWRcIjogdHJ1ZSxcbiAgICAgIFwiaXNTY29yaW5nSW5kZXhcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wdXRDYWxpYnJhdGlvbnNDYWxpYnJhdGlvbklkID0gZnVuY3Rpb24gcHV0Q2FsaWJyYXRpb25zQ2FsaWJyYXRpb25JZChjYWxpYnJhdGlvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2NhbGlicmF0aW9ucy97Y2FsaWJyYXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjYWxpYnJhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY2FsaWJyYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2FsaWJyYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjYWxpYnJhdGlvbklkfScsIGNhbGlicmF0aW9uSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgY2FsaWJyYXRpb24gYnkgaWQuXG4gICogQG1lbWJlck9mIFF1YWxpdHlBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2FsaWJyYXRpb25JZCAtIENhbGlicmF0aW9uIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGNhbGlicmF0b3JJZCAtIGNhbGlicmF0b3JJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNhbGlicmF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiYWdlbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwicHVibGlzaGVkXCI6IHRydWUsXG4gICAgICBcImNvbnRleHRJZFwiOiBcIlwiLFxuICAgICAgXCJxdWVzdGlvbkdyb3Vwc1wiOiBbXSxcbiAgICAgIFwicHVibGlzaGVkVmVyc2lvbnNcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGV4dElkXCI6IFwiXCIsXG4gICBcImF2ZXJhZ2VTY29yZVwiOiAwLFxuICAgXCJoaWdoU2NvcmVcIjogMCxcbiAgIFwibG93U2NvcmVcIjogMCxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwiZXZhbHVhdGlvbnNcIjogW10sXG4gICBcImV2YWx1YXRvcnNcIjogW10sXG4gICBcInNjb3JpbmdJbmRleFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uXCI6IHt9LFxuICAgICAgXCJldmFsdWF0aW9uRm9ybVwiOiB7fSxcbiAgICAgIFwiZXZhbHVhdG9yXCI6IHt9LFxuICAgICAgXCJhZ2VudFwiOiB7fSxcbiAgICAgIFwiY2FsaWJyYXRpb25cIjoge30sXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJhbnN3ZXJzXCI6IHt9LFxuICAgICAgXCJhZ2VudEhhc1JlYWRcIjogdHJ1ZSxcbiAgICAgIFwicmVsZWFzZURhdGVcIjogXCJcIixcbiAgICAgIFwiYXNzaWduZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImNoYW5nZWREYXRlXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlXCI6IHt9LFxuICAgICAgXCJuZXZlclJlbGVhc2VcIjogdHJ1ZSxcbiAgICAgIFwicmVzb3VyY2VJZFwiOiBcIlwiLFxuICAgICAgXCJyZXNvdXJjZVR5cGVcIjogXCJcIixcbiAgICAgIFwicmVkYWN0ZWRcIjogdHJ1ZSxcbiAgICAgIFwiaXNTY29yaW5nSW5kZXhcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJleHBlcnRFdmFsdWF0b3JcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5kZWxldGVDYWxpYnJhdGlvbnNDYWxpYnJhdGlvbklkID0gZnVuY3Rpb24gZGVsZXRlQ2FsaWJyYXRpb25zQ2FsaWJyYXRpb25JZChjYWxpYnJhdGlvbklkLCBjYWxpYnJhdG9ySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkvY2FsaWJyYXRpb25zL3tjYWxpYnJhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNhbGlicmF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjYWxpYnJhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxpYnJhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NhbGlicmF0aW9uSWR9JywgY2FsaWJyYXRpb25JZCk7XG4gICAgaWYoY2FsaWJyYXRvcklkID09PSB1bmRlZmluZWQgfHwgY2FsaWJyYXRvcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjYWxpYnJhdG9ySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiY2FsaWJyYXRvcklkXCJdID0gY2FsaWJyYXRvcklkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBrZXl3b3JkIHNldHNcbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBUaGUgdG90YWwgcGFnZSBzaXplIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFRoZSBwYWdlIG51bWJlciByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgdG8gc29ydCBieVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIHZhcmlhYmxlIG5hbWUgcmVxdWVzdGVkIGJ5IGV4cGFuZCBsaXN0XG4gICogQHBhcmFtIHtzdHJpbmd9IG5leHRQYWdlIC0gbmV4dCBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IHByZXZpb3VzUGFnZSAtIFByZXZpb3VzIHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIHRoZSBrZXl3b3JkIHNldCBuYW1lIC0gdXNlZCBmb3IgZmlsdGVyaW5nIHJlc3VsdHMgaW4gc2VhcmNoZXMuXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlSWQgLSB0aGUgcXVldWUgaWQgLSB1c2VkIGZvciBmaWx0ZXJpbmcgcmVzdWx0cyBpbiBzZWFyY2hlcy5cbiAgKiBAcGFyYW0ge3N0cmluZ30gYWdlbnRJZCAtIHRoZSBhZ2VudCBpZCAtIHVzZWQgZm9yIGZpbHRlcmluZyByZXN1bHRzIGluIHNlYXJjaGVzLlxuICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRvciAtIElmIGFnZW50SUQgYW5kIHF1ZXVlSWQgYXJlIGJvdGggcHJlc2VudCwgdGhpcyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHF1ZXJ5IGlzIGFuIEFORCBvciBPUiBiZXR3ZWVuIHRob3NlIHBhcmFtZXRlcnMuXG4gIEFORCxcbiAgT1IsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5nZXRLZXl3b3Jkc2V0cyA9IGZ1bmN0aW9uIGdldEtleXdvcmRzZXRzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIGV4cGFuZCwgbmV4dFBhZ2UsIHByZXZpb3VzUGFnZSwgbmFtZSwgcXVldWVJZCwgYWdlbnRJZCwgb3BlcmF0b3Ipe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3F1YWxpdHkva2V5d29yZHNldHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmV4dFBhZ2VcIl0gPSBuZXh0UGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwcmV2aW91c1BhZ2VcIl0gPSBwcmV2aW91c1BhZ2U7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicXVldWVJZFwiXSA9IHF1ZXVlSWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiYWdlbnRJZFwiXSA9IGFnZW50SWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wib3BlcmF0b3JcIl0gPSBvcGVyYXRvcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBLZXl3b3JkIFNldFxuICAqIEBtZW1iZXJPZiBRdWFsaXR5QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBrZXl3b3JkU2V0XG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIHF1ZXVlSWRcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gICAgICBcImJ1bGxzZXllXCI6IHt9LFxuICAgICAgXCJhY3dTZXR0aW5nc1wiOiB7fSxcbiAgICAgIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gICAgICBcInF1ZXVlRmxvd1wiOiB7fSxcbiAgICAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgICAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge30sXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDBcbiAgIH0sXG4gICBcInF1ZXVlc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VcIjogXCJcIixcbiAgIFwiYWdlbnRzXCI6IFtdLFxuICAgXCJrZXl3b3Jkc1wiOiBbXSxcbiAgIFwicGFydGljaXBhbnRQdXJwb3Nlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgICAgXCJidWxsc2V5ZVwiOiB7fSxcbiAgICAgIFwiYWN3U2V0dGluZ3NcIjoge30sXG4gICAgICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgICAgXCJxdWV1ZUZsb3dcIjoge30sXG4gICAgICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgICAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICAgICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHt9LFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInF1ZXVlc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VcIjogXCJcIixcbiAgIFwiYWdlbnRzXCI6IFtdLFxuICAgXCJrZXl3b3Jkc1wiOiBbXSxcbiAgIFwicGFydGljaXBhbnRQdXJwb3Nlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5wb3N0S2V5d29yZHNldHMgPSBmdW5jdGlvbiBwb3N0S2V5d29yZHNldHMoYm9keSwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9xdWFsaXR5L2tleXdvcmRzZXRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBrZXl3b3JkIHNldHNcbiAgKiBAZGVzY3JpcHRpb24gQnVsayBkZWxldGUgb2Yga2V5d29yZCBzZXRzOyB0aGlzIHdpbGwgb25seSBkZWxldGUgdGhlIGtleXdvcmQgc2V0cyB0aGF0IG1hdGNoIHRoZSBpZHMgc3BlY2lmaWVkIGluIHRoZSBxdWVyeSBwYXJhbS5cbiAgKiBAbWVtYmVyT2YgUXVhbGl0eUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBpZHMgLSBBIGNvbW1hLWRlbGltaXRlZCBsaXN0IG9mIHZhbGlkIEtleXdvcmRTZXQgaWRzXG4gICovXG5RdWFsaXR5QXBpLnByb3RvdHlwZS5kZWxldGVLZXl3b3Jkc2V0cyA9IGZ1bmN0aW9uIGRlbGV0ZUtleXdvcmRzZXRzKGlkcyl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcXVhbGl0eS9rZXl3b3Jkc2V0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGlkcyA9PT0gdW5kZWZpbmVkIHx8IGlkcyA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogaWRzJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImlkc1wiXSA9IGlkcztcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUXVhbGl0eUFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIFJlY29yZGluZ0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5SZWNvcmRpbmdBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gUmVjb3JkaW5nQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBSZWNvcmRpbmdBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb3JkaW5nQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWNvcmRpbmdBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldHMgdGhlIG1lZGlhIG9mIGEgc2luZ2xlIG9ycGhhbiByZWNvcmRpbmdcbiAgKiBAZGVzY3JpcHRpb24gQSAyMDIgcmVzcG9uc2UgbWVhbnMgdGhlIG9ycGhhbmVkIG1lZGlhIGlzIGN1cnJlbnRseSB0cmFuc2NvZGluZyBhbmQgd2lsbCBiZSBhdmFpbGFibGUgc2hvcnRseS5BIDIwMCByZXNwb25zZSBkZW5vdGVzIHRoZSB0cmFuc2NvZGVkIG9ycGhhbiBtZWRpYSBpcyBhdmFpbGFibGUgbm93IGFuZCBpcyBjb250YWluZWQgaW4gdGhlIHJlc3BvbnNlIGJvZHkuXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBvcnBoYW5JZCAtIE9ycGhhbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXRJZCAtIFRoZSBkZXNpcmVkIG1lZGlhIGZvcm1hdC5cbiAgV0FWLFxuICBXRUJNLFxuICBXQVZfVUxBVyxcbiAgT0dHX1ZPUkJJUyxcbiAgT0dHX09QVVMsXG4gIE5PTkUsXG4gICogQHBhcmFtIHtib29sZWFufSBkb3dubG9hZCAtIHJlcXVlc3RpbmcgYSBkb3dubG9hZCBmb3JtYXQgb2YgdGhlIHJlY29yZGluZ1xuICB0cnVlLFxuICBmYWxzZSxcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgZG93bmxvYWRlZCBmaWxlTmFtZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbklkXCI6IFwiXCIsXG4gICBcInBhdGhcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwibWVkaWFcIjogXCJcIixcbiAgIFwiYW5ub3RhdGlvbnNcIjogW10sXG4gICBcInRyYW5zY3JpcHRcIjogW10sXG4gICBcImVtYWlsVHJhbnNjcmlwdFwiOiBbXSxcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInJlc3RvcmVFeHBpcmF0aW9uVGltZVwiOiBcIlwiLFxuICAgXCJtZWRpYVVyaXNcIjoge30sXG4gICBcImVzdGltYXRlZFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgXCJhY3R1YWxUcmFuc2NvZGVUaW1lTXNcIjogMCxcbiAgIFwiYXJjaGl2ZURhdGVcIjogXCJcIixcbiAgIFwiYXJjaGl2ZU1lZGl1bVwiOiBcIlwiLFxuICAgXCJkZWxldGVEYXRlXCI6IFwiXCIsXG4gICBcIm1heEFsbG93ZWRSZXN0b3JhdGlvbnNGb3JPcmdcIjogMCxcbiAgIFwicmVtYWluaW5nUmVzdG9yYXRpb25zQWxsb3dlZEZvck9yZ1wiOiAwLFxuICAgXCJzZXNzaW9uSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLmdldE9ycGhhbklkTWVkaWEgPSBmdW5jdGlvbiBnZXRPcnBoYW5JZE1lZGlhKG9ycGhhbklkLCBmb3JtYXRJZCwgZG93bmxvYWQsIGZpbGVOYW1lKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9vcnBoYW5yZWNvcmRpbmdzL3tvcnBoYW5JZH0vbWVkaWEnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihvcnBoYW5JZCA9PT0gdW5kZWZpbmVkIHx8IG9ycGhhbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBvcnBoYW5JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tvcnBoYW5JZH0nLCBvcnBoYW5JZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZm9ybWF0SWRcIl0gPSBmb3JtYXRJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJkb3dubG9hZFwiXSA9IGRvd25sb2FkO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpbGVOYW1lXCJdID0gZmlsZU5hbWU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgZ2V0cyBhIGxpc3QgbG9jYWwga2V5IHNldHRpbmdzIGRhdGFcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLmdldExvY2Fsa2V5c1NldHRpbmdzID0gZnVuY3Rpb24gZ2V0TG9jYWxrZXlzU2V0dGluZ3MoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbG9jYWxrZXlzL3NldHRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgY3JlYXRlIHNldHRpbmdzIGZvciBsb2NhbCBrZXkgY3JlYXRpb25cbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBMb2NhbCBFbmNyeXB0aW9uIENvbmZpZ3VyYXRpb25cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXJsXCI6IFwiXCIsXG4gICBcImFwaUlkXCI6IFwiXCIsXG4gICBcImFwaUtleVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXJsXCI6IFwiXCIsXG4gICBcImFwaUlkXCI6IFwiXCIsXG4gICBcImFwaUtleVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUucG9zdExvY2Fsa2V5c1NldHRpbmdzID0gZnVuY3Rpb24gcG9zdExvY2Fsa2V5c1NldHRpbmdzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JlY29yZGluZy9sb2NhbGtleXMvc2V0dGluZ3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW5ub3RhdGlvblxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVjb3JkaW5nSWQgLSBSZWNvcmRpbmcgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gYW5ub3RhdGlvbklkIC0gQW5ub3RhdGlvbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibG9jYXRpb25cIjogMCxcbiAgIFwiZHVyYXRpb25Nc1wiOiAwLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImtleXdvcmROYW1lXCI6IFwiXCIsXG4gICBcImNvbmZpZGVuY2VcIjoge30sXG4gICBcImtleXdvcmRTZXRJZFwiOiBcIlwiLFxuICAgXCJrZXl3b3JkU2V0TmFtZVwiOiBcIlwiLFxuICAgXCJ1dHRlcmFuY2VcIjogXCJcIixcbiAgIFwidGltZUJlZ2luXCI6IFwiXCIsXG4gICBcInRpbWVFbmRcIjogXCJcIixcbiAgIFwia2V5d29yZENvbmZpZGVuY2VUaHJlc2hvbGRcIjogXCJcIixcbiAgIFwiYWdlbnRTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gICBcImN1c3RvbWVyU2NvcmVNb2RpZmllclwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWRBbm5vdGF0aW9uc0Fubm90YXRpb25JZCA9IGZ1bmN0aW9uIGdldENvbnZlcnNhdGlvbklkUmVjb3JkaW5nc1JlY29yZGluZ0lkQW5ub3RhdGlvbnNBbm5vdGF0aW9uSWQoY29udmVyc2F0aW9uSWQsIHJlY29yZGluZ0lkLCBhbm5vdGF0aW9uSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9yZWNvcmRpbmdzL3tyZWNvcmRpbmdJZH0vYW5ub3RhdGlvbnMve2Fubm90YXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIGlmKGFubm90YXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGFubm90YXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYW5ub3RhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2Fubm90YXRpb25JZH0nLCBhbm5vdGF0aW9uSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbm5vdGF0aW9uXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIENvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSByZWNvcmRpbmdJZCAtIFJlY29yZGluZyBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBhbm5vdGF0aW9uSWQgLSBBbm5vdGF0aW9uIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBhbm5vdGF0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibG9jYXRpb25cIjogMCxcbiAgIFwiZHVyYXRpb25Nc1wiOiAwLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImtleXdvcmROYW1lXCI6IFwiXCIsXG4gICBcImNvbmZpZGVuY2VcIjoge30sXG4gICBcImtleXdvcmRTZXRJZFwiOiBcIlwiLFxuICAgXCJrZXl3b3JkU2V0TmFtZVwiOiBcIlwiLFxuICAgXCJ1dHRlcmFuY2VcIjogXCJcIixcbiAgIFwidGltZUJlZ2luXCI6IFwiXCIsXG4gICBcInRpbWVFbmRcIjogXCJcIixcbiAgIFwia2V5d29yZENvbmZpZGVuY2VUaHJlc2hvbGRcIjogXCJcIixcbiAgIFwiYWdlbnRTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gICBcImN1c3RvbWVyU2NvcmVNb2RpZmllclwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJsb2NhdGlvblwiOiAwLFxuICAgXCJkdXJhdGlvbk1zXCI6IDAsXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwia2V5d29yZE5hbWVcIjogXCJcIixcbiAgIFwiY29uZmlkZW5jZVwiOiB7fSxcbiAgIFwia2V5d29yZFNldElkXCI6IFwiXCIsXG4gICBcImtleXdvcmRTZXROYW1lXCI6IFwiXCIsXG4gICBcInV0dGVyYW5jZVwiOiBcIlwiLFxuICAgXCJ0aW1lQmVnaW5cIjogXCJcIixcbiAgIFwidGltZUVuZFwiOiBcIlwiLFxuICAgXCJrZXl3b3JkQ29uZmlkZW5jZVRocmVzaG9sZFwiOiBcIlwiLFxuICAgXCJhZ2VudFNjb3JlTW9kaWZpZXJcIjogXCJcIixcbiAgIFwiY3VzdG9tZXJTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5wdXRDb252ZXJzYXRpb25JZFJlY29yZGluZ3NSZWNvcmRpbmdJZEFubm90YXRpb25zQW5ub3RhdGlvbklkID0gZnVuY3Rpb24gcHV0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWRBbm5vdGF0aW9uc0Fubm90YXRpb25JZChjb252ZXJzYXRpb25JZCwgcmVjb3JkaW5nSWQsIGFubm90YXRpb25JZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3JlY29yZGluZ3Mve3JlY29yZGluZ0lkfS9hbm5vdGF0aW9ucy97YW5ub3RhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihyZWNvcmRpbmdJZCA9PT0gdW5kZWZpbmVkIHx8IHJlY29yZGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZWNvcmRpbmdJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyZWNvcmRpbmdJZH0nLCByZWNvcmRpbmdJZCk7XG4gICAgaWYoYW5ub3RhdGlvbklkID09PSB1bmRlZmluZWQgfHwgYW5ub3RhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhbm5vdGF0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YW5ub3RhdGlvbklkfScsIGFubm90YXRpb25JZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYW5ub3RhdGlvblxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVjb3JkaW5nSWQgLSBSZWNvcmRpbmcgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gYW5ub3RhdGlvbklkIC0gQW5ub3RhdGlvbiBJRFxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5kZWxldGVDb252ZXJzYXRpb25JZFJlY29yZGluZ3NSZWNvcmRpbmdJZEFubm90YXRpb25zQW5ub3RhdGlvbklkID0gZnVuY3Rpb24gZGVsZXRlQ29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWRBbm5vdGF0aW9uc0Fubm90YXRpb25JZChjb252ZXJzYXRpb25JZCwgcmVjb3JkaW5nSWQsIGFubm90YXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29udmVyc2F0aW9ucy97Y29udmVyc2F0aW9uSWR9L3JlY29yZGluZ3Mve3JlY29yZGluZ0lkfS9hbm5vdGF0aW9ucy97YW5ub3RhdGlvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICBpZihyZWNvcmRpbmdJZCA9PT0gdW5kZWZpbmVkIHx8IHJlY29yZGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZWNvcmRpbmdJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyZWNvcmRpbmdJZH0nLCByZWNvcmRpbmdJZCk7XG4gICAgaWYoYW5ub3RhdGlvbklkID09PSB1bmRlZmluZWQgfHwgYW5ub3RhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBhbm5vdGF0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7YW5ub3RhdGlvbklkfScsIGFubm90YXRpb25JZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgc2NyZWVuIHJlY29yZGluZyBzZXNzaW9uXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSByZWNvcmRpbmdTZXNzaW9uSWQgLSBTY3JlZW4gcmVjb3JkaW5nIHNlc3Npb24gSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwiYXJjaGl2ZURhdGVcIjogXCJcIixcbiAgIFwiZGVsZXRlRGF0ZVwiOiBcIlwiXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLnBhdGNoc1NjcmVlbnNlc3Npb25zUmVjb3JkaW5nc2Vzc2lvbklkID0gZnVuY3Rpb24gcGF0Y2hzU2NyZWVuc2Vzc2lvbnNSZWNvcmRpbmdzZXNzaW9uSWQocmVjb3JkaW5nU2Vzc2lvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmdzL3NjcmVlbnNlc3Npb25zL3tyZWNvcmRpbmdTZXNzaW9uSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocmVjb3JkaW5nU2Vzc2lvbklkID09PSB1bmRlZmluZWQgfHwgcmVjb3JkaW5nU2Vzc2lvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZWNvcmRpbmdTZXNzaW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nU2Vzc2lvbklkfScsIHJlY29yZGluZ1Nlc3Npb25JZCk7XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IGNyZWF0ZSBhIGxvY2FsIHJlY29yZGluZyBrZXlcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBMb2NhbCBFbmNyeXB0aW9uIGJvZHlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvbmZpZ0lkXCI6IFwiXCIsXG4gICBcInB1YmxpY0tleVwiOiBcIlwiLFxuICAgXCJrZXlwYWlySWRcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNyZWF0ZURhdGVcIjogXCJcIixcbiAgIFwia2V5ZGF0YVN1bW1hcnlcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUucG9zdExvY2Fsa2V5cyA9IGZ1bmN0aW9uIHBvc3RMb2NhbGtleXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVjb3JkaW5nL2xvY2Fsa2V5cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIHBhZ2VkIGxpc3Rpbmcgb2Ygc2NyZWVuIHJlY29yZGluZyBzZXNzaW9uc1xuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0c1NjcmVlbnNlc3Npb25zID0gZnVuY3Rpb24gZ2V0c1NjcmVlbnNlc3Npb25zKHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmdzL3NjcmVlbnNlc3Npb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXRzIG1lZGlhIHJldGVudGlvbiBwb2xpY3kgbGlzdCB3aXRoIHF1ZXJ5IG9wdGlvbnMgdG8gZmlsdGVyIG9uIG5hbWUgYW5kIGVuYWJsZWQuXG4gICogQGRlc2NyaXB0aW9uIGZvciBhIGxlc3MgdmVyYm9zZSByZXNwb25zZSwgYWRkIHN1bW1hcnk9dHJ1ZSB0byB0aGlzIGVuZHBvaW50XG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBUaGUgdG90YWwgcGFnZSBzaXplIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFRoZSBwYWdlIG51bWJlciByZXF1ZXN0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgdG8gc29ydCBieVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIHZhcmlhYmxlIG5hbWUgcmVxdWVzdGVkIGJ5IGV4cGFuZCBsaXN0XG4gICogQHBhcmFtIHtzdHJpbmd9IG5leHRQYWdlIC0gbmV4dCBwYWdlIHRva2VuXG4gICogQHBhcmFtIHtzdHJpbmd9IHByZXZpb3VzUGFnZSAtIFByZXZpb3VzIHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIHRoZSBwb2xpY3kgbmFtZSAtIHVzZWQgZm9yIGZpbHRlcmluZyByZXN1bHRzIGluIHNlYXJjaGVzLlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIGNoZWNrcyB0byBzZWUgaWYgcG9saWN5IGlzIGVuYWJsZWQgLSB1c2UgZW5hYmxlZCA9IHRydWUgb3IgZW5hYmxlZCA9IGZhbHNlXG4gICogQHBhcmFtIHtib29sZWFufSBzdW1tYXJ5IC0gcHJvdmlkZXMgYSBsZXNzIHZlcmJvc2UgcmVzcG9uc2Ugb2YgcG9saWN5IGxpc3RzLlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzRXJyb3JzIC0gcHJvdmlkZXMgYSB3YXkgdG8gZmV0Y2ggYWxsIHBvbGljaWVzIHdpdGggZXJyb3JzIG9yIHBvbGljaWVzIHRoYXQgZG8gbm90IGhhdmUgZXJyb3JzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLmdldE1lZGlhcmV0ZW50aW9ucG9saWNpZXMgPSBmdW5jdGlvbiBnZXRNZWRpYXJldGVudGlvbnBvbGljaWVzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIGV4cGFuZCwgbmV4dFBhZ2UsIHByZXZpb3VzUGFnZSwgbmFtZSwgZW5hYmxlZCwgc3VtbWFyeSwgaGFzRXJyb3JzKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuZXh0UGFnZVwiXSA9IG5leHRQYWdlO1xuICAgIHJlcXVlc3RRdWVyeVtcInByZXZpb3VzUGFnZVwiXSA9IHByZXZpb3VzUGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJlbmFibGVkXCJdID0gZW5hYmxlZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJzdW1tYXJ5XCJdID0gc3VtbWFyeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJoYXNFcnJvcnNcIl0gPSBoYXNFcnJvcnM7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIG1lZGlhIHJldGVudGlvbiBwb2xpY3lcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQb2xpY3lcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm9yZGVyXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibWVkaWFQb2xpY2llc1wiOiB7XG4gICAgICBcImNhbGxQb2xpY3lcIjoge30sXG4gICAgICBcImNoYXRQb2xpY3lcIjoge30sXG4gICAgICBcImVtYWlsUG9saWN5XCI6IHt9XG4gICB9LFxuICAgXCJjb25kaXRpb25zXCI6IHtcbiAgICAgIFwiZm9yVXNlcnNcIjogW10sXG4gICAgICBcImRpcmVjdGlvbnNcIjogW10sXG4gICAgICBcImRhdGVSYW5nZXNcIjogW10sXG4gICAgICBcIm1lZGlhVHlwZXNcIjogW10sXG4gICAgICBcImZvclF1ZXVlc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25cIjoge30sXG4gICAgICBcIndyYXB1cENvZGVzXCI6IFtdLFxuICAgICAgXCJ0aW1lQWxsb3dlZFwiOiB7fVxuICAgfSxcbiAgIFwiYWN0aW9uc1wiOiB7XG4gICAgICBcInJldGFpblJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJkZWxldGVSZWNvcmRpbmdcIjogdHJ1ZSxcbiAgICAgIFwiYWx3YXlzRGVsZXRlXCI6IHRydWUsXG4gICAgICBcImFzc2lnbkV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJhc3NpZ25NZXRlcmVkRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbkNhbGlicmF0aW9uc1wiOiBbXSxcbiAgICAgIFwicmV0ZW50aW9uRHVyYXRpb25cIjoge30sXG4gICAgICBcImluaXRpYXRlU2NyZWVuUmVjb3JkaW5nXCI6IHt9XG4gICB9LFxuICAgXCJwb2xpY3lFcnJvcnNcIjoge1xuICAgICAgXCJwb2xpY3lFcnJvck1lc3NhZ2VzXCI6IFtdXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm9yZGVyXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibWVkaWFQb2xpY2llc1wiOiB7XG4gICAgICBcImNhbGxQb2xpY3lcIjoge30sXG4gICAgICBcImNoYXRQb2xpY3lcIjoge30sXG4gICAgICBcImVtYWlsUG9saWN5XCI6IHt9XG4gICB9LFxuICAgXCJjb25kaXRpb25zXCI6IHtcbiAgICAgIFwiZm9yVXNlcnNcIjogW10sXG4gICAgICBcImRpcmVjdGlvbnNcIjogW10sXG4gICAgICBcImRhdGVSYW5nZXNcIjogW10sXG4gICAgICBcIm1lZGlhVHlwZXNcIjogW10sXG4gICAgICBcImZvclF1ZXVlc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25cIjoge30sXG4gICAgICBcIndyYXB1cENvZGVzXCI6IFtdLFxuICAgICAgXCJ0aW1lQWxsb3dlZFwiOiB7fVxuICAgfSxcbiAgIFwiYWN0aW9uc1wiOiB7XG4gICAgICBcInJldGFpblJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJkZWxldGVSZWNvcmRpbmdcIjogdHJ1ZSxcbiAgICAgIFwiYWx3YXlzRGVsZXRlXCI6IHRydWUsXG4gICAgICBcImFzc2lnbkV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJhc3NpZ25NZXRlcmVkRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbkNhbGlicmF0aW9uc1wiOiBbXSxcbiAgICAgIFwicmV0ZW50aW9uRHVyYXRpb25cIjoge30sXG4gICAgICBcImluaXRpYXRlU2NyZWVuUmVjb3JkaW5nXCI6IHt9XG4gICB9LFxuICAgXCJwb2xpY3lFcnJvcnNcIjoge1xuICAgICAgXCJwb2xpY3lFcnJvck1lc3NhZ2VzXCI6IFtdXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUucG9zdE1lZGlhcmV0ZW50aW9ucG9saWNpZXMgPSBmdW5jdGlvbiBwb3N0TWVkaWFyZXRlbnRpb25wb2xpY2llcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBtZWRpYSByZXRlbnRpb24gcG9saWNpZXNcbiAgKiBAZGVzY3JpcHRpb24gQnVsayBkZWxldGUgb2YgbWVkaWEgcmV0ZW50aW9uIHBvbGljaWVzLCB0aGlzIHdpbGwgb25seSBkZWxldGUgdGhlIHBvbGljZXMgdGhhdCBtYXRjaCB0aGUgaWRzIHNwZWNpZmllZCBpbiB0aGUgcXVlcnkgcGFyYW0uXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBpZHMgLSBCdWxrIGRlbGV0ZSBvZiBtZWRpYSByZXRlbnRpb24gcG9saWNpZXMsIHRoaXMgd2lsbCBvbmx5IGRlbGV0ZSB0aGUgcG9saWNlcyB0aGF0IG1hdGNoIHRoZSBpZHMgc3BlY2lmaWVkIGluIHRoZSBxdWVyeSBwYXJhbS5cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlTWVkaWFyZXRlbnRpb25wb2xpY2llcyA9IGZ1bmN0aW9uIGRlbGV0ZU1lZGlhcmV0ZW50aW9ucG9saWNpZXMoaWRzKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGlkcyA9PT0gdW5kZWZpbmVkIHx8IGlkcyA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogaWRzJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImlkc1wiXSA9IGlkcztcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW5ub3RhdGlvbnMgZm9yIHJlY29yZGluZ1xuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVjb3JkaW5nSWQgLSBSZWNvcmRpbmcgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIixcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwidHlwZVwiOiBcIlwiLFxuICBcImxvY2F0aW9uXCI6IDAsXG4gIFwiZHVyYXRpb25Nc1wiOiAwLFxuICBcInVzZXJcIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNoYXRcIjoge30sXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge30sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gIFwia2V5d29yZE5hbWVcIjogXCJcIixcbiAgXCJjb25maWRlbmNlXCI6IHt9LFxuICBcImtleXdvcmRTZXRJZFwiOiBcIlwiLFxuICBcImtleXdvcmRTZXROYW1lXCI6IFwiXCIsXG4gIFwidXR0ZXJhbmNlXCI6IFwiXCIsXG4gIFwidGltZUJlZ2luXCI6IFwiXCIsXG4gIFwidGltZUVuZFwiOiBcIlwiLFxuICBcImtleXdvcmRDb25maWRlbmNlVGhyZXNob2xkXCI6IFwiXCIsXG4gIFwiYWdlbnRTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gIFwiY3VzdG9tZXJTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25JZFJlY29yZGluZ3NSZWNvcmRpbmdJZEFubm90YXRpb25zID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWRBbm5vdGF0aW9ucyhjb252ZXJzYXRpb25JZCwgcmVjb3JkaW5nSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9yZWNvcmRpbmdzL3tyZWNvcmRpbmdJZH0vYW5ub3RhdGlvbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhbm5vdGF0aW9uXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIENvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSByZWNvcmRpbmdJZCAtIFJlY29yZGluZyBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gYW5ub3RhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcImxvY2F0aW9uXCI6IDAsXG4gICBcImR1cmF0aW9uTXNcIjogMCxcbiAgIFwidXNlclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJrZXl3b3JkTmFtZVwiOiBcIlwiLFxuICAgXCJjb25maWRlbmNlXCI6IHt9LFxuICAgXCJrZXl3b3JkU2V0SWRcIjogXCJcIixcbiAgIFwia2V5d29yZFNldE5hbWVcIjogXCJcIixcbiAgIFwidXR0ZXJhbmNlXCI6IFwiXCIsXG4gICBcInRpbWVCZWdpblwiOiBcIlwiLFxuICAgXCJ0aW1lRW5kXCI6IFwiXCIsXG4gICBcImtleXdvcmRDb25maWRlbmNlVGhyZXNob2xkXCI6IFwiXCIsXG4gICBcImFnZW50U2NvcmVNb2RpZmllclwiOiBcIlwiLFxuICAgXCJjdXN0b21lclNjb3JlTW9kaWZpZXJcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwibG9jYXRpb25cIjogMCxcbiAgIFwiZHVyYXRpb25Nc1wiOiAwLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImtleXdvcmROYW1lXCI6IFwiXCIsXG4gICBcImNvbmZpZGVuY2VcIjoge30sXG4gICBcImtleXdvcmRTZXRJZFwiOiBcIlwiLFxuICAgXCJrZXl3b3JkU2V0TmFtZVwiOiBcIlwiLFxuICAgXCJ1dHRlcmFuY2VcIjogXCJcIixcbiAgIFwidGltZUJlZ2luXCI6IFwiXCIsXG4gICBcInRpbWVFbmRcIjogXCJcIixcbiAgIFwia2V5d29yZENvbmZpZGVuY2VUaHJlc2hvbGRcIjogXCJcIixcbiAgIFwiYWdlbnRTY29yZU1vZGlmaWVyXCI6IFwiXCIsXG4gICBcImN1c3RvbWVyU2NvcmVNb2RpZmllclwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUucG9zdENvbnZlcnNhdGlvbklkUmVjb3JkaW5nc1JlY29yZGluZ0lkQW5ub3RhdGlvbnMgPSBmdW5jdGlvbiBwb3N0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWRBbm5vdGF0aW9ucyhjb252ZXJzYXRpb25JZCwgcmVjb3JkaW5nSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9yZWNvcmRpbmdzL3tyZWNvcmRpbmdJZH0vYW5ub3RhdGlvbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBrZXkgcm90YXRpb24gc2NoZWR1bGVcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicGVyaW9kXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5nZXRSZWNvcmRpbmdrZXlzUm90YXRpb25zY2hlZHVsZSA9IGZ1bmN0aW9uIGdldFJlY29yZGluZ2tleXNSb3RhdGlvbnNjaGVkdWxlKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVjb3JkaW5nL3JlY29yZGluZ2tleXMvcm90YXRpb25zY2hlZHVsZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBrZXkgcm90YXRpb24gc2NoZWR1bGVcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBLZXlSb3RhdGlvblNjaGVkdWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBlcmlvZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicGVyaW9kXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5wdXRSZWNvcmRpbmdrZXlzUm90YXRpb25zY2hlZHVsZSA9IGZ1bmN0aW9uIHB1dFJlY29yZGluZ2tleXNSb3RhdGlvbnNjaGVkdWxlKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JlY29yZGluZy9yZWNvcmRpbmdrZXlzL3JvdGF0aW9uc2NoZWR1bGUnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIG1lZGlhIHJldGVudGlvbiBwb2xpY3lcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBvbGljeUlkIC0gUG9saWN5IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm9yZGVyXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibWVkaWFQb2xpY2llc1wiOiB7XG4gICAgICBcImNhbGxQb2xpY3lcIjoge30sXG4gICAgICBcImNoYXRQb2xpY3lcIjoge30sXG4gICAgICBcImVtYWlsUG9saWN5XCI6IHt9XG4gICB9LFxuICAgXCJjb25kaXRpb25zXCI6IHtcbiAgICAgIFwiZm9yVXNlcnNcIjogW10sXG4gICAgICBcImRpcmVjdGlvbnNcIjogW10sXG4gICAgICBcImRhdGVSYW5nZXNcIjogW10sXG4gICAgICBcIm1lZGlhVHlwZXNcIjogW10sXG4gICAgICBcImZvclF1ZXVlc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25cIjoge30sXG4gICAgICBcIndyYXB1cENvZGVzXCI6IFtdLFxuICAgICAgXCJ0aW1lQWxsb3dlZFwiOiB7fVxuICAgfSxcbiAgIFwiYWN0aW9uc1wiOiB7XG4gICAgICBcInJldGFpblJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJkZWxldGVSZWNvcmRpbmdcIjogdHJ1ZSxcbiAgICAgIFwiYWx3YXlzRGVsZXRlXCI6IHRydWUsXG4gICAgICBcImFzc2lnbkV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJhc3NpZ25NZXRlcmVkRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbkNhbGlicmF0aW9uc1wiOiBbXSxcbiAgICAgIFwicmV0ZW50aW9uRHVyYXRpb25cIjoge30sXG4gICAgICBcImluaXRpYXRlU2NyZWVuUmVjb3JkaW5nXCI6IHt9XG4gICB9LFxuICAgXCJwb2xpY3lFcnJvcnNcIjoge1xuICAgICAgXCJwb2xpY3lFcnJvck1lc3NhZ2VzXCI6IFtdXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0TWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkID0gZnVuY3Rpb24gZ2V0TWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkKHBvbGljeUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcy97cG9saWN5SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocG9saWN5SWQgPT09IHVuZGVmaW5lZCB8fCBwb2xpY3lJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcG9saWN5SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cG9saWN5SWR9JywgcG9saWN5SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIG1lZGlhIHJldGVudGlvbiBwb2xpY3lcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBvbGljeUlkIC0gUG9saWN5IElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQb2xpY3lcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm9yZGVyXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibWVkaWFQb2xpY2llc1wiOiB7XG4gICAgICBcImNhbGxQb2xpY3lcIjoge30sXG4gICAgICBcImNoYXRQb2xpY3lcIjoge30sXG4gICAgICBcImVtYWlsUG9saWN5XCI6IHt9XG4gICB9LFxuICAgXCJjb25kaXRpb25zXCI6IHtcbiAgICAgIFwiZm9yVXNlcnNcIjogW10sXG4gICAgICBcImRpcmVjdGlvbnNcIjogW10sXG4gICAgICBcImRhdGVSYW5nZXNcIjogW10sXG4gICAgICBcIm1lZGlhVHlwZXNcIjogW10sXG4gICAgICBcImZvclF1ZXVlc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25cIjoge30sXG4gICAgICBcIndyYXB1cENvZGVzXCI6IFtdLFxuICAgICAgXCJ0aW1lQWxsb3dlZFwiOiB7fVxuICAgfSxcbiAgIFwiYWN0aW9uc1wiOiB7XG4gICAgICBcInJldGFpblJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJkZWxldGVSZWNvcmRpbmdcIjogdHJ1ZSxcbiAgICAgIFwiYWx3YXlzRGVsZXRlXCI6IHRydWUsXG4gICAgICBcImFzc2lnbkV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJhc3NpZ25NZXRlcmVkRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbkNhbGlicmF0aW9uc1wiOiBbXSxcbiAgICAgIFwicmV0ZW50aW9uRHVyYXRpb25cIjoge30sXG4gICAgICBcImluaXRpYXRlU2NyZWVuUmVjb3JkaW5nXCI6IHt9XG4gICB9LFxuICAgXCJwb2xpY3lFcnJvcnNcIjoge1xuICAgICAgXCJwb2xpY3lFcnJvck1lc3NhZ2VzXCI6IFtdXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm9yZGVyXCI6IDAsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwibWVkaWFQb2xpY2llc1wiOiB7XG4gICAgICBcImNhbGxQb2xpY3lcIjoge30sXG4gICAgICBcImNoYXRQb2xpY3lcIjoge30sXG4gICAgICBcImVtYWlsUG9saWN5XCI6IHt9XG4gICB9LFxuICAgXCJjb25kaXRpb25zXCI6IHtcbiAgICAgIFwiZm9yVXNlcnNcIjogW10sXG4gICAgICBcImRpcmVjdGlvbnNcIjogW10sXG4gICAgICBcImRhdGVSYW5nZXNcIjogW10sXG4gICAgICBcIm1lZGlhVHlwZXNcIjogW10sXG4gICAgICBcImZvclF1ZXVlc1wiOiBbXSxcbiAgICAgIFwiZHVyYXRpb25cIjoge30sXG4gICAgICBcIndyYXB1cENvZGVzXCI6IFtdLFxuICAgICAgXCJ0aW1lQWxsb3dlZFwiOiB7fVxuICAgfSxcbiAgIFwiYWN0aW9uc1wiOiB7XG4gICAgICBcInJldGFpblJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJkZWxldGVSZWNvcmRpbmdcIjogdHJ1ZSxcbiAgICAgIFwiYWx3YXlzRGVsZXRlXCI6IHRydWUsXG4gICAgICBcImFzc2lnbkV2YWx1YXRpb25zXCI6IFtdLFxuICAgICAgXCJhc3NpZ25NZXRlcmVkRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbkNhbGlicmF0aW9uc1wiOiBbXSxcbiAgICAgIFwicmV0ZW50aW9uRHVyYXRpb25cIjoge30sXG4gICAgICBcImluaXRpYXRlU2NyZWVuUmVjb3JkaW5nXCI6IHt9XG4gICB9LFxuICAgXCJwb2xpY3lFcnJvcnNcIjoge1xuICAgICAgXCJwb2xpY3lFcnJvck1lc3NhZ2VzXCI6IFtdXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUucHV0TWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkID0gZnVuY3Rpb24gcHV0TWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkKHBvbGljeUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcy97cG9saWN5SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocG9saWN5SWQgPT09IHVuZGVmaW5lZCB8fCBwb2xpY3lJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcG9saWN5SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cG9saWN5SWR9JywgcG9saWN5SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgbWVkaWEgcmV0ZW50aW9uIHBvbGljeVxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcG9saWN5SWQgLSBQb2xpY3kgSURcbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlTWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkID0gZnVuY3Rpb24gZGVsZXRlTWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkKHBvbGljeUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcy97cG9saWN5SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocG9saWN5SWQgPT09IHVuZGVmaW5lZCB8fCBwb2xpY3lJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcG9saWN5SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cG9saWN5SWR9JywgcG9saWN5SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFBhdGNoIGEgbWVkaWEgcmV0ZW50aW9uIHBvbGljeVxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcG9saWN5SWQgLSBQb2xpY3kgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBvbGljeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwib3JkZXJcIjogMCxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJtZWRpYVBvbGljaWVzXCI6IHtcbiAgICAgIFwiY2FsbFBvbGljeVwiOiB7fSxcbiAgICAgIFwiY2hhdFBvbGljeVwiOiB7fSxcbiAgICAgIFwiZW1haWxQb2xpY3lcIjoge31cbiAgIH0sXG4gICBcImNvbmRpdGlvbnNcIjoge1xuICAgICAgXCJmb3JVc2Vyc1wiOiBbXSxcbiAgICAgIFwiZGlyZWN0aW9uc1wiOiBbXSxcbiAgICAgIFwiZGF0ZVJhbmdlc1wiOiBbXSxcbiAgICAgIFwibWVkaWFUeXBlc1wiOiBbXSxcbiAgICAgIFwiZm9yUXVldWVzXCI6IFtdLFxuICAgICAgXCJkdXJhdGlvblwiOiB7fSxcbiAgICAgIFwid3JhcHVwQ29kZXNcIjogW10sXG4gICAgICBcInRpbWVBbGxvd2VkXCI6IHt9XG4gICB9LFxuICAgXCJhY3Rpb25zXCI6IHtcbiAgICAgIFwicmV0YWluUmVjb3JkaW5nXCI6IHRydWUsXG4gICAgICBcImRlbGV0ZVJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJhbHdheXNEZWxldGVcIjogdHJ1ZSxcbiAgICAgIFwiYXNzaWduRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbk1ldGVyZWRFdmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiYXNzaWduQ2FsaWJyYXRpb25zXCI6IFtdLFxuICAgICAgXCJyZXRlbnRpb25EdXJhdGlvblwiOiB7fSxcbiAgICAgIFwiaW5pdGlhdGVTY3JlZW5SZWNvcmRpbmdcIjoge31cbiAgIH0sXG4gICBcInBvbGljeUVycm9yc1wiOiB7XG4gICAgICBcInBvbGljeUVycm9yTWVzc2FnZXNcIjogW11cbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwib3JkZXJcIjogMCxcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJtZWRpYVBvbGljaWVzXCI6IHtcbiAgICAgIFwiY2FsbFBvbGljeVwiOiB7fSxcbiAgICAgIFwiY2hhdFBvbGljeVwiOiB7fSxcbiAgICAgIFwiZW1haWxQb2xpY3lcIjoge31cbiAgIH0sXG4gICBcImNvbmRpdGlvbnNcIjoge1xuICAgICAgXCJmb3JVc2Vyc1wiOiBbXSxcbiAgICAgIFwiZGlyZWN0aW9uc1wiOiBbXSxcbiAgICAgIFwiZGF0ZVJhbmdlc1wiOiBbXSxcbiAgICAgIFwibWVkaWFUeXBlc1wiOiBbXSxcbiAgICAgIFwiZm9yUXVldWVzXCI6IFtdLFxuICAgICAgXCJkdXJhdGlvblwiOiB7fSxcbiAgICAgIFwid3JhcHVwQ29kZXNcIjogW10sXG4gICAgICBcInRpbWVBbGxvd2VkXCI6IHt9XG4gICB9LFxuICAgXCJhY3Rpb25zXCI6IHtcbiAgICAgIFwicmV0YWluUmVjb3JkaW5nXCI6IHRydWUsXG4gICAgICBcImRlbGV0ZVJlY29yZGluZ1wiOiB0cnVlLFxuICAgICAgXCJhbHdheXNEZWxldGVcIjogdHJ1ZSxcbiAgICAgIFwiYXNzaWduRXZhbHVhdGlvbnNcIjogW10sXG4gICAgICBcImFzc2lnbk1ldGVyZWRFdmFsdWF0aW9uc1wiOiBbXSxcbiAgICAgIFwiYXNzaWduQ2FsaWJyYXRpb25zXCI6IFtdLFxuICAgICAgXCJyZXRlbnRpb25EdXJhdGlvblwiOiB7fSxcbiAgICAgIFwiaW5pdGlhdGVTY3JlZW5SZWNvcmRpbmdcIjoge31cbiAgIH0sXG4gICBcInBvbGljeUVycm9yc1wiOiB7XG4gICAgICBcInBvbGljeUVycm9yTWVzc2FnZXNcIjogW11cbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5wYXRjaE1lZGlhcmV0ZW50aW9ucG9saWNpZXNQb2xpY3lJZCA9IGZ1bmN0aW9uIHBhdGNoTWVkaWFyZXRlbnRpb25wb2xpY2llc1BvbGljeUlkKHBvbGljeUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZWNvcmRpbmcvbWVkaWFyZXRlbnRpb25wb2xpY2llcy97cG9saWN5SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocG9saWN5SWQgPT09IHVuZGVmaW5lZCB8fCBwb2xpY3lJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcG9saWN5SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cG9saWN5SWR9JywgcG9saWN5SWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXRzIGEgc3BlY2lmaWMgcmVjb3JkaW5nLlxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVjb3JkaW5nSWQgLSBSZWNvcmRpbmcgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0SWQgLSBUaGUgZGVzaXJlZCBtZWRpYSBmb3JtYXQuXG4gIFdBVixcbiAgV0VCTSxcbiAgV0FWX1VMQVcsXG4gIE9HR19WT1JCSVMsXG4gIE9HR19PUFVTLFxuICBOT05FLFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZG93bmxvYWQgLSByZXF1ZXN0aW5nIGEgZG93bmxvYWQgZm9ybWF0IG9mIHRoZSByZWNvcmRpbmdcbiAgdHJ1ZSxcbiAgZmFsc2UsXG4gICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lIC0gdGhlIG5hbWUgb2YgdGhlIGRvd25sb2FkZWQgZmlsZU5hbWVcbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWQgPSBmdW5jdGlvbiBnZXRDb252ZXJzYXRpb25JZFJlY29yZGluZ3NSZWNvcmRpbmdJZChjb252ZXJzYXRpb25JZCwgcmVjb3JkaW5nSWQsIGZvcm1hdElkLCBkb3dubG9hZCwgZmlsZU5hbWUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbnZlcnNhdGlvbnMve2NvbnZlcnNhdGlvbklkfS9yZWNvcmRpbmdzL3tyZWNvcmRpbmdJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb252ZXJzYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8IGNvbnZlcnNhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb252ZXJzYXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb252ZXJzYXRpb25JZH0nLCBjb252ZXJzYXRpb25JZCk7XG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImZvcm1hdElkXCJdID0gZm9ybWF0SWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZG93bmxvYWRcIl0gPSBkb3dubG9hZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJmaWxlTmFtZVwiXSA9IGZpbGVOYW1lO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZXMgdGhlIHJldGVudGlvbiByZWNvcmRzIG9uIGEgcmVjb3JkaW5nLlxuICAqIEBkZXNjcmlwdGlvbiBDdXJyZW50bHkgc3VwcG9ydHMgdXBkYXRpbmcgYW5kIHJlbW92aW5nIGJvdGggYXJjaGl2ZSBhbmQgZGVsZXRlIGRhdGVzIGZvciBlbGlnaWJsZSByZWNvcmRpbmdzLiBBIHJlcXVlc3QgdG8gY2hhbmdlIHRoZSBhcmNoaXZhbCBkYXRlIG9mIGFuIGFyY2hpdmVkIHJlY29yZGluZyB3aWxsIHJlc3VsdCBpbiBhIHJlc3RvcmF0aW9uIG9mIHRoZSByZWNvcmRpbmcgdW50aWwgdGhlIG5ldyBkYXRlIHNldC4gXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIENvbnZlcnNhdGlvbiBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSByZWNvcmRpbmdJZCAtIFJlY29yZGluZyBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gcmVjb3JkaW5nXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbklkXCI6IFwiXCIsXG4gICBcInBhdGhcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwibWVkaWFcIjogXCJcIixcbiAgIFwiYW5ub3RhdGlvbnNcIjogW10sXG4gICBcInRyYW5zY3JpcHRcIjogW10sXG4gICBcImVtYWlsVHJhbnNjcmlwdFwiOiBbXSxcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInJlc3RvcmVFeHBpcmF0aW9uVGltZVwiOiBcIlwiLFxuICAgXCJtZWRpYVVyaXNcIjoge30sXG4gICBcImVzdGltYXRlZFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgXCJhY3R1YWxUcmFuc2NvZGVUaW1lTXNcIjogMCxcbiAgIFwiYXJjaGl2ZURhdGVcIjogXCJcIixcbiAgIFwiYXJjaGl2ZU1lZGl1bVwiOiBcIlwiLFxuICAgXCJkZWxldGVEYXRlXCI6IFwiXCIsXG4gICBcIm1heEFsbG93ZWRSZXN0b3JhdGlvbnNGb3JPcmdcIjogMCxcbiAgIFwicmVtYWluaW5nUmVzdG9yYXRpb25zQWxsb3dlZEZvck9yZ1wiOiAwLFxuICAgXCJzZXNzaW9uSWRcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbklkXCI6IFwiXCIsXG4gICBcInBhdGhcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwibWVkaWFcIjogXCJcIixcbiAgIFwiYW5ub3RhdGlvbnNcIjogW10sXG4gICBcInRyYW5zY3JpcHRcIjogW10sXG4gICBcImVtYWlsVHJhbnNjcmlwdFwiOiBbXSxcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInJlc3RvcmVFeHBpcmF0aW9uVGltZVwiOiBcIlwiLFxuICAgXCJtZWRpYVVyaXNcIjoge30sXG4gICBcImVzdGltYXRlZFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgXCJhY3R1YWxUcmFuc2NvZGVUaW1lTXNcIjogMCxcbiAgIFwiYXJjaGl2ZURhdGVcIjogXCJcIixcbiAgIFwiYXJjaGl2ZU1lZGl1bVwiOiBcIlwiLFxuICAgXCJkZWxldGVEYXRlXCI6IFwiXCIsXG4gICBcIm1heEFsbG93ZWRSZXN0b3JhdGlvbnNGb3JPcmdcIjogMCxcbiAgIFwicmVtYWluaW5nUmVzdG9yYXRpb25zQWxsb3dlZEZvck9yZ1wiOiAwLFxuICAgXCJzZXNzaW9uSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLnB1dENvbnZlcnNhdGlvbklkUmVjb3JkaW5nc1JlY29yZGluZ0lkID0gZnVuY3Rpb24gcHV0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzUmVjb3JkaW5nSWQoY29udmVyc2F0aW9uSWQsIHJlY29yZGluZ0lkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL3tjb252ZXJzYXRpb25JZH0vcmVjb3JkaW5ncy97cmVjb3JkaW5nSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBjb252ZXJzYXRpb25JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY29udmVyc2F0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29udmVyc2F0aW9uSWR9JywgY29udmVyc2F0aW9uSWQpO1xuICAgIGlmKHJlY29yZGluZ0lkID09PSB1bmRlZmluZWQgfHwgcmVjb3JkaW5nSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJlY29yZGluZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JlY29yZGluZ0lkfScsIHJlY29yZGluZ0lkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldHMgYSBzaW5nbGUgb3JwaGFuIHJlY29yZGluZ1xuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3JwaGFuSWQgLSBPcnBoYW4gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkVGltZVwiOiBcIlwiLFxuICAgXCJyZWNvdmVyZWRUaW1lXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZWRpYVNpemVCeXRlc1wiOiAwLFxuICAgXCJtZWRpYVR5cGVcIjogXCJcIixcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyRW5kcG9pbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNvdW50XCI6IDAsXG4gICAgICBcInByb3BlcnRpZXNcIjoge30sXG4gICAgICBcInNjaGVtYVwiOiB7fSxcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJkaWRzXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJlY29yZGluZ1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uSWRcIjogXCJcIixcbiAgICAgIFwicGF0aFwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVwiOiBcIlwiLFxuICAgICAgXCJhbm5vdGF0aW9uc1wiOiBbXSxcbiAgICAgIFwidHJhbnNjcmlwdFwiOiBbXSxcbiAgICAgIFwiZW1haWxUcmFuc2NyaXB0XCI6IFtdLFxuICAgICAgXCJmaWxlU3RhdGVcIjogXCJcIixcbiAgICAgIFwicmVzdG9yZUV4cGlyYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcIm1lZGlhVXJpc1wiOiB7fSxcbiAgICAgIFwiZXN0aW1hdGVkVHJhbnNjb2RlVGltZU1zXCI6IDAsXG4gICAgICBcImFjdHVhbFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgICAgXCJhcmNoaXZlRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhcmNoaXZlTWVkaXVtXCI6IFwiXCIsXG4gICAgICBcImRlbGV0ZURhdGVcIjogXCJcIixcbiAgICAgIFwibWF4QWxsb3dlZFJlc3RvcmF0aW9uc0Zvck9yZ1wiOiAwLFxuICAgICAgXCJyZW1haW5pbmdSZXN0b3JhdGlvbnNBbGxvd2VkRm9yT3JnXCI6IDAsXG4gICAgICBcInNlc3Npb25JZFwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm9ycGhhblN0YXR1c1wiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0T3JwaGFuSWQgPSBmdW5jdGlvbiBnZXRPcnBoYW5JZChvcnBoYW5JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3JwaGFucmVjb3JkaW5ncy97b3JwaGFuSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3JwaGFuSWQgPT09IHVuZGVmaW5lZCB8fCBvcnBoYW5JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogb3JwaGFuSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3JwaGFuSWR9Jywgb3JwaGFuSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZXMgYW4gb3JwaGFuIHJlY29yZGluZyB0byBhIHJlZ3VsYXIgcmVjb3JkaW5nIHdpdGggcmV0ZW50aW9uIHZhbHVlc1xuICAqIEBkZXNjcmlwdGlvbiBJZiB0aGlzIG9wZXJhdGlvbiBpcyBzdWNjZXNzZnVsIHRoZSBvcnBoYW4gd2lsbCBubyBsb25nZXIgZXhpc3QuIEl0IHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIHJlc3VsdGluZyByZWNvcmRpbmcgaW4gdGhlIHJlc3BvbnNlLiBUaGlzIHJlcGxhY2VtZW50IHJlY29yZGluZyBpcyBhY2Nlc3NpYmxlIGJ5IHRoZSBub3JtYWwgUmVjb3JkaW5nIGFwaS5cbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG9ycGhhbklkIC0gT3JwaGFuIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBJZiB0aGlzIG9wZXJhdGlvbiBpcyBzdWNjZXNzZnVsIHRoZSBvcnBoYW4gd2lsbCBubyBsb25nZXIgZXhpc3QuIEl0IHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIHJlc3VsdGluZyByZWNvcmRpbmcgaW4gdGhlIHJlc3BvbnNlLiBUaGlzIHJlcGxhY2VtZW50IHJlY29yZGluZyBpcyBhY2Nlc3NpYmxlIGJ5IHRoZSBub3JtYWwgUmVjb3JkaW5nIGFwaS5cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImFyY2hpdmVEYXRlXCI6IFwiXCIsXG4gICBcImRlbGV0ZURhdGVcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uSWRcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbklkXCI6IFwiXCIsXG4gICBcInBhdGhcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICBcImVuZFRpbWVcIjogXCJcIixcbiAgIFwibWVkaWFcIjogXCJcIixcbiAgIFwiYW5ub3RhdGlvbnNcIjogW10sXG4gICBcInRyYW5zY3JpcHRcIjogW10sXG4gICBcImVtYWlsVHJhbnNjcmlwdFwiOiBbXSxcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInJlc3RvcmVFeHBpcmF0aW9uVGltZVwiOiBcIlwiLFxuICAgXCJtZWRpYVVyaXNcIjoge30sXG4gICBcImVzdGltYXRlZFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgXCJhY3R1YWxUcmFuc2NvZGVUaW1lTXNcIjogMCxcbiAgIFwiYXJjaGl2ZURhdGVcIjogXCJcIixcbiAgIFwiYXJjaGl2ZU1lZGl1bVwiOiBcIlwiLFxuICAgXCJkZWxldGVEYXRlXCI6IFwiXCIsXG4gICBcIm1heEFsbG93ZWRSZXN0b3JhdGlvbnNGb3JPcmdcIjogMCxcbiAgIFwicmVtYWluaW5nUmVzdG9yYXRpb25zQWxsb3dlZEZvck9yZ1wiOiAwLFxuICAgXCJzZXNzaW9uSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLnB1dE9ycGhhbklkID0gZnVuY3Rpb24gcHV0T3JwaGFuSWQob3JwaGFuSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL29ycGhhbnJlY29yZGluZ3Mve29ycGhhbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG9ycGhhbklkID09PSB1bmRlZmluZWQgfHwgb3JwaGFuSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG9ycGhhbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne29ycGhhbklkfScsIG9ycGhhbklkKTtcbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZXMgYSBzaW5nbGUgb3JwaGFuIHJlY29yZGluZ1xuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3JwaGFuSWQgLSBPcnBoYW4gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkVGltZVwiOiBcIlwiLFxuICAgXCJyZWNvdmVyZWRUaW1lXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyVHlwZVwiOiBcIlwiLFxuICAgXCJtZWRpYVNpemVCeXRlc1wiOiAwLFxuICAgXCJtZWRpYVR5cGVcIjogXCJcIixcbiAgIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyRW5kcG9pbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNvdW50XCI6IDAsXG4gICAgICBcInByb3BlcnRpZXNcIjoge30sXG4gICAgICBcInNjaGVtYVwiOiB7fSxcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJkaWRzXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJlY29yZGluZ1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uSWRcIjogXCJcIixcbiAgICAgIFwicGF0aFwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJtZWRpYVwiOiBcIlwiLFxuICAgICAgXCJhbm5vdGF0aW9uc1wiOiBbXSxcbiAgICAgIFwidHJhbnNjcmlwdFwiOiBbXSxcbiAgICAgIFwiZW1haWxUcmFuc2NyaXB0XCI6IFtdLFxuICAgICAgXCJmaWxlU3RhdGVcIjogXCJcIixcbiAgICAgIFwicmVzdG9yZUV4cGlyYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcIm1lZGlhVXJpc1wiOiB7fSxcbiAgICAgIFwiZXN0aW1hdGVkVHJhbnNjb2RlVGltZU1zXCI6IDAsXG4gICAgICBcImFjdHVhbFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICAgICAgXCJhcmNoaXZlRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhcmNoaXZlTWVkaXVtXCI6IFwiXCIsXG4gICAgICBcImRlbGV0ZURhdGVcIjogXCJcIixcbiAgICAgIFwibWF4QWxsb3dlZFJlc3RvcmF0aW9uc0Zvck9yZ1wiOiAwLFxuICAgICAgXCJyZW1haW5pbmdSZXN0b3JhdGlvbnNBbGxvd2VkRm9yT3JnXCI6IDAsXG4gICAgICBcInNlc3Npb25JZFwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm9ycGhhblN0YXR1c1wiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlT3JwaGFuSWQgPSBmdW5jdGlvbiBkZWxldGVPcnBoYW5JZChvcnBoYW5JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvb3JwaGFucmVjb3JkaW5ncy97b3JwaGFuSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3JwaGFuSWQgPT09IHVuZGVmaW5lZCB8fCBvcnBoYW5JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogb3JwaGFuSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3JwaGFuSWR9Jywgb3JwaGFuSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbG9jYWwgZW5jcnlwdGlvbiBzZXR0aW5nc1xuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZ3NJZCAtIFNldHRpbmdzIElkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXJsXCI6IFwiXCIsXG4gICBcImFwaUlkXCI6IFwiXCIsXG4gICBcImFwaUtleVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0TG9jYWxrZXlzU2V0dGluZ3NTZXR0aW5nc0lkID0gZnVuY3Rpb24gZ2V0TG9jYWxrZXlzU2V0dGluZ3NTZXR0aW5nc0lkKHNldHRpbmdzSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JlY29yZGluZy9sb2NhbGtleXMvc2V0dGluZ3Mve3NldHRpbmdzSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2V0dGluZ3NJZCA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNldHRpbmdzSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2V0dGluZ3NJZH0nLCBzZXR0aW5nc0lkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgdGhlIGxvY2FsIGVuY3J5cHRpb24gc2V0dGluZ3NcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdzSWQgLSBTZXR0aW5ncyBJZFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTG9jYWwgRW5jcnlwdGlvbiBtZXRhZGF0YVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1cmxcIjogXCJcIixcbiAgIFwiYXBpSWRcIjogXCJcIixcbiAgIFwiYXBpS2V5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1cmxcIjogXCJcIixcbiAgIFwiYXBpSWRcIjogXCJcIixcbiAgIFwiYXBpS2V5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5wdXRMb2NhbGtleXNTZXR0aW5nc1NldHRpbmdzSWQgPSBmdW5jdGlvbiBwdXRMb2NhbGtleXNTZXR0aW5nc1NldHRpbmdzSWQoc2V0dGluZ3NJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVjb3JkaW5nL2xvY2Fsa2V5cy9zZXR0aW5ncy97c2V0dGluZ3NJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzZXR0aW5nc0lkID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3NJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2V0dGluZ3NJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzZXR0aW5nc0lkfScsIHNldHRpbmdzSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhbGwgb3JwaGFuIHJlY29yZGluZ3NcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFRoZSB0b3RhbCBwYWdlIHNpemUgcmVxdWVzdGVkXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gVGhlIHBhZ2UgbnVtYmVyIHJlcXVlc3RlZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSB2YXJpYWJsZSBuYW1lIHJlcXVlc3RlZCB0byBzb3J0IGJ5XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gdmFyaWFibGUgbmFtZSByZXF1ZXN0ZWQgYnkgZXhwYW5kIGxpc3RcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dFBhZ2UgLSBuZXh0IHBhZ2UgdG9rZW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gcHJldmlvdXNQYWdlIC0gUHJldmlvdXMgcGFnZSB0b2tlblxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzQ29udmVyc2F0aW9uIC0gRmlsdGVyIHJlc3VsdGluZyBvcnBoYW5zIGJ5IHdoZXRoZXIgdGhlIGNvbnZlcnNhdGlvbiBpcyBrbm93bi4gRmFsc2UgcmV0dXJucyBhbGwgb3JwaGFucyBmb3IgdGhlIG9yZ2FuaXphdGlvbi5cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0T3JwaGFucmVjb3JkaW5ncyA9IGZ1bmN0aW9uIGdldE9ycGhhbnJlY29yZGluZ3MocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgZXhwYW5kLCBuZXh0UGFnZSwgcHJldmlvdXNQYWdlLCBoYXNDb252ZXJzYXRpb24pe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL29ycGhhbnJlY29yZGluZ3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmV4dFBhZ2VcIl0gPSBuZXh0UGFnZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwcmV2aW91c1BhZ2VcIl0gPSBwcmV2aW91c1BhZ2U7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaGFzQ29udmVyc2F0aW9uXCJdID0gaGFzQ29udmVyc2F0aW9uO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbGwgb2YgYSBDb252ZXJzYXRpb24ncyBSZWNvcmRpbmdzLlxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVyc2F0aW9uSWQgLSBDb252ZXJzYXRpb24gSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IG1heFdhaXRNcyAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBmb3IgdGhlIHJlY29yZGluZyB0byBiZSByZWFkeS4gTXVzdCBiZSBhIHBvc2l0aXZlIHZhbHVlLlxuICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXRJZCAtIFRoZSBkZXNpcmVkIG1lZGlhIGZvcm1hdFxuICBXQVYsXG4gIFdFQk0sXG4gIFdBVl9VTEFXLFxuICBPR0dfVk9SQklTLFxuICBPR0dfT1BVUyxcbiAgTk9ORSxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIixcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwiY29udmVyc2F0aW9uSWRcIjogXCJcIixcbiAgXCJwYXRoXCI6IFwiXCIsXG4gIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gIFwiZW5kVGltZVwiOiBcIlwiLFxuICBcIm1lZGlhXCI6IFwiXCIsXG4gIFwiYW5ub3RhdGlvbnNcIjogW10sXG4gIFwidHJhbnNjcmlwdFwiOiBbXSxcbiAgXCJlbWFpbFRyYW5zY3JpcHRcIjogW10sXG4gIFwiZmlsZVN0YXRlXCI6IFwiXCIsXG4gIFwicmVzdG9yZUV4cGlyYXRpb25UaW1lXCI6IFwiXCIsXG4gIFwibWVkaWFVcmlzXCI6IHt9LFxuICBcImVzdGltYXRlZFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICBcImFjdHVhbFRyYW5zY29kZVRpbWVNc1wiOiAwLFxuICBcImFyY2hpdmVEYXRlXCI6IFwiXCIsXG4gIFwiYXJjaGl2ZU1lZGl1bVwiOiBcIlwiLFxuICBcImRlbGV0ZURhdGVcIjogXCJcIixcbiAgXCJtYXhBbGxvd2VkUmVzdG9yYXRpb25zRm9yT3JnXCI6IDAsXG4gIFwicmVtYWluaW5nUmVzdG9yYXRpb25zQWxsb3dlZEZvck9yZ1wiOiAwLFxuICBcInNlc3Npb25JZFwiOiBcIlwiLFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzID0gZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSWRSZWNvcmRpbmdzKGNvbnZlcnNhdGlvbklkLCBtYXhXYWl0TXMsIGZvcm1hdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb252ZXJzYXRpb25zL3tjb252ZXJzYXRpb25JZH0vcmVjb3JkaW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQgfHwgY29udmVyc2F0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvbnZlcnNhdGlvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NvbnZlcnNhdGlvbklkfScsIGNvbnZlcnNhdGlvbklkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJtYXhXYWl0TXNcIl0gPSBtYXhXYWl0TXM7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZm9ybWF0SWRcIl0gPSBmb3JtYXRJZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZW5jcnlwdGlvbiBrZXkgbGlzdFxuICAqIEBtZW1iZXJPZiBSZWNvcmRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJlY29yZGluZ0FwaS5wcm90b3R5cGUuZ2V0UmVjb3JkaW5na2V5cyA9IGZ1bmN0aW9uIGdldFJlY29yZGluZ2tleXMocGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JlY29yZGluZy9yZWNvcmRpbmdrZXlzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgZW5jcnlwdGlvbiBrZXlcbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY3JlYXRlRGF0ZVwiOiBcIlwiLFxuICAgXCJrZXlkYXRhU3VtbWFyeVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5wb3N0UmVjb3JkaW5na2V5cyA9IGZ1bmN0aW9uIHBvc3RSZWNvcmRpbmdrZXlzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVjb3JkaW5nL3JlY29yZGluZ2tleXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBSZWNvcmRpbmcgU2V0dGluZ3MgZm9yIHRoZSBPcmdhbml6YXRpb25cbiAgKiBAbWVtYmVyT2YgUmVjb3JkaW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtib29sZWFufSBjcmVhdGVEZWZhdWx0IC0gSWYgbm8gc2V0dGluZ3MgYXJlIGZvdW5kLCBhIG5ldyBvbmUgaXMgY3JlYXRlZCB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm1heFNpbXVsdGFuZW91c1N0cmVhbXNcIjogMFxufVxuICAqL1xuUmVjb3JkaW5nQXBpLnByb3RvdHlwZS5nZXRTZXR0aW5ncyA9IGZ1bmN0aW9uIGdldFNldHRpbmdzKGNyZWF0ZURlZmF1bHQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JlY29yZGluZy9zZXR0aW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImNyZWF0ZURlZmF1bHRcIl0gPSBjcmVhdGVEZWZhdWx0O1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgUmVjb3JkaW5nIFNldHRpbmdzIGZvciB0aGUgT3JnYW5pemF0aW9uXG4gICogQG1lbWJlck9mIFJlY29yZGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUmVjb3JkaW5nIHNldHRpbmdzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJtYXhTaW11bHRhbmVvdXNTdHJlYW1zXCI6IDBcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibWF4U2ltdWx0YW5lb3VzU3RyZWFtc1wiOiAwXG59XG4gICovXG5SZWNvcmRpbmdBcGkucHJvdG90eXBlLnB1dFNldHRpbmdzID0gZnVuY3Rpb24gcHV0U2V0dGluZ3MoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVjb3JkaW5nL3NldHRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVjb3JkaW5nQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgUmVzcG9uc2VNYW5hZ2VtZW50QXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlJlc3BvbnNlTWFuYWdlbWVudEFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBSZXNwb25zZU1hbmFnZW1lbnRBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZU1hbmFnZW1lbnRBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlTWFuYWdlbWVudEFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgcmVzcG9uc2VzXG4gICogQG1lbWJlck9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUmVzcG9uc2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInF1ZXJ5UGhyYXNlXCI6IFwiXCIsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcImZpbHRlcnNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicmVzdWx0c1wiOiB7XG4gICAgICBcImVudGl0aWVzXCI6IFtdLFxuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICAgICBcInRvdGFsXCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgICAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgICAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICAgICBcInBhZ2VDb3VudFwiOiAwXG4gICB9XG59XG4gICovXG5SZXNwb25zZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnBvc3RSZXNwb25zZXNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RSZXNwb25zZXNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvcmVzcG9uc2VzL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhIGxpc3Qgb2YgZXhpc3RpbmcgcmVzcG9uc2VzLlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGlicmFyeUlkIC0gTGlicmFyeSBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUmVzcG9uc2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRSZXNwb25zZXMgPSBmdW5jdGlvbiBnZXRSZXNwb25zZXMobGlicmFyeUlkLCBwYWdlTnVtYmVyLCBwYWdlU2l6ZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVzcG9uc2VtYW5hZ2VtZW50L3Jlc3BvbnNlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGxpYnJhcnlJZCA9PT0gdW5kZWZpbmVkIHx8IGxpYnJhcnlJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGlicmFyeUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcImxpYnJhcnlJZFwiXSA9IGxpYnJhcnlJZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIHJlc3BvbnNlLlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJlc3BvbnNlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwibGlicmFyaWVzXCI6IFtdLFxuICAgXCJ0ZXh0c1wiOiBbXSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImludGVyYWN0aW9uVHlwZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJsaWJyYXJpZXNcIjogW10sXG4gICBcInRleHRzXCI6IFtdLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiaW50ZXJhY3Rpb25UeXBlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVzcG9uc2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0UmVzcG9uc2VzID0gZnVuY3Rpb24gcG9zdFJlc3BvbnNlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvcmVzcG9uc2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGRldGFpbHMgYWJvdXQgYW4gZXhpc3RpbmcgcmVzcG9uc2UuXG4gICogQG1lbWJlck9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZUlkIC0gUmVzcG9uc2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImxpYnJhcmllc1wiOiBbXSxcbiAgIFwidGV4dHNcIjogW10sXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJpbnRlcmFjdGlvblR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZXNwb25zZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldFJlc3BvbnNlc1Jlc3BvbnNlSWQgPSBmdW5jdGlvbiBnZXRSZXNwb25zZXNSZXNwb25zZUlkKHJlc3BvbnNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3Jlc3BvbnNlbWFuYWdlbWVudC9yZXNwb25zZXMve3Jlc3BvbnNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocmVzcG9uc2VJZCA9PT0gdW5kZWZpbmVkIHx8IHJlc3BvbnNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJlc3BvbnNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVzcG9uc2VJZH0nLCByZXNwb25zZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYW4gZXhpc3RpbmcgcmVzcG9uc2UuXG4gICogQGRlc2NyaXB0aW9uIEZpZWxkcyB0aGF0IGNhbiBiZSB1cGRhdGVkOiBuYW1lLCBsaWJyYXJpZXMsIGFuZCB0ZXh0cy4gVGhlIG1vc3QgcmVjZW50IHZlcnNpb24gaXMgcmVxdWlyZWQgZm9yIHVwZGF0ZXMuXG4gICogQG1lbWJlck9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZUlkIC0gUmVzcG9uc2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJlc3BvbnNlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwibGlicmFyaWVzXCI6IFtdLFxuICAgXCJ0ZXh0c1wiOiBbXSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImludGVyYWN0aW9uVHlwZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJsaWJyYXJpZXNcIjogW10sXG4gICBcInRleHRzXCI6IFtdLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiaW50ZXJhY3Rpb25UeXBlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVzcG9uc2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wdXRSZXNwb25zZXNSZXNwb25zZUlkID0gZnVuY3Rpb24gcHV0UmVzcG9uc2VzUmVzcG9uc2VJZChyZXNwb25zZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvcmVzcG9uc2VzL3tyZXNwb25zZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJlc3BvbnNlSWQgPT09IHVuZGVmaW5lZCB8fCByZXNwb25zZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZXNwb25zZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3Jlc3BvbnNlSWR9JywgcmVzcG9uc2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYW4gZXhpc3RpbmcgcmVzcG9uc2UuXG4gICogQGRlc2NyaXB0aW9uIFRoaXMgd2lsbCByZW1vdmUgdGhlIHJlc3BvbnNlIGZyb20gYW55IGxpYnJhcmllcyBhc3NvY2lhdGVkIHdpdGggaXQuXG4gICogQG1lbWJlck9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZUlkIC0gUmVzcG9uc2UgSURcbiAgKi9cblJlc3BvbnNlTWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZGVsZXRlUmVzcG9uc2VzUmVzcG9uc2VJZCA9IGZ1bmN0aW9uIGRlbGV0ZVJlc3BvbnNlc1Jlc3BvbnNlSWQocmVzcG9uc2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcmVzcG9uc2VtYW5hZ2VtZW50L3Jlc3BvbnNlcy97cmVzcG9uc2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihyZXNwb25zZUlkID09PSB1bmRlZmluZWQgfHwgcmVzcG9uc2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVzcG9uc2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyZXNwb25zZUlkfScsIHJlc3BvbnNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkZXRhaWxzIGFib3V0IGFuIGV4aXN0aW5nIHJlc3BvbnNlIGxpYnJhcnkuXG4gICogQG1lbWJlck9mIFJlc3BvbnNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsaWJyYXJ5SWQgLSBMaWJyYXJ5IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZXNwb25zZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldExpYnJhcmllc0xpYnJhcnlJZCA9IGZ1bmN0aW9uIGdldExpYnJhcmllc0xpYnJhcnlJZChsaWJyYXJ5SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3Jlc3BvbnNlbWFuYWdlbWVudC9saWJyYXJpZXMve2xpYnJhcnlJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsaWJyYXJ5SWQgPT09IHVuZGVmaW5lZCB8fCBsaWJyYXJ5SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxpYnJhcnlJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsaWJyYXJ5SWR9JywgbGlicmFyeUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYW4gZXhpc3RpbmcgcmVzcG9uc2UgbGlicmFyeS5cbiAgKiBAZGVzY3JpcHRpb24gRmllbGRzIHRoYXQgY2FuIGJlIHVwZGF0ZWQ6IG5hbWUuIFRoZSBtb3N0IHJlY2VudCB2ZXJzaW9uIGlzIHJlcXVpcmVkIGZvciB1cGRhdGVzLlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGlicmFyeUlkIC0gTGlicmFyeSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTGlicmFyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5SZXNwb25zZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLnB1dExpYnJhcmllc0xpYnJhcnlJZCA9IGZ1bmN0aW9uIHB1dExpYnJhcmllc0xpYnJhcnlJZChsaWJyYXJ5SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3Jlc3BvbnNlbWFuYWdlbWVudC9saWJyYXJpZXMve2xpYnJhcnlJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsaWJyYXJ5SWQgPT09IHVuZGVmaW5lZCB8fCBsaWJyYXJ5SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxpYnJhcnlJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsaWJyYXJ5SWR9JywgbGlicmFyeUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbiBleGlzdGluZyByZXNwb25zZSBsaWJyYXJ5LlxuICAqIEBkZXNjcmlwdGlvbiBUaGlzIHdpbGwgcmVtb3ZlIGFueSByZXNwb25zZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBsaWJyYXJ5LlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGlicmFyeUlkIC0gTGlicmFyeSBJRFxuICAqL1xuUmVzcG9uc2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5kZWxldGVMaWJyYXJpZXNMaWJyYXJ5SWQgPSBmdW5jdGlvbiBkZWxldGVMaWJyYXJpZXNMaWJyYXJ5SWQobGlicmFyeUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvbGlicmFyaWVzL3tsaWJyYXJ5SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGlicmFyeUlkID09PSB1bmRlZmluZWQgfHwgbGlicmFyeUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBsaWJyYXJ5SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bGlicmFyeUlkfScsIGxpYnJhcnlJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhIGxpc3Qgb2YgZXhpc3RpbmcgcmVzcG9uc2UgbGlicmFyaWVzLlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJlc3BvbnNlTWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0TGlicmFyaWVzID0gZnVuY3Rpb24gZ2V0TGlicmFyaWVzKHBhZ2VOdW1iZXIsIHBhZ2VTaXplKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvbGlicmFyaWVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSByZXNwb25zZSBsaWJyYXJ5LlxuICAqIEBtZW1iZXJPZiBSZXNwb25zZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIExpYnJhcnlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjcmVhdGVkQnlcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUmVzcG9uc2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0TGlicmFyaWVzID0gZnVuY3Rpb24gcG9zdExpYnJhcmllcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yZXNwb25zZW1hbmFnZW1lbnQvbGlicmFyaWVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlc3BvbnNlTWFuYWdlbWVudEFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIFJvdXRpbmdBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uUm91dGluZ0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBSb3V0aW5nQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBSb3V0aW5nQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IFJvdXRpbmdBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JvdXRpbmdBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCByZWNlbnQgY29udmVyc2F0aW9ucyB0aGF0IGFyZSBzdGlsbCBhY3RpdmVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRDb252ZXJzYXRpb25zID0gZnVuY3Rpb24gZ2V0UXVldWVzUXVldWVJZENvbnZlcnNhdGlvbnMocXVldWVJZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvcXVldWVzL3txdWV1ZUlkfS9jb252ZXJzYXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkZXRhaWxzIGFib3V0IHRoaXMgcXVldWUuXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgIFwiYnVsbHNleWVcIjoge1xuICAgICAgXCJyaW5nc1wiOiBbXVxuICAgfSxcbiAgIFwiYWN3U2V0dGluZ3NcIjoge1xuICAgICAgXCJ3cmFwdXBQcm9tcHRcIjogXCJcIixcbiAgICAgIFwidGltZW91dE1zXCI6IDBcbiAgIH0sXG4gICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgXCJxdWV1ZUZsb3dcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge1xuICAgICAgXCJkb21haW5cIjoge30sXG4gICAgICBcInJvdXRlXCI6IHt9XG4gICB9LFxuICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWQgPSBmdW5jdGlvbiBnZXRRdWV1ZXNRdWV1ZUlkKHF1ZXVlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvcXVldWVzL3txdWV1ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgcXVldWVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFF1ZXVlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gICBcImJ1bGxzZXllXCI6IHtcbiAgICAgIFwicmluZ3NcIjogW11cbiAgIH0sXG4gICBcImFjd1NldHRpbmdzXCI6IHtcbiAgICAgIFwid3JhcHVwUHJvbXB0XCI6IFwiXCIsXG4gICAgICBcInRpbWVvdXRNc1wiOiAwXG4gICB9LFxuICAgXCJza2lsbEV2YWx1YXRpb25NZXRob2RcIjogXCJcIixcbiAgIFwicXVldWVGbG93XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHtcbiAgICAgIFwiZG9tYWluXCI6IHt9LFxuICAgICAgXCJyb3V0ZVwiOiB7fVxuICAgfSxcbiAgIFwibWVtYmVyQ291bnRcIjogMFxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gICBcImJ1bGxzZXllXCI6IHtcbiAgICAgIFwicmluZ3NcIjogW11cbiAgIH0sXG4gICBcImFjd1NldHRpbmdzXCI6IHtcbiAgICAgIFwid3JhcHVwUHJvbXB0XCI6IFwiXCIsXG4gICAgICBcInRpbWVvdXRNc1wiOiAwXG4gICB9LFxuICAgXCJza2lsbEV2YWx1YXRpb25NZXRob2RcIjogXCJcIixcbiAgIFwicXVldWVGbG93XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNhbGxpbmdQYXJ0eU5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gICBcIm91dGJvdW5kRW1haWxBZGRyZXNzXCI6IHtcbiAgICAgIFwiZG9tYWluXCI6IHt9LFxuICAgICAgXCJyb3V0ZVwiOiB7fVxuICAgfSxcbiAgIFwibWVtYmVyQ291bnRcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5wdXRRdWV1ZXNRdWV1ZUlkID0gZnVuY3Rpb24gcHV0UXVldWVzUXVldWVJZChxdWV1ZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxdWV1ZUlkID09PSB1bmRlZmluZWQgfHwgcXVldWVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcXVldWVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3txdWV1ZUlkfScsIHF1ZXVlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgcXVldWVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlRGVsZXRlIC0gZm9yY2VEZWxldGVcbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVF1ZXVlc1F1ZXVlSWQgPSBmdW5jdGlvbiBkZWxldGVRdWV1ZXNRdWV1ZUlkKHF1ZXVlSWQsIGZvcmNlRGVsZXRlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxdWV1ZUlkID09PSB1bmRlZmluZWQgfHwgcXVldWVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcXVldWVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3txdWV1ZUlkfScsIHF1ZXVlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImZvcmNlRGVsZXRlXCJdID0gZm9yY2VEZWxldGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgcm91dGVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5OYW1lIC0gZW1haWwgZG9tYWluXG4gICogQHBhcmFtIHtzdHJpbmd9IHJvdXRlSWQgLSByb3V0ZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBhdHRlcm5cIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpb3JpdHlcIjogMCxcbiAgIFwic2tpbGxzXCI6IFtdLFxuICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJmcm9tTmFtZVwiOiBcIlwiLFxuICAgXCJmcm9tRW1haWxcIjogXCJcIixcbiAgIFwiZmxvd1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldEVtYWlsRG9tYWluc0RvbWFpbm5hbWVSb3V0ZXNSb3V0ZUlkID0gZnVuY3Rpb24gZ2V0RW1haWxEb21haW5zRG9tYWlubmFtZVJvdXRlc1JvdXRlSWQoZG9tYWluTmFtZSwgcm91dGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9lbWFpbC9kb21haW5zL3tkb21haW5OYW1lfS9yb3V0ZXMve3JvdXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9tYWluTmFtZSA9PT0gdW5kZWZpbmVkIHx8IGRvbWFpbk5hbWUgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvbWFpbk5hbWUnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9tYWluTmFtZX0nLCBkb21haW5OYW1lKTtcbiAgICBpZihyb3V0ZUlkID09PSB1bmRlZmluZWQgfHwgcm91dGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcm91dGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyb3V0ZUlkfScsIHJvdXRlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHJvdXRlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluTmFtZSAtIGVtYWlsIGRvbWFpblxuICAqIEBwYXJhbSB7c3RyaW5nfSByb3V0ZUlkIC0gcm91dGUgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFJvdXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBhdHRlcm5cIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpb3JpdHlcIjogMCxcbiAgIFwic2tpbGxzXCI6IFtdLFxuICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJmcm9tTmFtZVwiOiBcIlwiLFxuICAgXCJmcm9tRW1haWxcIjogXCJcIixcbiAgIFwiZmxvd1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwicGF0dGVyblwiOiBcIlwiLFxuICAgXCJxdWV1ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmlvcml0eVwiOiAwLFxuICAgXCJza2lsbHNcIjogW10sXG4gICBcImxhbmd1YWdlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImZyb21OYW1lXCI6IFwiXCIsXG4gICBcImZyb21FbWFpbFwiOiBcIlwiLFxuICAgXCJmbG93XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUucHV0RW1haWxEb21haW5zRG9tYWlubmFtZVJvdXRlc1JvdXRlSWQgPSBmdW5jdGlvbiBwdXRFbWFpbERvbWFpbnNEb21haW5uYW1lUm91dGVzUm91dGVJZChkb21haW5OYW1lLCByb3V0ZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL2VtYWlsL2RvbWFpbnMve2RvbWFpbk5hbWV9L3JvdXRlcy97cm91dGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb21haW5OYW1lID09PSB1bmRlZmluZWQgfHwgZG9tYWluTmFtZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9tYWluTmFtZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb21haW5OYW1lfScsIGRvbWFpbk5hbWUpO1xuICAgIGlmKHJvdXRlSWQgPT09IHVuZGVmaW5lZCB8fCByb3V0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByb3V0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JvdXRlSWR9Jywgcm91dGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSByb3V0ZVxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvbWFpbk5hbWUgLSBlbWFpbCBkb21haW5cbiAgKiBAcGFyYW0ge3N0cmluZ30gcm91dGVJZCAtIHJvdXRlIElEXG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVFbWFpbERvbWFpbnNEb21haW5uYW1lUm91dGVzUm91dGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZUVtYWlsRG9tYWluc0RvbWFpbm5hbWVSb3V0ZXNSb3V0ZUlkKGRvbWFpbk5hbWUsIHJvdXRlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvZW1haWwvZG9tYWlucy97ZG9tYWluTmFtZX0vcm91dGVzL3tyb3V0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRvbWFpbk5hbWUgPT09IHVuZGVmaW5lZCB8fCBkb21haW5OYW1lID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBkb21haW5OYW1lJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RvbWFpbk5hbWV9JywgZG9tYWluTmFtZSk7XG4gICAgaWYocm91dGVJZCA9PT0gdW5kZWZpbmVkIHx8IHJvdXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJvdXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cm91dGVJZH0nLCByb3V0ZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbGlzdCBvZiB3cmFwdXAgY29kZXMuXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUuZ2V0V3JhcHVwY29kZXMgPSBmdW5jdGlvbiBnZXRXcmFwdXBjb2RlcyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgd3JhcC11cCBjb2RlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFdyYXB1cENvZGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJjYWxsYWJsZVRpbWVzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RXcmFwdXBjb2RlcyA9IGZ1bmN0aW9uIHBvc3RXcmFwdXBjb2Rlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgZm9yIHF1ZXVlIG9ic2VydmF0aW9uc1xuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZmlsdGVyXCI6IHtcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJjbGF1c2VzXCI6IFtdLFxuICAgICAgXCJwcmVkaWNhdGVzXCI6IFtdXG4gICB9LFxuICAgXCJtZXRyaWNzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInN5c3RlbVRvT3JnYW5pemF0aW9uTWFwcGluZ3NcIjoge30sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RRdWV1ZXNPYnNlcnZhdGlvbnNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RRdWV1ZXNPYnNlcnZhdGlvbnNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvcXVldWVzL29ic2VydmF0aW9ucy9xdWVyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgbGFuZ3VhZ2VzLlxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIEFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VzID0gZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0T3JkZXIsIG5hbWUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvbGFuZ3VhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIExhbmd1YWdlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIExhbmd1YWdlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RMYW5ndWFnZXMgPSBmdW5jdGlvbiBwb3N0TGFuZ3VhZ2VzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvbGFuZ3VhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IEVzdGltYXRlZCBXYWl0IFRpbWVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gcXVldWVJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb252ZXJzYXRpb25JZCAtIGNvbnZlcnNhdGlvbklkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRFc3RpbWF0ZWR3YWl0dGltZSA9IGZ1bmN0aW9uIGdldFF1ZXVlc1F1ZXVlSWRFc3RpbWF0ZWR3YWl0dGltZShxdWV1ZUlkLCBjb252ZXJzYXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMve3F1ZXVlSWR9L2VzdGltYXRlZHdhaXR0aW1lJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJjb252ZXJzYXRpb25JZFwiXSA9IGNvbnZlcnNhdGlvbklkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBSb3V0aW5nIFNraWxsXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2tpbGxJZCAtIFNraWxsIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5nZXRTa2lsbHNTa2lsbElkID0gZnVuY3Rpb24gZ2V0U2tpbGxzU2tpbGxJZChza2lsbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3NraWxscy97c2tpbGxJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihza2lsbElkID09PSB1bmRlZmluZWQgfHwgc2tpbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2tpbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tza2lsbElkfScsIHNraWxsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBSb3V0aW5nIFNraWxsXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2tpbGxJZCAtIFNraWxsIElEXG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVTa2lsbHNTa2lsbElkID0gZnVuY3Rpb24gZGVsZXRlU2tpbGxzU2tpbGxJZChza2lsbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3NraWxscy97c2tpbGxJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihza2lsbElkID09PSB1bmRlZmluZWQgfHwgc2tpbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2tpbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tza2lsbElkfScsIHNraWxsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBxdWV1ZSBtZW1iZXJcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gbWVtYmVySWQgLSBNZW1iZXIgSURcbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVF1ZXVlc1F1ZXVlSWRVc2Vyc01lbWJlcklkID0gZnVuY3Rpb24gZGVsZXRlUXVldWVzUXVldWVJZFVzZXJzTWVtYmVySWQocXVldWVJZCwgbWVtYmVySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvcXVldWVzL3txdWV1ZUlkfS91c2Vycy97bWVtYmVySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICBpZihtZW1iZXJJZCA9PT0gdW5kZWZpbmVkIHx8IG1lbWJlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBtZW1iZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttZW1iZXJJZH0nLCBtZW1iZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIHRoZSByaW5nIG51bWJlciBvZiBqb2luZWQgc3RhdHVzIGZvciBhIFVzZXIgaW4gYSBRdWV1ZVxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlSWQgLSBRdWV1ZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZW1iZXJJZCAtIE1lbWJlciBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUXVldWUgTWVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMFxuICAgfSxcbiAgIFwicmluZ051bWJlclwiOiAwLFxuICAgXCJqb2luZWRcIjogdHJ1ZSxcbiAgIFwibWVtYmVyQnlcIjogXCJcIixcbiAgIFwicm91dGluZ1N0YXR1c1wiOiB7XG4gICAgICBcInVzZXJJZFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNcIjogXCJcIixcbiAgICAgIFwic3RhcnRUaW1lXCI6IFwiXCJcbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInJpbmdOdW1iZXJcIjogMCxcbiAgIFwiam9pbmVkXCI6IHRydWUsXG4gICBcIm1lbWJlckJ5XCI6IFwiXCIsXG4gICBcInJvdXRpbmdTdGF0dXNcIjoge1xuICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBhdGNoUXVldWVzUXVldWVJZFVzZXJzTWVtYmVySWQgPSBmdW5jdGlvbiBwYXRjaFF1ZXVlc1F1ZXVlSWRVc2Vyc01lbWJlcklkKHF1ZXVlSWQsIG1lbWJlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0vdXNlcnMve21lbWJlcklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgaWYobWVtYmVySWQgPT09IHVuZGVmaW5lZCB8fCBtZW1iZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbWVtYmVySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bWVtYmVySWR9JywgbWVtYmVySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZW1haWwgc2V0dXBcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJyb290RG9tYWluXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldEVtYWlsU2V0dXAgPSBmdW5jdGlvbiBnZXRFbWFpbFNldHVwKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9lbWFpbC9zZXR1cCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbWVtYmVycyBvZiB0aGlzIHF1ZXVlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFNvcnQgYnlcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlLCBjb252ZXJzYXRpb25TdW1tYXJ5LCBvdXRPZk9mZmljZSwgZ2VvbG9jYXRpb24sIHN0YXRpb24sIGF1dGhvcml6YXRpb24sIHByb2ZpbGVTa2lsbHMsIGxvY2F0aW9ucywgZGF0ZSwgZ2VvbG9jYXRpb25zZXR0aW5ncywgb3JnYW5pemF0aW9uLCBwcmVzZW5jZWRlZmluaXRpb25zLCBsb2NhdGlvbmRlZmluaXRpb25zLCBvcmdhdXRob3JpemF0aW9uLCBmYXZvcml0ZXMsIHN1cGVyaW9ycywgZGlyZWN0cmVwb3J0cywgYWRqYWNlbnRzLCByb3V0aW5nc2tpbGxzLCBmaWVsZGNvbmZpZ3NcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGpvaW5lZCAtIEZpbHRlciBieSBqb2luZWQgc3RhdHVzXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBGaWx0ZXIgYnkgcXVldWUgbWVtYmVyIG5hbWVcbiAgKiBAcGFyYW0ge2FycmF5fSBwcm9maWxlU2tpbGxzIC0gRmlsdGVyIGJ5IHByb2ZpbGUgc2tpbGxcbiAgKiBAcGFyYW0ge2FycmF5fSBza2lsbHMgLSBGaWx0ZXIgYnkgc2tpbGxcbiAgKiBAcGFyYW0ge2FycmF5fSBsYW5ndWFnZXMgLSBGaWx0ZXIgYnkgbGFuZ3VhZ2VcbiAgKiBAcGFyYW0ge2FycmF5fSByb3V0aW5nU3RhdHVzIC0gRmlsdGVyIGJ5IHJvdXRpbmcgc3RhdHVzXG4gICogQHBhcmFtIHthcnJheX0gcHJlc2VuY2UgLSBGaWx0ZXIgYnkgcHJlc2VuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRVc2VycyA9IGZ1bmN0aW9uIGdldFF1ZXVlc1F1ZXVlSWRVc2VycyhxdWV1ZUlkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBleHBhbmQsIGpvaW5lZCwgbmFtZSwgcHJvZmlsZVNraWxscywgc2tpbGxzLCBsYW5ndWFnZXMsIHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0vdXNlcnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxdWV1ZUlkID09PSB1bmRlZmluZWQgfHwgcXVldWVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcXVldWVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3txdWV1ZUlkfScsIHF1ZXVlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJqb2luZWRcIl0gPSBqb2luZWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVNraWxsc1wiXSA9IHByb2ZpbGVTa2lsbHM7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic2tpbGxzXCJdID0gc2tpbGxzO1xuICAgIHJlcXVlc3RRdWVyeVtcImxhbmd1YWdlc1wiXSA9IGxhbmd1YWdlcztcbiAgICByZXF1ZXN0UXVlcnlbXCJyb3V0aW5nU3RhdHVzXCJdID0gcm91dGluZ1N0YXR1cztcbiAgICByZXF1ZXN0UXVlcnlbXCJwcmVzZW5jZVwiXSA9IHByZXNlbmNlO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEJ1bGsgYWRkIG9yIGRlbGV0ZSB1cCB0byAxMDAgcXVldWUgbWVtYmVyc1xuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlSWQgLSBRdWV1ZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUXVldWUgTWVtYmVyc1xuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9EZWxldGUgLSBUcnVlIHRvIGRlbGV0ZSBxdWV1ZSBtZW1iZXJzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwidXNlclwiOiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7fSxcbiAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge30sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwXG4gIH0sXG4gIFwicmluZ051bWJlclwiOiAwLFxuICBcImpvaW5lZFwiOiB0cnVlLFxuICBcIm1lbWJlckJ5XCI6IFwiXCIsXG4gIFwicm91dGluZ1N0YXR1c1wiOiB7XG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCJcbiAgfVxuIH1cbl1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RRdWV1ZXNRdWV1ZUlkVXNlcnMgPSBmdW5jdGlvbiBwb3N0UXVldWVzUXVldWVJZFVzZXJzKHF1ZXVlSWQsIGJvZHksIGRvRGVsZXRlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0vdXNlcnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxdWV1ZUlkID09PSB1bmRlZmluZWQgfHwgcXVldWVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcXVldWVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3txdWV1ZUlkfScsIHF1ZXVlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZGVsZXRlXCJdID0gZG9EZWxldGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEpvaW4gb3IgdW5qb2luIGEgc2V0IG9mIHVzZXJzIGZvciBhIHF1ZXVlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBRdWV1ZSBNZW1iZXJzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwidXNlclwiOiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7fSxcbiAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge30sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwXG4gIH0sXG4gIFwicmluZ051bWJlclwiOiAwLFxuICBcImpvaW5lZFwiOiB0cnVlLFxuICBcIm1lbWJlckJ5XCI6IFwiXCIsXG4gIFwicm91dGluZ1N0YXR1c1wiOiB7XG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCJcbiAgfVxuIH1cbl1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBhdGNoUXVldWVzUXVldWVJZFVzZXJzID0gZnVuY3Rpb24gcGF0Y2hRdWV1ZXNRdWV1ZUlkVXNlcnMocXVldWVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMve3F1ZXVlSWR9L3VzZXJzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIHJvdXRpbmcgc2tpbGxzLlxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBGaWx0ZXIgZm9yIHJlc3VsdHMgdGhhdCBzdGFydCB3aXRoIHRoaXMgdmFsdWVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFNraWxscyA9IGZ1bmN0aW9uIGdldFNraWxscyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgbmFtZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9za2lsbHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBTa2lsbFxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTa2lsbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5wb3N0U2tpbGxzID0gZnVuY3Rpb24gcG9zdFNraWxscyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3NraWxscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkb21haW5zXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldEVtYWlsRG9tYWlucyA9IGZ1bmN0aW9uIGdldEVtYWlsRG9tYWlucygpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvZW1haWwvZG9tYWlucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIGRvbWFpblxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBEb21haW5cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwibXhSZWNvcmRTdGF0dXNcIjogXCJcIixcbiAgIFwic3ViRG9tYWluXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJteFJlY29yZFN0YXR1c1wiOiBcIlwiLFxuICAgXCJzdWJEb21haW5cIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5wb3N0RW1haWxEb21haW5zID0gZnVuY3Rpb24gcG9zdEVtYWlsRG9tYWlucyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL2VtYWlsL2RvbWFpbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcmVjZW50IGNhbGwgY29udmVyc2F0aW9ucyB0aGF0IGFyZSBzdGlsbCBhY3RpdmVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRDb252ZXJzYXRpb25zQ2FsbHMgPSBmdW5jdGlvbiBnZXRRdWV1ZXNRdWV1ZUlkQ29udmVyc2F0aW9uc0NhbGxzKHF1ZXVlSWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0vY29udmVyc2F0aW9ucy9jYWxscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcmVjZW50IGNoYXQgY29udmVyc2F0aW9ucyB0aGF0IGFyZSBzdGlsbCBhY3RpdmVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRDb252ZXJzYXRpb25zQ2hhdHMgPSBmdW5jdGlvbiBnZXRRdWV1ZXNRdWV1ZUlkQ29udmVyc2F0aW9uc0NoYXRzKHF1ZXVlSWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcy97cXVldWVJZH0vY29udmVyc2F0aW9ucy9jaGF0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbGlzdCBvZiBxdWV1ZXMuXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gYWN0aXZlIC0gQWN0aXZlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5nZXRRdWV1ZXMgPSBmdW5jdGlvbiBnZXRRdWV1ZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgbmFtZSwgYWN0aXZlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3F1ZXVlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcImFjdGl2ZVwiXSA9IGFjdGl2ZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgcXVldWVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUXVldWVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgIFwiYnVsbHNleWVcIjoge1xuICAgICAgXCJyaW5nc1wiOiBbXVxuICAgfSxcbiAgIFwiYWN3U2V0dGluZ3NcIjoge1xuICAgICAgXCJ3cmFwdXBQcm9tcHRcIjogXCJcIixcbiAgICAgIFwidGltZW91dE1zXCI6IDBcbiAgIH0sXG4gICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgXCJxdWV1ZUZsb3dcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge1xuICAgICAgXCJkb21haW5cIjoge30sXG4gICAgICBcInJvdXRlXCI6IHt9XG4gICB9LFxuICAgXCJzb3VyY2VRdWV1ZUlkXCI6IFwiXCIsXG4gICBcIm1lbWJlckNvdW50XCI6IDBcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgXCJidWxsc2V5ZVwiOiB7XG4gICAgICBcInJpbmdzXCI6IFtdXG4gICB9LFxuICAgXCJhY3dTZXR0aW5nc1wiOiB7XG4gICAgICBcIndyYXB1cFByb21wdFwiOiBcIlwiLFxuICAgICAgXCJ0aW1lb3V0TXNcIjogMFxuICAgfSxcbiAgIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gICBcInF1ZXVlRmxvd1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gICBcImNhbGxpbmdQYXJ0eU51bWJlclwiOiBcIlwiLFxuICAgXCJvdXRib3VuZEVtYWlsQWRkcmVzc1wiOiB7XG4gICAgICBcImRvbWFpblwiOiB7fSxcbiAgICAgIFwicm91dGVcIjoge31cbiAgIH0sXG4gICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUucG9zdFF1ZXVlcyA9IGZ1bmN0aW9uIHBvc3RRdWV1ZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgYSB3cmFwLXVwIGNvZGUgZnJvbSBhIHF1ZXVlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvZGVJZCAtIENvZGUgSURcbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVF1ZXVlc1F1ZXVlSWRXcmFwdXBjb2Rlc0NvZGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZVF1ZXVlc1F1ZXVlSWRXcmFwdXBjb2Rlc0NvZGVJZChxdWV1ZUlkLCBjb2RlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvcXVldWVzL3txdWV1ZUlkfS93cmFwdXBjb2Rlcy97Y29kZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgaWYoY29kZUlkID09PSB1bmRlZmluZWQgfHwgY29kZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb2RlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29kZUlkfScsIGNvZGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSB3cmFwLXVwIGNvZGVzIGZvciBhIHF1ZXVlXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5nZXRRdWV1ZXNRdWV1ZUlkV3JhcHVwY29kZXMgPSBmdW5jdGlvbiBnZXRRdWV1ZXNRdWV1ZUlkV3JhcHVwY29kZXMocXVldWVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMve3F1ZXVlSWR9L3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBBZGQgdXAgdG8gMTAwIHdyYXAtdXAgY29kZXMgdG8gYSBxdWV1ZVxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlSWQgLSBRdWV1ZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTGlzdCBvZiB3cmFwdXAgY29kZXNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIlxuIH1cbl1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwiaWRcIjogXCJcIixcbiAgXCJuYW1lXCI6IFwiXCIsXG4gIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUucG9zdFF1ZXVlc1F1ZXVlSWRXcmFwdXBjb2RlcyA9IGZ1bmN0aW9uIHBvc3RRdWV1ZXNRdWV1ZUlkV3JhcHVwY29kZXMocXVldWVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMve3F1ZXVlSWR9L3dyYXB1cGNvZGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZGV0YWlscyBhYm91dCB0aGlzIHdyYXAtdXAgY29kZS5cbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlSWQgLSBXcmFwdXAgQ29kZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFdyYXB1cGNvZGVzQ29kZUlkID0gZnVuY3Rpb24gZ2V0V3JhcHVwY29kZXNDb2RlSWQoY29kZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3dyYXB1cGNvZGVzL3tjb2RlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY29kZUlkID09PSB1bmRlZmluZWQgfHwgY29kZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjb2RlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y29kZUlkfScsIGNvZGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIHdyYXAtdXAgY29kZVxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNvZGVJZCAtIFdyYXB1cCBDb2RlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBXcmFwdXBDb2RlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUucHV0V3JhcHVwY29kZXNDb2RlSWQgPSBmdW5jdGlvbiBwdXRXcmFwdXBjb2Rlc0NvZGVJZChjb2RlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvd3JhcHVwY29kZXMve2NvZGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb2RlSWQgPT09IHVuZGVmaW5lZCB8fCBjb2RlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvZGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb2RlSWR9JywgY29kZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSB3cmFwLXVwIGNvZGVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlSWQgLSBXcmFwdXAgQ29kZSBJRFxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUuZGVsZXRlV3JhcHVwY29kZXNDb2RlSWQgPSBmdW5jdGlvbiBkZWxldGVXcmFwdXBjb2Rlc0NvZGVJZChjb2RlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvd3JhcHVwY29kZXMve2NvZGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjb2RlSWQgPT09IHVuZGVmaW5lZCB8fCBjb2RlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNvZGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjb2RlSWR9JywgY29kZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcm91dGVzXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluTmFtZSAtIGVtYWlsIGRvbWFpblxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuIC0gRmlsdGVyIHJvdXRlcyBieSB0aGUgcm91dGUncyBwYXR0ZXJuIHByb3BlcnR5XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5nZXRFbWFpbERvbWFpbnNEb21haW5uYW1lUm91dGVzID0gZnVuY3Rpb24gZ2V0RW1haWxEb21haW5zRG9tYWlubmFtZVJvdXRlcyhkb21haW5OYW1lLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgcGF0dGVybil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9lbWFpbC9kb21haW5zL3tkb21haW5OYW1lfS9yb3V0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb21haW5OYW1lID09PSB1bmRlZmluZWQgfHwgZG9tYWluTmFtZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9tYWluTmFtZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb21haW5OYW1lfScsIGRvbWFpbk5hbWUpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGF0dGVyblwiXSA9IHBhdHRlcm47XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGEgcm91dGVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5OYW1lIC0gZW1haWwgZG9tYWluXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSb3V0ZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwYXR0ZXJuXCI6IFwiXCIsXG4gICBcInF1ZXVlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByaW9yaXR5XCI6IDAsXG4gICBcInNraWxsc1wiOiBbXSxcbiAgIFwibGFuZ3VhZ2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZnJvbU5hbWVcIjogXCJcIixcbiAgIFwiZnJvbUVtYWlsXCI6IFwiXCIsXG4gICBcImZsb3dcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInBhdHRlcm5cIjogXCJcIixcbiAgIFwicXVldWVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpb3JpdHlcIjogMCxcbiAgIFwic2tpbGxzXCI6IFtdLFxuICAgXCJsYW5ndWFnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJmcm9tTmFtZVwiOiBcIlwiLFxuICAgXCJmcm9tRW1haWxcIjogXCJcIixcbiAgIFwiZmxvd1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RFbWFpbERvbWFpbnNEb21haW5uYW1lUm91dGVzID0gZnVuY3Rpb24gcG9zdEVtYWlsRG9tYWluc0RvbWFpbm5hbWVSb3V0ZXMoZG9tYWluTmFtZSwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9lbWFpbC9kb21haW5zL3tkb21haW5OYW1lfS9yb3V0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkb21haW5OYW1lID09PSB1bmRlZmluZWQgfHwgZG9tYWluTmFtZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9tYWluTmFtZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkb21haW5OYW1lfScsIGRvbWFpbk5hbWUpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCByZWNlbnQgY2FsbGJhY2sgY29udmVyc2F0aW9ucyB0aGF0IGFyZSBzdGlsbCBhY3RpdmVcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZUlkIC0gUXVldWUgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldFF1ZXVlc1F1ZXVlSWRDb252ZXJzYXRpb25zQ2FsbGJhY2tzID0gZnVuY3Rpb24gZ2V0UXVldWVzUXVldWVJZENvbnZlcnNhdGlvbnNDYWxsYmFja3MocXVldWVJZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvcXVldWVzL3txdWV1ZUlkfS9jb252ZXJzYXRpb25zL2NhbGxiYWNrcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgcm91dGluZyBza2lsbCBwcm9maWNpZW5jeSBvciBzdGF0ZS5cbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHNraWxsSWQgLSBza2lsbElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTa2lsbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwcm9maWNpZW5jeVwiOiB7fSxcbiAgIFwic3RhdGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInByb2ZpY2llbmN5XCI6IHt9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJza2lsbFVyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnB1dFVzZXJJZFJvdXRpbmdza2lsbHNTa2lsbElkID0gZnVuY3Rpb24gcHV0VXNlcklkUm91dGluZ3NraWxsc1NraWxsSWQodXNlcklkLCBza2lsbElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb3V0aW5nc2tpbGxzL3tza2lsbElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKHNraWxsSWQgPT09IHVuZGVmaW5lZCB8fCBza2lsbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBza2lsbElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NraWxsSWR9Jywgc2tpbGxJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZW1vdmUgcm91dGluZyBza2lsbCBmcm9tIHVzZXJcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHNraWxsSWQgLSBza2lsbElkXG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVVc2VySWRSb3V0aW5nc2tpbGxzU2tpbGxJZCA9IGZ1bmN0aW9uIGRlbGV0ZVVzZXJJZFJvdXRpbmdza2lsbHNTa2lsbElkKHVzZXJJZCwgc2tpbGxJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcm91dGluZ3NraWxscy97c2tpbGxJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihza2lsbElkID09PSB1bmRlZmluZWQgfHwgc2tpbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2tpbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tza2lsbElkfScsIHNraWxsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IExpc3Qgcm91dGluZyBza2lsbHMgZm9yIHVzZXJcbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIEFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnQgb3JkZXJcbiAgYXNjZW5kaW5nLFxuICBkZXNjZW5kaW5nLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUuZ2V0VXNlcklkUm91dGluZ3NraWxscyA9IGZ1bmN0aW9uIGdldFVzZXJJZFJvdXRpbmdza2lsbHModXNlcklkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydE9yZGVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb3V0aW5nc2tpbGxzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQWRkIHJvdXRpbmcgc2tpbGwgdG8gdXNlclxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNraWxsXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJwcm9maWNpZW5jeVwiOiB7fVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInByb2ZpY2llbmN5XCI6IHt9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJza2lsbFVyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLnBvc3RVc2VySWRSb3V0aW5nc2tpbGxzID0gZnVuY3Rpb24gcG9zdFVzZXJJZFJvdXRpbmdza2lsbHModXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb3V0aW5nc2tpbGxzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHJlY2VudCBlbWFpbCBjb252ZXJzYXRpb25zIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZVxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHF1ZXVlSWQgLSBRdWV1ZSBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUuZ2V0UXVldWVzUXVldWVJZENvbnZlcnNhdGlvbnNFbWFpbHMgPSBmdW5jdGlvbiBnZXRRdWV1ZXNRdWV1ZUlkQ29udmVyc2F0aW9uc0VtYWlscyhxdWV1ZUlkLCBwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy9xdWV1ZXMve3F1ZXVlSWR9L2NvbnZlcnNhdGlvbnMvZW1haWxzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocXVldWVJZCA9PT0gdW5kZWZpbmVkIHx8IHF1ZXVlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHF1ZXVlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cXVldWVJZH0nLCBxdWV1ZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkb21haW5cbiAgKiBAbWVtYmVyT2YgUm91dGluZ0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5JZCAtIGRvbWFpbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcIm14UmVjb3JkU3RhdHVzXCI6IFwiXCIsXG4gICBcInN1YkRvbWFpblwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmdldEVtYWlsRG9tYWluc0RvbWFpbklkID0gZnVuY3Rpb24gZ2V0RW1haWxEb21haW5zRG9tYWluSWQoZG9tYWluSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3JvdXRpbmcvZW1haWwvZG9tYWlucy97ZG9tYWluSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG9tYWluSWQgPT09IHVuZGVmaW5lZCB8fCBkb21haW5JZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZG9tYWluSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG9tYWluSWR9JywgZG9tYWluSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGRvbWFpblxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRvbWFpbklkIC0gZG9tYWluIElEXG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5kZWxldGVFbWFpbERvbWFpbnNEb21haW5JZCA9IGZ1bmN0aW9uIGRlbGV0ZUVtYWlsRG9tYWluc0RvbWFpbklkKGRvbWFpbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL2VtYWlsL2RvbWFpbnMve2RvbWFpbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRvbWFpbklkID09PSB1bmRlZmluZWQgfHwgZG9tYWluSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvbWFpbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RvbWFpbklkfScsIGRvbWFpbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHV0aWxpemF0aW9uIHNldHRpbmdzLlxuICAqIEBtZW1iZXJPZiBSb3V0aW5nQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInV0aWxpemF0aW9uXCI6IHt9XG59XG4gICovXG5Sb3V0aW5nQXBpLnByb3RvdHlwZS5nZXRVdGlsaXphdGlvbiA9IGZ1bmN0aW9uIGdldFV0aWxpemF0aW9uKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvcm91dGluZy91dGlsaXphdGlvbic7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgdXRpbGl6YXRpb24gc2V0dGluZ3MuXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIHV0aWxpemF0aW9uXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ1dGlsaXphdGlvblwiOiB7fVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ1dGlsaXphdGlvblwiOiB7fVxufVxuICAqL1xuUm91dGluZ0FwaS5wcm90b3R5cGUucHV0VXRpbGl6YXRpb24gPSBmdW5jdGlvbiBwdXRVdGlsaXphdGlvbihib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3V0aWxpemF0aW9uJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgdXRpbGl6YXRpb24gc2V0dGluZ3MgYW5kIHJldmVydCB0byBzeXN0ZW0gZGVmYXVsdHMuXG4gICogQG1lbWJlck9mIFJvdXRpbmdBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKi9cblJvdXRpbmdBcGkucHJvdG90eXBlLmRlbGV0ZVV0aWxpemF0aW9uID0gZnVuY3Rpb24gZGVsZXRlVXRpbGl6YXRpb24oKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9yb3V0aW5nL3V0aWxpemF0aW9uJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFJvdXRpbmdBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBTY3JpcHRzQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlNjcmlwdHNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gU2NyaXB0c0FwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgU2NyaXB0c0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY3JpcHRzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTY3JpcHRzQXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBzY3JpcHRcbiAgKiBAbWVtYmVyT2YgU2NyaXB0c0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHRJZCAtIFNjcmlwdCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInZlcnNpb25JZFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwicHVibGlzaGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uRGF0ZVwiOiBcIlwiLFxuICAgXCJzdGFydFBhZ2VJZFwiOiBcIlwiLFxuICAgXCJzdGFydFBhZ2VOYW1lXCI6IFwiXCIsXG4gICBcImZlYXR1cmVzXCI6IHt9LFxuICAgXCJ2YXJpYWJsZXNcIjoge30sXG4gICBcImN1c3RvbUFjdGlvbnNcIjoge30sXG4gICBcInBhZ2VzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblNjcmlwdHNBcGkucHJvdG90eXBlLmdldFNjcmlwdElkID0gZnVuY3Rpb24gZ2V0U2NyaXB0SWQoc2NyaXB0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3NjcmlwdHMve3NjcmlwdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjcmlwdElkID09PSB1bmRlZmluZWQgfHwgc2NyaXB0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjcmlwdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjcmlwdElkfScsIHNjcmlwdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHB1Ymxpc2hlZCBzY3JpcHRzLlxuICAqIEBtZW1iZXJPZiBTY3JpcHRzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIEV4cGFuZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZSBmaWx0ZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZSAtIEZlYXR1cmUgZmlsdGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZsb3dJZCAtIFNlY3VyZSBmbG93IGlkIGZpbHRlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuU2NyaXB0c0FwaS5wcm90b3R5cGUuZ2V0UHVibGlzaGVkID0gZnVuY3Rpb24gZ2V0UHVibGlzaGVkKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBleHBhbmQsIG5hbWUsIGZlYXR1cmUsIGZsb3dJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy9wdWJsaXNoZWQnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJmZWF0dXJlXCJdID0gZmVhdHVyZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJmbG93SWRcIl0gPSBmbG93SWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBwdWJsaXNoZWQgc2NyaXB0LlxuICAqIEBtZW1iZXJPZiBTY3JpcHRzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNjcmlwdElkIC0gU2NyaXB0IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidmVyc2lvbklkXCI6IFwiXCIsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJwdWJsaXNoZWREYXRlXCI6IFwiXCIsXG4gICBcInZlcnNpb25EYXRlXCI6IFwiXCIsXG4gICBcInN0YXJ0UGFnZUlkXCI6IFwiXCIsXG4gICBcInN0YXJ0UGFnZU5hbWVcIjogXCJcIixcbiAgIFwiZmVhdHVyZXNcIjoge30sXG4gICBcInZhcmlhYmxlc1wiOiB7fSxcbiAgIFwiY3VzdG9tQWN0aW9uc1wiOiB7fSxcbiAgIFwicGFnZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuU2NyaXB0c0FwaS5wcm90b3R5cGUuZ2V0UHVibGlzaGVkU2NyaXB0SWQgPSBmdW5jdGlvbiBnZXRQdWJsaXNoZWRTY3JpcHRJZChzY3JpcHRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy9wdWJsaXNoZWQve3NjcmlwdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjcmlwdElkID09PSB1bmRlZmluZWQgfHwgc2NyaXB0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjcmlwdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjcmlwdElkfScsIHNjcmlwdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHB1Ymxpc2hlZCBwYWdlLlxuICAqIEBtZW1iZXJPZiBTY3JpcHRzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNjcmlwdElkIC0gU2NyaXB0IElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VJZCAtIFBhZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uSWRcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInJvb3RDb250YWluZXJcIjoge30sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuU2NyaXB0c0FwaS5wcm90b3R5cGUuZ2V0UHVibGlzaGVkU2NyaXB0SWRQYWdlc1BhZ2VJZCA9IGZ1bmN0aW9uIGdldFB1Ymxpc2hlZFNjcmlwdElkUGFnZXNQYWdlSWQoc2NyaXB0SWQsIHBhZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy9wdWJsaXNoZWQve3NjcmlwdElkfS9wYWdlcy97cGFnZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjcmlwdElkID09PSB1bmRlZmluZWQgfHwgc2NyaXB0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjcmlwdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjcmlwdElkfScsIHNjcmlwdElkKTtcbiAgICBpZihwYWdlSWQgPT09IHVuZGVmaW5lZCB8fCBwYWdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBhZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twYWdlSWR9JywgcGFnZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIHB1Ymxpc2hlZCB2YXJpYWJsZXNcbiAgKiBAbWVtYmVyT2YgU2NyaXB0c0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHRJZCAtIFNjcmlwdCBJRFxuICAqL1xuU2NyaXB0c0FwaS5wcm90b3R5cGUuZ2V0UHVibGlzaGVkU2NyaXB0SWRWYXJpYWJsZXMgPSBmdW5jdGlvbiBnZXRQdWJsaXNoZWRTY3JpcHRJZFZhcmlhYmxlcyhzY3JpcHRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy9wdWJsaXNoZWQve3NjcmlwdElkfS92YXJpYWJsZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzY3JpcHRJZCA9PT0gdW5kZWZpbmVkIHx8IHNjcmlwdElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY3JpcHRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzY3JpcHRJZH0nLCBzY3JpcHRJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgcGFnZVxuICAqIEBtZW1iZXJPZiBTY3JpcHRzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNjcmlwdElkIC0gU2NyaXB0IElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VJZCAtIFBhZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uSWRcIjogXCJcIixcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInJvb3RDb250YWluZXJcIjoge30sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuU2NyaXB0c0FwaS5wcm90b3R5cGUuZ2V0U2NyaXB0SWRQYWdlc1BhZ2VJZCA9IGZ1bmN0aW9uIGdldFNjcmlwdElkUGFnZXNQYWdlSWQoc2NyaXB0SWQsIHBhZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy97c2NyaXB0SWR9L3BhZ2VzL3twYWdlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2NyaXB0SWQgPT09IHVuZGVmaW5lZCB8fCBzY3JpcHRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NyaXB0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NyaXB0SWR9Jywgc2NyaXB0SWQpO1xuICAgIGlmKHBhZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IHBhZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGFnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3BhZ2VJZH0nLCBwYWdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBwdWJsaXNoZWQgcGFnZXNcbiAgKiBAbWVtYmVyT2YgU2NyaXB0c0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHRJZCAtIFNjcmlwdCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJ2ZXJzaW9uSWRcIjogXCJcIixcbiAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICBcInJvb3RDb250YWluZXJcIjoge30sXG4gIFwicHJvcGVydGllc1wiOiB7fSxcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5TY3JpcHRzQXBpLnByb3RvdHlwZS5nZXRQdWJsaXNoZWRTY3JpcHRJZFBhZ2VzID0gZnVuY3Rpb24gZ2V0UHVibGlzaGVkU2NyaXB0SWRQYWdlcyhzY3JpcHRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy9wdWJsaXNoZWQve3NjcmlwdElkfS9wYWdlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjcmlwdElkID09PSB1bmRlZmluZWQgfHwgc2NyaXB0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjcmlwdElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjcmlwdElkfScsIHNjcmlwdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2Ygc2NyaXB0c1xuICAqIEBtZW1iZXJPZiBTY3JpcHRzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4cGFuZCAtIEV4cGFuZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZSBmaWx0ZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZSAtIEZlYXR1cmUgZmlsdGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IGZsb3dJZCAtIFNlY3VyZSBmbG93IGlkIGZpbHRlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0QnlcbiAgbW9kaWZpZWREYXRlLFxuICBjcmVhdGVkRGF0ZSxcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gU29ydE9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblNjcmlwdHNBcGkucHJvdG90eXBlLmdldFNjcmlwdHMgPSBmdW5jdGlvbiBnZXRTY3JpcHRzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBleHBhbmQsIG5hbWUsIGZlYXR1cmUsIGZsb3dJZCwgc29ydEJ5LCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3NjcmlwdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJmZWF0dXJlXCJdID0gZmVhdHVyZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJmbG93SWRcIl0gPSBmbG93SWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgcGFnZXNcbiAgKiBAbWVtYmVyT2YgU2NyaXB0c0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHRJZCAtIFNjcmlwdCBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJ2ZXJzaW9uSWRcIjogXCJcIixcbiAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICBcInJvb3RDb250YWluZXJcIjoge30sXG4gIFwicHJvcGVydGllc1wiOiB7fSxcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5TY3JpcHRzQXBpLnByb3RvdHlwZS5nZXRTY3JpcHRJZFBhZ2VzID0gZnVuY3Rpb24gZ2V0U2NyaXB0SWRQYWdlcyhzY3JpcHRJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2NyaXB0cy97c2NyaXB0SWR9L3BhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2NyaXB0SWQgPT09IHVuZGVmaW5lZCB8fCBzY3JpcHRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NyaXB0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NyaXB0SWR9Jywgc2NyaXB0SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBTY3JpcHRzQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgU2VhcmNoQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlNlYXJjaEFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBTZWFyY2hBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFNlYXJjaEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWFyY2hBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlYXJjaEFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIGdyb3VwcyB1c2luZyB0aGUgcTY0IHZhbHVlIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBzZWFyY2hcbiAgKiBAbWVtYmVyT2YgU2VhcmNoQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHE2NCAtIHE2NFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIGV4cGFuZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblNlYXJjaEFwaS5wcm90b3R5cGUuZ2V0U2VhcmNoID0gZnVuY3Rpb24gZ2V0U2VhcmNoKHE2NCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9ncm91cHMvc2VhcmNoJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocTY0ID09PSB1bmRlZmluZWQgfHwgcTY0ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxNjQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicTY0XCJdID0gcTY0O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTZWFyY2ggZ3JvdXBzXG4gICogQG1lbWJlck9mIFNlYXJjaEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblNlYXJjaEFwaS5wcm90b3R5cGUucG9zdFNlYXJjaCA9IGZ1bmN0aW9uIHBvc3RTZWFyY2goYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZ3JvdXBzL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB2b2ljZW1haWxzIHVzaW5nIHRoZSBxNjQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIHNlYXJjaFxuICAqIEBtZW1iZXJPZiBTZWFyY2hBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcTY0IC0gcTY0XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gZXhwYW5kXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInByZXZpb3VzUGFnZVwiOiBcIlwiLFxuICAgXCJjdXJyZW50UGFnZVwiOiBcIlwiLFxuICAgXCJuZXh0UGFnZVwiOiBcIlwiLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicmVzdWx0c1wiOiBbXVxufVxuICAqL1xuU2VhcmNoQXBpLnByb3RvdHlwZS5nZXRTZWFyY2ggPSBmdW5jdGlvbiBnZXRTZWFyY2gocTY0LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxNjQgPT09IHVuZGVmaW5lZCB8fCBxNjQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHE2NCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJxNjRcIl0gPSBxNjQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB2b2ljZW1haWxzXG4gICogQG1lbWJlck9mIFNlYXJjaEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblNlYXJjaEFwaS5wcm90b3R5cGUucG9zdFNlYXJjaCA9IGZ1bmN0aW9uIHBvc3RTZWFyY2goYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB1c2VycyB1c2luZyB0aGUgcTY0IHZhbHVlIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBzZWFyY2hcbiAgKiBAbWVtYmVyT2YgU2VhcmNoQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHE2NCAtIHE2NFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIGV4cGFuZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblNlYXJjaEFwaS5wcm90b3R5cGUuZ2V0U2VhcmNoID0gZnVuY3Rpb24gZ2V0U2VhcmNoKHE2NCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxNjQgPT09IHVuZGVmaW5lZCB8fCBxNjQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHE2NCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJxNjRcIl0gPSBxNjQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB1c2Vyc1xuICAqIEBtZW1iZXJPZiBTZWFyY2hBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNlYXJjaCByZXF1ZXN0IG9wdGlvbnNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNvcnRPcmRlclwiOiBcIlwiLFxuICAgXCJzb3J0QnlcIjogXCJcIixcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJyZXR1cm5GaWVsZHNcIjogW10sXG4gICBcImV4cGFuZFwiOiBbXSxcbiAgIFwicXVlcnlcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5TZWFyY2hBcGkucHJvdG90eXBlLnBvc3RTZWFyY2ggPSBmdW5jdGlvbiBwb3N0U2VhcmNoKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCBsb2NhdGlvbnMgdXNpbmcgdGhlIHE2NCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgc2VhcmNoXG4gICogQG1lbWJlck9mIFNlYXJjaEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxNjQgLSBxNjRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBleHBhbmRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5TZWFyY2hBcGkucHJvdG90eXBlLmdldFNlYXJjaCA9IGZ1bmN0aW9uIGdldFNlYXJjaChxNjQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvbG9jYXRpb25zL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHE2NCA9PT0gdW5kZWZpbmVkIHx8IHE2NCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcTY0Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInE2NFwiXSA9IHE2NDtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIGxvY2F0aW9uc1xuICAqIEBtZW1iZXJPZiBTZWFyY2hBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNlYXJjaCByZXF1ZXN0IG9wdGlvbnNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNvcnRPcmRlclwiOiBcIlwiLFxuICAgXCJzb3J0QnlcIjogXCJcIixcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJyZXR1cm5GaWVsZHNcIjogW10sXG4gICBcImV4cGFuZFwiOiBbXSxcbiAgIFwicXVlcnlcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5TZWFyY2hBcGkucHJvdG90eXBlLnBvc3RTZWFyY2ggPSBmdW5jdGlvbiBwb3N0U2VhcmNoKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2xvY2F0aW9ucy9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTZWFyY2ggdXNpbmcgdGhlIHE2NCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgc2VhcmNoLlxuICAqIEBtZW1iZXJPZiBTZWFyY2hBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcTY0IC0gcTY0XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlLCBjb252ZXJzYXRpb25TdW1tYXJ5LCBvdXRPZk9mZmljZSwgZ2VvbG9jYXRpb24sIHN0YXRpb24sIGF1dGhvcml6YXRpb24sIHByb2ZpbGVTa2lsbHMsIGxvY2F0aW9uc1xuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvZmlsZSAtIHByb2ZpbGVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IHtcbiAgICAgIFwiYXJyYXlcIjogdHJ1ZSxcbiAgICAgIFwibnVsbFwiOiB0cnVlLFxuICAgICAgXCJub2RlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJvYmplY3RcIjogdHJ1ZSxcbiAgICAgIFwiYm9vbGVhblwiOiB0cnVlLFxuICAgICAgXCJudW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRcIjogdHJ1ZSxcbiAgICAgIFwidmFsdWVOb2RlXCI6IHRydWUsXG4gICAgICBcIm1pc3NpbmdOb2RlXCI6IHRydWUsXG4gICAgICBcImNvbnRhaW5lck5vZGVcIjogdHJ1ZSxcbiAgICAgIFwicG9qb1wiOiB0cnVlLFxuICAgICAgXCJpbnRlZ3JhbE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdGluZ1BvaW50TnVtYmVyXCI6IHRydWUsXG4gICAgICBcInNob3J0XCI6IHRydWUsXG4gICAgICBcImludFwiOiB0cnVlLFxuICAgICAgXCJsb25nXCI6IHRydWUsXG4gICAgICBcImRvdWJsZVwiOiB0cnVlLFxuICAgICAgXCJiaWdEZWNpbWFsXCI6IHRydWUsXG4gICAgICBcImJpZ0ludGVnZXJcIjogdHJ1ZSxcbiAgICAgIFwidGV4dHVhbFwiOiB0cnVlLFxuICAgICAgXCJiaW5hcnlcIjogdHJ1ZVxuICAgfSxcbiAgIFwiYWdncmVnYXRpb25zXCI6IHtcbiAgICAgIFwiYXJyYXlcIjogdHJ1ZSxcbiAgICAgIFwibnVsbFwiOiB0cnVlLFxuICAgICAgXCJub2RlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJvYmplY3RcIjogdHJ1ZSxcbiAgICAgIFwiYm9vbGVhblwiOiB0cnVlLFxuICAgICAgXCJudW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRcIjogdHJ1ZSxcbiAgICAgIFwidmFsdWVOb2RlXCI6IHRydWUsXG4gICAgICBcIm1pc3NpbmdOb2RlXCI6IHRydWUsXG4gICAgICBcImNvbnRhaW5lck5vZGVcIjogdHJ1ZSxcbiAgICAgIFwicG9qb1wiOiB0cnVlLFxuICAgICAgXCJpbnRlZ3JhbE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdGluZ1BvaW50TnVtYmVyXCI6IHRydWUsXG4gICAgICBcInNob3J0XCI6IHRydWUsXG4gICAgICBcImludFwiOiB0cnVlLFxuICAgICAgXCJsb25nXCI6IHRydWUsXG4gICAgICBcImRvdWJsZVwiOiB0cnVlLFxuICAgICAgXCJiaWdEZWNpbWFsXCI6IHRydWUsXG4gICAgICBcImJpZ0ludGVnZXJcIjogdHJ1ZSxcbiAgICAgIFwidGV4dHVhbFwiOiB0cnVlLFxuICAgICAgXCJiaW5hcnlcIjogdHJ1ZVxuICAgfVxufVxuICAqL1xuU2VhcmNoQXBpLnByb3RvdHlwZS5nZXRTZWFyY2ggPSBmdW5jdGlvbiBnZXRTZWFyY2gocTY0LCBleHBhbmQsIHByb2ZpbGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHE2NCA9PT0gdW5kZWZpbmVkIHx8IHE2NCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcTY0Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInE2NFwiXSA9IHE2NDtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVwiXSA9IHByb2ZpbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIHJlc291cmNlcy5cbiAgKiBAbWVtYmVyT2YgU2VhcmNoQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTZWFyY2ggcmVxdWVzdCBvcHRpb25zXG4gICogQHBhcmFtIHtib29sZWFufSBwcm9maWxlIC0gcHJvZmlsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicXVlcnlcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9LFxuICAgXCJhZ2dyZWdhdGlvbnNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9XG59XG4gICovXG5TZWFyY2hBcGkucHJvdG90eXBlLnBvc3RTZWFyY2ggPSBmdW5jdGlvbiBwb3N0U2VhcmNoKGJvZHksIHByb2ZpbGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVwiXSA9IHByb2ZpbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFN1Z2dlc3QgcmVzb3VyY2VzIHVzaW5nIHRoZSBxNjQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIHN1Z2dlc3QgcXVlcnkuXG4gICogQG1lbWJlck9mIFNlYXJjaEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxNjQgLSBxNjRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogcm91dGluZ1N0YXR1cywgcHJlc2VuY2UsIGNvbnZlcnNhdGlvblN1bW1hcnksIG91dE9mT2ZmaWNlLCBnZW9sb2NhdGlvbiwgc3RhdGlvbiwgYXV0aG9yaXphdGlvbiwgcHJvZmlsZVNraWxscywgbG9jYXRpb25zXG4gICogQHBhcmFtIHtib29sZWFufSBwcm9maWxlIC0gcHJvZmlsZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9LFxuICAgXCJhZ2dyZWdhdGlvbnNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9XG59XG4gICovXG5TZWFyY2hBcGkucHJvdG90eXBlLmdldFN1Z2dlc3QgPSBmdW5jdGlvbiBnZXRTdWdnZXN0KHE2NCwgZXhwYW5kLCBwcm9maWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9zZWFyY2gvc3VnZ2VzdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHE2NCA9PT0gdW5kZWZpbmVkIHx8IHE2NCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcTY0Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInE2NFwiXSA9IHE2NDtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVwiXSA9IHByb2ZpbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU3VnZ2VzdCByZXNvdXJjZXMuXG4gICogQG1lbWJlck9mIFNlYXJjaEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvZmlsZSAtIHByb2ZpbGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImV4cGFuZFwiOiBbXSxcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInF1ZXJ5XCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInByZXZpb3VzUGFnZVwiOiBcIlwiLFxuICAgXCJjdXJyZW50UGFnZVwiOiBcIlwiLFxuICAgXCJuZXh0UGFnZVwiOiBcIlwiLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicmVzdWx0c1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH0sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH1cbn1cbiAgKi9cblNlYXJjaEFwaS5wcm90b3R5cGUucG9zdFN1Z2dlc3QgPSBmdW5jdGlvbiBwb3N0U3VnZ2VzdChib2R5LCBwcm9maWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9zZWFyY2gvc3VnZ2VzdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVwiXSA9IHByb2ZpbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBTZWFyY2hBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBTdGF0aW9uc0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5TdGF0aW9uc0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBTdGF0aW9uc0FwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgU3RhdGlvbnNBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGlvbnNBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0YXRpb25zQXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIHN0YXRpb25zLlxuICAqIEBtZW1iZXJPZiBTdGF0aW9uc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2Ygc3RhdGlvbklkc1xuICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lQXBwZWFyYW5jZUlkIC0gbGluZUFwcGVhcmFuY2VJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuU3RhdGlvbnNBcGkucHJvdG90eXBlLmdldFN0YXRpb25zID0gZnVuY3Rpb24gZ2V0U3RhdGlvbnMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgbmFtZSwgaWQsIGxpbmVBcHBlYXJhbmNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3N0YXRpb25zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaWRcIl0gPSBpZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJsaW5lQXBwZWFyYW5jZUlkXCJdID0gbGluZUFwcGVhcmFuY2VJZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVbmFzc2lnbnMgdGhlIHVzZXIgYXNzaWduZWQgdG8gdGhpcyBzdGF0aW9uXG4gICogQG1lbWJlck9mIFN0YXRpb25zQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHN0YXRpb25JZCAtIFN0YXRpb24gSURcbiAgKi9cblN0YXRpb25zQXBpLnByb3RvdHlwZS5kZWxldGVTdGF0aW9uSWRBc3NvY2lhdGVkdXNlciA9IGZ1bmN0aW9uIGRlbGV0ZVN0YXRpb25JZEFzc29jaWF0ZWR1c2VyKHN0YXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc3RhdGlvbnMve3N0YXRpb25JZH0vYXNzb2NpYXRlZHVzZXInO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzdGF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBzdGF0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHN0YXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzdGF0aW9uSWR9Jywgc3RhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgc3RhdGlvbi5cbiAgKiBAbWVtYmVyT2YgU3RhdGlvbnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGlvbklkIC0gU3RhdGlvbiBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwicHJpbWFyeUVkZ2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcImxpbmVBcHBlYXJhbmNlSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5TdGF0aW9uc0FwaS5wcm90b3R5cGUuZ2V0U3RhdGlvbklkID0gZnVuY3Rpb24gZ2V0U3RhdGlvbklkKHN0YXRpb25JZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc3RhdGlvbnMve3N0YXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzdGF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBzdGF0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHN0YXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzdGF0aW9uSWR9Jywgc3RhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU3RhdGlvbnNBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBTdWdnZXN0QXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlN1Z2dlc3RBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gU3VnZ2VzdEFwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgU3VnZ2VzdEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWdnZXN0QXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdWdnZXN0QXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBTZWFyY2ggdXNpbmcgdGhlIHE2NCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgc2VhcmNoLlxuICAqIEBtZW1iZXJPZiBTdWdnZXN0QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHE2NCAtIHE2NFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiByb3V0aW5nU3RhdHVzLCBwcmVzZW5jZSwgY29udmVyc2F0aW9uU3VtbWFyeSwgb3V0T2ZPZmZpY2UsIGdlb2xvY2F0aW9uLCBzdGF0aW9uLCBhdXRob3JpemF0aW9uLCBwcm9maWxlU2tpbGxzLCBsb2NhdGlvbnNcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2ZpbGUgLSBwcm9maWxlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInByZXZpb3VzUGFnZVwiOiBcIlwiLFxuICAgXCJjdXJyZW50UGFnZVwiOiBcIlwiLFxuICAgXCJuZXh0UGFnZVwiOiBcIlwiLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicmVzdWx0c1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH0sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH1cbn1cbiAgKi9cblN1Z2dlc3RBcGkucHJvdG90eXBlLmdldFNlYXJjaCA9IGZ1bmN0aW9uIGdldFNlYXJjaChxNjQsIGV4cGFuZCwgcHJvZmlsZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvc2VhcmNoJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocTY0ID09PSB1bmRlZmluZWQgfHwgcTY0ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxNjQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicTY0XCJdID0gcTY0O1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJwcm9maWxlXCJdID0gcHJvZmlsZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTZWFyY2ggcmVzb3VyY2VzLlxuICAqIEBtZW1iZXJPZiBTdWdnZXN0QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTZWFyY2ggcmVxdWVzdCBvcHRpb25zXG4gICogQHBhcmFtIHtib29sZWFufSBwcm9maWxlIC0gcHJvZmlsZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicXVlcnlcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9LFxuICAgXCJhZ2dyZWdhdGlvbnNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9XG59XG4gICovXG5TdWdnZXN0QXBpLnByb3RvdHlwZS5wb3N0U2VhcmNoID0gZnVuY3Rpb24gcG9zdFNlYXJjaChib2R5LCBwcm9maWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInByb2ZpbGVcIl0gPSBwcm9maWxlO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTdWdnZXN0IHJlc291cmNlcyB1c2luZyB0aGUgcTY0IHZhbHVlIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBzdWdnZXN0IHF1ZXJ5LlxuICAqIEBtZW1iZXJPZiBTdWdnZXN0QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHE2NCAtIHE2NFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiByb3V0aW5nU3RhdHVzLCBwcmVzZW5jZSwgY29udmVyc2F0aW9uU3VtbWFyeSwgb3V0T2ZPZmZpY2UsIGdlb2xvY2F0aW9uLCBzdGF0aW9uLCBhdXRob3JpemF0aW9uLCBwcm9maWxlU2tpbGxzLCBsb2NhdGlvbnNcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2ZpbGUgLSBwcm9maWxlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInByZXZpb3VzUGFnZVwiOiBcIlwiLFxuICAgXCJjdXJyZW50UGFnZVwiOiBcIlwiLFxuICAgXCJuZXh0UGFnZVwiOiBcIlwiLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicmVzdWx0c1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH0sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiB7XG4gICAgICBcImFycmF5XCI6IHRydWUsXG4gICAgICBcIm51bGxcIjogdHJ1ZSxcbiAgICAgIFwibm9kZVR5cGVcIjogXCJcIixcbiAgICAgIFwib2JqZWN0XCI6IHRydWUsXG4gICAgICBcImJvb2xlYW5cIjogdHJ1ZSxcbiAgICAgIFwibnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0XCI6IHRydWUsXG4gICAgICBcInZhbHVlTm9kZVwiOiB0cnVlLFxuICAgICAgXCJtaXNzaW5nTm9kZVwiOiB0cnVlLFxuICAgICAgXCJjb250YWluZXJOb2RlXCI6IHRydWUsXG4gICAgICBcInBvam9cIjogdHJ1ZSxcbiAgICAgIFwiaW50ZWdyYWxOdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwiZmxvYXRpbmdQb2ludE51bWJlclwiOiB0cnVlLFxuICAgICAgXCJzaG9ydFwiOiB0cnVlLFxuICAgICAgXCJpbnRcIjogdHJ1ZSxcbiAgICAgIFwibG9uZ1wiOiB0cnVlLFxuICAgICAgXCJkb3VibGVcIjogdHJ1ZSxcbiAgICAgIFwiYmlnRGVjaW1hbFwiOiB0cnVlLFxuICAgICAgXCJiaWdJbnRlZ2VyXCI6IHRydWUsXG4gICAgICBcInRleHR1YWxcIjogdHJ1ZSxcbiAgICAgIFwiYmluYXJ5XCI6IHRydWVcbiAgIH1cbn1cbiAgKi9cblN1Z2dlc3RBcGkucHJvdG90eXBlLmdldFN1Z2dlc3QgPSBmdW5jdGlvbiBnZXRTdWdnZXN0KHE2NCwgZXhwYW5kLCBwcm9maWxlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9zZWFyY2gvc3VnZ2VzdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHE2NCA9PT0gdW5kZWZpbmVkIHx8IHE2NCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcTY0Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInE2NFwiXSA9IHE2NDtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicHJvZmlsZVwiXSA9IHByb2ZpbGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU3VnZ2VzdCByZXNvdXJjZXMuXG4gICogQG1lbWJlck9mIFN1Z2dlc3RBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNlYXJjaCByZXF1ZXN0IG9wdGlvbnNcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2ZpbGUgLSBwcm9maWxlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJleHBhbmRcIjogW10sXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9LFxuICAgXCJhZ2dyZWdhdGlvbnNcIjoge1xuICAgICAgXCJhcnJheVwiOiB0cnVlLFxuICAgICAgXCJudWxsXCI6IHRydWUsXG4gICAgICBcIm5vZGVUeXBlXCI6IFwiXCIsXG4gICAgICBcIm9iamVjdFwiOiB0cnVlLFxuICAgICAgXCJib29sZWFuXCI6IHRydWUsXG4gICAgICBcIm51bWJlclwiOiB0cnVlLFxuICAgICAgXCJmbG9hdFwiOiB0cnVlLFxuICAgICAgXCJ2YWx1ZU5vZGVcIjogdHJ1ZSxcbiAgICAgIFwibWlzc2luZ05vZGVcIjogdHJ1ZSxcbiAgICAgIFwiY29udGFpbmVyTm9kZVwiOiB0cnVlLFxuICAgICAgXCJwb2pvXCI6IHRydWUsXG4gICAgICBcImludGVncmFsTnVtYmVyXCI6IHRydWUsXG4gICAgICBcImZsb2F0aW5nUG9pbnROdW1iZXJcIjogdHJ1ZSxcbiAgICAgIFwic2hvcnRcIjogdHJ1ZSxcbiAgICAgIFwiaW50XCI6IHRydWUsXG4gICAgICBcImxvbmdcIjogdHJ1ZSxcbiAgICAgIFwiZG91YmxlXCI6IHRydWUsXG4gICAgICBcImJpZ0RlY2ltYWxcIjogdHJ1ZSxcbiAgICAgIFwiYmlnSW50ZWdlclwiOiB0cnVlLFxuICAgICAgXCJ0ZXh0dWFsXCI6IHRydWUsXG4gICAgICBcImJpbmFyeVwiOiB0cnVlXG4gICB9XG59XG4gICovXG5TdWdnZXN0QXBpLnByb3RvdHlwZS5wb3N0U3VnZ2VzdCA9IGZ1bmN0aW9uIHBvc3RTdWdnZXN0KGJvZHksIHByb2ZpbGUpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3NlYXJjaC9zdWdnZXN0JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJwcm9maWxlXCJdID0gcHJvZmlsZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFN1Z2dlc3RBcGk7XG4iLCIvKmpzaGludCAtVzA2OSAqL1xuLyoqXG4qIEBjbGFzcyBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaShzZXNzaW9uKSB7XG4gICAgaWYoISh0aGlzIGluc3RhbmNlb2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpIHJlcXVpcmVzIGEgUHVyZUNsb3VkU2Vzc2lvbicpO1xuICAgIH1cbiAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xufVxuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgTnVtYmVyIFBsYW5zIGZvciB0aGlzIFNpdGUuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2l0ZUlkIC0gU2l0ZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICBcInZlcnNpb25cIjogMCxcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgXCJzdGF0ZVwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgXCJtYXRjaFwiOiBcIlwiLFxuICBcIm5vcm1hbGl6ZWRGb3JtYXRcIjogXCJcIixcbiAgXCJwcmlvcml0eVwiOiAwLFxuICBcIm51bWJlcnNcIjogW10sXG4gIFwiZGlnaXRMZW5ndGhcIjoge1xuICAgXCJzdGFydFwiOiBcIlwiLFxuICAgXCJlbmRcIjogXCJcIlxuICB9LFxuICBcImNsYXNzaWZpY2F0aW9uXCI6IFwiXCIsXG4gIFwibWF0Y2hUeXBlXCI6IFwiXCIsXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE51bWJlcnBsYW5zID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE51bWJlcnBsYW5zKHNpdGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfS9udW1iZXJwbGFucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNpdGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNpdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2l0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NpdGVJZH0nLCBzaXRlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB0aGUgbGlzdCBvZiBOdW1iZXIgUGxhbnMuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2l0ZUlkIC0gU2l0ZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTGlzdCBvZiBudW1iZXIgcGxhbnNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcIm5hbWVcIjogXCJcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICBcInZlcnNpb25cIjogMCxcbiAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgXCJzdGF0ZVwiOiBcIlwiLFxuICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgXCJtYXRjaFwiOiBcIlwiLFxuICBcIm5vcm1hbGl6ZWRGb3JtYXRcIjogXCJcIixcbiAgXCJwcmlvcml0eVwiOiAwLFxuICBcIm51bWJlcnNcIjogW10sXG4gIFwiZGlnaXRMZW5ndGhcIjoge1xuICAgXCJzdGFydFwiOiBcIlwiLFxuICAgXCJlbmRcIjogXCJcIlxuICB9LFxuICBcImNsYXNzaWZpY2F0aW9uXCI6IFwiXCIsXG4gIFwibWF0Y2hUeXBlXCI6IFwiXCJcbiB9XG5dXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCIsXG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gIFwidmVyc2lvblwiOiAwLFxuICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICBcInN0YXRlXCI6IFwiXCIsXG4gIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICBcIm1hdGNoXCI6IFwiXCIsXG4gIFwibm9ybWFsaXplZEZvcm1hdFwiOiBcIlwiLFxuICBcInByaW9yaXR5XCI6IDAsXG4gIFwibnVtYmVyc1wiOiBbXSxcbiAgXCJkaWdpdExlbmd0aFwiOiB7XG4gICBcInN0YXJ0XCI6IFwiXCIsXG4gICBcImVuZFwiOiBcIlwiXG4gIH0sXG4gIFwiY2xhc3NpZmljYXRpb25cIjogXCJcIixcbiAgXCJtYXRjaFR5cGVcIjogXCJcIixcbiAgXCJzZWxmVXJpXCI6IFwiXCJcbiB9XG5dXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkTnVtYmVycGxhbnMgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkTnVtYmVycGxhbnMoc2l0ZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3NpdGVzL3tzaXRlSWR9L251bWJlcnBsYW5zJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2l0ZUlkID09PSB1bmRlZmluZWQgfHwgc2l0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzaXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2l0ZUlkfScsIHNpdGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIEVkZ2UtY29tcGF0aWJsZSB0aW1lIHpvbmVzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzVGltZXpvbmVzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNUaW1lem9uZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvdGltZXpvbmVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgQ291bnRzIG9mIHRydW5rcyB0aGF0IGhhdmUgcmVjb3JkaW5nIGRpc2FibGVkIG9yIGVuYWJsZWRcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB0cnVua1R5cGUgLSBUaGUgdHlwZSBvZiB0aGlzIHRydW5rIGJhc2UuXG4gIEVYVEVSTkFMLFxuICBQSE9ORSxcbiAgRURHRSxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW5hYmxlZENvdW50XCI6IDAsXG4gICBcImRpc2FibGVkQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNUcnVua3N3aXRocmVjb3JkaW5nID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNUcnVua3N3aXRocmVjb3JkaW5nKHRydW5rVHlwZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy90cnVua3N3aXRocmVjb3JkaW5nJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1widHJ1bmtUeXBlXCJdID0gdHJ1bmtUeXBlO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBsaW5lcy5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2VJZExpbmVzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRMaW5lcyhlZGdlSWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L2xpbmVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZWRnZSBsb2dpY2FsIGludGVyZmFjZXMuXG4gICogQGRlc2NyaXB0aW9uIFJldHJpZXZlIGEgbGlzdCBvZiBhbGwgY29uZmlndXJlZCBsb2dpY2FsIGludGVyZmFjZXMgZnJvbSBhIHNwZWNpZmljIGVkZ2UuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIEZpZWxkIHRvIGV4cGFuZCBpbiB0aGUgcmVzcG9uc2UgVmFsaWQgVmFsdWVzOiBleHRlcm5hbFRydW5rQmFzZUFzc2lnbm1lbnRzLCBwaG9uZVRydW5rQmFzZUFzc2lnbm1lbnRzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRMb2dpY2FsaW50ZXJmYWNlcyhlZGdlSWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9sb2dpY2FsaW50ZXJmYWNlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYW4gZWRnZSBsb2dpY2FsIGludGVyZmFjZS5cbiAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTG9naWNhbCBpbnRlcmZhY2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJlZGdlQXNzaWduZWRJZFwiOiBcIlwiLFxuICAgXCJmcmllbmRseU5hbWVcIjogXCJcIixcbiAgIFwidmxhblRhZ0lkXCI6IDAsXG4gICBcImhhcmR3YXJlQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwaHlzaWNhbEFkYXB0ZXJJZFwiOiBcIlwiLFxuICAgXCJpZlN0YXR1c1wiOiBcIlwiLFxuICAgXCJyb3V0ZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwiaXB2NENhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgICAgIFwiZGhjcFwiOiB0cnVlLFxuICAgICAgXCJtZXRyaWNcIjogMCxcbiAgICAgIFwiYXV0b01ldHJpY1wiOiB0cnVlXG4gICB9LFxuICAgXCJpcHY2Q2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJkaGNwXCI6IHRydWUsXG4gICAgICBcIm1ldHJpY1wiOiAwLFxuICAgICAgXCJhdXRvTWV0cmljXCI6IHRydWVcbiAgIH0sXG4gICBcImN1cnJlbnRTdGF0ZVwiOiBcIlwiLFxuICAgXCJsYXN0TW9kaWZpZWRVc2VySWRcIjogXCJcIixcbiAgIFwibGFzdE1vZGlmaWVkQ29ycmVsYXRpb25JZFwiOiBcIlwiLFxuICAgXCJjb21tYW5kUmVzcG9uc2VzXCI6IFtdLFxuICAgXCJpbmhlcml0UGhvbmVUcnVua0Jhc2VzSVB2NFwiOiB0cnVlLFxuICAgXCJpbmhlcml0UGhvbmVUcnVua0Jhc2VzSVB2NlwiOiB0cnVlLFxuICAgXCJ1c2VGb3JJbnRlcm5hbEVkZ2VDb21tdW5pY2F0aW9uXCI6IHRydWUsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlQXNzaWdubWVudHNcIjogW10sXG4gICBcInBob25lVHJ1bmtCYXNlQXNzaWdubWVudHNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJlZGdlVXJpXCI6IFwiXCIsXG4gICBcImVkZ2VBc3NpZ25lZElkXCI6IFwiXCIsXG4gICBcImZyaWVuZGx5TmFtZVwiOiBcIlwiLFxuICAgXCJ2bGFuVGFnSWRcIjogMCxcbiAgIFwiaGFyZHdhcmVBZGRyZXNzXCI6IFwiXCIsXG4gICBcInBoeXNpY2FsQWRhcHRlcklkXCI6IFwiXCIsXG4gICBcImlmU3RhdHVzXCI6IFwiXCIsXG4gICBcImludGVyZmFjZVR5cGVcIjogXCJcIixcbiAgIFwicm91dGVzXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcImlwdjRDYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICAgICBcImRoY3BcIjogdHJ1ZSxcbiAgICAgIFwibWV0cmljXCI6IDAsXG4gICAgICBcImF1dG9NZXRyaWNcIjogdHJ1ZSxcbiAgICAgIFwic3VwcG9ydHNNZXRyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwiaXB2NkNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgICAgIFwiZGhjcFwiOiB0cnVlLFxuICAgICAgXCJtZXRyaWNcIjogMCxcbiAgICAgIFwiYXV0b01ldHJpY1wiOiB0cnVlLFxuICAgICAgXCJzdXBwb3J0c01ldHJpY1wiOiB0cnVlXG4gICB9LFxuICAgXCJjdXJyZW50U3RhdGVcIjogXCJcIixcbiAgIFwibGFzdE1vZGlmaWVkVXNlcklkXCI6IFwiXCIsXG4gICBcImxhc3RNb2RpZmllZENvcnJlbGF0aW9uSWRcIjogXCJcIixcbiAgIFwiY29tbWFuZFJlc3BvbnNlc1wiOiBbXSxcbiAgIFwiaW5oZXJpdFBob25lVHJ1bmtCYXNlc0lQdjRcIjogdHJ1ZSxcbiAgIFwiaW5oZXJpdFBob25lVHJ1bmtCYXNlc0lQdjZcIjogdHJ1ZSxcbiAgIFwidXNlRm9ySW50ZXJuYWxFZGdlQ29tbXVuaWNhdGlvblwiOiB0cnVlLFxuICAgXCJleHRlcm5hbFRydW5rQmFzZUFzc2lnbm1lbnRzXCI6IFtdLFxuICAgXCJwaG9uZVRydW5rQmFzZUFzc2lnbm1lbnRzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkTG9naWNhbGludGVyZmFjZXMoZWRnZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L2xvZ2ljYWxpbnRlcmZhY2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGVuZHBvaW50XG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW5kcG9pbnRJZCAtIEVuZHBvaW50IElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY291bnRcIjogMCxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwic2NoZW1hXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkaWRzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRW5kcG9pbnRzRW5kcG9pbnRJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRW5kcG9pbnRzRW5kcG9pbnRJZChlbmRwb2ludElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2VuZHBvaW50cy97ZW5kcG9pbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlbmRwb2ludElkID09PSB1bmRlZmluZWQgfHwgZW5kcG9pbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZW5kcG9pbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlbmRwb2ludElkfScsIGVuZHBvaW50SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBlbmRwb2ludFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVuZHBvaW50SWQgLSBFbmRwb2ludCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gRW5kcG9pbnRUZW1wbGF0ZVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjb3VudFwiOiAwLFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJzY2hlbWFcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRpZHNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjb3VudFwiOiAwLFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJzY2hlbWFcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRpZHNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucHV0UHJvdmlkZXJzRWRnZXNFbmRwb2ludHNFbmRwb2ludElkID0gZnVuY3Rpb24gcHV0UHJvdmlkZXJzRWRnZXNFbmRwb2ludHNFbmRwb2ludElkKGVuZHBvaW50SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZW5kcG9pbnRzL3tlbmRwb2ludElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVuZHBvaW50SWQgPT09IHVuZGVmaW5lZCB8fCBlbmRwb2ludElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlbmRwb2ludElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VuZHBvaW50SWR9JywgZW5kcG9pbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgZW5kcG9pbnRcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRwb2ludElkIC0gRW5kcG9pbnQgSURcbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmRlbGV0ZVByb3ZpZGVyc0VkZ2VzRW5kcG9pbnRzRW5kcG9pbnRJZCA9IGZ1bmN0aW9uIGRlbGV0ZVByb3ZpZGVyc0VkZ2VzRW5kcG9pbnRzRW5kcG9pbnRJZChlbmRwb2ludElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2VuZHBvaW50cy97ZW5kcG9pbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlbmRwb2ludElkID09PSB1bmRlZmluZWQgfHwgZW5kcG9pbnRJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZW5kcG9pbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlbmRwb2ludElkfScsIGVuZHBvaW50SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIGZpbGUgdGhhdCBjYW4gYmUgdXNlZCB0byBjb25maWd1cmUgYSBoYXJkd2FyZSBFZGdlJ3Mgc2V0dGluZ3MuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEVkZ2VPZmZsaW5lQ29uZmlndXJhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICBcIm5ldHdvcmtcIjoge1xuICAgICAgXCJ3YW5cIjoge31cbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZG93bmxvYWRVcmxcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzT2ZmbGluZWNvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNPZmZsaW5lY29uZmlndXJhdGlvbihib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL29mZmxpbmVjb25maWd1cmF0aW9uJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVib290IE11bHRpcGxlIFBob25lc1xuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQaG9uZXNcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInBob25lSWRzXCI6IFtdLFxuICAgXCJzaXRlSWRcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzUGhvbmVzUmVib290ID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzUGhvbmVzUmVib290KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvcGhvbmVzL3JlYm9vdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHJpZXZlIGEgbGlzdCBvZiBhbGwgY29uZmlndXJlZCBwaHlzaWNhbCBpbnRlcmZhY2VzIGZyb20gYSBzcGVjaWZpYyBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkUGh5c2ljYWxpbnRlcmZhY2VzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRQaHlzaWNhbGludGVyZmFjZXMoZWRnZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L3BoeXNpY2FsaW50ZXJmYWNlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBlZGdlcy5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlaWQgLSBGaWx0ZXIgYnkgc2l0ZS5pZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlR3JvdXBpZCAtIEZpbHRlciBieSBlZGdlR3JvdXAuaWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCAtIEZpbHRlciBieSBtYW5hZ2VkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBuYW1lLCBzaXRlaWQsIGVkZ2VHcm91cGlkLCBzb3J0QnksIG1hbmFnZWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcInNpdGUuaWRcIl0gPSBzaXRlaWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZWRnZUdyb3VwLmlkXCJdID0gZWRnZUdyb3VwaWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcIm1hbmFnZWRcIl0gPSBtYW5hZ2VkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhbiBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBFZGdlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImludGVyZmFjZXNcIjogW10sXG4gICBcIm1ha2VcIjogXCJcIixcbiAgIFwibW9kZWxcIjogXCJcIixcbiAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgIFwicGF0Y2hcIjogXCJcIixcbiAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgXCJlZGdlR3JvdXBcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZVRydW5rQmFzZUFzc2lnbm1lbnRcIjoge30sXG4gICAgICBcInBob25lVHJ1bmtCYXNlc1wiOiBbXVxuICAgfSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJlZGdlc1wiOiBbXSxcbiAgICAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge30sXG4gICAgICBcImxvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWVcbiAgIH0sXG4gICBcInNvZnR3YXJlU3RhdHVzXCI6IHtcbiAgICAgIFwidmVyc2lvblwiOiB7fSxcbiAgICAgIFwibWF4RG93bmxvYWRSYXRlXCI6IDAsXG4gICAgICBcImRvd25sb2FkU3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImV4ZWN1dGVTdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZVN0b3BUaW1lXCI6IFwiXCIsXG4gICAgICBcImV4ZWN1dGVPbklkbGVcIjogdHJ1ZSxcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VVcmlcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFwiOiB0cnVlXG4gICB9LFxuICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgIFwibWFrZVwiOiBcIlwiLFxuICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlVHJ1bmtCYXNlQXNzaWdubWVudFwiOiB7fSxcbiAgICAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwic2Vjb25kYXJ5U2l0ZXNcIjogW10sXG4gICAgICBcInByaW1hcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwic2Vjb25kYXJ5RWRnZXNcIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwiZWRnZXNcIjogW10sXG4gICAgICBcImVkZ2VBdXRvVXBkYXRlQ29uZmlnXCI6IHt9LFxuICAgICAgXCJsb2NhdGlvblwiOiB7fSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNvZnR3YXJlU3RhdHVzXCI6IHtcbiAgICAgIFwidmVyc2lvblwiOiB7fSxcbiAgICAgIFwibWF4RG93bmxvYWRSYXRlXCI6IDAsXG4gICAgICBcImRvd25sb2FkU3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImV4ZWN1dGVTdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZVN0b3BUaW1lXCI6IFwiXCIsXG4gICAgICBcImV4ZWN1dGVPbklkbGVcIjogdHJ1ZSxcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VVcmlcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFwiOiB0cnVlXG4gICB9LFxuICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlcyA9IGZ1bmN0aW9uIHBvc3RQcm92aWRlcnNFZGdlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVHJpZ2dlcnMgdGhlIHJlYmFsYW5jZSBvcGVyYXRpb24uXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2l0ZUlkIC0gU2l0ZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWRSZWJhbGFuY2UgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZFJlYmFsYW5jZShzaXRlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvc2l0ZXMve3NpdGVJZH0vcmViYWxhbmNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2l0ZUlkID09PSB1bmRlZmluZWQgfHwgc2l0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzaXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2l0ZUlkfScsIHNpdGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIFRydW5rIEJhc2UgU2V0dGluZ3MgaW5zdGFuY2UgdGVtcGxhdGUgZnJvbSBhIGdpdmVuIG1ha2UgYW5kIG1vZGVsLiBUaGlzIG9iamVjdCBjYW4gdGhlbiBiZSBtb2RpZmllZCBhbmQgc2F2ZWQgYXMgYSBuZXcgVHJ1bmsgQmFzZSBTZXR0aW5ncyBpbnN0YW5jZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHRydW5rTWV0YWJhc2VJZCAtIFRoZSBpZCBvZiBhIG1ldGFiYXNlIG9iamVjdCB1cG9uIHdoaWNoIHRvIGJhc2UgdGhpcyBUcnVuayBCYXNlIFNldHRpbmdzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3NUZW1wbGF0ZSA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3NUZW1wbGF0ZSh0cnVua01ldGFiYXNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvdHJ1bmtiYXNlc2V0dGluZ3MvdGVtcGxhdGUnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih0cnVua01ldGFiYXNlSWQgPT09IHVuZGVmaW5lZCB8fCB0cnVua01ldGFiYXNlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHRydW5rTWV0YWJhc2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJ0cnVua01ldGFiYXNlSWRcIl0gPSB0cnVua01ldGFiYXNlSWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgUGhvbmUgQmFzZSBTZXR0aW5ncyBpbnN0YW5jZSB0ZW1wbGF0ZSBmcm9tIGEgZ2l2ZW4gbWFrZSBhbmQgbW9kZWwuIFRoaXMgb2JqZWN0IGNhbiB0aGVuIGJlIG1vZGlmaWVkIGFuZCBzYXZlZCBhcyBhIG5ldyBQaG9uZSBCYXNlIFNldHRpbmdzIGluc3RhbmNlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGhvbmVNZXRhYmFzZUlkIC0gVGhlIGlkIG9mIGEgbWV0YWJhc2Ugb2JqZWN0IHVwb24gd2hpY2ggdG8gYmFzZSB0aGlzIFBob25lIEJhc2UgU2V0dGluZ3NcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJwaG9uZU1ldGFCYXNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVzXCI6IFtdLFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJjYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJwcm92aXNpb25zXCI6IHRydWUsXG4gICAgICBcInJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJkdWFsUmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImhhcmR3YXJlSWRUeXBlXCI6IFwiXCIsXG4gICAgICBcImFsbG93UmVib290XCI6IHRydWUsXG4gICAgICBcIm5vUmViYWxhbmNlXCI6IHRydWVcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5nc1RlbXBsYXRlID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5nc1RlbXBsYXRlKHBob25lTWV0YWJhc2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZWJhc2VzZXR0aW5ncy90ZW1wbGF0ZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHBob25lTWV0YWJhc2VJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lTWV0YWJhc2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGhvbmVNZXRhYmFzZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RRdWVyeVtcInBob25lTWV0YWJhc2VJZFwiXSA9IHBob25lTWV0YWJhc2VJZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgb3V0Ym91bmQgcm91dGVzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2l0ZWlkIC0gRmlsdGVyIGJ5IHNpdGUuaWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNPdXRib3VuZHJvdXRlcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzT3V0Ym91bmRyb3V0ZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIG5hbWUsIHNpdGVpZCwgc29ydEJ5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL291dGJvdW5kcm91dGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzaXRlLmlkXCJdID0gc2l0ZWlkO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgb3V0Ym91bmQgcnVsZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBPdXRib3VuZFJvdXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJlZGdlc1wiOiBbXSxcbiAgICAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge30sXG4gICAgICBcImxvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc091dGJvdW5kcm91dGVzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzT3V0Ym91bmRyb3V0ZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9vdXRib3VuZHJvdXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIFBob25lIEJhc2UgU2V0dGluZ3Mgb2JqZWN0IGJ5IElEXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGhvbmVCYXNlSWQgLSBQaG9uZSBiYXNlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicGhvbmVNZXRhQmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lc1wiOiBbXSxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiY2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwicHJvdmlzaW9uc1wiOiB0cnVlLFxuICAgICAgXCJyZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiZHVhbFJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJoYXJkd2FyZUlkVHlwZVwiOiBcIlwiLFxuICAgICAgXCJhbGxvd1JlYm9vdFwiOiB0cnVlLFxuICAgICAgXCJub1JlYmFsYW5jZVwiOiB0cnVlXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzUGhvbmViYXNlc2V0dGluZ3NQaG9uZWJhc2VJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzUGhvbmViYXNlc2V0dGluZ3NQaG9uZWJhc2VJZChwaG9uZUJhc2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZWJhc2VzZXR0aW5ncy97cGhvbmVCYXNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVCYXNlSWQgPT09IHVuZGVmaW5lZCB8fCBwaG9uZUJhc2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGhvbmVCYXNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGhvbmVCYXNlSWR9JywgcGhvbmVCYXNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIFBob25lIEJhc2UgU2V0dGluZ3MgYnkgSURcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBwaG9uZUJhc2VJZCAtIFBob25lIGJhc2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBob25lIGJhc2Ugc2V0dGluZ3NcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicGhvbmVNZXRhQmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lc1wiOiBbXSxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiY2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwicHJvdmlzaW9uc1wiOiB0cnVlLFxuICAgICAgXCJyZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiZHVhbFJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJoYXJkd2FyZUlkVHlwZVwiOiBcIlwiLFxuICAgICAgXCJhbGxvd1JlYm9vdFwiOiB0cnVlLFxuICAgICAgXCJub1JlYmFsYW5jZVwiOiB0cnVlXG4gICB9XG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicGhvbmVNZXRhQmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lc1wiOiBbXSxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiY2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwicHJvdmlzaW9uc1wiOiB0cnVlLFxuICAgICAgXCJyZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiZHVhbFJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJoYXJkd2FyZUlkVHlwZVwiOiBcIlwiLFxuICAgICAgXCJhbGxvd1JlYm9vdFwiOiB0cnVlLFxuICAgICAgXCJub1JlYmFsYW5jZVwiOiB0cnVlXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVyc0VkZ2VzUGhvbmViYXNlc2V0dGluZ3NQaG9uZWJhc2VJZCA9IGZ1bmN0aW9uIHB1dFByb3ZpZGVyc0VkZ2VzUGhvbmViYXNlc2V0dGluZ3NQaG9uZWJhc2VJZChwaG9uZUJhc2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZWJhc2VzZXR0aW5ncy97cGhvbmVCYXNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVCYXNlSWQgPT09IHVuZGVmaW5lZCB8fCBwaG9uZUJhc2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcGhvbmVCYXNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGhvbmVCYXNlSWR9JywgcGhvbmVCYXNlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgUGhvbmUgQmFzZSBTZXR0aW5ncyBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lQmFzZUlkIC0gUGhvbmUgYmFzZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5nc1Bob25lYmFzZUlkID0gZnVuY3Rpb24gZGVsZXRlUHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5nc1Bob25lYmFzZUlkKHBob25lQmFzZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3Bob25lYmFzZXNldHRpbmdzL3twaG9uZUJhc2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihwaG9uZUJhc2VJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lQmFzZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwaG9uZUJhc2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3twaG9uZUJhc2VJZH0nLCBwaG9uZUJhc2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiBhdmFpbGFibGUgbWFrZXMgYW5kIG1vZGVscyB0byBjcmVhdGUgYSBuZXcgUGhvbmUgQmFzZSBTZXR0aW5nc1xuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc1Bob25lYmFzZXNldHRpbmdzQXZhaWxhYmxlbWV0YWJhc2VzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5nc0F2YWlsYWJsZW1ldGFiYXNlcyhwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZWJhc2VzZXR0aW5ncy9hdmFpbGFibGVtZXRhYmFzZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgUGhvbmUgSW5zdGFuY2VzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gVmFsdWUgYnkgd2hpY2ggdG8gc29ydFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHNpdGVpZCAtIEZpbHRlciBieSBzaXRlLmlkXG4gICogQHBhcmFtIHtzdHJpbmd9IHdlYlJ0Y1VzZXJpZCAtIEZpbHRlciBieSB3ZWJSdGNVc2VyLmlkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lQmFzZVNldHRpbmdzaWQgLSBGaWx0ZXIgYnkgcGhvbmVCYXNlU2V0dGluZ3MuaWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGluZXNsb2dnZWRJblVzZXJpZCAtIEZpbHRlciBieSBsaW5lcy5sb2dnZWRJblVzZXIuaWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGluZXNkZWZhdWx0Rm9yVXNlcmlkIC0gRmlsdGVyIGJ5IGxpbmVzLmRlZmF1bHRGb3JVc2VyLmlkXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lX2hhcmR3YXJlSWQgLSBGaWx0ZXIgYnkgcGhvbmVfaGFyZHdhcmVJZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lc2lkIC0gRmlsdGVyIGJ5IGxpbmVzLmlkXG4gICogQHBhcmFtIHtzdHJpbmd9IGxpbmVzbmFtZSAtIEZpbHRlciBieSBsaW5lcy5uYW1lXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gRmllbGRzIHRvIGV4cGFuZCBpbiB0aGUgcmVzcG9uc2UsIGNvbW1hLXNlcGFyYXRlZCBWYWxpZCBWYWx1ZXM6IHByb3BlcnRpZXMsIHNpdGUsIHN0YXR1cywgc3RhdHVzLnByaW1hcnlFZGdlc1N0YXR1cywgc3RhdHVzLnNlY29uZGFyeUVkZ2VzU3RhdHVzLCBwaG9uZUJhc2VTZXR0aW5ncywgbGluZXNcbiAgKiBAcGFyYW0ge2FycmF5fSBmaWVsZHMgLSBGaWVsZHMgYW5kIHByb3BlcnRpZXMgdG8gZ2V0LCBjb21tYS1zZXBhcmF0ZWQgVmFsaWQgVmFsdWVzOiB3ZWJSdGNVc2VyLCBwcm9wZXJ0aWVzLiosIGxpbmVzLmxvZ2dlZEluVXNlciwgbGluZXMuZGVmYXVsdEZvclVzZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzUGhvbmVzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNQaG9uZXMocGFnZU51bWJlciwgcGFnZVNpemUsIHNvcnRCeSwgc29ydE9yZGVyLCBzaXRlaWQsIHdlYlJ0Y1VzZXJpZCwgcGhvbmVCYXNlU2V0dGluZ3NpZCwgbGluZXNsb2dnZWRJblVzZXJpZCwgbGluZXNkZWZhdWx0Rm9yVXNlcmlkLCBwaG9uZV9oYXJkd2FyZUlkLCBsaW5lc2lkLCBsaW5lc25hbWUsIGV4cGFuZCwgZmllbGRzKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3Bob25lcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzaXRlLmlkXCJdID0gc2l0ZWlkO1xuICAgIHJlcXVlc3RRdWVyeVtcIndlYlJ0Y1VzZXIuaWRcIl0gPSB3ZWJSdGNVc2VyaWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGhvbmVCYXNlU2V0dGluZ3MuaWRcIl0gPSBwaG9uZUJhc2VTZXR0aW5nc2lkO1xuICAgIHJlcXVlc3RRdWVyeVtcImxpbmVzLmxvZ2dlZEluVXNlci5pZFwiXSA9IGxpbmVzbG9nZ2VkSW5Vc2VyaWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibGluZXMuZGVmYXVsdEZvclVzZXIuaWRcIl0gPSBsaW5lc2RlZmF1bHRGb3JVc2VyaWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGhvbmVfaGFyZHdhcmVJZFwiXSA9IHBob25lX2hhcmR3YXJlSWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibGluZXMuaWRcIl0gPSBsaW5lc2lkO1xuICAgIHJlcXVlc3RRdWVyeVtcImxpbmVzLm5hbWVcIl0gPSBsaW5lc25hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJlcXVlc3RRdWVyeVtcImZpZWxkc1wiXSA9IGZpZWxkcztcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBuZXcgUGhvbmVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGhvbmVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lQmFzZVNldHRpbmdzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInBob25lTWV0YUJhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZXNcIjogW10sXG4gICBcInN0YXR1c1wiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwib3BlcmF0aW9uYWxTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZXNTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZXZlbnRDcmVhdGlvblRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uXCI6IHt9LFxuICAgICAgXCJsaW5lU3RhdHVzZXNcIjogW10sXG4gICAgICBcInBob25lQXNzaWdubWVudFRvRWRnZVR5cGVcIjogXCJcIixcbiAgICAgIFwiZWRnZVwiOiB7fVxuICAgfSxcbiAgIFwic2Vjb25kYXJ5U3RhdHVzXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJvcGVyYXRpb25hbFN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlZGdlc1N0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJldmVudENyZWF0aW9uVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25cIjoge30sXG4gICAgICBcImxpbmVTdGF0dXNlc1wiOiBbXSxcbiAgICAgIFwicGhvbmVBc3NpZ25tZW50VG9FZGdlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlXCI6IHt9XG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJjYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJwcm92aXNpb25zXCI6IHRydWUsXG4gICAgICBcInJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJkdWFsUmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImhhcmR3YXJlSWRUeXBlXCI6IFwiXCIsXG4gICAgICBcImFsbG93UmVib290XCI6IHRydWUsXG4gICAgICBcIm5vUmViYWxhbmNlXCI6IHRydWVcbiAgIH0sXG4gICBcIndlYlJ0Y1VzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpbWFyeUVkZ2VcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImludGVyZmFjZXNcIjogW10sXG4gICAgICBcIm1ha2VcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIixcbiAgICAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgICAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICAgICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGF0Y2hcIjogXCJcIixcbiAgICAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlR3JvdXBcIjoge30sXG4gICAgICBcInNpdGVcIjoge30sXG4gICAgICBcInNvZnR3YXJlU3RhdHVzXCI6IHt9LFxuICAgICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICAgICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwXG4gICB9LFxuICAgXCJzZWNvbmRhcnlFZGdlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgICAgXCJtYWtlXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCIsXG4gICAgICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICAgICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhdGNoXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgICAgIFwiZWRnZUdyb3VwXCI6IHt9LFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJzb2Z0d2FyZVN0YXR1c1wiOiB7fSxcbiAgICAgIFwib25saW5lU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInNlcmlhbE51bWJlclwiOiBcIlwiLFxuICAgICAgXCJwaHlzaWNhbEVkZ2VcIjogdHJ1ZSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlRGVwbG95bWVudFR5cGVcIjogXCJcIixcbiAgICAgIFwiY2FsbERyYWluaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uQ291bnRcIjogMFxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicGhvbmVCYXNlU2V0dGluZ3NcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZU1ldGFCYXNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVzXCI6IFtdLFxuICAgXCJzdGF0dXNcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm9wZXJhdGlvbmFsU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VzU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImV2ZW50Q3JlYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvblwiOiB7fSxcbiAgICAgIFwibGluZVN0YXR1c2VzXCI6IFtdLFxuICAgICAgXCJwaG9uZUFzc2lnbm1lbnRUb0VkZ2VUeXBlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5U3RhdHVzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJvcGVyYXRpb25hbFN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlZGdlc1N0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJldmVudENyZWF0aW9uVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25cIjoge30sXG4gICAgICBcImxpbmVTdGF0dXNlc1wiOiBbXSxcbiAgICAgIFwicGhvbmVBc3NpZ25tZW50VG9FZGdlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlXCI6IHt9LFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJBZ2VudEluZm9cIjoge1xuICAgICAgXCJmaXJtd2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwibWFudWZhY3R1cmVyXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCJcbiAgIH0sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInByb3Zpc2lvbnNcIjogdHJ1ZSxcbiAgICAgIFwicmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImR1YWxSZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiaGFyZHdhcmVJZFR5cGVcIjogXCJcIixcbiAgICAgIFwiYWxsb3dSZWJvb3RcIjogdHJ1ZSxcbiAgICAgIFwibm9SZWJhbGFuY2VcIjogdHJ1ZVxuICAgfSxcbiAgIFwid2ViUnRjVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmltYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNQaG9uZXMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNQaG9uZXMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaW5lIGJhc2Ugc2V0dGluZ3Mgb2JqZWN0IGJ5IElEXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbGluZUJhc2VJZCAtIExpbmUgYmFzZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImxpbmVNZXRhQmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzTGluZWJhc2VzZXR0aW5nc0xpbmViYXNlSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0xpbmViYXNlc2V0dGluZ3NMaW5lYmFzZUlkKGxpbmVCYXNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvbGluZWJhc2VzZXR0aW5ncy97bGluZUJhc2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsaW5lQmFzZUlkID09PSB1bmRlZmluZWQgfHwgbGluZUJhc2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGluZUJhc2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsaW5lQmFzZUlkfScsIGxpbmVCYXNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIExpbmUgaW5zdGFuY2UgdGVtcGxhdGUgYmFzZWQgb24gYSBMaW5lIEJhc2UgU2V0dGluZ3Mgb2JqZWN0LiBUaGlzIG9iamVjdCBjYW4gdGhlbiBiZSBtb2RpZmllZCBhbmQgc2F2ZWQgYXMgYSBuZXcgTGluZSBpbnN0YW5jZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGxpbmVCYXNlU2V0dGluZ3NJZCAtIFRoZSBpZCBvZiBhIExpbmUgQmFzZSBTZXR0aW5ncyBvYmplY3QgdXBvbiB3aGljaCB0byBiYXNlIHRoaXMgTGluZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJ0ZW1wbGF0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVCYXNlU2V0dGluZ3NcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpbWFyeUVkZ2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImludGVyZmFjZXNcIjogW10sXG4gICAgICBcIm1ha2VcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIixcbiAgICAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgICAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICAgICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGF0Y2hcIjogXCJcIixcbiAgICAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlR3JvdXBcIjoge30sXG4gICAgICBcInNpdGVcIjoge30sXG4gICAgICBcInNvZnR3YXJlU3RhdHVzXCI6IHt9LFxuICAgICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICAgICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlY29uZGFyeUVkZ2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImludGVyZmFjZXNcIjogW10sXG4gICAgICBcIm1ha2VcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIixcbiAgICAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgICAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICAgICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGF0Y2hcIjogXCJcIixcbiAgICAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlR3JvdXBcIjoge30sXG4gICAgICBcInNpdGVcIjoge30sXG4gICAgICBcInNvZnR3YXJlU3RhdHVzXCI6IHt9LFxuICAgICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICAgICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxvZ2dlZEluVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkZWZhdWx0Rm9yVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzTGluZXNUZW1wbGF0ZSA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzTGluZXNUZW1wbGF0ZShsaW5lQmFzZVNldHRpbmdzSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvbGluZXMvdGVtcGxhdGUnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihsaW5lQmFzZVNldHRpbmdzSWQgPT09IHVuZGVmaW5lZCB8fCBsaW5lQmFzZVNldHRpbmdzSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxpbmVCYXNlU2V0dGluZ3NJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJsaW5lQmFzZVNldHRpbmdzSWRcIl0gPSBsaW5lQmFzZVNldHRpbmdzSWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBzZXR1cCBwYWNrYWdlIGZvciBhIGxvY2FsbHkgZGVwbG95ZWQgZWRnZSBkZXZpY2UuIFRoaXMgaXMgbmVlZGVkIHRvIGNvbXBsZXRlIHRoZSBzZXR1cCBwcm9jZXNzIGZvciB0aGUgdmlydHVhbCBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibWV0YS1kYXRhXCI6IHtcbiAgICAgIFwicGFpcmluZy10b2tlblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nLXRydXN0XCI6IFtdLFxuICAgICAgXCJwYWlyaW5nLXVybFwiOiBcIlwiXG4gICB9LFxuICAgXCJlZGdlLWlkXCI6IFwiXCIsXG4gICBcImF1dGgtdG9rZW5cIjogXCJcIixcbiAgIFwib3JnLWlkXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkU2V0dXBwYWNrYWdlID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRTZXR1cHBhY2thZ2UoZWRnZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L3NldHVwcGFja2FnZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBUcnVuayBCYXNlIFNldHRpbmdzIGxpc3RpbmdcbiAgKiBAZGVzY3JpcHRpb24gTWFuYWdlZCBwcm9wZXJ0aWVzIHdpbGwgbm90IGJlIHJldHVybmVkIHVubGVzcyB0aGUgdXNlciBpcyBhc3NpZ25lZCB0aGUgbWFuYWdlZDphbGw6YWxsIHBlcm1pc3Npb24uXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gVmFsdWUgYnkgd2hpY2ggdG8gc29ydFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gICogQHBhcmFtIHtib29sZWFufSByZWNvcmRpbmdFbmFibGVkIC0gRmlsdGVyIHRydW5rcyBieSByZWNvcmRpbmcgZW5hYmxlZFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlSGlkZGVuIC0gU2V0IHRoaXMgdG8gdHJ1ZSB0byBub3QgcmVjZWl2ZSB0cnVuayBwcm9wZXJ0aWVzIHRoYXQgYXJlIG1lYW50IHRvIGJlIGhpZGRlbiBvciBmb3IgaW50ZXJuYWwgc3lzdGVtIHVzYWdlIG9ubHkuXG4gICogQHBhcmFtIHtib29sZWFufSBtYW5hZ2VkIC0gRmlsdGVyIGJ5IG1hbmFnZWRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBGaWVsZHMgdG8gZXhwYW5kIGluIHRoZSByZXNwb25zZSwgY29tbWEtc2VwYXJhdGVkIFZhbGlkIFZhbHVlczogcHJvcGVydGllc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNUcnVua2Jhc2VzZXR0aW5ncyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3MocGFnZU51bWJlciwgcGFnZVNpemUsIHNvcnRCeSwgc29ydE9yZGVyLCByZWNvcmRpbmdFbmFibGVkLCBpZ25vcmVIaWRkZW4sIG1hbmFnZWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy90cnVua2Jhc2VzZXR0aW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJyZWNvcmRpbmdFbmFibGVkXCJdID0gcmVjb3JkaW5nRW5hYmxlZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJpZ25vcmVIaWRkZW5cIl0gPSBpZ25vcmVIaWRkZW47XG4gICAgcmVxdWVzdFF1ZXJ5W1wibWFuYWdlZFwiXSA9IG1hbmFnZWQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIFRydW5rIEJhc2UgU2V0dGluZ3Mgb2JqZWN0XG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRydW5rIGJhc2Ugc2V0dGluZ3NcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc1RydW5rYmFzZXNldHRpbmdzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3MoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy90cnVua2Jhc2VzZXR0aW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIExpbmUgYnkgSURcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lSWQgLSBMaW5lIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInRlbXBsYXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmltYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibG9nZ2VkSW5Vc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlZmF1bHRGb3JVc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNMaW5lc0xpbmVJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzTGluZXNMaW5lSWQobGluZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2xpbmVzL3tsaW5lSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobGluZUlkID09PSB1bmRlZmluZWQgfHwgbGluZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBsaW5lSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bGluZUlkfScsIGxpbmVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgTGlzdCBzY2hlbWFzIG9mIGEgc3BlY2lmaWMgY2F0ZWdvcnkgKERlcHJlY2F0ZWQpXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZW1hQ2F0ZWdvcnkgLSBTY2hlbWEgY2F0ZWdvcnlcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZW1hVHlwZSAtIFNjaGVtYSB0eXBlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRTY2hlbWFzRWRnZXNWbmV4dFNjaGVtYWNhdGVnb3J5U2NoZW1hdHlwZSA9IGZ1bmN0aW9uIGdldFNjaGVtYXNFZGdlc1ZuZXh0U2NoZW1hY2F0ZWdvcnlTY2hlbWF0eXBlKHNjaGVtYUNhdGVnb3J5LCBzY2hlbWFUeXBlLCBwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29uZmlndXJhdGlvbi9zY2hlbWFzL2VkZ2VzL3ZuZXh0L3tzY2hlbWFDYXRlZ29yeX0ve3NjaGVtYVR5cGV9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2NoZW1hQ2F0ZWdvcnkgPT09IHVuZGVmaW5lZCB8fCBzY2hlbWFDYXRlZ29yeSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NoZW1hQ2F0ZWdvcnknKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NoZW1hQ2F0ZWdvcnl9Jywgc2NoZW1hQ2F0ZWdvcnkpO1xuICAgIGlmKHNjaGVtYVR5cGUgPT09IHVuZGVmaW5lZCB8fCBzY2hlbWFUeXBlID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlbWFUeXBlJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVtYVR5cGV9Jywgc2NoZW1hVHlwZSk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBMaXN0IHNjaGVtYXMgb2YgYSBzcGVjaWZpYyBjYXRlZ29yeSAoRGVwcmVjYXRlZClcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlbWFDYXRlZ29yeSAtIFNjaGVtYSBjYXRlZ29yeVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0U2NoZW1hc0VkZ2VzVm5leHRTY2hlbWFjYXRlZ29yeSA9IGZ1bmN0aW9uIGdldFNjaGVtYXNFZGdlc1ZuZXh0U2NoZW1hY2F0ZWdvcnkoc2NoZW1hQ2F0ZWdvcnksIHBhZ2VTaXplLCBwYWdlTnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb25maWd1cmF0aW9uL3NjaGVtYXMvZWRnZXMvdm5leHQve3NjaGVtYUNhdGVnb3J5fSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNjaGVtYUNhdGVnb3J5ID09PSB1bmRlZmluZWQgfHwgc2NoZW1hQ2F0ZWdvcnkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjaGVtYUNhdGVnb3J5Jyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVtYUNhdGVnb3J5fScsIHNjaGVtYUNhdGVnb3J5KTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Rpbmcgb2YgbGluZSBiYXNlIHNldHRpbmdzIG9iamVjdHNcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBWYWx1ZSBieSB3aGljaCB0byBzb3J0XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzTGluZWJhc2VzZXR0aW5ncyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzTGluZWJhc2VzZXR0aW5ncyhwYWdlTnVtYmVyLCBwYWdlU2l6ZSwgc29ydEJ5LCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvbGluZWJhc2VzZXR0aW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZWRnZSBncm91cC5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlR3JvdXBJZCAtIEVkZ2UgZ3JvdXAgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBGaWVsZHMgdG8gZXhwYW5kIGluIHRoZSByZXNwb25zZSBWYWxpZCBWYWx1ZXM6IHBob25lVHJ1bmtCYXNlcywgZWRnZVRydW5rQmFzZUFzc2lnbm1lbnRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHtcbiAgICAgIFwiZmFtaWx5XCI6IDAsXG4gICAgICBcInRydW5rQmFzZVwiOiB7fVxuICAgfSxcbiAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZWdyb3Vwc0VkZ2Vncm91cElkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlZ3JvdXBzRWRnZWdyb3VwSWQoZWRnZUdyb3VwSWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9lZGdlZ3JvdXBzL3tlZGdlR3JvdXBJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlR3JvdXBJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VHcm91cElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlR3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlR3JvdXBJZH0nLCBlZGdlR3JvdXBJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbiBlZGdlIGdyb3VwLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VHcm91cElkIC0gRWRnZSBncm91cCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gRWRnZUdyb3VwXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgIFwiZWRnZVRydW5rQmFzZUFzc2lnbm1lbnRcIjoge1xuICAgICAgXCJmYW1pbHlcIjogMCxcbiAgICAgIFwidHJ1bmtCYXNlXCI6IHt9XG4gICB9LFxuICAgXCJwaG9uZVRydW5rQmFzZXNcIjogW11cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHtcbiAgICAgIFwiZmFtaWx5XCI6IDAsXG4gICAgICBcInRydW5rQmFzZVwiOiB7fVxuICAgfSxcbiAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVyc0VkZ2VzRWRnZWdyb3Vwc0VkZ2Vncm91cElkID0gZnVuY3Rpb24gcHV0UHJvdmlkZXJzRWRnZXNFZGdlZ3JvdXBzRWRnZWdyb3VwSWQoZWRnZUdyb3VwSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZWRnZWdyb3Vwcy97ZWRnZUdyb3VwSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUdyb3VwSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlR3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUdyb3VwSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUdyb3VwSWR9JywgZWRnZUdyb3VwSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGFuIGVkZ2UgZ3JvdXAuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUdyb3VwSWQgLSBFZGdlIGdyb3VwIElEXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5kZWxldGVQcm92aWRlcnNFZGdlc0VkZ2Vncm91cHNFZGdlZ3JvdXBJZCA9IGZ1bmN0aW9uIGRlbGV0ZVByb3ZpZGVyc0VkZ2VzRWRnZWdyb3Vwc0VkZ2Vncm91cElkKGVkZ2VHcm91cElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2VkZ2Vncm91cHMve2VkZ2VHcm91cElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VHcm91cElkID09PSB1bmRlZmluZWQgfHwgZWRnZUdyb3VwSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VHcm91cElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VHcm91cElkfScsIGVkZ2VHcm91cElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIGF2YWlsYWJsZSBtYWtlcyBhbmQgbW9kZWxzIHRvIGNyZWF0ZSBhIG5ldyBUcnVuayBCYXNlIFNldHRpbmdzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFxuICBFWFRFUk5BTCxcbiAgUEhPTkUsXG4gIEVER0UsXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNUcnVua2Jhc2VzZXR0aW5nc0F2YWlsYWJsZW1ldGFiYXNlcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3NBdmFpbGFibGVtZXRhYmFzZXModHlwZSwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvdHJ1bmtiYXNlc2V0dGluZ3MvYXZhaWxhYmxlbWV0YWJhc2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1widHlwZVwiXSA9IHR5cGU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0aW5nIG9mIGV4dGVuc2lvbnNcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBTb3J0IGJ5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gbnVtYmVyIC0gRmlsdGVyIGJ5IG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFeHRlbnNpb25zID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFeHRlbnNpb25zKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIHNvcnRPcmRlciwgbnVtYmVyKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2V4dGVuc2lvbnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibnVtYmVyXCJdID0gbnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFZhbGlkYXRlcyBhIHN0cmVldCBhZGRyZXNzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEFkZHJlc3NcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImFkZHJlc3NcIjoge1xuICAgICAgXCJjb3VudHJ5XCI6IFwiXCIsXG4gICAgICBcIkExXCI6IFwiXCIsXG4gICAgICBcIkEzXCI6IFwiXCIsXG4gICAgICBcIlJEXCI6IFwiXCIsXG4gICAgICBcIkhOT1wiOiBcIlwiLFxuICAgICAgXCJMT0NcIjogXCJcIixcbiAgICAgIFwiTkFNXCI6IFwiXCIsXG4gICAgICBcIlBDXCI6IFwiXCJcbiAgIH1cbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidmFsaWRcIjogdHJ1ZSxcbiAgIFwicmVzcG9uc2VcIjoge1xuICAgICAgXCJtZXNzYWdlUmV0dXJuZWRcIjogW10sXG4gICAgICBcInN0YXR1c1wiOiBcIlwiXG4gICB9XG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNBZGRyZXNzdmFsaWRhdGlvbiA9IGZ1bmN0aW9uIHBvc3RQcm92aWRlcnNFZGdlc0FkZHJlc3N2YWxpZGF0aW9uKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvYWRkcmVzc3ZhbGlkYXRpb24nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBqb2IgdG8gdXBsb2FkIGEgbGlzdCBvZiBFZGdlIGxvZ3MuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gRWRnZUxvZ3NKb2JSZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJwYXRoXCI6IFwiXCIsXG4gICBcInF1ZXJ5XCI6IFwiXCIsXG4gICBcInJlY3Vyc2VcIjogdHJ1ZVxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkTG9nc0pvYnMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNFZGdlSWRMb2dzSm9icyhlZGdlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0vbG9ncy9qb2JzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgRElEIFBvb2wgYnkgSUQuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGlkUG9vbElkIC0gRElEIHBvb2wgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzdGFydFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImVuZFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImNvbW1lbnRzXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNEaWRwb29sc0RpZHBvb2xJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRGlkcG9vbHNEaWRwb29sSWQoZGlkUG9vbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2RpZHBvb2xzL3tkaWRQb29sSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZGlkUG9vbElkID09PSB1bmRlZmluZWQgfHwgZGlkUG9vbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBkaWRQb29sSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZGlkUG9vbElkfScsIGRpZFBvb2xJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgRElEIFBvb2wgYnkgSUQuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGlkUG9vbElkIC0gRElEIHBvb2wgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIERJRCBwb29sXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInN0YXJ0UGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiZW5kUGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgIFwicHJvdmlkZXJcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInN0YXJ0UGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiZW5kUGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiY29tbWVudHNcIjogXCJcIixcbiAgIFwicHJvdmlkZXJcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc0RpZHBvb2xzRGlkcG9vbElkID0gZnVuY3Rpb24gcHV0UHJvdmlkZXJzRWRnZXNEaWRwb29sc0RpZHBvb2xJZChkaWRQb29sSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZGlkcG9vbHMve2RpZFBvb2xJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkaWRQb29sSWQgPT09IHVuZGVmaW5lZCB8fCBkaWRQb29sSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRpZFBvb2xJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkaWRQb29sSWR9JywgZGlkUG9vbElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIERJRCBQb29sIGJ5IElELlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRpZFBvb2xJZCAtIERJRCBwb29sIElEXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5kZWxldGVQcm92aWRlcnNFZGdlc0RpZHBvb2xzRGlkcG9vbElkID0gZnVuY3Rpb24gZGVsZXRlUHJvdmlkZXJzRWRnZXNEaWRwb29sc0RpZHBvb2xJZChkaWRQb29sSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZGlkcG9vbHMve2RpZFBvb2xJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihkaWRQb29sSWQgPT09IHVuZGVmaW5lZCB8fCBkaWRQb29sSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRpZFBvb2xJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tkaWRQb29sSWR9JywgZGlkUG9vbElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBOdW1iZXIgUGxhbiBieSBJRC5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IG51bWJlclBsYW5JZCAtIE51bWJlciBQbGFuIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibWF0Y2hcIjogXCJcIixcbiAgIFwibm9ybWFsaXplZEZvcm1hdFwiOiBcIlwiLFxuICAgXCJwcmlvcml0eVwiOiAwLFxuICAgXCJudW1iZXJzXCI6IFtdLFxuICAgXCJkaWdpdExlbmd0aFwiOiB7XG4gICAgICBcInN0YXJ0XCI6IFwiXCIsXG4gICAgICBcImVuZFwiOiBcIlwiXG4gICB9LFxuICAgXCJjbGFzc2lmaWNhdGlvblwiOiBcIlwiLFxuICAgXCJtYXRjaFR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkTnVtYmVycGxhbnNOdW1iZXJwbGFuSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkTnVtYmVycGxhbnNOdW1iZXJwbGFuSWQoc2l0ZUlkLCBudW1iZXJQbGFuSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvc2l0ZXMve3NpdGVJZH0vbnVtYmVycGxhbnMve251bWJlclBsYW5JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzaXRlSWQgPT09IHVuZGVmaW5lZCB8fCBzaXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNpdGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzaXRlSWR9Jywgc2l0ZUlkKTtcbiAgICBpZihudW1iZXJQbGFuSWQgPT09IHVuZGVmaW5lZCB8fCBudW1iZXJQbGFuSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG51bWJlclBsYW5JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tudW1iZXJQbGFuSWR9JywgbnVtYmVyUGxhbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxhbmd1YWdlcy5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJsYW5ndWFnZXNcIjogW11cbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzQXZhaWxhYmxlbGFuZ3VhZ2VzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNBdmFpbGFibGVsYW5ndWFnZXMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2F2YWlsYWJsZWxhbmd1YWdlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Rpbmcgb2YgRElEIFBvb2xzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNEaWRwb29scyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRGlkcG9vbHMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9kaWRwb29scyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIG5ldyBESUQgcG9vbFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBESUQgcG9vbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzdGFydFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImVuZFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImNvbW1lbnRzXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzdGFydFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImVuZFBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcImNvbW1lbnRzXCI6IFwiXCIsXG4gICBcInByb3ZpZGVyXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzRGlkcG9vbHMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNEaWRwb29scyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2RpZHBvb2xzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBhbGwgdGhlIGF2YWlsYWJsZSBzb2Z0d2FyZSB2ZXJzaW9ucyBmb3IgdGhpcyBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkU29mdHdhcmV2ZXJzaW9ucyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkU29mdHdhcmV2ZXJzaW9ucyhlZGdlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0vc29mdHdhcmV2ZXJzaW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgQ2xhc3NpZmljYXRpb25zIGZvciB0aGlzIFNpdGVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzaWZpY2F0aW9uIC0gQ2xhc3NpZmljYXRpb25cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWROdW1iZXJwbGFuc0NsYXNzaWZpY2F0aW9ucyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWROdW1iZXJwbGFuc0NsYXNzaWZpY2F0aW9ucyhzaXRlSWQsIGNsYXNzaWZpY2F0aW9uKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3NpdGVzL3tzaXRlSWR9L251bWJlcnBsYW5zL2NsYXNzaWZpY2F0aW9ucyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNpdGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNpdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2l0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NpdGVJZH0nLCBzaXRlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImNsYXNzaWZpY2F0aW9uXCJdID0gY2xhc3NpZmljYXRpb247XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgY2VydGlmaWNhdGUgYXV0aG9yaXR5LlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNlcnRpZmljYXRlSWQgLSBDZXJ0aWZpY2F0ZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwic2VydmljZXNcIjogW10sXG4gICBcImNlcnRpZmljYXRlRGV0YWlsc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0NlcnRpZmljYXRlYXV0aG9yaXRpZXNDZXJ0aWZpY2F0ZUlkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNDZXJ0aWZpY2F0ZWF1dGhvcml0aWVzQ2VydGlmaWNhdGVJZChjZXJ0aWZpY2F0ZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2NlcnRpZmljYXRlYXV0aG9yaXRpZXMve2NlcnRpZmljYXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoY2VydGlmaWNhdGVJZCA9PT0gdW5kZWZpbmVkIHx8IGNlcnRpZmljYXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNlcnRpZmljYXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Y2VydGlmaWNhdGVJZH0nLCBjZXJ0aWZpY2F0ZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBjZXJ0aWZpY2F0ZSBhdXRob3JpdHkuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gY2VydGlmaWNhdGVJZCAtIENlcnRpZmljYXRlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDZXJ0aWZpY2F0ZSBhdXRob3JpdHlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY2VydGlmaWNhdGVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJzZXJ2aWNlc1wiOiBbXSxcbiAgIFwiY2VydGlmaWNhdGVEZXRhaWxzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY2VydGlmaWNhdGVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJzZXJ2aWNlc1wiOiBbXSxcbiAgIFwiY2VydGlmaWNhdGVEZXRhaWxzXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVyc0VkZ2VzQ2VydGlmaWNhdGVhdXRob3JpdGllc0NlcnRpZmljYXRlSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc0NlcnRpZmljYXRlYXV0aG9yaXRpZXNDZXJ0aWZpY2F0ZUlkKGNlcnRpZmljYXRlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvY2VydGlmaWNhdGVhdXRob3JpdGllcy97Y2VydGlmaWNhdGVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihjZXJ0aWZpY2F0ZUlkID09PSB1bmRlZmluZWQgfHwgY2VydGlmaWNhdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogY2VydGlmaWNhdGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjZXJ0aWZpY2F0ZUlkfScsIGNlcnRpZmljYXRlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgY2VydGlmaWNhdGUgYXV0aG9yaXR5LlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGNlcnRpZmljYXRlSWQgLSBDZXJ0aWZpY2F0ZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNDZXJ0aWZpY2F0ZWF1dGhvcml0aWVzQ2VydGlmaWNhdGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZVByb3ZpZGVyc0VkZ2VzQ2VydGlmaWNhdGVhdXRob3JpdGllc0NlcnRpZmljYXRlSWQoY2VydGlmaWNhdGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9jZXJ0aWZpY2F0ZWF1dGhvcml0aWVzL3tjZXJ0aWZpY2F0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGNlcnRpZmljYXRlSWQgPT09IHVuZGVmaW5lZCB8fCBjZXJ0aWZpY2F0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjZXJ0aWZpY2F0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NlcnRpZmljYXRlSWR9JywgY2VydGlmaWNhdGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgRElEIGJ5IElELlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGRpZElkIC0gRElEIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiZGlkUG9vbFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0RpZHNEaWRJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRGlkc0RpZElkKGRpZElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2RpZHMve2RpZElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRpZElkID09PSB1bmRlZmluZWQgfHwgZGlkSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRpZElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RpZElkfScsIGRpZElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBESUQgYnkgSUQuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGlkSWQgLSBESUQgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIERJRFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJwaG9uZU51bWJlclwiOiBcIlwiLFxuICAgXCJkaWRQb29sXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcIm93bmVyVHlwZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwiZGlkUG9vbFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc0RpZHNEaWRJZCA9IGZ1bmN0aW9uIHB1dFByb3ZpZGVyc0VkZ2VzRGlkc0RpZElkKGRpZElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2RpZHMve2RpZElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGRpZElkID09PSB1bmRlZmluZWQgfHwgZGlkSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRpZElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2RpZElkfScsIGRpZElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBvdXRib3VuZCByb3V0ZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG91dGJvdW5kUm91dGVJZCAtIE91dGJvdW5kIHJvdXRlIElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFNvcnQgYnlcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjbGFzc2lmaWNhdGlvblR5cGVzXCI6IFtdLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImRpc3RyaWJ1dGlvblwiOiBcIlwiLFxuICAgXCJleHRlcm5hbFRydW5rQmFzZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE91dGJvdW5kcm91dGVzT3V0Ym91bmRyb3V0ZUlkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE91dGJvdW5kcm91dGVzT3V0Ym91bmRyb3V0ZUlkKG91dGJvdW5kUm91dGVJZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIsIG5hbWUsIHNvcnRCeSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfS9vdXRib3VuZHJvdXRlcy97b3V0Ym91bmRSb3V0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG91dGJvdW5kUm91dGVJZCA9PT0gdW5kZWZpbmVkIHx8IG91dGJvdW5kUm91dGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogb3V0Ym91bmRSb3V0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne291dGJvdW5kUm91dGVJZH0nLCBvdXRib3VuZFJvdXRlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBvdXRib3VuZCByb3V0ZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG91dGJvdW5kUm91dGVJZCAtIE91dGJvdW5kIHJvdXRlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBPdXRib3VuZFJvdXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkT3V0Ym91bmRyb3V0ZXNPdXRib3VuZHJvdXRlSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkT3V0Ym91bmRyb3V0ZXNPdXRib3VuZHJvdXRlSWQob3V0Ym91bmRSb3V0ZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3NpdGVzL3tzaXRlSWR9L291dGJvdW5kcm91dGVzL3tvdXRib3VuZFJvdXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3V0Ym91bmRSb3V0ZUlkID09PSB1bmRlZmluZWQgfHwgb3V0Ym91bmRSb3V0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBvdXRib3VuZFJvdXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3V0Ym91bmRSb3V0ZUlkfScsIG91dGJvdW5kUm91dGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgT3V0Ym91bmQgUm91dGVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBvdXRib3VuZFJvdXRlSWQgLSBPdXRib3VuZCByb3V0ZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE91dGJvdW5kcm91dGVzT3V0Ym91bmRyb3V0ZUlkID0gZnVuY3Rpb24gZGVsZXRlUHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE91dGJvdW5kcm91dGVzT3V0Ym91bmRyb3V0ZUlkKG91dGJvdW5kUm91dGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfS9vdXRib3VuZHJvdXRlcy97b3V0Ym91bmRSb3V0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG91dGJvdW5kUm91dGVJZCA9PT0gdW5kZWZpbmVkIHx8IG91dGJvdW5kUm91dGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogb3V0Ym91bmRSb3V0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne291dGJvdW5kUm91dGVJZH0nLCBvdXRib3VuZFJvdXRlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Rpbmcgb2YgZXh0ZW5zaW9uIHBvb2xzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBudW1iZXIgLSBOdW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRXh0ZW5zaW9ucG9vbHMgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnBvb2xzKHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0QnksIG51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9leHRlbnNpb25wb29scyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJlcXVlc3RRdWVyeVtcIm51bWJlclwiXSA9IG51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBuZXcgZXh0ZW5zaW9uIHBvb2xcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gRXh0ZW5zaW9uUG9vbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzdGFydE51bWJlclwiOiBcIlwiLFxuICAgXCJlbmROdW1iZXJcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInN0YXJ0TnVtYmVyXCI6IFwiXCIsXG4gICBcImVuZE51bWJlclwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnBvb2xzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRXh0ZW5zaW9ucG9vbHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9leHRlbnNpb25wb29scyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBvdXRib3VuZCByb3V0ZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG91dGJvdW5kUm91dGVJZCAtIE91dGJvdW5kIHJvdXRlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY2xhc3NpZmljYXRpb25UeXBlc1wiOiBbXSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJkaXN0cmlidXRpb25cIjogXCJcIixcbiAgIFwiZXh0ZXJuYWxUcnVua0Jhc2VzXCI6IFtdLFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5U2l0ZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJwcmltYXJ5RWRnZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcImVkZ2VzXCI6IFtdLFxuICAgICAgXCJlZGdlQXV0b1VwZGF0ZUNvbmZpZ1wiOiB7fSxcbiAgICAgIFwibG9jYXRpb25cIjoge30sXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNPdXRib3VuZHJvdXRlc091dGJvdW5kcm91dGVJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzT3V0Ym91bmRyb3V0ZXNPdXRib3VuZHJvdXRlSWQob3V0Ym91bmRSb3V0ZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL291dGJvdW5kcm91dGVzL3tvdXRib3VuZFJvdXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3V0Ym91bmRSb3V0ZUlkID09PSB1bmRlZmluZWQgfHwgb3V0Ym91bmRSb3V0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBvdXRib3VuZFJvdXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3V0Ym91bmRSb3V0ZUlkfScsIG91dGJvdW5kUm91dGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIG91dGJvdW5kIHJvdXRlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3V0Ym91bmRSb3V0ZUlkIC0gT3V0Ym91bmQgcm91dGUgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIE91dGJvdW5kUm91dGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY2xhc3NpZmljYXRpb25UeXBlc1wiOiBbXSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJkaXN0cmlidXRpb25cIjogXCJcIixcbiAgIFwiZXh0ZXJuYWxUcnVua0Jhc2VzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiY2xhc3NpZmljYXRpb25UeXBlc1wiOiBbXSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJkaXN0cmlidXRpb25cIjogXCJcIixcbiAgIFwiZXh0ZXJuYWxUcnVua0Jhc2VzXCI6IFtdLFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5U2l0ZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJwcmltYXJ5RWRnZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcImVkZ2VzXCI6IFtdLFxuICAgICAgXCJlZGdlQXV0b1VwZGF0ZUNvbmZpZ1wiOiB7fSxcbiAgICAgIFwibG9jYXRpb25cIjoge30sXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucHV0UHJvdmlkZXJzRWRnZXNPdXRib3VuZHJvdXRlc091dGJvdW5kcm91dGVJZCA9IGZ1bmN0aW9uIHB1dFByb3ZpZGVyc0VkZ2VzT3V0Ym91bmRyb3V0ZXNPdXRib3VuZHJvdXRlSWQob3V0Ym91bmRSb3V0ZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL291dGJvdW5kcm91dGVzL3tvdXRib3VuZFJvdXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3V0Ym91bmRSb3V0ZUlkID09PSB1bmRlZmluZWQgfHwgb3V0Ym91bmRSb3V0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBvdXRib3VuZFJvdXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3V0Ym91bmRSb3V0ZUlkfScsIG91dGJvdW5kUm91dGVJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBEZWxldGUgT3V0Ym91bmQgUm91dGVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBvdXRib3VuZFJvdXRlSWQgLSBPdXRib3VuZCByb3V0ZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNPdXRib3VuZHJvdXRlc091dGJvdW5kcm91dGVJZCA9IGZ1bmN0aW9uIGRlbGV0ZVByb3ZpZGVyc0VkZ2VzT3V0Ym91bmRyb3V0ZXNPdXRib3VuZHJvdXRlSWQob3V0Ym91bmRSb3V0ZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL291dGJvdW5kcm91dGVzL3tvdXRib3VuZFJvdXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYob3V0Ym91bmRSb3V0ZUlkID09PSB1bmRlZmluZWQgfHwgb3V0Ym91bmRSb3V0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBvdXRib3VuZFJvdXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7b3V0Ym91bmRSb3V0ZUlkfScsIG91dGJvdW5kUm91dGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0cyBzb2Z0d2FyZSB1cGRhdGUgc3RhdHVzIGluZm9ybWF0aW9uIGFib3V0IGFueSBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidmVyc2lvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZWRnZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicHVibGlzaERhdGVcIjogXCJcIixcbiAgICAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXRlc3RSZWxlYXNlXCI6IHRydWUsXG4gICAgICBcImN1cnJlbnRcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJjdXJyZW50XCI6IHRydWVcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkU29mdHdhcmV1cGRhdGUgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VkZ2VJZFNvZnR3YXJldXBkYXRlKGVkZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9zb2Z0d2FyZXVwZGF0ZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFN0YXJ0cyBhIHNvZnR3YXJlIHVwZGF0ZSBmb3IgdGhpcyBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNvZnR3YXJlIHVwZGF0ZSByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJ2ZXJzaW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwdWJsaXNoRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlVXJpXCI6IFwiXCIsXG4gICAgICBcImxhdGVzdFJlbGVhc2VcIjogdHJ1ZSxcbiAgICAgIFwiY3VycmVudFwiOiB0cnVlXG4gICB9LFxuICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJjdXJyZW50XCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidmVyc2lvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZWRnZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicHVibGlzaERhdGVcIjogXCJcIixcbiAgICAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgICAgXCJsYXRlc3RSZWxlYXNlXCI6IHRydWUsXG4gICAgICBcImN1cnJlbnRcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJjdXJyZW50XCI6IHRydWVcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc0VkZ2VJZFNvZnR3YXJldXBkYXRlID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkU29mdHdhcmV1cGRhdGUoZWRnZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L3NvZnR3YXJldXBkYXRlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ2FuY2VscyBhbnkgaW4tcHJvZ3Jlc3MgdXBkYXRlIGZvciB0aGlzIGVkZ2UuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNFZGdlSWRTb2Z0d2FyZXVwZGF0ZSA9IGZ1bmN0aW9uIGRlbGV0ZVByb3ZpZGVyc0VkZ2VzRWRnZUlkU29mdHdhcmV1cGRhdGUoZWRnZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L3NvZnR3YXJldXBkYXRlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgVHJ1bmsgYnkgSURcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB0cnVua0lkIC0gVHJ1bmsgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwiZWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJ0cnVua0Jhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlZGdlR3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtzVHJ1bmtJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtzVHJ1bmtJZCh0cnVua0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3RydW5rcy97dHJ1bmtJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih0cnVua0lkID09PSB1bmRlZmluZWQgfHwgdHJ1bmtJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdHJ1bmtJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t0cnVua0lkfScsIHRydW5rSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlYm9vdCBhbiBFZGdlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGFyYW1ldGVycyBmb3IgdGhlIGVkZ2UgcmVib290XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJjYWxsRHJhaW5pbmdXYWl0VGltZVNlY29uZHNcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkUmVib290ID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkUmVib290KGVkZ2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9yZWJvb3QnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgU2l0ZXMuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uaWQgLSBMb2NhdGlvbiBJZFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCAtIEZpbHRlciBieSBtYW5hZ2VkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc1NpdGVzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNTaXRlcyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydEJ5LCBzb3J0T3JkZXIsIG5hbWUsIGxvY2F0aW9uaWQsIG1hbmFnZWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvc2l0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibG9jYXRpb24uaWRcIl0gPSBsb2NhdGlvbmlkO1xuICAgIHJlcXVlc3RRdWVyeVtcIm1hbmFnZWRcIl0gPSBtYW5hZ2VkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIFNpdGUuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNpdGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJlZGdlc1wiOiBbXSxcbiAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge1xuICAgICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgICAgXCJycnVsZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFwiOiBcIlwiLFxuICAgICAgXCJlbmRcIjogXCJcIlxuICAgfSxcbiAgIFwibG9jYXRpb25cIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjoge30sXG4gICAgICBcImFkZHJlc3NWZXJpZmllZFwiOiB0cnVlLFxuICAgICAgXCJlbWVyZ2VuY3lOdW1iZXJcIjoge30sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicGF0aFwiOiBbXVxuICAgfSxcbiAgIFwibWFuYWdlZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJlZGdlc1wiOiBbXSxcbiAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge1xuICAgICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgICAgXCJycnVsZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFwiOiBcIlwiLFxuICAgICAgXCJlbmRcIjogXCJcIlxuICAgfSxcbiAgIFwibG9jYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjoge30sXG4gICAgICBcImFkZHJlc3NWZXJpZmllZFwiOiB0cnVlLFxuICAgICAgXCJlbWVyZ2VuY3lOdW1iZXJcIjoge30sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicGF0aFwiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzU2l0ZXMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNTaXRlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3NpdGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgUGhvbmUgaW5zdGFuY2UgdGVtcGxhdGUgYmFzZWQgb24gYSBQaG9uZSBCYXNlIFNldHRpbmdzIG9iamVjdC4gVGhpcyBvYmplY3QgY2FuIHRoZW4gYmUgbW9kaWZpZWQgYW5kIHNhdmVkIGFzIGEgbmV3IFBob25lIGluc3RhbmNlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGhvbmVCYXNlU2V0dGluZ3NJZCAtIFRoZSBpZCBvZiBhIFBob25lIEJhc2UgU2V0dGluZ3Mgb2JqZWN0IHVwb24gd2hpY2ggdG8gYmFzZSB0aGlzIFBob25lXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lQmFzZVNldHRpbmdzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInBob25lTWV0YUJhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZXNcIjogW10sXG4gICBcInN0YXR1c1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwib3BlcmF0aW9uYWxTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZXNTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZXZlbnRDcmVhdGlvblRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uXCI6IHt9LFxuICAgICAgXCJsaW5lU3RhdHVzZXNcIjogW10sXG4gICAgICBcInBob25lQXNzaWdubWVudFRvRWRnZVR5cGVcIjogXCJcIixcbiAgICAgIFwiZWRnZVwiOiB7fSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWNvbmRhcnlTdGF0dXNcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm9wZXJhdGlvbmFsU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VzU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImV2ZW50Q3JlYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvblwiOiB7fSxcbiAgICAgIFwibGluZVN0YXR1c2VzXCI6IFtdLFxuICAgICAgXCJwaG9uZUFzc2lnbm1lbnRUb0VkZ2VUeXBlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwidXNlckFnZW50SW5mb1wiOiB7XG4gICAgICBcImZpcm13YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJtYW51ZmFjdHVyZXJcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIlxuICAgfSxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiY2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwicHJvdmlzaW9uc1wiOiB0cnVlLFxuICAgICAgXCJyZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiZHVhbFJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJoYXJkd2FyZUlkVHlwZVwiOiBcIlwiLFxuICAgICAgXCJhbGxvd1JlYm9vdFwiOiB0cnVlLFxuICAgICAgXCJub1JlYmFsYW5jZVwiOiB0cnVlXG4gICB9LFxuICAgXCJ3ZWJSdGNVc2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByaW1hcnlFZGdlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgICAgXCJtYWtlXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCIsXG4gICAgICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICAgICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhdGNoXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgICAgIFwiZWRnZUdyb3VwXCI6IHt9LFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJzb2Z0d2FyZVN0YXR1c1wiOiB7fSxcbiAgICAgIFwib25saW5lU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInNlcmlhbE51bWJlclwiOiBcIlwiLFxuICAgICAgXCJwaHlzaWNhbEVkZ2VcIjogdHJ1ZSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlRGVwbG95bWVudFR5cGVcIjogXCJcIixcbiAgICAgIFwiY2FsbERyYWluaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uQ291bnRcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWNvbmRhcnlFZGdlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgICAgXCJtYWtlXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCIsXG4gICAgICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICAgICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhdGNoXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgICAgIFwiZWRnZUdyb3VwXCI6IHt9LFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJzb2Z0d2FyZVN0YXR1c1wiOiB7fSxcbiAgICAgIFwib25saW5lU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInNlcmlhbE51bWJlclwiOiBcIlwiLFxuICAgICAgXCJwaHlzaWNhbEVkZ2VcIjogdHJ1ZSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlRGVwbG95bWVudFR5cGVcIjogXCJcIixcbiAgICAgIFwiY2FsbERyYWluaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uQ291bnRcIjogMCxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzUGhvbmVzVGVtcGxhdGUgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc1Bob25lc1RlbXBsYXRlKHBob25lQmFzZVNldHRpbmdzSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvcGhvbmVzL3RlbXBsYXRlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVCYXNlU2V0dGluZ3NJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lQmFzZVNldHRpbmdzSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBob25lQmFzZVNldHRpbmdzSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGhvbmVCYXNlU2V0dGluZ3NJZFwiXSA9IHBob25lQmFzZVNldHRpbmdzSWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBsaXN0IG9mIGNlcnRpZmljYXRlIGF1dGhvcml0aWVzLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0NlcnRpZmljYXRlYXV0aG9yaXRpZXMgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0NlcnRpZmljYXRlYXV0aG9yaXRpZXMoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2NlcnRpZmljYXRlYXV0aG9yaXRpZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBjZXJ0aWZpY2F0ZSBhdXRob3JpdHkuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIENlcnRpZmljYXRlQXV0aG9yaXR5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwic2VydmljZXNcIjogW10sXG4gICBcImNlcnRpZmljYXRlRGV0YWlsc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwic2VydmljZXNcIjogW10sXG4gICBcImNlcnRpZmljYXRlRGV0YWlsc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNDZXJ0aWZpY2F0ZWF1dGhvcml0aWVzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzQ2VydGlmaWNhdGVhdXRob3JpdGllcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2NlcnRpZmljYXRlYXV0aG9yaXRpZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZXF1ZXN0IHRoYXQgdGhlIHNwZWNpZmllZCBmaWxlSWRzIGJlIHVwbG9hZGVkIGZyb20gdGhlIEVkZ2UuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBqb2JJZCAtIEpvYiBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gTG9nIHVwbG9hZCByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJmaWxlSWRzXCI6IFtdXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNFZGdlSWRMb2dzSm9ic0pvYklkVXBsb2FkID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRWRnZUlkTG9nc0pvYnNKb2JJZFVwbG9hZChlZGdlSWQsIGpvYklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L2xvZ3Mvam9icy97am9iSWR9L3VwbG9hZCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIGlmKGpvYklkID09PSB1bmRlZmluZWQgfHwgam9iSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGpvYklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2pvYklkfScsIGpvYklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGVkZ2UgdmVyc2lvbiByZXBvcnQuXG4gICogQGRlc2NyaXB0aW9uIFRoZSByZXBvcnQgd2lsbCBub3QgaGF2ZSBjb25zaXN0ZW50IGRhdGEgYWJvdXQgdGhlIGVkZ2UgdmVyc2lvbihzKSB1bnRpbCBhbGwgZWRnZXMgaGF2ZSBiZWVuIHJlc2V0LlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm9sZGVzdFZlcnNpb25cIjoge1xuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIlxuICAgfSxcbiAgIFwibmV3ZXN0VmVyc2lvblwiOiB7XG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiXG4gICB9XG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2V2ZXJzaW9ucmVwb3J0ID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdldmVyc2lvbnJlcG9ydCgpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZWRnZXZlcnNpb25yZXBvcnQnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBSZWJvb3QgYSBQaG9uZVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lSWQgLSBQaG9uZSBJZFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucG9zdFByb3ZpZGVyc0VkZ2VzUGhvbmVzUGhvbmVJZFJlYm9vdCA9IGZ1bmN0aW9uIHBvc3RQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWRSZWJvb3QocGhvbmVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZXMve3Bob25lSWR9L3JlYm9vdCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHBob25lSWQgPT09IHVuZGVmaW5lZCB8fCBwaG9uZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBwaG9uZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3Bob25lSWR9JywgcGhvbmVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgZWRnZSBtZXRyaWNzLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJldmVudFRpbWVcIjogXCJcIixcbiAgIFwidXBUaW1lTXNlY1wiOiAwLFxuICAgXCJwcm9jZXNzb3JzXCI6IFtdLFxuICAgXCJtZW1vcnlcIjogW10sXG4gICBcImRpc2tzXCI6IFtdLFxuICAgXCJzdWJzeXN0ZW1zXCI6IFtdLFxuICAgXCJuZXR3b3Jrc1wiOiBbXVxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRNZXRyaWNzID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRNZXRyaWNzKGVkZ2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9tZXRyaWNzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBtZXRyaWNzIGZvciBhIGxpc3Qgb2YgZWRnZXMuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkcyAtIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIEVkZ2UgSWQnc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJlZGdlXCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJldmVudFRpbWVcIjogXCJcIixcbiAgXCJ1cFRpbWVNc2VjXCI6IDAsXG4gIFwicHJvY2Vzc29yc1wiOiBbXSxcbiAgXCJtZW1vcnlcIjogW10sXG4gIFwiZGlza3NcIjogW10sXG4gIFwic3Vic3lzdGVtc1wiOiBbXSxcbiAgXCJuZXR3b3Jrc1wiOiBbXVxuIH1cbl1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzTWV0cmljcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzTWV0cmljcyhlZGdlSWRzKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL21ldHJpY3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWRzID09PSB1bmRlZmluZWQgfHwgZWRnZUlkcyA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkcycpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJlZGdlSWRzXCJdID0gZWRnZUlkcztcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBUcnVuayBCYXNlIFNldHRpbmdzIG9iamVjdCBieSBJRFxuICAqIEBkZXNjcmlwdGlvbiBNYW5hZ2VkIHByb3BlcnRpZXMgd2lsbCBub3QgYmUgcmV0dXJuZWQgdW5sZXNzIHRoZSB1c2VyIGlzIGFzc2lnbmVkIHRoZSBtYW5hZ2VkOmFsbDphbGwgcGVybWlzc2lvbi5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB0cnVua0Jhc2VTZXR0aW5nc0lkIC0gVHJ1bmsgQmFzZSBJRFxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlSGlkZGVuIC0gU2V0IHRoaXMgdG8gdHJ1ZSB0byBub3QgcmVjZWl2ZSB0cnVuayBwcm9wZXJ0aWVzIHRoYXQgYXJlIG1lYW50IHRvIGJlIGhpZGRlbiBvciBmb3IgaW50ZXJuYWwgc3lzdGVtIHVzYWdlIG9ubHkuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3NUcnVua2Jhc2VzZXR0aW5nc0lkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNUcnVua2Jhc2VzZXR0aW5nc1RydW5rYmFzZXNldHRpbmdzSWQodHJ1bmtCYXNlU2V0dGluZ3NJZCwgaWdub3JlSGlkZGVuKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3RydW5rYmFzZXNldHRpbmdzL3t0cnVua0Jhc2VTZXR0aW5nc0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHRydW5rQmFzZVNldHRpbmdzSWQgPT09IHVuZGVmaW5lZCB8fCB0cnVua0Jhc2VTZXR0aW5nc0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB0cnVua0Jhc2VTZXR0aW5nc0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3RydW5rQmFzZVNldHRpbmdzSWR9JywgdHJ1bmtCYXNlU2V0dGluZ3NJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaWdub3JlSGlkZGVuXCJdID0gaWdub3JlSGlkZGVuO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIFRydW5rIEJhc2UgU2V0dGluZ3Mgb2JqZWN0IGJ5IElEXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdHJ1bmtCYXNlU2V0dGluZ3NJZCAtIFRydW5rIEJhc2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFRydW5rIGJhc2Ugc2V0dGluZ3NcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwidHJ1bmtNZXRhYmFzZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJ0cnVua1R5cGVcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVyc0VkZ2VzVHJ1bmtiYXNlc2V0dGluZ3NUcnVua2Jhc2VzZXR0aW5nc0lkID0gZnVuY3Rpb24gcHV0UHJvdmlkZXJzRWRnZXNUcnVua2Jhc2VzZXR0aW5nc1RydW5rYmFzZXNldHRpbmdzSWQodHJ1bmtCYXNlU2V0dGluZ3NJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy90cnVua2Jhc2VzZXR0aW5ncy97dHJ1bmtCYXNlU2V0dGluZ3NJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih0cnVua0Jhc2VTZXR0aW5nc0lkID09PSB1bmRlZmluZWQgfHwgdHJ1bmtCYXNlU2V0dGluZ3NJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdHJ1bmtCYXNlU2V0dGluZ3NJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t0cnVua0Jhc2VTZXR0aW5nc0lkfScsIHRydW5rQmFzZVNldHRpbmdzSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgVHJ1bmsgQmFzZSBTZXR0aW5ncyBvYmplY3QgYnkgSURcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB0cnVua0Jhc2VTZXR0aW5nc0lkIC0gVHJ1bmsgQmFzZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNUcnVua2Jhc2VzZXR0aW5nc1RydW5rYmFzZXNldHRpbmdzSWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcnNFZGdlc1RydW5rYmFzZXNldHRpbmdzVHJ1bmtiYXNlc2V0dGluZ3NJZCh0cnVua0Jhc2VTZXR0aW5nc0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3RydW5rYmFzZXNldHRpbmdzL3t0cnVua0Jhc2VTZXR0aW5nc0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHRydW5rQmFzZVNldHRpbmdzSWQgPT09IHVuZGVmaW5lZCB8fCB0cnVua0Jhc2VTZXR0aW5nc0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB0cnVua0Jhc2VTZXR0aW5nc0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3RydW5rQmFzZVNldHRpbmdzSWR9JywgdHJ1bmtCYXNlU2V0dGluZ3NJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgU2l0ZSBieSBJRC5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJlZGdlc1wiOiBbXSxcbiAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge1xuICAgICAgXCJ0aW1lWm9uZVwiOiBcIlwiLFxuICAgICAgXCJycnVsZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFwiOiBcIlwiLFxuICAgICAgXCJlbmRcIjogXCJcIlxuICAgfSxcbiAgIFwibG9jYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjoge30sXG4gICAgICBcImFkZHJlc3NWZXJpZmllZFwiOiB0cnVlLFxuICAgICAgXCJlbWVyZ2VuY3lOdW1iZXJcIjoge30sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicGF0aFwiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWQoc2l0ZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3NpdGVzL3tzaXRlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2l0ZUlkID09PSB1bmRlZmluZWQgfHwgc2l0ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzaXRlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2l0ZUlkfScsIHNpdGVJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgU2l0ZSBieSBJRC5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTaXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInByaW1hcnlTaXRlc1wiOiBbXSxcbiAgIFwic2Vjb25kYXJ5U2l0ZXNcIjogW10sXG4gICBcInByaW1hcnlFZGdlc1wiOiBbXSxcbiAgIFwic2Vjb25kYXJ5RWRnZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwiZWRnZXNcIjogW10sXG4gICBcImVkZ2VBdXRvVXBkYXRlQ29uZmlnXCI6IHtcbiAgICAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgICAgIFwicnJ1bGVcIjogXCJcIixcbiAgICAgIFwic3RhcnRcIjogXCJcIixcbiAgICAgIFwiZW5kXCI6IFwiXCJcbiAgIH0sXG4gICBcImxvY2F0aW9uXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IHt9LFxuICAgICAgXCJhZGRyZXNzVmVyaWZpZWRcIjogdHJ1ZSxcbiAgICAgIFwiZW1lcmdlbmN5TnVtYmVyXCI6IHt9LFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInBhdGhcIjogW11cbiAgIH0sXG4gICBcIm1hbmFnZWRcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInByaW1hcnlTaXRlc1wiOiBbXSxcbiAgIFwic2Vjb25kYXJ5U2l0ZXNcIjogW10sXG4gICBcInByaW1hcnlFZGdlc1wiOiBbXSxcbiAgIFwic2Vjb25kYXJ5RWRnZXNcIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwiZWRnZXNcIjogW10sXG4gICBcImVkZ2VBdXRvVXBkYXRlQ29uZmlnXCI6IHtcbiAgICAgIFwidGltZVpvbmVcIjogXCJcIixcbiAgICAgIFwicnJ1bGVcIjogXCJcIixcbiAgICAgIFwic3RhcnRcIjogXCJcIixcbiAgICAgIFwiZW5kXCI6IFwiXCJcbiAgIH0sXG4gICBcImxvY2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IHt9LFxuICAgICAgXCJhZGRyZXNzVmVyaWZpZWRcIjogdHJ1ZSxcbiAgICAgIFwiZW1lcmdlbmN5TnVtYmVyXCI6IHt9LFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInBhdGhcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnB1dFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkKHNpdGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNpdGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNpdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2l0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NpdGVJZH0nLCBzaXRlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgU2l0ZSBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNpdGVJZCAtIFNpdGUgSURcbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmRlbGV0ZVByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkKHNpdGVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNpdGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNpdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2l0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NpdGVJZH0nLCBzaXRlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBleHRlbnNpb24gcG9vbCBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblBvb2xJZCAtIEV4dGVuc2lvbiBwb29sIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic3RhcnROdW1iZXJcIjogXCJcIixcbiAgIFwiZW5kTnVtYmVyXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFeHRlbnNpb25wb29sc0V4dGVuc2lvbnBvb2xJZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRXh0ZW5zaW9ucG9vbHNFeHRlbnNpb25wb29sSWQoZXh0ZW5zaW9uUG9vbElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2V4dGVuc2lvbnBvb2xzL3tleHRlbnNpb25Qb29sSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZXh0ZW5zaW9uUG9vbElkID09PSB1bmRlZmluZWQgfHwgZXh0ZW5zaW9uUG9vbElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBleHRlbnNpb25Qb29sSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZXh0ZW5zaW9uUG9vbElkfScsIGV4dGVuc2lvblBvb2xJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGFuIGV4dGVuc2lvbiBwb29sIGJ5IElEXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uUG9vbElkIC0gRXh0ZW5zaW9uIHBvb2wgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIEV4dGVuc2lvblBvb2xcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic3RhcnROdW1iZXJcIjogXCJcIixcbiAgIFwiZW5kTnVtYmVyXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzdGFydE51bWJlclwiOiBcIlwiLFxuICAgXCJlbmROdW1iZXJcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnBvb2xzRXh0ZW5zaW9ucG9vbElkID0gZnVuY3Rpb24gcHV0UHJvdmlkZXJzRWRnZXNFeHRlbnNpb25wb29sc0V4dGVuc2lvbnBvb2xJZChleHRlbnNpb25Qb29sSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZXh0ZW5zaW9ucG9vbHMve2V4dGVuc2lvblBvb2xJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihleHRlbnNpb25Qb29sSWQgPT09IHVuZGVmaW5lZCB8fCBleHRlbnNpb25Qb29sSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV4dGVuc2lvblBvb2xJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tleHRlbnNpb25Qb29sSWR9JywgZXh0ZW5zaW9uUG9vbElkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbiBleHRlbnNpb24gcG9vbCBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblBvb2xJZCAtIEV4dGVuc2lvbiBwb29sIElEXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5kZWxldGVQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnBvb2xzRXh0ZW5zaW9ucG9vbElkID0gZnVuY3Rpb24gZGVsZXRlUHJvdmlkZXJzRWRnZXNFeHRlbnNpb25wb29sc0V4dGVuc2lvbnBvb2xJZChleHRlbnNpb25Qb29sSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvZXh0ZW5zaW9ucG9vbHMve2V4dGVuc2lvblBvb2xJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihleHRlbnNpb25Qb29sSWQgPT09IHVuZGVmaW5lZCB8fCBleHRlbnNpb25Qb29sSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV4dGVuc2lvblBvb2xJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tleHRlbnNpb25Qb29sSWR9JywgZXh0ZW5zaW9uUG9vbElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIFBob25lIEJhc2UgU2V0dGluZ3Mgb2JqZWN0c1xuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFZhbHVlIGJ5IHdoaWNoIHRvIHNvcnRcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gU29ydCBvcmRlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gTmFtZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5ncyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzUGhvbmViYXNlc2V0dGluZ3MocGFnZU51bWJlciwgcGFnZVNpemUsIHNvcnRCeSwgc29ydE9yZGVyLCBuYW1lKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3Bob25lYmFzZXNldHRpbmdzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBhIG5ldyBQaG9uZSBCYXNlIFNldHRpbmdzIG9iamVjdFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBQaG9uZSBiYXNlIHNldHRpbmdzXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInBob25lTWV0YUJhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZXNcIjogW10sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInByb3Zpc2lvbnNcIjogdHJ1ZSxcbiAgICAgIFwicmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImR1YWxSZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiaGFyZHdhcmVJZFR5cGVcIjogXCJcIixcbiAgICAgIFwiYWxsb3dSZWJvb3RcIjogdHJ1ZSxcbiAgICAgIFwibm9SZWJhbGFuY2VcIjogdHJ1ZVxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInBob25lTWV0YUJhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZXNcIjogW10sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInByb3Zpc2lvbnNcIjogdHJ1ZSxcbiAgICAgIFwicmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImR1YWxSZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiaGFyZHdhcmVJZFR5cGVcIjogXCJcIixcbiAgICAgIFwiYWxsb3dSZWJvb3RcIjogdHJ1ZSxcbiAgICAgIFwibm9SZWJhbGFuY2VcIjogdHJ1ZVxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNQaG9uZWJhc2VzZXR0aW5ncyA9IGZ1bmN0aW9uIHBvc3RQcm92aWRlcnNFZGdlc1Bob25lYmFzZXNldHRpbmdzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvcGhvbmViYXNlc2V0dGluZ3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBMaXN0cyBhdmFpbGFibGUgc2NoZW1hIGNhdGVnb3JpZXMgKERlcHJlY2F0ZWQpXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFNjaGVtYXNFZGdlc1ZuZXh0ID0gZnVuY3Rpb24gZ2V0U2NoZW1hc0VkZ2VzVm5leHQocGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL2NvbmZpZ3VyYXRpb24vc2NoZW1hcy9lZGdlcy92bmV4dCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdGluZyBvZiBESURzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBTb3J0IG9yZGVyXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lTnVtYmVyIC0gRmlsdGVyIGJ5IHBob25lTnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0RpZHMgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0RpZHMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIHNvcnRCeSwgc29ydE9yZGVyLCBwaG9uZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9kaWRzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInBob25lTnVtYmVyXCJdID0gcGhvbmVOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVW5wYWlyIGFuIEVkZ2VcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElkXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNFZGdlSWRVbnBhaXIgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNFZGdlSWRVbnBhaXIoZWRnZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L3VucGFpcic7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIHRydW5rcy5cbiAgKiBAZGVzY3JpcHRpb24gVHJ1bmtzIGFyZSBjcmVhdGVkIGJ5IGFzc2lnbmluZyB0cnVuayBiYXNlIHNldHRpbmdzIHRvIGFuIEVkZ2Ugb3IgRWRnZSBHcm91cC5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0QnkgLSBWYWx1ZSBieSB3aGljaCB0byBzb3J0XG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRPcmRlciAtIFNvcnQgb3JkZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZWlkIC0gRmlsdGVyIGJ5IEVkZ2UgSWRzXG4gICogQHBhcmFtIHtzdHJpbmd9IHRydW5rQmFzZWlkIC0gRmlsdGVyIGJ5IFRydW5rIEJhc2UgSWRzXG4gICogQHBhcmFtIHtzdHJpbmd9IHRydW5rVHlwZSAtIEZpbHRlciBieSBhIFRydW5rIHR5cGVcbiAgRVhURVJOQUwsXG4gIFBIT05FLFxuICBFREdFLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNUcnVua3MgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc1RydW5rcyhwYWdlTnVtYmVyLCBwYWdlU2l6ZSwgc29ydEJ5LCBzb3J0T3JkZXIsIGVkZ2VpZCwgdHJ1bmtCYXNlaWQsIHRydW5rVHlwZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy90cnVua3MnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZWRnZS5pZFwiXSA9IGVkZ2VpZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJ0cnVua0Jhc2UuaWRcIl0gPSB0cnVua0Jhc2VpZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJ0cnVua1R5cGVcIl0gPSB0cnVua1R5cGU7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiBMaW5lc1xuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFZhbHVlIGJ5IHdoaWNoIHRvIHNvcnRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBGaWVsZHMgdG8gZXhwYW5kIGluIHRoZSByZXNwb25zZSwgY29tbWEtc2VwYXJhdGVkIFZhbGlkIFZhbHVlczogcHJvcGVydGllcywgc2l0ZSwgZWRnZUdyb3VwLCBwcmltYXJ5RWRnZSwgc2Vjb25kYXJ5RWRnZSwgZWRnZXMsIGFzc2lnbmVkVXNlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNMaW5lcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzTGluZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIG5hbWUsIHNvcnRCeSwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2xpbmVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBlZGdlIGxvZ2ljYWwgaW50ZXJmYWNlXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlcmZhY2VJZCAtIEludGVyZmFjZSBJRFxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIEZpZWxkIHRvIGV4cGFuZCBpbiB0aGUgcmVzcG9uc2UgVmFsaWQgVmFsdWVzOiBleHRlcm5hbFRydW5rQmFzZUFzc2lnbm1lbnRzLCBwaG9uZVRydW5rQmFzZUFzc2lnbm1lbnRzXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJlZGdlQXNzaWduZWRJZFwiOiBcIlwiLFxuICAgXCJmcmllbmRseU5hbWVcIjogXCJcIixcbiAgIFwidmxhblRhZ0lkXCI6IDAsXG4gICBcImhhcmR3YXJlQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwaHlzaWNhbEFkYXB0ZXJJZFwiOiBcIlwiLFxuICAgXCJpZlN0YXR1c1wiOiBcIlwiLFxuICAgXCJpbnRlcmZhY2VUeXBlXCI6IFwiXCIsXG4gICBcInJvdXRlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJpcHY0Q2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJkaGNwXCI6IHRydWUsXG4gICAgICBcIm1ldHJpY1wiOiAwLFxuICAgICAgXCJhdXRvTWV0cmljXCI6IHRydWUsXG4gICAgICBcInN1cHBvcnRzTWV0cmljXCI6IHRydWVcbiAgIH0sXG4gICBcImlwdjZDYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICAgICBcImRoY3BcIjogdHJ1ZSxcbiAgICAgIFwibWV0cmljXCI6IDAsXG4gICAgICBcImF1dG9NZXRyaWNcIjogdHJ1ZSxcbiAgICAgIFwic3VwcG9ydHNNZXRyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwiY3VycmVudFN0YXRlXCI6IFwiXCIsXG4gICBcImxhc3RNb2RpZmllZFVzZXJJZFwiOiBcIlwiLFxuICAgXCJsYXN0TW9kaWZpZWRDb3JyZWxhdGlvbklkXCI6IFwiXCIsXG4gICBcImNvbW1hbmRSZXNwb25zZXNcIjogW10sXG4gICBcImluaGVyaXRQaG9uZVRydW5rQmFzZXNJUHY0XCI6IHRydWUsXG4gICBcImluaGVyaXRQaG9uZVRydW5rQmFzZXNJUHY2XCI6IHRydWUsXG4gICBcInVzZUZvckludGVybmFsRWRnZUNvbW11bmljYXRpb25cIjogdHJ1ZSxcbiAgIFwiZXh0ZXJuYWxUcnVua0Jhc2VBc3NpZ25tZW50c1wiOiBbXSxcbiAgIFwicGhvbmVUcnVua0Jhc2VBc3NpZ25tZW50c1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQoZWRnZUlkLCBpbnRlcmZhY2VJZCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL3tlZGdlSWR9L2xvZ2ljYWxpbnRlcmZhY2VzL3tpbnRlcmZhY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihpbnRlcmZhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IGludGVyZmFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBpbnRlcmZhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tpbnRlcmZhY2VJZH0nLCBpbnRlcmZhY2VJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbiBlZGdlIGxvZ2ljYWwgaW50ZXJmYWNlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZXJmYWNlSWQgLSBJbnRlcmZhY2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIExvZ2ljYWwgaW50ZXJmYWNlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImVkZ2VVcmlcIjogXCJcIixcbiAgIFwiZWRnZUFzc2lnbmVkSWRcIjogXCJcIixcbiAgIFwiZnJpZW5kbHlOYW1lXCI6IFwiXCIsXG4gICBcInZsYW5UYWdJZFwiOiAwLFxuICAgXCJoYXJkd2FyZUFkZHJlc3NcIjogXCJcIixcbiAgIFwicGh5c2ljYWxBZGFwdGVySWRcIjogXCJcIixcbiAgIFwiaWZTdGF0dXNcIjogXCJcIixcbiAgIFwicm91dGVzXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcImlwdjRDYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICAgICBcImRoY3BcIjogdHJ1ZSxcbiAgICAgIFwibWV0cmljXCI6IDAsXG4gICAgICBcImF1dG9NZXRyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwiaXB2NkNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgICAgIFwiZGhjcFwiOiB0cnVlLFxuICAgICAgXCJtZXRyaWNcIjogMCxcbiAgICAgIFwiYXV0b01ldHJpY1wiOiB0cnVlXG4gICB9LFxuICAgXCJjdXJyZW50U3RhdGVcIjogXCJcIixcbiAgIFwibGFzdE1vZGlmaWVkVXNlcklkXCI6IFwiXCIsXG4gICBcImxhc3RNb2RpZmllZENvcnJlbGF0aW9uSWRcIjogXCJcIixcbiAgIFwiY29tbWFuZFJlc3BvbnNlc1wiOiBbXSxcbiAgIFwiaW5oZXJpdFBob25lVHJ1bmtCYXNlc0lQdjRcIjogdHJ1ZSxcbiAgIFwiaW5oZXJpdFBob25lVHJ1bmtCYXNlc0lQdjZcIjogdHJ1ZSxcbiAgIFwidXNlRm9ySW50ZXJuYWxFZGdlQ29tbXVuaWNhdGlvblwiOiB0cnVlLFxuICAgXCJleHRlcm5hbFRydW5rQmFzZUFzc2lnbm1lbnRzXCI6IFtdLFxuICAgXCJwaG9uZVRydW5rQmFzZUFzc2lnbm1lbnRzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJlZGdlQXNzaWduZWRJZFwiOiBcIlwiLFxuICAgXCJmcmllbmRseU5hbWVcIjogXCJcIixcbiAgIFwidmxhblRhZ0lkXCI6IDAsXG4gICBcImhhcmR3YXJlQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJwaHlzaWNhbEFkYXB0ZXJJZFwiOiBcIlwiLFxuICAgXCJpZlN0YXR1c1wiOiBcIlwiLFxuICAgXCJpbnRlcmZhY2VUeXBlXCI6IFwiXCIsXG4gICBcInJvdXRlc1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJpcHY0Q2FwYWJpbGl0aWVzXCI6IHtcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJkaGNwXCI6IHRydWUsXG4gICAgICBcIm1ldHJpY1wiOiAwLFxuICAgICAgXCJhdXRvTWV0cmljXCI6IHRydWUsXG4gICAgICBcInN1cHBvcnRzTWV0cmljXCI6IHRydWVcbiAgIH0sXG4gICBcImlwdjZDYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICAgICBcImRoY3BcIjogdHJ1ZSxcbiAgICAgIFwibWV0cmljXCI6IDAsXG4gICAgICBcImF1dG9NZXRyaWNcIjogdHJ1ZSxcbiAgICAgIFwic3VwcG9ydHNNZXRyaWNcIjogdHJ1ZVxuICAgfSxcbiAgIFwiY3VycmVudFN0YXRlXCI6IFwiXCIsXG4gICBcImxhc3RNb2RpZmllZFVzZXJJZFwiOiBcIlwiLFxuICAgXCJsYXN0TW9kaWZpZWRDb3JyZWxhdGlvbklkXCI6IFwiXCIsXG4gICBcImNvbW1hbmRSZXNwb25zZXNcIjogW10sXG4gICBcImluaGVyaXRQaG9uZVRydW5rQmFzZXNJUHY0XCI6IHRydWUsXG4gICBcImluaGVyaXRQaG9uZVRydW5rQmFzZXNJUHY2XCI6IHRydWUsXG4gICBcInVzZUZvckludGVybmFsRWRnZUNvbW11bmljYXRpb25cIjogdHJ1ZSxcbiAgIFwiZXh0ZXJuYWxUcnVua0Jhc2VBc3NpZ25tZW50c1wiOiBbXSxcbiAgIFwicGhvbmVUcnVua0Jhc2VBc3NpZ25tZW50c1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQoZWRnZUlkLCBpbnRlcmZhY2VJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9sb2dpY2FsaW50ZXJmYWNlcy97aW50ZXJmYWNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgaWYoaW50ZXJmYWNlSWQgPT09IHVuZGVmaW5lZCB8fCBpbnRlcmZhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogaW50ZXJmYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7aW50ZXJmYWNlSWR9JywgaW50ZXJmYWNlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGFuIGVkZ2UgbG9naWNhbCBpbnRlcmZhY2VcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGludGVyZmFjZUlkIC0gSW50ZXJmYWNlIElEXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5kZWxldGVQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcnNFZGdlc0VkZ2VJZExvZ2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQoZWRnZUlkLCBpbnRlcmZhY2VJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9sb2dpY2FsaW50ZXJmYWNlcy97aW50ZXJmYWNlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZWRnZUlkID09PSB1bmRlZmluZWQgfHwgZWRnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBlZGdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZWRnZUlkfScsIGVkZ2VJZCk7XG4gICAgaWYoaW50ZXJmYWNlSWQgPT09IHVuZGVmaW5lZCB8fCBpbnRlcmZhY2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogaW50ZXJmYWNlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7aW50ZXJmYWNlSWR9JywgaW50ZXJmYWNlSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhbiBleHRlbnNpb24gYnkgSUQuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uSWQgLSBFeHRlbnNpb24gSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJudW1iZXJcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZXh0ZW5zaW9uUG9vbFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnNFeHRlbnNpb25JZCA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzRXh0ZW5zaW9uc0V4dGVuc2lvbklkKGV4dGVuc2lvbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2V4dGVuc2lvbnMve2V4dGVuc2lvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGV4dGVuc2lvbklkID09PSB1bmRlZmluZWQgfHwgZXh0ZW5zaW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV4dGVuc2lvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2V4dGVuc2lvbklkfScsIGV4dGVuc2lvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYW4gZXh0ZW5zaW9uIGJ5IElELlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbklkIC0gRXh0ZW5zaW9uIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBFeHRlbnNpb25cbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibnVtYmVyXCI6IFwiXCIsXG4gICBcIm93bmVyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImV4dGVuc2lvblBvb2xcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwib3duZXJUeXBlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJudW1iZXJcIjogXCJcIixcbiAgIFwib3duZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZXh0ZW5zaW9uUG9vbFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvd25lclR5cGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc0V4dGVuc2lvbnNFeHRlbnNpb25JZCA9IGZ1bmN0aW9uIHB1dFByb3ZpZGVyc0VkZ2VzRXh0ZW5zaW9uc0V4dGVuc2lvbklkKGV4dGVuc2lvbklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2V4dGVuc2lvbnMve2V4dGVuc2lvbklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGV4dGVuc2lvbklkID09PSB1bmRlZmluZWQgfHwgZXh0ZW5zaW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGV4dGVuc2lvbklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2V4dGVuc2lvbklkfScsIGV4dGVuc2lvbklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGpzb24gc2NoZW1hIChEZXByZWNhdGVkKVxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHNjaGVtYUNhdGVnb3J5IC0gU2NoZW1hIGNhdGVnb3J5XG4gICogQHBhcmFtIHtzdHJpbmd9IHNjaGVtYVR5cGUgLSBTY2hlbWEgdHlwZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlbWFJZCAtIFNjaGVtYSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRoaXJkUGFydHlPcmdJZFwiOiBcIlwiLFxuICAgXCJ0aGlyZFBhcnR5T3JnTmFtZVwiOiBcIlwiLFxuICAgXCJ0aGlyZFBhcnR5VVJJXCI6IFwiXCIsXG4gICBcImRvbWFpblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcImRlZmF1bHRTaXRlSWRcIjogXCJcIixcbiAgIFwiZGVsZXRhYmxlXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmVhdHVyZXNcIjoge31cbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFNjaGVtYXNFZGdlc1ZuZXh0U2NoZW1hY2F0ZWdvcnlTY2hlbWF0eXBlU2NoZW1hSWQgPSBmdW5jdGlvbiBnZXRTY2hlbWFzRWRnZXNWbmV4dFNjaGVtYWNhdGVnb3J5U2NoZW1hdHlwZVNjaGVtYUlkKHNjaGVtYUNhdGVnb3J5LCBzY2hlbWFUeXBlLCBzY2hlbWFJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY29uZmlndXJhdGlvbi9zY2hlbWFzL2VkZ2VzL3ZuZXh0L3tzY2hlbWFDYXRlZ29yeX0ve3NjaGVtYVR5cGV9L3tzY2hlbWFJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzY2hlbWFDYXRlZ29yeSA9PT0gdW5kZWZpbmVkIHx8IHNjaGVtYUNhdGVnb3J5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlbWFDYXRlZ29yeScpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzY2hlbWFDYXRlZ29yeX0nLCBzY2hlbWFDYXRlZ29yeSk7XG4gICAgaWYoc2NoZW1hVHlwZSA9PT0gdW5kZWZpbmVkIHx8IHNjaGVtYVR5cGUgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNjaGVtYVR5cGUnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NoZW1hVHlwZX0nLCBzY2hlbWFUeXBlKTtcbiAgICBpZihzY2hlbWFJZCA9PT0gdW5kZWZpbmVkIHx8IHNjaGVtYUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlbWFJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzY2hlbWFJZH0nLCBzY2hlbWFJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IG1ldGFkYXRhIGZvciBhIHNjaGVtYSAoRGVwcmVjYXRlZClcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlbWFDYXRlZ29yeSAtIFNjaGVtYSBjYXRlZ29yeVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzY2hlbWFUeXBlIC0gU2NoZW1hIHR5cGVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2NoZW1hSWQgLSBTY2hlbWEgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uVHlwZSAtIGV4dGVuc2lvblxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRhZGF0YUlkIC0gTWV0YWRhdGEgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFR5cGVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0aGlyZFBhcnR5T3JnSWRcIjogXCJcIixcbiAgIFwidGhpcmRQYXJ0eU9yZ05hbWVcIjogXCJcIixcbiAgIFwidGhpcmRQYXJ0eVVSSVwiOiBcIlwiLFxuICAgXCJkb21haW5cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJkZWZhdWx0U2l0ZUlkXCI6IFwiXCIsXG4gICBcImRlbGV0YWJsZVwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZlYXR1cmVzXCI6IHt9XG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRTY2hlbWFzRWRnZXNWbmV4dFNjaGVtYWNhdGVnb3J5U2NoZW1hdHlwZVNjaGVtYUlkRXh0ZW5zaW9udHlwZU1ldGFkYXRhSWQgPSBmdW5jdGlvbiBnZXRTY2hlbWFzRWRnZXNWbmV4dFNjaGVtYWNhdGVnb3J5U2NoZW1hdHlwZVNjaGVtYUlkRXh0ZW5zaW9udHlwZU1ldGFkYXRhSWQoc2NoZW1hQ2F0ZWdvcnksIHNjaGVtYVR5cGUsIHNjaGVtYUlkLCBleHRlbnNpb25UeXBlLCBtZXRhZGF0YUlkLCB0eXBlKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9jb25maWd1cmF0aW9uL3NjaGVtYXMvZWRnZXMvdm5leHQve3NjaGVtYUNhdGVnb3J5fS97c2NoZW1hVHlwZX0ve3NjaGVtYUlkfS97ZXh0ZW5zaW9uVHlwZX0ve21ldGFkYXRhSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoc2NoZW1hQ2F0ZWdvcnkgPT09IHVuZGVmaW5lZCB8fCBzY2hlbWFDYXRlZ29yeSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NoZW1hQ2F0ZWdvcnknKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NoZW1hQ2F0ZWdvcnl9Jywgc2NoZW1hQ2F0ZWdvcnkpO1xuICAgIGlmKHNjaGVtYVR5cGUgPT09IHVuZGVmaW5lZCB8fCBzY2hlbWFUeXBlID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzY2hlbWFUeXBlJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NjaGVtYVR5cGV9Jywgc2NoZW1hVHlwZSk7XG4gICAgaWYoc2NoZW1hSWQgPT09IHVuZGVmaW5lZCB8fCBzY2hlbWFJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2NoZW1hSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c2NoZW1hSWR9Jywgc2NoZW1hSWQpO1xuICAgIGlmKGV4dGVuc2lvblR5cGUgPT09IHVuZGVmaW5lZCB8fCBleHRlbnNpb25UeXBlID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBleHRlbnNpb25UeXBlJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2V4dGVuc2lvblR5cGV9JywgZXh0ZW5zaW9uVHlwZSk7XG4gICAgaWYobWV0YWRhdGFJZCA9PT0gdW5kZWZpbmVkIHx8IG1ldGFkYXRhSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG1ldGFkYXRhSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bWV0YWRhdGFJZH0nLCBtZXRhZGF0YUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJ0eXBlXCJdID0gdHlwZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZW5kcG9pbnRzXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFbmRwb2ludHMgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VuZHBvaW50cyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgbmFtZSwgc29ydEJ5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2VuZHBvaW50cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibmFtZVwiXSA9IG5hbWU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydEJ5XCJdID0gc29ydEJ5O1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSBlbmRwb2ludFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBFbmRwb2ludFRlbXBsYXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNvdW50XCI6IDAsXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcInNjaGVtYVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGlkc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNvdW50XCI6IDAsXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcInNjaGVtYVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGlkc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNFbmRwb2ludHMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNFbmRwb2ludHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9lbmRwb2ludHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBQaG9uZSBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lSWQgLSBQaG9uZSBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicGhvbmVCYXNlU2V0dGluZ3NcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZU1ldGFCYXNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVzXCI6IFtdLFxuICAgXCJzdGF0dXNcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm9wZXJhdGlvbmFsU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VzU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImV2ZW50Q3JlYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvblwiOiB7fSxcbiAgICAgIFwibGluZVN0YXR1c2VzXCI6IFtdLFxuICAgICAgXCJwaG9uZUFzc2lnbm1lbnRUb0VkZ2VUeXBlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5U3RhdHVzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJvcGVyYXRpb25hbFN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlZGdlc1N0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJldmVudENyZWF0aW9uVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25cIjoge30sXG4gICAgICBcImxpbmVTdGF0dXNlc1wiOiBbXSxcbiAgICAgIFwicGhvbmVBc3NpZ25tZW50VG9FZGdlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlXCI6IHt9LFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJBZ2VudEluZm9cIjoge1xuICAgICAgXCJmaXJtd2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwibWFudWZhY3R1cmVyXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCJcbiAgIH0sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInByb3Zpc2lvbnNcIjogdHJ1ZSxcbiAgICAgIFwicmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImR1YWxSZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiaGFyZHdhcmVJZFR5cGVcIjogXCJcIixcbiAgICAgIFwiYWxsb3dSZWJvb3RcIjogdHJ1ZSxcbiAgICAgIFwibm9SZWJhbGFuY2VcIjogdHJ1ZVxuICAgfSxcbiAgIFwid2ViUnRjVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmltYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQocGhvbmVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZXMve3Bob25lSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBob25lSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGhvbmVJZH0nLCBwaG9uZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBQaG9uZSBieSBJRFxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHBob25lSWQgLSBQaG9uZSBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gUGhvbmVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJsaW5lQmFzZVNldHRpbmdzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInBob25lTWV0YUJhc2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZXNcIjogW10sXG4gICBcInN0YXR1c1wiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwib3BlcmF0aW9uYWxTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZXNTdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZXZlbnRDcmVhdGlvblRpbWVcIjogXCJcIixcbiAgICAgIFwicHJvdmlzaW9uXCI6IHt9LFxuICAgICAgXCJsaW5lU3RhdHVzZXNcIjogW10sXG4gICAgICBcInBob25lQXNzaWdubWVudFRvRWRnZVR5cGVcIjogXCJcIixcbiAgICAgIFwiZWRnZVwiOiB7fVxuICAgfSxcbiAgIFwic2Vjb25kYXJ5U3RhdHVzXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJvcGVyYXRpb25hbFN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlZGdlc1N0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJldmVudENyZWF0aW9uVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25cIjoge30sXG4gICAgICBcImxpbmVTdGF0dXNlc1wiOiBbXSxcbiAgICAgIFwicGhvbmVBc3NpZ25tZW50VG9FZGdlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlXCI6IHt9XG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJjYXBhYmlsaXRpZXNcIjoge1xuICAgICAgXCJwcm92aXNpb25zXCI6IHRydWUsXG4gICAgICBcInJlZ2lzdGVyc1wiOiB0cnVlLFxuICAgICAgXCJkdWFsUmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImhhcmR3YXJlSWRUeXBlXCI6IFwiXCIsXG4gICAgICBcImFsbG93UmVib290XCI6IHRydWUsXG4gICAgICBcIm5vUmViYWxhbmNlXCI6IHRydWVcbiAgIH0sXG4gICBcIndlYlJ0Y1VzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJpbWFyeUVkZ2VcIjoge1xuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImludGVyZmFjZXNcIjogW10sXG4gICAgICBcIm1ha2VcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIixcbiAgICAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgICAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICAgICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGF0Y2hcIjogXCJcIixcbiAgICAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlR3JvdXBcIjoge30sXG4gICAgICBcInNpdGVcIjoge30sXG4gICAgICBcInNvZnR3YXJlU3RhdHVzXCI6IHt9LFxuICAgICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICAgICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwXG4gICB9LFxuICAgXCJzZWNvbmRhcnlFZGdlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgICAgXCJtYWtlXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCIsXG4gICAgICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICAgICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhdGNoXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgICAgIFwiZWRnZUdyb3VwXCI6IHt9LFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJzb2Z0d2FyZVN0YXR1c1wiOiB7fSxcbiAgICAgIFwib25saW5lU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInNlcmlhbE51bWJlclwiOiBcIlwiLFxuICAgICAgXCJwaHlzaWNhbEVkZ2VcIjogdHJ1ZSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlRGVwbG95bWVudFR5cGVcIjogXCJcIixcbiAgICAgIFwiY2FsbERyYWluaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uQ291bnRcIjogMFxuICAgfVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInNpdGVcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicGhvbmVCYXNlU2V0dGluZ3NcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZUJhc2VTZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwaG9uZU1ldGFCYXNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVzXCI6IFtdLFxuICAgXCJzdGF0dXNcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm9wZXJhdGlvbmFsU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImVkZ2VzU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcImV2ZW50Q3JlYXRpb25UaW1lXCI6IFwiXCIsXG4gICAgICBcInByb3Zpc2lvblwiOiB7fSxcbiAgICAgIFwibGluZVN0YXR1c2VzXCI6IFtdLFxuICAgICAgXCJwaG9uZUFzc2lnbm1lbnRUb0VkZ2VUeXBlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VcIjoge30sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5U3RhdHVzXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJvcGVyYXRpb25hbFN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJlZGdlc1N0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJldmVudENyZWF0aW9uVGltZVwiOiBcIlwiLFxuICAgICAgXCJwcm92aXNpb25cIjoge30sXG4gICAgICBcImxpbmVTdGF0dXNlc1wiOiBbXSxcbiAgICAgIFwicGhvbmVBc3NpZ25tZW50VG9FZGdlVHlwZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlXCI6IHt9LFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInVzZXJBZ2VudEluZm9cIjoge1xuICAgICAgXCJmaXJtd2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwibWFudWZhY3R1cmVyXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCJcbiAgIH0sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImNhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInByb3Zpc2lvbnNcIjogdHJ1ZSxcbiAgICAgIFwicmVnaXN0ZXJzXCI6IHRydWUsXG4gICAgICBcImR1YWxSZWdpc3RlcnNcIjogdHJ1ZSxcbiAgICAgIFwiaGFyZHdhcmVJZFR5cGVcIjogXCJcIixcbiAgICAgIFwiYWxsb3dSZWJvb3RcIjogdHJ1ZSxcbiAgICAgIFwibm9SZWJhbGFuY2VcIjogdHJ1ZVxuICAgfSxcbiAgIFwid2ViUnRjVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmltYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2Vjb25kYXJ5RWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wdXRQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQocGhvbmVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZXMve3Bob25lSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBob25lSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGhvbmVJZH0nLCBwaG9uZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIFBob25lIGJ5IElEXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcGhvbmVJZCAtIFBob25lIElEXG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5kZWxldGVQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcnNFZGdlc1Bob25lc1Bob25lSWQocGhvbmVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9waG9uZXMve3Bob25lSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocGhvbmVJZCA9PT0gdW5kZWZpbmVkIHx8IHBob25lSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHBob25lSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cGhvbmVJZH0nLCBwaG9uZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZWRnZS5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gRmllbGRzIHRvIGV4cGFuZCBpbiB0aGUgcmVzcG9uc2UsIGNvbW1hLXNlcGFyYXRlZCBWYWxpZCBWYWx1ZXM6IHNpdGVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgXCJtYWtlXCI6IFwiXCIsXG4gICBcIm1vZGVsXCI6IFwiXCIsXG4gICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICBcInBhdGNoXCI6IFwiXCIsXG4gICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHt9LFxuICAgICAgXCJwaG9uZVRydW5rQmFzZXNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJlZGdlc1wiOiBbXSxcbiAgICAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge30sXG4gICAgICBcImxvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic29mdHdhcmVTdGF0dXNcIjoge1xuICAgICAgXCJ2ZXJzaW9uXCI6IHt9LFxuICAgICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgICAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgICAgXCJzdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50XCI6IHRydWVcbiAgIH0sXG4gICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VkZ2VJZChlZGdlSWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBlZGdlLlxuICAqIEBtZW1iZXJPZiBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGVkZ2VJZCAtIEVkZ2UgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIEVkZ2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgIFwibWFrZVwiOiBcIlwiLFxuICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlVHJ1bmtCYXNlQXNzaWdubWVudFwiOiB7fSxcbiAgICAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdXG4gICB9LFxuICAgXCJzaXRlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5U2l0ZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJwcmltYXJ5RWRnZXNcIjogW10sXG4gICAgICBcInNlY29uZGFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcImVkZ2VzXCI6IFtdLFxuICAgICAgXCJlZGdlQXV0b1VwZGF0ZUNvbmZpZ1wiOiB7fSxcbiAgICAgIFwibG9jYXRpb25cIjoge30sXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZVxuICAgfSxcbiAgIFwic29mdHdhcmVTdGF0dXNcIjoge1xuICAgICAgXCJ2ZXJzaW9uXCI6IHt9LFxuICAgICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgICAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgICAgXCJzdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50XCI6IHRydWVcbiAgIH0sXG4gICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDBcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgXCJtYWtlXCI6IFwiXCIsXG4gICBcIm1vZGVsXCI6IFwiXCIsXG4gICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICBcInBhdGNoXCI6IFwiXCIsXG4gICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHt9LFxuICAgICAgXCJwaG9uZVRydW5rQmFzZXNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJlZGdlc1wiOiBbXSxcbiAgICAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge30sXG4gICAgICBcImxvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic29mdHdhcmVTdGF0dXNcIjoge1xuICAgICAgXCJ2ZXJzaW9uXCI6IHt9LFxuICAgICAgXCJtYXhEb3dubG9hZFJhdGVcIjogMCxcbiAgICAgIFwiZG93bmxvYWRTdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZVN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJleGVjdXRlU3RvcFRpbWVcIjogXCJcIixcbiAgICAgIFwiZXhlY3V0ZU9uSWRsZVwiOiB0cnVlLFxuICAgICAgXCJzdGF0dXNcIjogXCJcIixcbiAgICAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50XCI6IHRydWVcbiAgIH0sXG4gICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucHV0UHJvdmlkZXJzRWRnZXNFZGdlSWQgPSBmdW5jdGlvbiBwdXRQcm92aWRlcnNFZGdlc0VkZ2VJZChlZGdlSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGVkZ2UuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZGVsZXRlUHJvdmlkZXJzRWRnZXNFZGdlSWQgPSBmdW5jdGlvbiBkZWxldGVQcm92aWRlcnNFZGdlc0VkZ2VJZChlZGdlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgdGhlIGxpc3Qgb2YgZWRnZSBncm91cHMuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIE5hbWVcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydEJ5IC0gU29ydCBieVxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCAtIEZpbHRlciBieSBtYW5hZ2VkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2Vncm91cHMgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VkZ2Vncm91cHMocGFnZVNpemUsIHBhZ2VOdW1iZXIsIG5hbWUsIHNvcnRCeSwgbWFuYWdlZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9lZGdlZ3JvdXBzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXF1ZXN0UXVlcnlbXCJuYW1lXCJdID0gbmFtZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0QnlcIl0gPSBzb3J0Qnk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wibWFuYWdlZFwiXSA9IG1hbmFnZWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ3JlYXRlIGFuIGVkZ2UgZ3JvdXAuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIEVkZ2VHcm91cFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHtcbiAgICAgIFwiZmFtaWx5XCI6IDAsXG4gICAgICBcInRydW5rQmFzZVwiOiB7fVxuICAgfSxcbiAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJlZGdlVHJ1bmtCYXNlQXNzaWdubWVudFwiOiB7XG4gICAgICBcImZhbWlseVwiOiAwLFxuICAgICAgXCJ0cnVua0Jhc2VcIjoge31cbiAgIH0sXG4gICBcInBob25lVHJ1bmtCYXNlc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5wb3N0UHJvdmlkZXJzRWRnZXNFZGdlZ3JvdXBzID0gZnVuY3Rpb24gcG9zdFByb3ZpZGVyc0VkZ2VzRWRnZWdyb3Vwcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90ZWxlcGhvbnkvcHJvdmlkZXJzL2VkZ2VzL2VkZ2Vncm91cHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYW4gRWRnZSBsb2dzIGpvYi5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGpvYklkIC0gSm9iIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiZmlsZXNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRMb2dzSm9ic0pvYklkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRMb2dzSm9ic0pvYklkKGVkZ2VJZCwgam9iSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0vbG9ncy9qb2JzL3tqb2JJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihqb2JJZCA9PT0gdW5kZWZpbmVkIHx8IGpvYklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBqb2JJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tqb2JJZH0nLCBqb2JJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGVkZ2UgcGh5c2ljYWwgaW50ZXJmYWNlLlxuICAqIEBkZXNjcmlwdGlvbiBSZXRyaWV2ZSBhIHBoeXNpY2FsIGludGVyZmFjZSBmcm9tIGEgc3BlY2lmaWMgZWRnZS5cbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGludGVyZmFjZUlkIC0gSW50ZXJmYWNlIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwiZWRnZVVyaVwiOiBcIlwiLFxuICAgXCJmcmllbmRseU5hbWVcIjogXCJcIixcbiAgIFwiaGFyZHdhcmVBZGRyZXNzXCI6IFwiXCIsXG4gICBcInBvcnRMYWJlbFwiOiBcIlwiLFxuICAgXCJwaHlzaWNhbENhcGFiaWxpdGllc1wiOiB7XG4gICAgICBcInZsYW5cIjogdHJ1ZSxcbiAgICAgIFwidGVhbVwiOiB0cnVlXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzRWRnZUlkUGh5c2ljYWxpbnRlcmZhY2VzSW50ZXJmYWNlSWQgPSBmdW5jdGlvbiBnZXRQcm92aWRlcnNFZGdlc0VkZ2VJZFBoeXNpY2FsaW50ZXJmYWNlc0ludGVyZmFjZUlkKGVkZ2VJZCwgaW50ZXJmYWNlSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0vcGh5c2ljYWxpbnRlcmZhY2VzL3tpbnRlcmZhY2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihpbnRlcmZhY2VJZCA9PT0gdW5kZWZpbmVkIHx8IGludGVyZmFjZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBpbnRlcmZhY2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tpbnRlcmZhY2VJZH0nLCBpbnRlcmZhY2VJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGxpbmVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlSWQgLSBFZGdlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IGxpbmVJZCAtIExpbmUgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJzY2hlbWFcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAgIFwiZWRnZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiaW50ZXJmYWNlc1wiOiBbXSxcbiAgICAgIFwibWFrZVwiOiBcIlwiLFxuICAgICAgXCJtb2RlbFwiOiBcIlwiLFxuICAgICAgXCJhcGlWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25UaW1lc3RhbXBcIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uUGxhdGZvcm1cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uQ29uZmlndXJhdGlvblwiOiBcIlwiLFxuICAgICAgXCJmdWxsU29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhaXJpbmdJZFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludFwiOiBcIlwiLFxuICAgICAgXCJmaW5nZXJwcmludEhpbnRcIjogXCJcIixcbiAgICAgIFwiY3VycmVudFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic3RhZ2VkVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYXRjaFwiOiBcIlwiLFxuICAgICAgXCJzdGF0dXNDb2RlXCI6IFwiXCIsXG4gICAgICBcImVkZ2VHcm91cFwiOiB7fSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwic29mdHdhcmVTdGF0dXNcIjoge30sXG4gICAgICBcIm9ubGluZVN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzZXJpYWxOdW1iZXJcIjogXCJcIixcbiAgICAgIFwicGh5c2ljYWxFZGdlXCI6IHRydWUsXG4gICAgICBcIm1hbmFnZWRcIjogdHJ1ZSxcbiAgICAgIFwiZWRnZURlcGxveW1lbnRUeXBlXCI6IFwiXCIsXG4gICAgICBcImNhbGxEcmFpbmluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcImNvbnZlcnNhdGlvbkNvdW50XCI6IDAsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHt9LFxuICAgICAgXCJwaG9uZVRydW5rQmFzZXNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibGluZVR5cGVcIjogXCJcIixcbiAgIFwiZW5kcG9pbnRcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNvdW50XCI6IDAsXG4gICAgICBcInByb3BlcnRpZXNcIjoge30sXG4gICAgICBcInNjaGVtYVwiOiB7fSxcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJkaWRzXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImlwQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJsb2dpY2FsSW50ZXJmYWNlSWRcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5UZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpLnByb3RvdHlwZS5nZXRQcm92aWRlcnNFZGdlc0VkZ2VJZExpbmVzTGluZUlkID0gZnVuY3Rpb24gZ2V0UHJvdmlkZXJzRWRnZXNFZGdlSWRMaW5lc0xpbmVJZChlZGdlSWQsIGxpbmVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy97ZWRnZUlkfS9saW5lcy97bGluZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGVkZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IGVkZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZWRnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2VkZ2VJZH0nLCBlZGdlSWQpO1xuICAgIGlmKGxpbmVJZCA9PT0gdW5kZWZpbmVkIHx8IGxpbmVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbGluZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2xpbmVJZH0nLCBsaW5lSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIGxpbmUuXG4gICogQG1lbWJlck9mIFRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZWRnZUlkIC0gRWRnZSBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lSWQgLSBMaW5lIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBMaW5lXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcInNjaGVtYVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgXCJlZGdlXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJpbnRlcmZhY2VzXCI6IFtdLFxuICAgICAgXCJtYWtlXCI6IFwiXCIsXG4gICAgICBcIm1vZGVsXCI6IFwiXCIsXG4gICAgICBcImFwaVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25QbGF0Zm9ybVwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25Db25maWd1cmF0aW9uXCI6IFwiXCIsXG4gICAgICBcImZ1bGxTb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGFpcmluZ0lkXCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50XCI6IFwiXCIsXG4gICAgICBcImZpbmdlcnByaW50SGludFwiOiBcIlwiLFxuICAgICAgXCJjdXJyZW50VmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzdGFnZWRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInBhdGNoXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c0NvZGVcIjogXCJcIixcbiAgICAgIFwiZWRnZUdyb3VwXCI6IHt9LFxuICAgICAgXCJzaXRlXCI6IHt9LFxuICAgICAgXCJzb2Z0d2FyZVN0YXR1c1wiOiB7fSxcbiAgICAgIFwib25saW5lU3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInNlcmlhbE51bWJlclwiOiBcIlwiLFxuICAgICAgXCJwaHlzaWNhbEVkZ2VcIjogdHJ1ZSxcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlRGVwbG95bWVudFR5cGVcIjogXCJcIixcbiAgICAgIFwiY2FsbERyYWluaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwiY29udmVyc2F0aW9uQ291bnRcIjogMFxuICAgfSxcbiAgIFwiZWRnZUdyb3VwXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VUcnVua0Jhc2VBc3NpZ25tZW50XCI6IHt9LFxuICAgICAgXCJwaG9uZVRydW5rQmFzZXNcIjogW11cbiAgIH0sXG4gICBcImxpbmVUeXBlXCI6IFwiXCIsXG4gICBcImVuZHBvaW50XCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjb3VudFwiOiAwLFxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgICAgXCJzY2hlbWFcIjoge30sXG4gICAgICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwiZGlkc1wiOiBbXVxuICAgfSxcbiAgIFwiaXBBZGRyZXNzXCI6IFwiXCIsXG4gICBcImxvZ2ljYWxJbnRlcmZhY2VJZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwic2NoZW1hXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInByb3BlcnRpZXNcIjoge30sXG4gICBcImVkZ2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImludGVyZmFjZXNcIjogW10sXG4gICAgICBcIm1ha2VcIjogXCJcIixcbiAgICAgIFwibW9kZWxcIjogXCJcIixcbiAgICAgIFwiYXBpVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJzb2Z0d2FyZVZlcnNpb25cIjogXCJcIixcbiAgICAgIFwic29mdHdhcmVWZXJzaW9uVGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvblBsYXRmb3JtXCI6IFwiXCIsXG4gICAgICBcInNvZnR3YXJlVmVyc2lvbkNvbmZpZ3VyYXRpb25cIjogXCJcIixcbiAgICAgIFwiZnVsbFNvZnR3YXJlVmVyc2lvblwiOiBcIlwiLFxuICAgICAgXCJwYWlyaW5nSWRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRcIjogXCJcIixcbiAgICAgIFwiZmluZ2VycHJpbnRIaW50XCI6IFwiXCIsXG4gICAgICBcImN1cnJlbnRWZXJzaW9uXCI6IFwiXCIsXG4gICAgICBcInN0YWdlZFZlcnNpb25cIjogXCJcIixcbiAgICAgIFwicGF0Y2hcIjogXCJcIixcbiAgICAgIFwic3RhdHVzQ29kZVwiOiBcIlwiLFxuICAgICAgXCJlZGdlR3JvdXBcIjoge30sXG4gICAgICBcInNpdGVcIjoge30sXG4gICAgICBcInNvZnR3YXJlU3RhdHVzXCI6IHt9LFxuICAgICAgXCJvbmxpbmVTdGF0dXNcIjogXCJcIixcbiAgICAgIFwic2VyaWFsTnVtYmVyXCI6IFwiXCIsXG4gICAgICBcInBoeXNpY2FsRWRnZVwiOiB0cnVlLFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcImVkZ2VEZXBsb3ltZW50VHlwZVwiOiBcIlwiLFxuICAgICAgXCJjYWxsRHJhaW5pbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJjb252ZXJzYXRpb25Db3VudFwiOiAwLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVkZ2VHcm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgICAgXCJlZGdlVHJ1bmtCYXNlQXNzaWdubWVudFwiOiB7fSxcbiAgICAgIFwicGhvbmVUcnVua0Jhc2VzXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImxpbmVUeXBlXCI6IFwiXCIsXG4gICBcImVuZHBvaW50XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICAgICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjb3VudFwiOiAwLFxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICAgICAgXCJzY2hlbWFcIjoge30sXG4gICAgICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgICAgIFwic2l0ZVwiOiB7fSxcbiAgICAgIFwiZGlkc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJpcEFkZHJlc3NcIjogXCJcIixcbiAgIFwibG9naWNhbEludGVyZmFjZUlkXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaS5wcm90b3R5cGUucHV0UHJvdmlkZXJzRWRnZXNFZGdlSWRMaW5lc0xpbmVJZCA9IGZ1bmN0aW9uIHB1dFByb3ZpZGVyc0VkZ2VzRWRnZUlkTGluZXNMaW5lSWQoZWRnZUlkLCBsaW5lSWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMve2VkZ2VJZH0vbGluZXMve2xpbmVJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihlZGdlSWQgPT09IHVuZGVmaW5lZCB8fCBlZGdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGVkZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tlZGdlSWR9JywgZWRnZUlkKTtcbiAgICBpZihsaW5lSWQgPT09IHVuZGVmaW5lZCB8fCBsaW5lSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGxpbmVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tsaW5lSWR9JywgbGluZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBvdXRib3VuZCByb3V0ZXNcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBOYW1lXG4gICogQHBhcmFtIHtzdHJpbmd9IHNvcnRCeSAtIFNvcnQgYnlcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLmdldFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWRPdXRib3VuZHJvdXRlcyA9IGZ1bmN0aW9uIGdldFByb3ZpZGVyc0VkZ2VzU2l0ZXNTaXRlSWRPdXRib3VuZHJvdXRlcyhzaXRlSWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBuYW1lLCBzb3J0Qnkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3RlbGVwaG9ueS9wcm92aWRlcnMvZWRnZXMvc2l0ZXMve3NpdGVJZH0vb3V0Ym91bmRyb3V0ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihzaXRlSWQgPT09IHVuZGVmaW5lZCB8fCBzaXRlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHNpdGVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzaXRlSWR9Jywgc2l0ZUlkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcIm5hbWVcIl0gPSBuYW1lO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRCeVwiXSA9IHNvcnRCeTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgb3V0Ym91bmQgcm91dGVcbiAgKiBAbWVtYmVyT2YgVGVsZXBob255UHJvdmlkZXJzRWRnZUFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBzaXRlSWQgLSBTaXRlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBPdXRib3VuZFJvdXRlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5XCI6IFwiXCIsXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkQnlBcHBcIjogXCJcIixcbiAgIFwiY3JlYXRlZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNsYXNzaWZpY2F0aW9uVHlwZXNcIjogW10sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiZGlzdHJpYnV0aW9uXCI6IFwiXCIsXG4gICBcImV4dGVybmFsVHJ1bmtCYXNlc1wiOiBbXSxcbiAgIFwic2l0ZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeVNpdGVzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlTaXRlc1wiOiBbXSxcbiAgICAgIFwicHJpbWFyeUVkZ2VzXCI6IFtdLFxuICAgICAgXCJzZWNvbmRhcnlFZGdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJlZGdlc1wiOiBbXSxcbiAgICAgIFwiZWRnZUF1dG9VcGRhdGVDb25maWdcIjoge30sXG4gICAgICBcImxvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJtYW5hZ2VkXCI6IHRydWUsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwibWFuYWdlZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblRlbGVwaG9ueVByb3ZpZGVyc0VkZ2VBcGkucHJvdG90eXBlLnBvc3RQcm92aWRlcnNFZGdlc1NpdGVzU2l0ZUlkT3V0Ym91bmRyb3V0ZXMgPSBmdW5jdGlvbiBwb3N0UHJvdmlkZXJzRWRnZXNTaXRlc1NpdGVJZE91dGJvdW5kcm91dGVzKHNpdGVJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGVsZXBob255L3Byb3ZpZGVycy9lZGdlcy9zaXRlcy97c2l0ZUlkfS9vdXRib3VuZHJvdXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHNpdGVJZCA9PT0gdW5kZWZpbmVkIHx8IHNpdGVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2l0ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3NpdGVJZH0nLCBzaXRlSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBUZWxlcGhvbnlQcm92aWRlcnNFZGdlQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgVG9rZW5zQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlRva2Vuc0FwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBUb2tlbnNBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFRva2Vuc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbnNBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rva2Vuc0FwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlICBhdXRoIHRva2VuIHVzZWQgdG8gbWFrZSB0aGUgcmVxdWVzdC5cbiAgKiBAbWVtYmVyT2YgVG9rZW5zQXBpXG4gICogQGluc3RhbmNlXG4gICovXG5Ub2tlbnNBcGkucHJvdG90eXBlLmRlbGV0ZU1lID0gZnVuY3Rpb24gZGVsZXRlTWUoKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi90b2tlbnMvbWUnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gVG9rZW5zQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgVXNlclJlY29yZGluZ3NBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uVXNlclJlY29yZGluZ3NBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gVXNlclJlY29yZGluZ3NBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFVzZXJSZWNvcmRpbmdzQXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJSZWNvcmRpbmdzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyUmVjb3JkaW5nc0FwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgRG93bmxvYWQgYSB1c2VyIHJlY29yZGluZy5cbiAgKiBAbWVtYmVyT2YgVXNlclJlY29yZGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVjb3JkaW5nSWQgLSBVc2VyIFJlY29yZGluZyBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXRJZCAtIFRoZSBkZXNpcmVkIG1lZGlhIGZvcm1hdC5cbiAgV0FWLFxuICBXRUJNLFxuICBXQVZfVUxBVyxcbiAgT0dHX1ZPUkJJUyxcbiAgT0dHX09QVVMsXG4gIE5PTkUsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNvbnRlbnRMb2NhdGlvblVyaVwiOiBcIlwiLFxuICAgXCJpbWFnZVVyaVwiOiBcIlwiLFxuICAgXCJ0aHVtYm5haWxzXCI6IFtdXG59XG4gICovXG5Vc2VyUmVjb3JkaW5nc0FwaS5wcm90b3R5cGUuZ2V0UmVjb3JkaW5nSWRNZWRpYSA9IGZ1bmN0aW9uIGdldFJlY29yZGluZ0lkTWVkaWEocmVjb3JkaW5nSWQsIGZvcm1hdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2VycmVjb3JkaW5ncy97cmVjb3JkaW5nSWR9L21lZGlhJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImZvcm1hdElkXCJdID0gZm9ybWF0SWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHVzZXIgcmVjb3JkaW5nIHN1bW1hcnlcbiAgKiBAbWVtYmVyT2YgVXNlclJlY29yZGluZ3NBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicmVhZENvdW50XCI6IDAsXG4gICBcInVucmVhZENvdW50XCI6IDAsXG4gICBcInRvdGFsQ291bnRcIjogMFxufVxuICAqL1xuVXNlclJlY29yZGluZ3NBcGkucHJvdG90eXBlLmdldFN1bW1hcnkgPSBmdW5jdGlvbiBnZXRTdW1tYXJ5KCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnJlY29yZGluZ3Mvc3VtbWFyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIgcmVjb3JkaW5nLlxuICAqIEBtZW1iZXJPZiBVc2VyUmVjb3JkaW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSByZWNvcmRpbmdJZCAtIFVzZXIgUmVjb3JkaW5nIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZC4gVmFsaWQgVmFsdWVzOiBjb252ZXJzYXRpb25cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwiY29udGVudFVyaVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnZlcnNhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICAgICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgICAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICAgICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY29udGVudExlbmd0aFwiOiAwLFxuICAgXCJkdXJhdGlvbk1pbGxpc2Vjb25kc1wiOiAwLFxuICAgXCJ0aHVtYm5haWxzXCI6IFtdLFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlclJlY29yZGluZ3NBcGkucHJvdG90eXBlLmdldFJlY29yZGluZ0lkID0gZnVuY3Rpb24gZ2V0UmVjb3JkaW5nSWQocmVjb3JkaW5nSWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnJlY29yZGluZ3Mve3JlY29yZGluZ0lkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHJlY29yZGluZ0lkID09PSB1bmRlZmluZWQgfHwgcmVjb3JkaW5nSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHJlY29yZGluZ0lkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3JlY29yZGluZ0lkfScsIHJlY29yZGluZ0lkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIGEgdXNlciByZWNvcmRpbmcuXG4gICogQG1lbWJlck9mIFVzZXJSZWNvcmRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJlY29yZGluZ0lkIC0gVXNlciBSZWNvcmRpbmcgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVzZXJSZWNvcmRpbmdcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kLiBWYWxpZCBWYWx1ZXM6IGNvbnZlcnNhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwiY29udGVudFVyaVwiOiBcIlwiLFxuICAgXCJ3b3Jrc3BhY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY3JlYXRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnZlcnNhdGlvblwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICAgICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgICAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICAgICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgIFwidGh1bWJuYWlsc1wiOiBbXSxcbiAgIFwicmVhZFwiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGF0ZUNyZWF0ZWRcIjogXCJcIixcbiAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICBcImNvbnRlbnRVcmlcIjogXCJcIixcbiAgIFwid29ya3NwYWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNyZWF0ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjb252ZXJzYXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiLFxuICAgICAgXCJlbmRUaW1lXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3NcIjogXCJcIixcbiAgICAgIFwicGFydGljaXBhbnRzXCI6IFtdLFxuICAgICAgXCJjb252ZXJzYXRpb25JZHNcIjogW10sXG4gICAgICBcIm1heFBhcnRpY2lwYW50c1wiOiAwLFxuICAgICAgXCJyZWNvcmRpbmdTdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnRlbnRMZW5ndGhcIjogMCxcbiAgIFwiZHVyYXRpb25NaWxsaXNlY29uZHNcIjogMCxcbiAgIFwidGh1bWJuYWlsc1wiOiBbXSxcbiAgIFwicmVhZFwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJSZWNvcmRpbmdzQXBpLnByb3RvdHlwZS5wdXRSZWNvcmRpbmdJZCA9IGZ1bmN0aW9uIHB1dFJlY29yZGluZ0lkKHJlY29yZGluZ0lkLCBib2R5LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJyZWNvcmRpbmdzL3tyZWNvcmRpbmdJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihyZWNvcmRpbmdJZCA9PT0gdW5kZWZpbmVkIHx8IHJlY29yZGluZ0lkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiByZWNvcmRpbmdJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tyZWNvcmRpbmdJZH0nLCByZWNvcmRpbmdJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRGVsZXRlIGEgdXNlciByZWNvcmRpbmcuXG4gICogQG1lbWJlck9mIFVzZXJSZWNvcmRpbmdzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHJlY29yZGluZ0lkIC0gVXNlciBSZWNvcmRpbmcgSURcbiAgKi9cblVzZXJSZWNvcmRpbmdzQXBpLnByb3RvdHlwZS5kZWxldGVSZWNvcmRpbmdJZCA9IGZ1bmN0aW9uIGRlbGV0ZVJlY29yZGluZ0lkKHJlY29yZGluZ0lkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2VycmVjb3JkaW5ncy97cmVjb3JkaW5nSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYocmVjb3JkaW5nSWQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmRpbmdJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogcmVjb3JkaW5nSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7cmVjb3JkaW5nSWR9JywgcmVjb3JkaW5nSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgdXNlciByZWNvcmRpbmdzLlxuICAqIEBtZW1iZXJPZiBVc2VyUmVjb3JkaW5nc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQuIFZhbGlkIFZhbHVlczogY29udmVyc2F0aW9uXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Vc2VyUmVjb3JkaW5nc0FwaS5wcm90b3R5cGUuZ2V0VXNlcnJlY29yZGluZ3MgPSBmdW5jdGlvbiBnZXRVc2VycmVjb3JkaW5ncyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2VycmVjb3JkaW5ncyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBVc2VyUmVjb3JkaW5nc0FwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIFVzZXJzQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlVzZXJzQXBpKHB1cmVDbG91ZFNlc3Npb24pO1xuKi9cbmZ1bmN0aW9uIFVzZXJzQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBVc2Vyc0FwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2Vyc0FwaShzZXNzaW9uKTtcbiAgICB9XG4gICAgaWYoIShzZXNzaW9uICYmIHNlc3Npb24ubWFrZVJlcXVlc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlcnNBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB1c2VyLlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlLCBjb252ZXJzYXRpb25TdW1tYXJ5LCBvdXRPZk9mZmljZSwgZ2VvbG9jYXRpb24sIHN0YXRpb24sIGF1dGhvcml6YXRpb24sIHByb2ZpbGVTa2lsbHMsIGxvY2F0aW9uc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNoYXRcIjoge1xuICAgICAgXCJqYWJiZXJJZFwiOiBcIlwiXG4gICB9LFxuICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICBcImVtYWlsXCI6IFwiXCIsXG4gICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgXCJtYW5hZ2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IHtcbiAgICAgIFwidXNlcklkXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIlxuICAgfSxcbiAgIFwicHJlc2VuY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNvdXJjZVwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICAgICBcInByZXNlbmNlRGVmaW5pdGlvblwiOiB7fSxcbiAgICAgIFwibWVzc2FnZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHtcbiAgICAgIFwidXNlcklkXCI6IFwiXCIsXG4gICAgICBcImNhbGxcIjoge30sXG4gICAgICBcImNhbGxiYWNrXCI6IHt9LFxuICAgICAgXCJlbWFpbFwiOiB7fSxcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwic29jaWFsRXhwcmVzc2lvblwiOiB7fSxcbiAgICAgIFwidmlkZW9cIjoge31cbiAgIH0sXG4gICBcIm91dE9mT2ZmaWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VyXCI6IHt9LFxuICAgICAgXCJzdGFydERhdGVcIjogXCJcIixcbiAgICAgIFwiZW5kRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhY3RpdmVcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJnZW9sb2NhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICAgICBcImxhdGl0dWRlXCI6IHt9LFxuICAgICAgXCJsb25naXR1ZGVcIjoge30sXG4gICAgICBcImNvdW50cnlcIjogXCJcIixcbiAgICAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICAgICBcImNpdHlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdGF0aW9uXCI6IHtcbiAgICAgIFwiYXNzb2NpYXRlZFN0YXRpb25cIjoge30sXG4gICAgICBcImVmZmVjdGl2ZVN0YXRpb25cIjoge30sXG4gICAgICBcImRlZmF1bHRTdGF0aW9uXCI6IHt9LFxuICAgICAgXCJsYXN0QXNzb2NpYXRlZFN0YXRpb25cIjoge31cbiAgIH0sXG4gICBcImF1dGhvcml6YXRpb25cIjoge1xuICAgICAgXCJyb2xlc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICAgICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXVxuICAgfSxcbiAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWQgPSBmdW5jdGlvbiBnZXRVc2VySWQodXNlcklkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5kZWxldGVVc2VySWQgPSBmdW5jdGlvbiBkZWxldGVVc2VySWQodXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFVzZXJcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7XG4gICAgICBcImphYmJlcklkXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgXCJtYW5hZ2VyXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7XG4gICAgICBcImphYmJlcklkXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInJvdXRpbmdTdGF0dXNcIjoge1xuICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmVzZW5jZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic291cmNlXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgICAgIFwicHJlc2VuY2VEZWZpbml0aW9uXCI6IHt9LFxuICAgICAgXCJtZXNzYWdlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge1xuICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgIFwiY2FsbFwiOiB7fSxcbiAgICAgIFwiY2FsbGJhY2tcIjoge30sXG4gICAgICBcImVtYWlsXCI6IHt9LFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJzb2NpYWxFeHByZXNzaW9uXCI6IHt9LFxuICAgICAgXCJ2aWRlb1wiOiB7fVxuICAgfSxcbiAgIFwib3V0T2ZPZmZpY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInVzZXJcIjoge30sXG4gICAgICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgICAgXCJlbmREYXRlXCI6IFwiXCIsXG4gICAgICBcImFjdGl2ZVwiOiB0cnVlLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImdlb2xvY2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgICAgIFwibGF0aXR1ZGVcIjoge30sXG4gICAgICBcImxvbmdpdHVkZVwiOiB7fSxcbiAgICAgIFwiY291bnRyeVwiOiBcIlwiLFxuICAgICAgXCJyZWdpb25cIjogXCJcIixcbiAgICAgIFwiY2l0eVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInN0YXRpb25cIjoge1xuICAgICAgXCJhc3NvY2lhdGVkU3RhdGlvblwiOiB7fSxcbiAgICAgIFwiZWZmZWN0aXZlU3RhdGlvblwiOiB7fSxcbiAgICAgIFwiZGVmYXVsdFN0YXRpb25cIjoge30sXG4gICAgICBcImxhc3RBc3NvY2lhdGVkU3RhdGlvblwiOiB7fVxuICAgfSxcbiAgIFwiYXV0aG9yaXphdGlvblwiOiB7XG4gICAgICBcInJvbGVzXCI6IFtdLFxuICAgICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdXG4gICB9LFxuICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnBhdGNoVXNlcklkID0gZnVuY3Rpb24gcGF0Y2hVc2VySWQodXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBKb2luIG9yIHVuam9pbiBhIHF1ZXVlIGZvciBhIHVzZXJcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVJZCAtIFF1ZXVlIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFF1ZXVlIE1lbWJlclxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5XCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZEJ5QXBwXCI6IFwiXCIsXG4gICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJtZWRpYVNldHRpbmdzXCI6IHt9LFxuICAgXCJidWxsc2V5ZVwiOiB7XG4gICAgICBcInJpbmdzXCI6IFtdXG4gICB9LFxuICAgXCJhY3dTZXR0aW5nc1wiOiB7XG4gICAgICBcIndyYXB1cFByb21wdFwiOiBcIlwiLFxuICAgICAgXCJ0aW1lb3V0TXNcIjogMFxuICAgfSxcbiAgIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gICBcInF1ZXVlRmxvd1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gICBcImNhbGxpbmdQYXJ0eU51bWJlclwiOiBcIlwiLFxuICAgXCJvdXRib3VuZEVtYWlsQWRkcmVzc1wiOiB7XG4gICAgICBcImRvbWFpblwiOiB7fSxcbiAgICAgIFwicm91dGVcIjoge31cbiAgIH0sXG4gICBcImpvaW5lZFwiOiB0cnVlLFxuICAgXCJtZW1iZXJDb3VudFwiOiAwXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJkYXRlQ3JlYXRlZFwiOiBcIlwiLFxuICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlcIjogXCJcIixcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICAgXCJjcmVhdGVkQnlBcHBcIjogXCJcIixcbiAgIFwibWVkaWFTZXR0aW5nc1wiOiB7fSxcbiAgIFwiYnVsbHNleWVcIjoge1xuICAgICAgXCJyaW5nc1wiOiBbXVxuICAgfSxcbiAgIFwiYWN3U2V0dGluZ3NcIjoge1xuICAgICAgXCJ3cmFwdXBQcm9tcHRcIjogXCJcIixcbiAgICAgIFwidGltZW91dE1zXCI6IDBcbiAgIH0sXG4gICBcInNraWxsRXZhbHVhdGlvbk1ldGhvZFwiOiBcIlwiLFxuICAgXCJxdWV1ZUZsb3dcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiY2FsbGluZ1BhcnR5TmFtZVwiOiBcIlwiLFxuICAgXCJjYWxsaW5nUGFydHlOdW1iZXJcIjogXCJcIixcbiAgIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge1xuICAgICAgXCJkb21haW5cIjoge30sXG4gICAgICBcInJvdXRlXCI6IHt9XG4gICB9LFxuICAgXCJqb2luZWRcIjogdHJ1ZSxcbiAgIFwibWVtYmVyQ291bnRcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUucGF0Y2hVc2VySWRRdWV1ZXNRdWV1ZUlkID0gZnVuY3Rpb24gcGF0Y2hVc2VySWRRdWV1ZXNRdWV1ZUlkKHF1ZXVlSWQsIHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcXVldWVzL3txdWV1ZUlkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHF1ZXVlSWQgPT09IHVuZGVmaW5lZCB8fCBxdWV1ZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBxdWV1ZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3F1ZXVlSWR9JywgcXVldWVJZCk7XG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0aW5nIG9mIHJvbGVzIGFuZCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VyLlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInJvbGVzXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZ2V0VXNlcklkUm9sZXMgPSBmdW5jdGlvbiBnZXRVc2VySWRSb2xlcyh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3JvbGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2V0cyB0aGUgdXNlcidzIHJvbGVzXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIExpc3Qgb2Ygcm9sZXNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwicm9sZXNcIjogW10sXG4gICBcInBlcm1pc3Npb25zXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uUG9saWNpZXNcIjogW11cbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wdXRVc2VySWRSb2xlcyA9IGZ1bmN0aW9uIHB1dFVzZXJJZFJvbGVzKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcm9sZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJlbW92ZXMgYWxsIHRoZSByb2xlcyBmcm9tIHRoZSB1c2VyLlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZGVsZXRlVXNlcklkUm9sZXMgPSBmdW5jdGlvbiBkZWxldGVVc2VySWRSb2xlcyh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3JvbGVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHN0YXRpb24gaW5mb3JtYXRpb24gZm9yIHVzZXJcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJhc3NvY2lhdGVkU3RhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJhc3NvY2lhdGVkVXNlclwiOiB7fSxcbiAgICAgIFwiYXNzb2NpYXRlZERhdGVcIjogXCJcIixcbiAgICAgIFwiZGVmYXVsdFVzZXJcIjoge30sXG4gICAgICBcInByb3ZpZGVySW5mb1wiOiB7fVxuICAgfSxcbiAgIFwiZWZmZWN0aXZlU3RhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJhc3NvY2lhdGVkVXNlclwiOiB7fSxcbiAgICAgIFwiYXNzb2NpYXRlZERhdGVcIjogXCJcIixcbiAgICAgIFwiZGVmYXVsdFVzZXJcIjoge30sXG4gICAgICBcInByb3ZpZGVySW5mb1wiOiB7fVxuICAgfSxcbiAgIFwiZGVmYXVsdFN0YXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiYXNzb2NpYXRlZFVzZXJcIjoge30sXG4gICAgICBcImFzc29jaWF0ZWREYXRlXCI6IFwiXCIsXG4gICAgICBcImRlZmF1bHRVc2VyXCI6IHt9LFxuICAgICAgXCJwcm92aWRlckluZm9cIjoge31cbiAgIH0sXG4gICBcImxhc3RBc3NvY2lhdGVkU3RhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJhc3NvY2lhdGVkVXNlclwiOiB7fSxcbiAgICAgIFwiYXNzb2NpYXRlZERhdGVcIjogXCJcIixcbiAgICAgIFwiZGVmYXVsdFVzZXJcIjoge30sXG4gICAgICBcInByb3ZpZGVySW5mb1wiOiB7fVxuICAgfVxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldFVzZXJJZFN0YXRpb24gPSBmdW5jdGlvbiBnZXRVc2VySWRTdGF0aW9uKHVzZXJJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vc3RhdGlvbic7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNldCBhc3NvY2lhdGVkIHN0YXRpb25cbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0aW9uSWQgLSBzdGF0aW9uSWRcbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wdXRVc2VySWRTdGF0aW9uQXNzb2NpYXRlZHN0YXRpb25TdGF0aW9uSWQgPSBmdW5jdGlvbiBwdXRVc2VySWRTdGF0aW9uQXNzb2NpYXRlZHN0YXRpb25TdGF0aW9uSWQodXNlcklkLCBzdGF0aW9uSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3N0YXRpb24vYXNzb2NpYXRlZHN0YXRpb24ve3N0YXRpb25JZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihzdGF0aW9uSWQgPT09IHVuZGVmaW5lZCB8fCBzdGF0aW9uSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHN0YXRpb25JZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tzdGF0aW9uSWR9Jywgc3RhdGlvbklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDbGVhciBhc3NvY2lhdGVkIHN0YXRpb25cbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmRlbGV0ZVVzZXJJZFN0YXRpb25Bc3NvY2lhdGVkc3RhdGlvbiA9IGZ1bmN0aW9uIGRlbGV0ZVVzZXJJZFN0YXRpb25Bc3NvY2lhdGVkc3RhdGlvbih1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3N0YXRpb24vYXNzb2NpYXRlZHN0YXRpb24nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBTZXQgZGVmYXVsdCBzdGF0aW9uXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGlvbklkIC0gc3RhdGlvbklkXG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUucHV0VXNlcklkU3RhdGlvbkRlZmF1bHRzdGF0aW9uU3RhdGlvbklkID0gZnVuY3Rpb24gcHV0VXNlcklkU3RhdGlvbkRlZmF1bHRzdGF0aW9uU3RhdGlvbklkKHVzZXJJZCwgc3RhdGlvbklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9zdGF0aW9uL2RlZmF1bHRzdGF0aW9uL3tzdGF0aW9uSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoc3RhdGlvbklkID09PSB1bmRlZmluZWQgfHwgc3RhdGlvbklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBzdGF0aW9uSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7c3RhdGlvbklkfScsIHN0YXRpb25JZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ2xlYXIgZGVmYXVsdCBzdGF0aW9uXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5kZWxldGVVc2VySWRTdGF0aW9uRGVmYXVsdHN0YXRpb24gPSBmdW5jdGlvbiBkZWxldGVVc2VySWRTdGF0aW9uRGVmYXVsdHN0YXRpb24odXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9zdGF0aW9uL2RlZmF1bHRzdGF0aW9uJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUXVlcnkgZm9yIHVzZXIgYWdncmVnYXRlc1xuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gcXVlcnlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImludGVydmFsXCI6IFwiXCIsXG4gICBcImdyYW51bGFyaXR5XCI6IFwiXCIsXG4gICBcInRpbWVab25lXCI6IFwiXCIsXG4gICBcImdyb3VwQnlcIjogW10sXG4gICBcImZpbHRlclwiOiB7XG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiY2xhdXNlc1wiOiBbXSxcbiAgICAgIFwicHJlZGljYXRlc1wiOiBbXVxuICAgfSxcbiAgIFwibWV0cmljc1wiOiBbXSxcbiAgIFwiZmxhdHRlbk11bHRpdmFsdWVkRGltZW5zaW9uc1wiOiB0cnVlXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInN5c3RlbVRvT3JnYW5pemF0aW9uTWFwcGluZ3NcIjoge30sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wb3N0VXNlcnNBZ2dyZWdhdGVzUXVlcnkgPSBmdW5jdGlvbiBwb3N0VXNlcnNBZ2dyZWdhdGVzUXVlcnkoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvYW5hbHl0aWNzL3VzZXJzL2FnZ3JlZ2F0ZXMvcXVlcnknO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBRdWVyeSBmb3IgdXNlciBkZXRhaWxzXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBxdWVyeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaW50ZXJ2YWxcIjogXCJcIixcbiAgIFwidXNlckZpbHRlcnNcIjogW10sXG4gICBcInByZXNlbmNlRmlsdGVyc1wiOiBbXSxcbiAgIFwicm91dGluZ1N0YXR1c0ZpbHRlcnNcIjogW10sXG4gICBcInByZXNlbmNlQWdncmVnYXRpb25zXCI6IFtdLFxuICAgXCJyb3V0aW5nU3RhdHVzQWdncmVnYXRpb25zXCI6IFtdLFxuICAgXCJwYWdpbmdcIjoge1xuICAgICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgICAgXCJwYWdlTnVtYmVyXCI6IDBcbiAgIH0sXG4gICBcIm9yZGVyXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidXNlckRldGFpbHNcIjogW10sXG4gICBcImFnZ3JlZ2F0aW9uc1wiOiBbXVxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnBvc3RVc2Vyc0RldGFpbHNRdWVyeSA9IGZ1bmN0aW9uIHBvc3RVc2Vyc0RldGFpbHNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvdXNlcnMvZGV0YWlscy9xdWVyeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFF1ZXJ5IGZvciB1c2VyIG9ic2VydmF0aW9uc1xuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gcXVlcnlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImZpbHRlclwiOiB7XG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiY2xhdXNlc1wiOiBbXSxcbiAgICAgIFwicHJlZGljYXRlc1wiOiBbXVxuICAgfSxcbiAgIFwibWV0cmljc1wiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUucG9zdFVzZXJzT2JzZXJ2YXRpb25zUXVlcnkgPSBmdW5jdGlvbiBwb3N0VXNlcnNPYnNlcnZhdGlvbnNRdWVyeShib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi9hbmFseXRpY3MvdXNlcnMvb2JzZXJ2YXRpb25zL3F1ZXJ5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgT3V0T2ZPZmZpY2VcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic3RhcnREYXRlXCI6IFwiXCIsXG4gICBcImVuZERhdGVcIjogXCJcIixcbiAgIFwiYWN0aXZlXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldFVzZXJJZE91dG9mb2ZmaWNlID0gZnVuY3Rpb24gZ2V0VXNlcklkT3V0b2ZvZmZpY2UodXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9vdXRvZm9mZmljZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhbiBPdXRPZk9mZmljZVxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUaGUgdXBkYXRlZCBVc2VyUHJlc2VuY2VcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJzdGFydERhdGVcIjogXCJcIixcbiAgIFwiZW5kRGF0ZVwiOiBcIlwiLFxuICAgXCJhY3RpdmVcIjogdHJ1ZVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic3RhcnREYXRlXCI6IFwiXCIsXG4gICBcImVuZERhdGVcIjogXCJcIixcbiAgIFwiYWN0aXZlXCI6IHRydWUsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnB1dFVzZXJJZE91dG9mb2ZmaWNlID0gZnVuY3Rpb24gcHV0VXNlcklkT3V0b2ZvZmZpY2UodXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9vdXRvZm9mZmljZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgdXNlcidzIENhbGxGb3J3YXJkaW5nXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwicGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldFVzZXJJZENhbGxmb3J3YXJkaW5nID0gZnVuY3Rpb24gZ2V0VXNlcklkQ2FsbGZvcndhcmRpbmcodXNlcklkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9jYWxsZm9yd2FyZGluZyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHVzZXIncyBDYWxsRm9yd2FyZGluZ1xuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBDYWxsIGZvcndhcmRpbmdcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwXG4gICB9LFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInBob25lTnVtYmVyXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wdXRVc2VySWRDYWxsZm9yd2FyZGluZyA9IGZ1bmN0aW9uIHB1dFVzZXJJZENhbGxmb3J3YXJkaW5nKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vY2FsbGZvcndhcmRpbmcnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFBhdGNoIGEgdXNlcidzIENhbGxGb3J3YXJkaW5nXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIENhbGwgZm9yd2FyZGluZ1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDBcbiAgIH0sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwicGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwicGhvbmVOdW1iZXJcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnBhdGNoVXNlcklkQ2FsbGZvcndhcmRpbmcgPSBmdW5jdGlvbiBwYXRjaFVzZXJJZENhbGxmb3J3YXJkaW5nKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vY2FsbGZvcndhcmRpbmcnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgRmV0Y2ggdGhlIHJvdXRpbmcgc3RhdHVzIG9mIGEgdXNlclxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJzdGF0dXNcIjogXCJcIixcbiAgIFwic3RhcnRUaW1lXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRSb3V0aW5nc3RhdHVzID0gZnVuY3Rpb24gZ2V0VXNlcklkUm91dGluZ3N0YXR1cyh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3JvdXRpbmdzdGF0dXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgdGhlIHJvdXRpbmcgc3RhdHVzIG9mIGEgdXNlclxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBSb3V0aW5nIFN0YXR1c1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidXNlcklkXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJzdGFydFRpbWVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUucHV0VXNlcklkUm91dGluZ3N0YXR1cyA9IGZ1bmN0aW9uIHB1dFVzZXJJZFJvdXRpbmdzdGF0dXModXNlcklkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9yb3V0aW5nc3RhdHVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQVVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgcXVldWVzIGZvciB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGpvaW5lZCAtIElzIGpvaW5lZCB0byB0aGUgcXVldWVcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRRdWV1ZXMgPSBmdW5jdGlvbiBnZXRVc2VySWRRdWV1ZXModXNlcklkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgam9pbmVkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9xdWV1ZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImpvaW5lZFwiXSA9IGpvaW5lZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBKb2luIG9yIHVuam9pbiBhIHNldCBvZiBxdWV1ZXMgZm9yIGEgdXNlclxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBVc2VyIFF1ZXVlc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIFtcbiB7XG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gIFwidmVyc2lvblwiOiAwLFxuICBcImRhdGVDcmVhdGVkXCI6IFwiXCIsXG4gIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gIFwibW9kaWZpZWRCeVwiOiBcIlwiLFxuICBcImNyZWF0ZWRCeVwiOiBcIlwiLFxuICBcInN0YXRlXCI6IFwiXCIsXG4gIFwibW9kaWZpZWRCeUFwcFwiOiBcIlwiLFxuICBcImNyZWF0ZWRCeUFwcFwiOiBcIlwiLFxuICBcIm1lZGlhU2V0dGluZ3NcIjoge30sXG4gIFwiYnVsbHNleWVcIjoge1xuICAgXCJyaW5nc1wiOiBbXVxuICB9LFxuICBcImFjd1NldHRpbmdzXCI6IHtcbiAgIFwid3JhcHVwUHJvbXB0XCI6IFwiXCIsXG4gICBcInRpbWVvdXRNc1wiOiAwXG4gIH0sXG4gIFwic2tpbGxFdmFsdWF0aW9uTWV0aG9kXCI6IFwiXCIsXG4gIFwicXVldWVGbG93XCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJjYWxsaW5nUGFydHlOYW1lXCI6IFwiXCIsXG4gIFwiY2FsbGluZ1BhcnR5TnVtYmVyXCI6IFwiXCIsXG4gIFwib3V0Ym91bmRFbWFpbEFkZHJlc3NcIjoge1xuICAgXCJkb21haW5cIjoge30sXG4gICBcInJvdXRlXCI6IHt9XG4gIH0sXG4gIFwiam9pbmVkXCI6IHRydWUsXG4gIFwibWVtYmVyQ291bnRcIjogMFxuIH1cbl1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wYXRjaFVzZXJJZFF1ZXVlcyA9IGZ1bmN0aW9uIHBhdGNoVXNlcklkUXVldWVzKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcXVldWVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgbGlzdCBvZiBhdmFpbGFibGUgdXNlcnMuXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQHBhcmFtIHthcnJheX0gaWQgLSBpZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBBc2NlbmRpbmcgb3IgZGVzY2VuZGluZyBzb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogcm91dGluZ1N0YXR1cywgcHJlc2VuY2UsIGNvbnZlcnNhdGlvblN1bW1hcnksIG91dE9mT2ZmaWNlLCBnZW9sb2NhdGlvbiwgc3RhdGlvbiwgYXV0aG9yaXphdGlvbiwgcHJvZmlsZVNraWxscywgbG9jYXRpb25zXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZ2V0VXNlcnMgPSBmdW5jdGlvbiBnZXRVc2VycyhwYWdlU2l6ZSwgcGFnZU51bWJlciwgaWQsIHNvcnRPcmRlciwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiaWRcIl0gPSBpZDtcbiAgICByZXF1ZXN0UXVlcnlbXCJzb3J0T3JkZXJcIl0gPSBzb3J0T3JkZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IENyZWF0ZSB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBVc2VyXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgXCJwYXNzd29yZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7XG4gICAgICBcImphYmJlcklkXCI6IFwiXCJcbiAgIH0sXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInJvdXRpbmdTdGF0dXNcIjoge1xuICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICBcInN0YXJ0VGltZVwiOiBcIlwiXG4gICB9LFxuICAgXCJwcmVzZW5jZVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic291cmNlXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgICAgIFwicHJlc2VuY2VEZWZpbml0aW9uXCI6IHt9LFxuICAgICAgXCJtZXNzYWdlXCI6IFwiXCIsXG4gICAgICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge1xuICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgIFwiY2FsbFwiOiB7fSxcbiAgICAgIFwiY2FsbGJhY2tcIjoge30sXG4gICAgICBcImVtYWlsXCI6IHt9LFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJzb2NpYWxFeHByZXNzaW9uXCI6IHt9LFxuICAgICAgXCJ2aWRlb1wiOiB7fVxuICAgfSxcbiAgIFwib3V0T2ZPZmZpY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInVzZXJcIjoge30sXG4gICAgICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgICAgXCJlbmREYXRlXCI6IFwiXCIsXG4gICAgICBcImFjdGl2ZVwiOiB0cnVlLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImdlb2xvY2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgICAgIFwibGF0aXR1ZGVcIjoge30sXG4gICAgICBcImxvbmdpdHVkZVwiOiB7fSxcbiAgICAgIFwiY291bnRyeVwiOiBcIlwiLFxuICAgICAgXCJyZWdpb25cIjogXCJcIixcbiAgICAgIFwiY2l0eVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInN0YXRpb25cIjoge1xuICAgICAgXCJhc3NvY2lhdGVkU3RhdGlvblwiOiB7fSxcbiAgICAgIFwiZWZmZWN0aXZlU3RhdGlvblwiOiB7fSxcbiAgICAgIFwiZGVmYXVsdFN0YXRpb25cIjoge30sXG4gICAgICBcImxhc3RBc3NvY2lhdGVkU3RhdGlvblwiOiB7fVxuICAgfSxcbiAgIFwiYXV0aG9yaXphdGlvblwiOiB7XG4gICAgICBcInJvbGVzXCI6IFtdLFxuICAgICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdXG4gICB9LFxuICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnBvc3RVc2VycyA9IGZ1bmN0aW9uIHBvc3RVc2Vycyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHVzZXIncyBHZW9sb2NhdGlvblxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSB1c2VyIElkXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkIC0gY2xpZW50IElkXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcImxhdGl0dWRlXCI6IHt9LFxuICAgXCJsb25naXR1ZGVcIjoge30sXG4gICBcImNvdW50cnlcIjogXCJcIixcbiAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICBcImNpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZ2V0VXNlcklkR2VvbG9jYXRpb25zQ2xpZW50SWQgPSBmdW5jdGlvbiBnZXRVc2VySWRHZW9sb2NhdGlvbnNDbGllbnRJZCh1c2VySWQsIGNsaWVudElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy97dXNlcklkfS9nZW9sb2NhdGlvbnMve2NsaWVudElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGNsaWVudElkID09PSB1bmRlZmluZWQgfHwgY2xpZW50SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGNsaWVudElkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne2NsaWVudElkfScsIGNsaWVudElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBQYXRjaCBhIHVzZXIncyBHZW9sb2NhdGlvblxuICAqIEBkZXNjcmlwdGlvbiBUaGUgZ2VvbG9jYXRpb24gb2JqZWN0IGNhbiBiZSBwYXRjaGVkIG9uZSBvZiB0aHJlZSB3YXlzLiBPcHRpb24gMTogU2V0IHRoZSAncHJpbWFyeScgcHJvcGVydHkgdG8gdHJ1ZS4gVGhpcyB3aWxsIHNldCB0aGUgY2xpZW50IGFzIHRoZSB1c2VyJ3MgcHJpbWFyeSBnZW9sb2NhdGlvbiBzb3VyY2UuICBPcHRpb24gMjogUHJvdmlkZSB0aGUgJ2xhdGl0dWRlJyBhbmQgJ2xvbmdpdHVkZScgdmFsdWVzLiAgVGhpcyB3aWxsIGVucXVldWUgYW4gYXN5bmNocm9ub3VzIHVwZGF0ZSBvZiB0aGUgJ2NpdHknLCAncmVnaW9uJywgYW5kICdjb3VudHJ5JywgZ2VuZXJhdGluZyBhIG5vdGlmaWNhdGlvbi4gQSBzdWJzZXF1ZW50IEdFVCBvcGVyYXRpb24gd2lsbCBpbmNsdWRlIHRoZSBuZXcgdmFsdWVzIGZvciAnY2l0eScsICdyZWdpb24nIGFuZCAnY291bnRyeScuICBPcHRpb24gMzogIFByb3ZpZGUgdGhlICdjaXR5JywgJ3JlZ2lvbicsICdjb3VudHJ5JyB2YWx1ZXMuICBPcHRpb24gMSBjYW4gYmUgY29tYmluZWQgd2l0aCBPcHRpb24gMiBvciBPcHRpb24gMy4gIEZvciBleGFtcGxlLCB1cGRhdGUgdGhlIGNsaWVudCBhcyBwcmltYXJ5IGFuZCBwcm92aWRlIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgdmFsdWVzLlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSB1c2VyIElkXG4gICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkIC0gY2xpZW50IElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBHZW9sb2NhdGlvblxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0eXBlXCI6IFwiXCIsXG4gICBcInByaW1hcnlcIjogdHJ1ZSxcbiAgIFwibGF0aXR1ZGVcIjoge30sXG4gICBcImxvbmdpdHVkZVwiOiB7fSxcbiAgIFwiY291bnRyeVwiOiBcIlwiLFxuICAgXCJyZWdpb25cIjogXCJcIixcbiAgIFwiY2l0eVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcImxhdGl0dWRlXCI6IHt9LFxuICAgXCJsb25naXR1ZGVcIjoge30sXG4gICBcImNvdW50cnlcIjogXCJcIixcbiAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICBcImNpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUucGF0Y2hVc2VySWRHZW9sb2NhdGlvbnNDbGllbnRJZCA9IGZ1bmN0aW9uIHBhdGNoVXNlcklkR2VvbG9jYXRpb25zQ2xpZW50SWQodXNlcklkLCBjbGllbnRJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vZ2VvbG9jYXRpb25zL3tjbGllbnRJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihjbGllbnRJZCA9PT0gdW5kZWZpbmVkIHx8IGNsaWVudElkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBjbGllbnRJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tjbGllbnRJZH0nLCBjbGllbnRJZCk7XG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQQVRDSCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEZldGNoIGZpZWxkIGNvbmZpZyBmb3IgYW4gZW50aXR5IHR5cGVcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEZpZWxkIHR5cGVcbiAgcGVyc29uLFxuICBncm91cCxcbiAgb3JnLFxuICBleHRlcm5hbENvbnRhY3QsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZW50aXR5VHlwZVwiOiBcIlwiLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJzZWN0aW9uc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiBcIlwiLFxuICAgXCJzY2hlbWFWZXJzaW9uXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldEZpZWxkY29uZmlnID0gZnVuY3Rpb24gZ2V0RmllbGRjb25maWcodHlwZSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZmllbGRjb25maWcnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih0eXBlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdHlwZScpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJ0eXBlXCJdID0gdHlwZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgZmF2b3JpdGVzXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc29ydE9yZGVyIC0gU29ydCBvcmRlclxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiByb3V0aW5nU3RhdHVzLCBwcmVzZW5jZSwgY29udmVyc2F0aW9uU3VtbWFyeSwgb3V0T2ZPZmZpY2UsIGdlb2xvY2F0aW9uLCBzdGF0aW9uLCBhdXRob3JpemF0aW9uLCBwcm9maWxlU2tpbGxzLCBsb2NhdGlvbnNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRGYXZvcml0ZXMgPSBmdW5jdGlvbiBnZXRVc2VySWRGYXZvcml0ZXModXNlcklkLCBwYWdlU2l6ZSwgcGFnZU51bWJlciwgc29ydE9yZGVyLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L2Zhdm9yaXRlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmVxdWVzdFF1ZXJ5W1wic29ydE9yZGVyXCJdID0gc29ydE9yZGVyO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYWRqYWNlbnRzXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogcm91dGluZ1N0YXR1cywgcHJlc2VuY2UsIGNvbnZlcnNhdGlvblN1bW1hcnksIG91dE9mT2ZmaWNlLCBnZW9sb2NhdGlvbiwgc3RhdGlvbiwgYXV0aG9yaXphdGlvbiwgcHJvZmlsZVNraWxscywgbG9jYXRpb25zXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInN1cGVyaW9yc1wiOiBbXSxcbiAgIFwic2libGluZ3NcIjogW10sXG4gICBcImRpcmVjdFJlcG9ydHNcIjogW11cbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRBZGphY2VudHMgPSBmdW5jdGlvbiBnZXRVc2VySWRBZGphY2VudHModXNlcklkLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L2FkamFjZW50cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgc3VwZXJpb3JzXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBXaGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogcm91dGluZ1N0YXR1cywgcHJlc2VuY2UsIGNvbnZlcnNhdGlvblN1bW1hcnksIG91dE9mT2ZmaWNlLCBnZW9sb2NhdGlvbiwgc3RhdGlvbiwgYXV0aG9yaXphdGlvbiwgcHJvZmlsZVNraWxscywgbG9jYXRpb25zXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCIsXG4gIFwibmFtZVwiOiBcIlwiLFxuICBcImNoYXRcIjoge1xuICAgXCJqYWJiZXJJZFwiOiBcIlwiXG4gIH0sXG4gIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICBcImVtYWlsXCI6IFwiXCIsXG4gIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgXCJzdGF0ZVwiOiBcIlwiLFxuICBcInRpdGxlXCI6IFwiXCIsXG4gIFwidXNlcm5hbWVcIjogXCJcIixcbiAgXCJtYW5hZ2VyXCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJjaGF0XCI6IHt9LFxuICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICBcImVtYWlsXCI6IFwiXCIsXG4gICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgXCJpbWFnZXNcIjogW10sXG4gICBcInZlcnNpb25cIjogMCxcbiAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgIFwicHJlc2VuY2VcIjoge30sXG4gICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgIFwic3RhdGlvblwiOiB7fSxcbiAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJpbWFnZXNcIjogW10sXG4gIFwidmVyc2lvblwiOiAwLFxuICBcInJvdXRpbmdTdGF0dXNcIjoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICBcInN0YXJ0VGltZVwiOiBcIlwiXG4gIH0sXG4gIFwicHJlc2VuY2VcIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInNvdXJjZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcInByZXNlbmNlRGVmaW5pdGlvblwiOiB7fSxcbiAgIFwibWVzc2FnZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG4gIH0sXG4gIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7XG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJjYWxsXCI6IHt9LFxuICAgXCJjYWxsYmFja1wiOiB7fSxcbiAgIFwiZW1haWxcIjoge30sXG4gICBcImNoYXRcIjoge30sXG4gICBcInNvY2lhbEV4cHJlc3Npb25cIjoge30sXG4gICBcInZpZGVvXCI6IHt9XG4gIH0sXG4gIFwib3V0T2ZPZmZpY2VcIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInVzZXJcIjoge30sXG4gICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgXCJlbmREYXRlXCI6IFwiXCIsXG4gICBcImFjdGl2ZVwiOiB0cnVlLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgfSxcbiAgXCJnZW9sb2NhdGlvblwiOiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwidHlwZVwiOiBcIlwiLFxuICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICBcImxhdGl0dWRlXCI6IHt9LFxuICAgXCJsb25naXR1ZGVcIjoge30sXG4gICBcImNvdW50cnlcIjogXCJcIixcbiAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICBcImNpdHlcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG4gIH0sXG4gIFwic3RhdGlvblwiOiB7XG4gICBcImFzc29jaWF0ZWRTdGF0aW9uXCI6IHt9LFxuICAgXCJlZmZlY3RpdmVTdGF0aW9uXCI6IHt9LFxuICAgXCJkZWZhdWx0U3RhdGlvblwiOiB7fSxcbiAgIFwibGFzdEFzc29jaWF0ZWRTdGF0aW9uXCI6IHt9XG4gIH0sXG4gIFwiYXV0aG9yaXphdGlvblwiOiB7XG4gICBcInJvbGVzXCI6IFtdLFxuICAgXCJwZXJtaXNzaW9uc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvblBvbGljaWVzXCI6IFtdXG4gIH0sXG4gIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgXCJsb2NhdGlvbnNcIjogW10sXG4gIFwic2VsZlVyaVwiOiBcIlwiXG4gfVxuXVxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldFVzZXJJZFN1cGVyaW9ycyA9IGZ1bmN0aW9uIGdldFVzZXJJZFN1cGVyaW9ycyh1c2VySWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vc3VwZXJpb3JzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBkaXJlY3QgcmVwb3J0c1xuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gV2hpY2ggZmllbGRzLCBpZiBhbnksIHRvIGV4cGFuZCBWYWxpZCBWYWx1ZXM6IHJvdXRpbmdTdGF0dXMsIHByZXNlbmNlLCBjb252ZXJzYXRpb25TdW1tYXJ5LCBvdXRPZk9mZmljZSwgZ2VvbG9jYXRpb24sIHN0YXRpb24sIGF1dGhvcml6YXRpb24sIHByb2ZpbGVTa2lsbHMsIGxvY2F0aW9uc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICogW1xuIHtcbiAgXCJpZFwiOiBcIlwiLFxuICBcIm5hbWVcIjogXCJcIixcbiAgXCJjaGF0XCI6IHtcbiAgIFwiamFiYmVySWRcIjogXCJcIlxuICB9LFxuICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgXCJlbWFpbFwiOiBcIlwiLFxuICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgXCJhZGRyZXNzZXNcIjogW10sXG4gIFwic3RhdGVcIjogXCJcIixcbiAgXCJ0aXRsZVwiOiBcIlwiLFxuICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gIFwibWFuYWdlclwiOiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiY2hhdFwiOiB7fSxcbiAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgIFwic3RhdGVcIjogXCJcIixcbiAgIFwidGl0bGVcIjogXCJcIixcbiAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgIFwibWFuYWdlclwiOiB7fSxcbiAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICBcInByZXNlbmNlXCI6IHt9LFxuICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICBcInN0YXRpb25cIjoge30sXG4gICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG4gIH0sXG4gIFwiaW1hZ2VzXCI6IFtdLFxuICBcInZlcnNpb25cIjogMCxcbiAgXCJyb3V0aW5nU3RhdHVzXCI6IHtcbiAgIFwidXNlcklkXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJzdGFydFRpbWVcIjogXCJcIlxuICB9LFxuICBcInByZXNlbmNlXCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzb3VyY2VcIjogXCJcIixcbiAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgXCJwcmVzZW5jZURlZmluaXRpb25cIjoge30sXG4gICBcIm1lc3NhZ2VcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge1xuICAgXCJ1c2VySWRcIjogXCJcIixcbiAgIFwiY2FsbFwiOiB7fSxcbiAgIFwiY2FsbGJhY2tcIjoge30sXG4gICBcImVtYWlsXCI6IHt9LFxuICAgXCJjaGF0XCI6IHt9LFxuICAgXCJzb2NpYWxFeHByZXNzaW9uXCI6IHt9LFxuICAgXCJ2aWRlb1wiOiB7fVxuICB9LFxuICBcIm91dE9mT2ZmaWNlXCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHt9LFxuICAgXCJzdGFydERhdGVcIjogXCJcIixcbiAgIFwiZW5kRGF0ZVwiOiBcIlwiLFxuICAgXCJhY3RpdmVcIjogdHJ1ZSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG4gIH0sXG4gIFwiZ2VvbG9jYXRpb25cIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInR5cGVcIjogXCJcIixcbiAgIFwicHJpbWFyeVwiOiB0cnVlLFxuICAgXCJsYXRpdHVkZVwiOiB7fSxcbiAgIFwibG9uZ2l0dWRlXCI6IHt9LFxuICAgXCJjb3VudHJ5XCI6IFwiXCIsXG4gICBcInJlZ2lvblwiOiBcIlwiLFxuICAgXCJjaXR5XCI6IFwiXCIsXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcInN0YXRpb25cIjoge1xuICAgXCJhc3NvY2lhdGVkU3RhdGlvblwiOiB7fSxcbiAgIFwiZWZmZWN0aXZlU3RhdGlvblwiOiB7fSxcbiAgIFwiZGVmYXVsdFN0YXRpb25cIjoge30sXG4gICBcImxhc3RBc3NvY2lhdGVkU3RhdGlvblwiOiB7fVxuICB9LFxuICBcImF1dGhvcml6YXRpb25cIjoge1xuICAgXCJyb2xlc1wiOiBbXSxcbiAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXVxuICB9LFxuICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gIFwibG9jYXRpb25zXCI6IFtdLFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWREaXJlY3RyZXBvcnRzID0gZnVuY3Rpb24gZ2V0VXNlcklkRGlyZWN0cmVwb3J0cyh1c2VySWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vZGlyZWN0cmVwb3J0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImV4cGFuZFwiXSA9IGV4cGFuZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBMaXN0IHByb2ZpbGUgc2tpbGxzIGZvciBhIHVzZXJcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLmdldFVzZXJJZFByb2ZpbGVza2lsbHMgPSBmdW5jdGlvbiBnZXRVc2VySWRQcm9maWxlc2tpbGxzKHVzZXJJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcHJvZmlsZXNraWxscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBwcm9maWxlIHNraWxscyBmb3IgYSB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNraWxsc1xuICAqL1xuVXNlcnNBcGkucHJvdG90eXBlLnB1dFVzZXJJZFByb2ZpbGVza2lsbHMgPSBmdW5jdGlvbiBwdXRVc2VySWRQcm9maWxlc2tpbGxzKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcHJvZmlsZXNraWxscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgU2VhcmNoIHVzZXJzIHVzaW5nIHRoZSBxNjQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIHNlYXJjaFxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBxNjQgLSBxNjRcbiAgKiBAcGFyYW0ge2FycmF5fSBleHBhbmQgLSBleHBhbmRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidG90YWxcIjogMCxcbiAgIFwicGFnZUNvdW50XCI6IDAsXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwicHJldmlvdXNQYWdlXCI6IFwiXCIsXG4gICBcImN1cnJlbnRQYWdlXCI6IFwiXCIsXG4gICBcIm5leHRQYWdlXCI6IFwiXCIsXG4gICBcInR5cGVzXCI6IFtdLFxuICAgXCJyZXN1bHRzXCI6IFtdXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZ2V0U2VhcmNoID0gZnVuY3Rpb24gZ2V0U2VhcmNoKHE2NCwgZXhwYW5kKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxNjQgPT09IHVuZGVmaW5lZCB8fCBxNjQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHE2NCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJxNjRcIl0gPSBxNjQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB1c2Vyc1xuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wb3N0U2VhcmNoID0gZnVuY3Rpb24gcG9zdFNlYXJjaChib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi91c2Vycy9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgY3VycmVudCB1c2VyIGRldGFpbHMuXG4gICogQGRlc2NyaXB0aW9uIFRoaXMgcmVxdWVzdCBpcyBub3QgdmFsaWQgd2hlbiB1c2luZyB0aGUgQ2xpZW50IENyZWRlbnRpYWxzIE9BdXRoIGdyYW50LlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIFdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQuIFZhbGlkIFZhbHVlczogcm91dGluZ1N0YXR1cywgcHJlc2VuY2UsIGNvbnZlcnNhdGlvblN1bW1hcnksIG91dE9mT2ZmaWNlLCBnZW9sb2NhdGlvbiwgc3RhdGlvbiwgYXV0aG9yaXphdGlvbiwgcHJvZmlsZVNraWxscywgbG9jYXRpb25zLCBkYXRlLCBnZW9sb2NhdGlvbnNldHRpbmdzLCBvcmdhbml6YXRpb24sIHByZXNlbmNlZGVmaW5pdGlvbnMsIGxvY2F0aW9uZGVmaW5pdGlvbnMsIG9yZ2F1dGhvcml6YXRpb24sIGZhdm9yaXRlcywgc3VwZXJpb3JzLCBkaXJlY3RyZXBvcnRzLCBhZGphY2VudHMsIHJvdXRpbmdza2lsbHMsIGZpZWxkY29uZmlnc1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNoYXRcIjoge1xuICAgICAgXCJqYWJiZXJJZFwiOiBcIlwiXG4gICB9LFxuICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICBcImVtYWlsXCI6IFwiXCIsXG4gICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgXCJtYW5hZ2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IHtcbiAgICAgIFwidXNlcklkXCI6IFwiXCIsXG4gICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIlxuICAgfSxcbiAgIFwicHJlc2VuY2VcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInNvdXJjZVwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICAgICBcInByZXNlbmNlRGVmaW5pdGlvblwiOiB7fSxcbiAgICAgIFwibWVzc2FnZVwiOiBcIlwiLFxuICAgICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHtcbiAgICAgIFwidXNlcklkXCI6IFwiXCIsXG4gICAgICBcImNhbGxcIjoge30sXG4gICAgICBcImNhbGxiYWNrXCI6IHt9LFxuICAgICAgXCJlbWFpbFwiOiB7fSxcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwic29jaWFsRXhwcmVzc2lvblwiOiB7fSxcbiAgICAgIFwidmlkZW9cIjoge31cbiAgIH0sXG4gICBcIm91dE9mT2ZmaWNlXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VyXCI6IHt9LFxuICAgICAgXCJzdGFydERhdGVcIjogXCJcIixcbiAgICAgIFwiZW5kRGF0ZVwiOiBcIlwiLFxuICAgICAgXCJhY3RpdmVcIjogdHJ1ZSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJnZW9sb2NhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5XCI6IHRydWUsXG4gICAgICBcImxhdGl0dWRlXCI6IHt9LFxuICAgICAgXCJsb25naXR1ZGVcIjoge30sXG4gICAgICBcImNvdW50cnlcIjogXCJcIixcbiAgICAgIFwicmVnaW9uXCI6IFwiXCIsXG4gICAgICBcImNpdHlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzdGF0aW9uXCI6IHtcbiAgICAgIFwiYXNzb2NpYXRlZFN0YXRpb25cIjoge30sXG4gICAgICBcImVmZmVjdGl2ZVN0YXRpb25cIjoge30sXG4gICAgICBcImRlZmF1bHRTdGF0aW9uXCI6IHt9LFxuICAgICAgXCJsYXN0QXNzb2NpYXRlZFN0YXRpb25cIjoge31cbiAgIH0sXG4gICBcImF1dGhvcml6YXRpb25cIjoge1xuICAgICAgXCJyb2xlc1wiOiBbXSxcbiAgICAgIFwicGVybWlzc2lvbnNcIjogW10sXG4gICAgICBcInBlcm1pc3Npb25Qb2xpY2llc1wiOiBbXVxuICAgfSxcbiAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgXCJkYXRlXCI6IHtcbiAgICAgIFwiY3VycmVudERhdGVcIjogXCJcIlxuICAgfSxcbiAgIFwiZ2VvbG9jYXRpb25TZXR0aW5nc1wiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgICAgXCJtYXBib3hLZXlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJvcmdhbml6YXRpb25cIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcInRoaXJkUGFydHlPcmdJZFwiOiBcIlwiLFxuICAgICAgXCJ0aGlyZFBhcnR5T3JnTmFtZVwiOiBcIlwiLFxuICAgICAgXCJ0aGlyZFBhcnR5VVJJXCI6IFwiXCIsXG4gICAgICBcImRvbWFpblwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcImRlZmF1bHRTaXRlSWRcIjogXCJcIixcbiAgICAgIFwiZGVsZXRhYmxlXCI6IHRydWUsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIixcbiAgICAgIFwiZmVhdHVyZXNcIjoge31cbiAgIH0sXG4gICBcInByZXNlbmNlRGVmaW5pdGlvbnNcIjogW10sXG4gICBcImxvY2F0aW9uRGVmaW5pdGlvbnNcIjogW10sXG4gICBcIm9yZ0F1dGhvcml6YXRpb25cIjogW10sXG4gICBcImZhdm9yaXRlc1wiOiBbXSxcbiAgIFwic3VwZXJpb3JzXCI6IFtdLFxuICAgXCJkaXJlY3RSZXBvcnRzXCI6IFtdLFxuICAgXCJhZGphY2VudHNcIjoge1xuICAgICAgXCJzdXBlcmlvcnNcIjogW10sXG4gICAgICBcInNpYmxpbmdzXCI6IFtdLFxuICAgICAgXCJkaXJlY3RSZXBvcnRzXCI6IFtdXG4gICB9LFxuICAgXCJyb3V0aW5nU2tpbGxzXCI6IFtdLFxuICAgXCJmaWVsZENvbmZpZ3NcIjoge1xuICAgICAgXCJvcmdcIjoge30sXG4gICAgICBcInBlcnNvblwiOiB7fSxcbiAgICAgIFwiZ3JvdXBcIjoge30sXG4gICAgICBcImV4dGVybmFsQ29udGFjdFwiOiB7fVxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Vc2Vyc0FwaS5wcm90b3R5cGUuZ2V0TWUgPSBmdW5jdGlvbiBnZXRNZShleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL21lJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSByb3V0aW5nIHNraWxsIHByb2ZpY2llbmN5IG9yIHN0YXRlLlxuICAqIEBtZW1iZXJPZiBVc2Vyc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gICogQHBhcmFtIHtzdHJpbmd9IHNraWxsSWQgLSBza2lsbElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBTa2lsbFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJwcm9maWNpZW5jeVwiOiB7fSxcbiAgIFwic3RhdGVcIjogXCJcIlxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInByb2ZpY2llbmN5XCI6IHt9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJza2lsbFVyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wdXRVc2VySWRSb3V0aW5nc2tpbGxzU2tpbGxJZCA9IGZ1bmN0aW9uIHB1dFVzZXJJZFJvdXRpbmdza2lsbHNTa2lsbElkKHVzZXJJZCwgc2tpbGxJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcm91dGluZ3NraWxscy97c2tpbGxJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihza2lsbElkID09PSB1bmRlZmluZWQgfHwgc2tpbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2tpbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tza2lsbElkfScsIHNraWxsSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUFVUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgUmVtb3ZlIHJvdXRpbmcgc2tpbGwgZnJvbSB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gc2tpbGxJZCAtIHNraWxsSWRcbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5kZWxldGVVc2VySWRSb3V0aW5nc2tpbGxzU2tpbGxJZCA9IGZ1bmN0aW9uIGRlbGV0ZVVzZXJJZFJvdXRpbmdza2lsbHNTa2lsbElkKHVzZXJJZCwgc2tpbGxJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcm91dGluZ3NraWxscy97c2tpbGxJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihza2lsbElkID09PSB1bmRlZmluZWQgfHwgc2tpbGxJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogc2tpbGxJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tza2lsbElkfScsIHNraWxsSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0RFTEVURScsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IExpc3Qgcm91dGluZyBza2lsbHMgZm9yIHVzZXJcbiAgKiBAbWVtYmVyT2YgVXNlcnNBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0T3JkZXIgLSBBc2NlbmRpbmcgb3IgZGVzY2VuZGluZyBzb3J0IG9yZGVyXG4gIGFzY2VuZGluZyxcbiAgZGVzY2VuZGluZyxcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5nZXRVc2VySWRSb3V0aW5nc2tpbGxzID0gZnVuY3Rpb24gZ2V0VXNlcklkUm91dGluZ3NraWxscyh1c2VySWQsIHBhZ2VTaXplLCBwYWdlTnVtYmVyLCBzb3J0T3JkZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3VzZXJzL3t1c2VySWR9L3JvdXRpbmdza2lsbHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJlcXVlc3RRdWVyeVtcInNvcnRPcmRlclwiXSA9IHNvcnRPcmRlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBBZGQgcm91dGluZyBza2lsbCB0byB1c2VyXG4gICogQG1lbWJlck9mIFVzZXJzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcbiAgKiBAcGFyYW0ge30gYm9keSAtIFNraWxsXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJwcm9maWNpZW5jeVwiOiB7fVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInByb2ZpY2llbmN5XCI6IHt9LFxuICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgXCJza2lsbFVyaVwiOiBcIlwiLFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblVzZXJzQXBpLnByb3RvdHlwZS5wb3N0VXNlcklkUm91dGluZ3NraWxscyA9IGZ1bmN0aW9uIHBvc3RVc2VySWRSb3V0aW5nc2tpbGxzKHVzZXJJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdXNlcnMve3VzZXJJZH0vcm91dGluZ3NraWxscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKHVzZXJJZCA9PT0gdW5kZWZpbmVkIHx8IHVzZXJJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogdXNlcklkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne3VzZXJJZH0nLCB1c2VySWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBVc2Vyc0FwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIFV0aWxpdGllc0FwaVxuKiBAZXhhbXBsZVxuKiB2YXIgYXBpID0gbmV3IHB1cmVjbG91ZC5wbGF0Zm9ybS5VdGlsaXRpZXNBcGkocHVyZUNsb3VkU2Vzc2lvbik7XG4qL1xuZnVuY3Rpb24gVXRpbGl0aWVzQXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBVdGlsaXRpZXNBcGkpKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXRpbGl0aWVzQXBpKHNlc3Npb24pO1xuICAgIH1cbiAgICBpZighKHNlc3Npb24gJiYgc2Vzc2lvbi5tYWtlUmVxdWVzdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVdGlsaXRpZXNBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgY3VycmVudCBzeXN0ZW0gZGF0ZS90aW1lXG4gICogQG1lbWJlck9mIFV0aWxpdGllc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJjdXJyZW50RGF0ZVwiOiBcIlwiXG59XG4gICovXG5VdGlsaXRpZXNBcGkucHJvdG90eXBlLmdldERhdGUgPSBmdW5jdGlvbiBnZXREYXRlKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvZGF0ZSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFJldHVybnMgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIFg1MDkgUEVNIGVuY29kZWQgY2VydGlmaWNhdGUgb3IgY2VydGlmaWNhdGUgY2hhaW4uXG4gICogQG1lbWJlck9mIFV0aWxpdGllc0FwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gQ2VydGlmaWNhdGVcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcImNlcnRpZmljYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiY2VydGlmaWNhdGVEZXRhaWxzXCI6IFtdXG59XG4gICovXG5VdGlsaXRpZXNBcGkucHJvdG90eXBlLnBvc3REZXRhaWxzID0gZnVuY3Rpb24gcG9zdERldGFpbHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvY2VydGlmaWNhdGUvZGV0YWlscyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aW1lIHpvbmVzIGxpc3RcbiAgKiBAbWVtYmVyT2YgVXRpbGl0aWVzQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlU2l6ZSAtIFBhZ2Ugc2l6ZVxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZU51bWJlciAtIFBhZ2UgbnVtYmVyXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5VdGlsaXRpZXNBcGkucHJvdG90eXBlLmdldFRpbWV6b25lcyA9IGZ1bmN0aW9uIGdldFRpbWV6b25lcyhwYWdlU2l6ZSwgcGFnZU51bWJlcil7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdGltZXpvbmVzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZVNpemVcIl0gPSBwYWdlU2l6ZTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlTnVtYmVyXCJdID0gcGFnZU51bWJlcjtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gVXRpbGl0aWVzQXBpO1xuIiwiLypqc2hpbnQgLVcwNjkgKi9cbi8qKlxuKiBAY2xhc3MgVm9pY2VtYWlsQXBpXG4qIEBleGFtcGxlXG4qIHZhciBhcGkgPSBuZXcgcHVyZWNsb3VkLnBsYXRmb3JtLlZvaWNlbWFpbEFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBWb2ljZW1haWxBcGkoc2Vzc2lvbikge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFZvaWNlbWFpbEFwaSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWb2ljZW1haWxBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZvaWNlbWFpbEFwaSByZXF1aXJlcyBhIFB1cmVDbG91ZFNlc3Npb24nKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbn1cblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBjdXJyZW50IHVzZXIncyBtYWlsYm94IGluZm9ybWF0aW9uXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2FnZVNpemVCeXRlc1wiOiAwLFxuICAgXCJ0b3RhbENvdW50XCI6IDAsXG4gICBcInVucmVhZENvdW50XCI6IDAsXG4gICBcImRlbGV0ZWRDb3VudFwiOiAwLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIlxufVxuICAqL1xuVm9pY2VtYWlsQXBpLnByb3RvdHlwZS5nZXRNZU1haWxib3ggPSBmdW5jdGlvbiBnZXRNZU1haWxib3goKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvbWUvbWFpbGJveCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgZ3JvdXAncyBtYWlsYm94IGluZm9ybWF0aW9uXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkIC0gZ3JvdXBJZFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ1c2FnZVNpemVCeXRlc1wiOiAwLFxuICAgXCJ0b3RhbENvdW50XCI6IDAsXG4gICBcInVucmVhZENvdW50XCI6IDAsXG4gICBcImRlbGV0ZWRDb3VudFwiOiAwLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIlxufVxuICAqL1xuVm9pY2VtYWlsQXBpLnByb3RvdHlwZS5nZXRHcm91cHNHcm91cElkTWFpbGJveCA9IGZ1bmN0aW9uIGdldEdyb3Vwc0dyb3VwSWRNYWlsYm94KGdyb3VwSWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9ncm91cHMve2dyb3VwSWR9L21haWxib3gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB0aGUgY3VycmVudCB1c2VyJ3MgbWFpbGJveCBpbmZvcm1hdGlvblxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidXNhZ2VTaXplQnl0ZXNcIjogMCxcbiAgIFwidG90YWxDb3VudFwiOiAwLFxuICAgXCJ1bnJlYWRDb3VudFwiOiAwLFxuICAgXCJkZWxldGVkQ291bnRcIjogMCxcbiAgIFwiY3JlYXRlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUuZ2V0TWFpbGJveCA9IGZ1bmN0aW9uIGdldE1haWxib3goKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvbWFpbGJveCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB2b2ljZW1haWxzIHVzaW5nIHRoZSBxNjQgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIHNlYXJjaFxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gcTY0IC0gcTY0XG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gZXhwYW5kXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcInRvdGFsXCI6IDAsXG4gICBcInBhZ2VDb3VudFwiOiAwLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInByZXZpb3VzUGFnZVwiOiBcIlwiLFxuICAgXCJjdXJyZW50UGFnZVwiOiBcIlwiLFxuICAgXCJuZXh0UGFnZVwiOiBcIlwiLFxuICAgXCJ0eXBlc1wiOiBbXSxcbiAgIFwicmVzdWx0c1wiOiBbXVxufVxuICAqL1xuVm9pY2VtYWlsQXBpLnByb3RvdHlwZS5nZXRTZWFyY2ggPSBmdW5jdGlvbiBnZXRTZWFyY2gocTY0LCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9zZWFyY2gnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihxNjQgPT09IHVuZGVmaW5lZCB8fCBxNjQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHE2NCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UXVlcnlbXCJxNjRcIl0gPSBxNjQ7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFNlYXJjaCB2b2ljZW1haWxzXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gU2VhcmNoIHJlcXVlc3Qgb3B0aW9uc1xuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwic29ydE9yZGVyXCI6IFwiXCIsXG4gICBcInNvcnRCeVwiOiBcIlwiLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInJldHVybkZpZWxkc1wiOiBbXSxcbiAgIFwiZXhwYW5kXCI6IFtdLFxuICAgXCJxdWVyeVwiOiBbXVxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJwYWdlQ291bnRcIjogMCxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJwcmV2aW91c1BhZ2VcIjogXCJcIixcbiAgIFwiY3VycmVudFBhZ2VcIjogXCJcIixcbiAgIFwibmV4dFBhZ2VcIjogXCJcIixcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInJlc3VsdHNcIjogW11cbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUucG9zdFNlYXJjaCA9IGZ1bmN0aW9uIHBvc3RTZWFyY2goYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL3NlYXJjaCc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHBvbGljeVxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJhbGVydFRpbWVvdXRTZWNvbmRzXCI6IDAsXG4gICBcInBpbkNvbmZpZ3VyYXRpb25cIjoge1xuICAgICAgXCJtaW5pbXVtTGVuZ3RoXCI6IDAsXG4gICAgICBcIm1heGltdW1MZW5ndGhcIjogMFxuICAgfSxcbiAgIFwidm9pY2VtYWlsRXh0ZW5zaW9uXCI6IFwiXCIsXG4gICBcInBpblJlcXVpcmVkXCI6IHRydWUsXG4gICBcInNlbmRFbWFpbE5vdGlmaWNhdGlvbnNcIjogdHJ1ZSxcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUuZ2V0UG9saWN5ID0gZnVuY3Rpb24gZ2V0UG9saWN5KCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL3BvbGljeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIHBvbGljeVxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFBvbGljeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiYWxlcnRUaW1lb3V0U2Vjb25kc1wiOiAwLFxuICAgXCJwaW5Db25maWd1cmF0aW9uXCI6IHtcbiAgICAgIFwibWluaW11bUxlbmd0aFwiOiAwLFxuICAgICAgXCJtYXhpbXVtTGVuZ3RoXCI6IDBcbiAgIH0sXG4gICBcInZvaWNlbWFpbEV4dGVuc2lvblwiOiBcIlwiLFxuICAgXCJwaW5SZXF1aXJlZFwiOiB0cnVlLFxuICAgXCJzZW5kRW1haWxOb3RpZmljYXRpb25zXCI6IHRydWVcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJhbGVydFRpbWVvdXRTZWNvbmRzXCI6IDAsXG4gICBcInBpbkNvbmZpZ3VyYXRpb25cIjoge1xuICAgICAgXCJtaW5pbXVtTGVuZ3RoXCI6IDAsXG4gICAgICBcIm1heGltdW1MZW5ndGhcIjogMFxuICAgfSxcbiAgIFwidm9pY2VtYWlsRXh0ZW5zaW9uXCI6IFwiXCIsXG4gICBcInBpblJlcXVpcmVkXCI6IHRydWUsXG4gICBcInNlbmRFbWFpbE5vdGlmaWNhdGlvbnNcIjogdHJ1ZSxcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUucHV0UG9saWN5ID0gZnVuY3Rpb24gcHV0UG9saWN5KGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9wb2xpY3knO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGdyb3VwJ3Mgdm9pY2VtYWlsIHBvbGljeVxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXBJZCAtIEdyb3VwIElEXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5hbWVcIjogXCJcIixcbiAgIFwiZ3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInJ1bGVzVmlzaWJsZVwiOiB0cnVlLFxuICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZW5hYmxlZFwiOiB0cnVlLFxuICAgXCJzZW5kRW1haWxOb3RpZmljYXRpb25zXCI6IHRydWUsXG4gICBcInJvdGF0ZUNhbGxzU2Vjc1wiOiAwLFxuICAgXCJzdG9wUmluZ2luZ0FmdGVyUm90YXRpb25zXCI6IDBcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUuZ2V0R3JvdXBzR3JvdXBJZFBvbGljeSA9IGZ1bmN0aW9uIGdldEdyb3Vwc0dyb3VwSWRQb2xpY3koZ3JvdXBJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL2dyb3Vwcy97Z3JvdXBJZH0vcG9saWN5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZ3JvdXBJZCA9PT0gdW5kZWZpbmVkIHx8IGdyb3VwSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGdyb3VwSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Z3JvdXBJZH0nLCBncm91cElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSBncm91cCdzIHZvaWNlbWFpbCBwb2xpY3lcbiAgKiBAbWVtYmVyT2YgVm9pY2VtYWlsQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWQgLSBHcm91cCBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIGdyb3VwJ3Mgdm9pY2VtYWlsIHBvbGljeVxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcInNlbmRFbWFpbE5vdGlmaWNhdGlvbnNcIjogdHJ1ZSxcbiAgIFwicm90YXRlQ2FsbHNTZWNzXCI6IDAsXG4gICBcInN0b3BSaW5naW5nQWZ0ZXJSb3RhdGlvbnNcIjogMFxufVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImdyb3VwXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxuICAgICAgXCJkYXRlTW9kaWZpZWRcIjogXCJcIixcbiAgICAgIFwibWVtYmVyQ291bnRcIjogMCxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJ0eXBlXCI6IFwiXCIsXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJydWxlc1Zpc2libGVcIjogdHJ1ZSxcbiAgICAgIFwidmlzaWJpbGl0eVwiOiBcIlwiLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwic2VuZEVtYWlsTm90aWZpY2F0aW9uc1wiOiB0cnVlLFxuICAgXCJyb3RhdGVDYWxsc1NlY3NcIjogMCxcbiAgIFwic3RvcFJpbmdpbmdBZnRlclJvdGF0aW9uc1wiOiAwXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLnBhdGNoR3JvdXBzR3JvdXBJZFBvbGljeSA9IGZ1bmN0aW9uIHBhdGNoR3JvdXBzR3JvdXBJZFBvbGljeShncm91cElkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvZ3JvdXBzL3tncm91cElkfS9wb2xpY3knO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihncm91cElkID09PSB1bmRlZmluZWQgfHwgZ3JvdXBJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogZ3JvdXBJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3tncm91cElkfScsIGdyb3VwSWQpO1xuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBMaXN0IHZvaWNlbWFpbCBtZXNzYWdlc1xuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VTaXplIC0gUGFnZSBzaXplXG4gICogQHBhcmFtIHtpbnRlZ2VyfSBwYWdlTnVtYmVyIC0gUGFnZSBudW1iZXJcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW10sXG4gICBcInBhZ2VTaXplXCI6IDAsXG4gICBcInBhZ2VOdW1iZXJcIjogMCxcbiAgIFwidG90YWxcIjogMCxcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmaXJzdFVyaVwiOiBcIlwiLFxuICAgXCJwcmV2aW91c1VyaVwiOiBcIlwiLFxuICAgXCJuZXh0VXJpXCI6IFwiXCIsXG4gICBcImxhc3RVcmlcIjogXCJcIixcbiAgIFwicGFnZUNvdW50XCI6IDBcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUuZ2V0TWVNZXNzYWdlcyA9IGZ1bmN0aW9uIGdldE1lTWVzc2FnZXMocGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9tZS9tZXNzYWdlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VTaXplXCJdID0gcGFnZVNpemU7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicGFnZU51bWJlclwiXSA9IHBhZ2VOdW1iZXI7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgTGlzdCB2b2ljZW1haWwgbWVzc2FnZXNcbiAgKiBAbWVtYmVyT2YgVm9pY2VtYWlsQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwSWQgLSBHcm91cCBJRFxuICAqIEBwYXJhbSB7aW50ZWdlcn0gcGFnZVNpemUgLSBQYWdlIHNpemVcbiAgKiBAcGFyYW0ge2ludGVnZXJ9IHBhZ2VOdW1iZXIgLSBQYWdlIG51bWJlclxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbnRpdGllc1wiOiBbXSxcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJ0b3RhbFwiOiAwLFxuICAgXCJzZWxmVXJpXCI6IFwiXCIsXG4gICBcImZpcnN0VXJpXCI6IFwiXCIsXG4gICBcInByZXZpb3VzVXJpXCI6IFwiXCIsXG4gICBcIm5leHRVcmlcIjogXCJcIixcbiAgIFwibGFzdFVyaVwiOiBcIlwiLFxuICAgXCJwYWdlQ291bnRcIjogMFxufVxuICAqL1xuVm9pY2VtYWlsQXBpLnByb3RvdHlwZS5nZXRHcm91cHNHcm91cElkTWVzc2FnZXMgPSBmdW5jdGlvbiBnZXRHcm91cHNHcm91cElkTWVzc2FnZXMoZ3JvdXBJZCwgcGFnZVNpemUsIHBhZ2VOdW1iZXIpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9ncm91cHMve2dyb3VwSWR9L21lc3NhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZ3JvdXBJZCA9PT0gdW5kZWZpbmVkIHx8IGdyb3VwSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGdyb3VwSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7Z3JvdXBJZH0nLCBncm91cElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJwYWdlU2l6ZVwiXSA9IHBhZ2VTaXplO1xuICAgIHJlcXVlc3RRdWVyeVtcInBhZ2VOdW1iZXJcIl0gPSBwYWdlTnVtYmVyO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IExpc3Qgdm9pY2VtYWlsIG1lc3NhZ2VzXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBpZHMgLSBBbiBvcHRpb25hbCBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBWb2ljZW1haWxNZXNzYWdlIGlkc1xuICAqIEBwYXJhbSB7YXJyYXl9IGV4cGFuZCAtIElmIHRoZSBjYWxsZXIgaXMgYSBrbm93biB1c2VyLCB3aGljaCBmaWVsZHMsIGlmIGFueSwgdG8gZXhwYW5kIFZhbGlkIFZhbHVlczogY2FsbGVyVXNlci5yb3V0aW5nU3RhdHVzLCBjYWxsZXJVc2VyLnByaW1hcnlQcmVzZW5jZSwgY2FsbGVyVXNlci5jb252ZXJzYXRpb25TdW1tYXJ5LCBjYWxsZXJVc2VyLm91dE9mT2ZmaWNlLCBjYWxsZXJVc2VyLmdlb2xvY2F0aW9uXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLmdldE1lc3NhZ2VzID0gZnVuY3Rpb24gZ2V0TWVzc2FnZXMoaWRzLCBleHBhbmQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9tZXNzYWdlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIHJlcXVlc3RRdWVyeVtcImlkc1wiXSA9IGlkcztcbiAgICByZXF1ZXN0UXVlcnlbXCJleHBhbmRcIl0gPSBleHBhbmQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgQ29weSBhIHZvaWNlbWFpbCBtZXNzYWdlIHRvIGEgdXNlciBvciBncm91cFxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIFxuICAqIEBleGFtcGxlXG4gICogQm9keSBFeGFtcGxlOlxuICAqIHtcbiAgIFwidm9pY2VtYWlsTWVzc2FnZUlkXCI6IFwiXCIsXG4gICBcInVzZXJJZFwiOiBcIlwiLFxuICAgXCJncm91cElkXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcImF1ZGlvUmVjb3JkaW5nRHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICBcImF1ZGlvUmVjb3JkaW5nU2l6ZUJ5dGVzXCI6IDAsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcImNhbGxlck5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGVyVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkZWxldGVkXCI6IHRydWUsXG4gICBcIm5vdGVcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJncm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICAgICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUucG9zdE1lc3NhZ2VzID0gZnVuY3Rpb24gcG9zdE1lc3NhZ2VzKGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9tZXNzYWdlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhbGwgdm9pY2VtYWlsIG1lc3NhZ2VzXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqL1xuVm9pY2VtYWlsQXBpLnByb3RvdHlwZS5kZWxldGVNZXNzYWdlcyA9IGZ1bmN0aW9uIGRlbGV0ZU1lc3NhZ2VzKCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL21lc3NhZ2VzJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IG1lc3NhZ2UuXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlSWQgLSBNZXNzYWdlIElEXG4gICogQHBhcmFtIHthcnJheX0gZXhwYW5kIC0gSWYgdGhlIGNhbGxlciBpcyBhIGtub3duIHVzZXIsIHdoaWNoIGZpZWxkcywgaWYgYW55LCB0byBleHBhbmQgVmFsaWQgVmFsdWVzOiBjYWxsZXJVc2VyLnJvdXRpbmdTdGF0dXMsIGNhbGxlclVzZXIucHJpbWFyeVByZXNlbmNlLCBjYWxsZXJVc2VyLmNvbnZlcnNhdGlvblN1bW1hcnksIGNhbGxlclVzZXIub3V0T2ZPZmZpY2UsIGNhbGxlclVzZXIuZ2VvbG9jYXRpb25cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwiY29udmVyc2F0aW9uXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJzdGFydFRpbWVcIjogXCJcIixcbiAgICAgIFwiZW5kVGltZVwiOiBcIlwiLFxuICAgICAgXCJhZGRyZXNzXCI6IFwiXCIsXG4gICAgICBcInBhcnRpY2lwYW50c1wiOiBbXSxcbiAgICAgIFwiY29udmVyc2F0aW9uSWRzXCI6IFtdLFxuICAgICAgXCJtYXhQYXJ0aWNpcGFudHNcIjogMCxcbiAgICAgIFwicmVjb3JkaW5nU3RhdGVcIjogXCJcIixcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcImF1ZGlvUmVjb3JkaW5nRHVyYXRpb25TZWNvbmRzXCI6IDAsXG4gICBcImF1ZGlvUmVjb3JkaW5nU2l6ZUJ5dGVzXCI6IDAsXG4gICBcImNyZWF0ZWREYXRlXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiLFxuICAgXCJjYWxsZXJBZGRyZXNzXCI6IFwiXCIsXG4gICBcImNhbGxlck5hbWVcIjogXCJcIixcbiAgIFwiY2FsbGVyVXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJkZWxldGVkXCI6IHRydWUsXG4gICBcIm5vdGVcIjogXCJcIixcbiAgIFwidXNlclwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJncm91cFwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICAgIFwiZGF0ZU1vZGlmaWVkXCI6IFwiXCIsXG4gICAgICBcIm1lbWJlckNvdW50XCI6IDAsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwidHlwZVwiOiBcIlwiLFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwicnVsZXNWaXNpYmxlXCI6IHRydWUsXG4gICAgICBcInZpc2liaWxpdHlcIjogXCJcIixcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJzZWxmVXJpXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUuZ2V0TWVzc2FnZXNNZXNzYWdlSWQgPSBmdW5jdGlvbiBnZXRNZXNzYWdlc01lc3NhZ2VJZChtZXNzYWdlSWQsIGV4cGFuZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL21lc3NhZ2VzL3ttZXNzYWdlSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobWVzc2FnZUlkID09PSB1bmRlZmluZWQgfHwgbWVzc2FnZUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBtZXNzYWdlSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bWVzc2FnZUlkfScsIG1lc3NhZ2VJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wiZXhwYW5kXCJdID0gZXhwYW5kO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IFVwZGF0ZSBhIG1lc3NhZ2UuXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlSWQgLSBNZXNzYWdlIElEXG4gICogQHBhcmFtIHt9IGJvZHkgLSBWb2ljZW1haWxNZXNzYWdlXG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJyZWFkXCI6IHRydWUsXG4gICBcImRlbGV0ZWRcIjogdHJ1ZSxcbiAgIFwibm90ZVwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcImNvbnZlcnNhdGlvblwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwic3RhcnRUaW1lXCI6IFwiXCIsXG4gICAgICBcImVuZFRpbWVcIjogXCJcIixcbiAgICAgIFwiYWRkcmVzc1wiOiBcIlwiLFxuICAgICAgXCJwYXJ0aWNpcGFudHNcIjogW10sXG4gICAgICBcImNvbnZlcnNhdGlvbklkc1wiOiBbXSxcbiAgICAgIFwibWF4UGFydGljaXBhbnRzXCI6IDAsXG4gICAgICBcInJlY29yZGluZ1N0YXRlXCI6IFwiXCIsXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwicmVhZFwiOiB0cnVlLFxuICAgXCJhdWRpb1JlY29yZGluZ0R1cmF0aW9uU2Vjb25kc1wiOiAwLFxuICAgXCJhdWRpb1JlY29yZGluZ1NpemVCeXRlc1wiOiAwLFxuICAgXCJjcmVhdGVkRGF0ZVwiOiBcIlwiLFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwiY2FsbGVyQWRkcmVzc1wiOiBcIlwiLFxuICAgXCJjYWxsZXJOYW1lXCI6IFwiXCIsXG4gICBcImNhbGxlclVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZGVsZXRlZFwiOiB0cnVlLFxuICAgXCJub3RlXCI6IFwiXCIsXG4gICBcInVzZXJcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImNoYXRcIjoge30sXG4gICAgICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgICAgIFwiZW1haWxcIjogXCJcIixcbiAgICAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInN0YXRlXCI6IFwiXCIsXG4gICAgICBcInRpdGxlXCI6IFwiXCIsXG4gICAgICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICAgICBcIm1hbmFnZXJcIjoge30sXG4gICAgICBcImltYWdlc1wiOiBbXSxcbiAgICAgIFwidmVyc2lvblwiOiAwLFxuICAgICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgICAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgICAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICAgICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwiZ3JvdXBcIjoge1xuICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgXCJuYW1lXCI6IFwiXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICAgICBcImRhdGVNb2RpZmllZFwiOiBcIlwiLFxuICAgICAgXCJtZW1iZXJDb3VudFwiOiAwLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInR5cGVcIjogXCJcIixcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICAgICBcInJ1bGVzVmlzaWJsZVwiOiB0cnVlLFxuICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwiXCIsXG4gICAgICBcInNlbGZVcmlcIjogXCJcIlxuICAgfSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLnB1dE1lc3NhZ2VzTWVzc2FnZUlkID0gZnVuY3Rpb24gcHV0TWVzc2FnZXNNZXNzYWdlSWQobWVzc2FnZUlkLCBib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvbWVzc2FnZXMve21lc3NhZ2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihtZXNzYWdlSWQgPT09IHVuZGVmaW5lZCB8fCBtZXNzYWdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG1lc3NhZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttZXNzYWdlSWR9JywgbWVzc2FnZUlkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BVVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERlbGV0ZSBhIG1lc3NhZ2UuXG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlSWQgLSBNZXNzYWdlIElEXG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLmRlbGV0ZU1lc3NhZ2VzTWVzc2FnZUlkID0gZnVuY3Rpb24gZGVsZXRlTWVzc2FnZXNNZXNzYWdlSWQobWVzc2FnZUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvbWVzc2FnZXMve21lc3NhZ2VJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihtZXNzYWdlSWQgPT09IHVuZGVmaW5lZCB8fCBtZXNzYWdlSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG1lc3NhZ2VJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttZXNzYWdlSWR9JywgbWVzc2FnZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdERUxFVEUnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgbWVkaWEgcGxheWJhY2sgVVJJIGZvciB0aGlzIG1lc3NhZ2VcbiAgKiBAbWVtYmVyT2YgVm9pY2VtYWlsQXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VJZCAtIE1lc3NhZ2UgSURcbiAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0SWQgLSBUaGUgZGVzaXJlZCBtZWRpYSBmb3JtYXQuXG4gIFdBVixcbiAgV0VCTSxcbiAgV0FWX1VMQVcsXG4gIE9HR19WT1JCSVMsXG4gIE9HR19PUFVTLFxuICBOT05FLFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJtZWRpYUZpbGVVcmlcIjogXCJcIixcbiAgIFwibWVkaWFJbWFnZVVyaVwiOiBcIlwiXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLmdldE1lc3NhZ2VzTWVzc2FnZUlkTWVkaWEgPSBmdW5jdGlvbiBnZXRNZXNzYWdlc01lc3NhZ2VJZE1lZGlhKG1lc3NhZ2VJZCwgZm9ybWF0SWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC9tZXNzYWdlcy97bWVzc2FnZUlkfS9tZWRpYSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG1lc3NhZ2VJZCA9PT0gdW5kZWZpbmVkIHx8IG1lc3NhZ2VJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbWVzc2FnZUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne21lc3NhZ2VJZH0nLCBtZXNzYWdlSWQpO1xuICAgIHJlcXVlc3RRdWVyeVtcImZvcm1hdElkXCJdID0gZm9ybWF0SWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IHRoZSBjdXJyZW50IHVzZXIncyB2b2ljZW1haWwgcG9saWN5XG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImFsZXJ0VGltZW91dFNlY29uZHNcIjogMCxcbiAgIFwicGluXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLmdldE1lUG9saWN5ID0gZnVuY3Rpb24gZ2V0TWVQb2xpY3koKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi92b2ljZW1haWwvbWUvcG9saWN5JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgVXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyB2b2ljZW1haWwgcG9saWN5XG4gICogQG1lbWJlck9mIFZvaWNlbWFpbEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIHVzZXIncyB2b2ljZW1haWwgcG9saWN5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJhbGVydFRpbWVvdXRTZWNvbmRzXCI6IDAsXG4gICBcInBpblwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiYWxlcnRUaW1lb3V0U2Vjb25kc1wiOiAwLFxuICAgXCJwaW5cIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUucGF0Y2hNZVBvbGljeSA9IGZ1bmN0aW9uIHBhdGNoTWVQb2xpY3koYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvdm9pY2VtYWlsL21lL3BvbGljeSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUEFUQ0gnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSB1c2VyJ3Mgdm9pY2VtYWlsIHBvbGljeVxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJlbmFibGVkXCI6IHRydWUsXG4gICBcImFsZXJ0VGltZW91dFNlY29uZHNcIjogMCxcbiAgIFwicGluXCI6IFwiXCIsXG4gICBcIm1vZGlmaWVkRGF0ZVwiOiBcIlwiXG59XG4gICovXG5Wb2ljZW1haWxBcGkucHJvdG90eXBlLmdldFVzZXJwb2xpY2llc1VzZXJJZCA9IGZ1bmN0aW9uIGdldFVzZXJwb2xpY2llc1VzZXJJZCh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC91c2VycG9saWNpZXMve3VzZXJJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBVcGRhdGUgYSB1c2VyJ3Mgdm9pY2VtYWlsIHBvbGljeVxuICAqIEBtZW1iZXJPZiBWb2ljZW1haWxBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gVXNlciBJRFxuICAqIEBwYXJhbSB7fSBib2R5IC0gVGhlIHVzZXIncyB2b2ljZW1haWwgcG9saWN5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJhbGVydFRpbWVvdXRTZWNvbmRzXCI6IDAsXG4gICBcInBpblwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVuYWJsZWRcIjogdHJ1ZSxcbiAgIFwiYWxlcnRUaW1lb3V0U2Vjb25kc1wiOiAwLFxuICAgXCJwaW5cIjogXCJcIixcbiAgIFwibW9kaWZpZWREYXRlXCI6IFwiXCJcbn1cbiAgKi9cblZvaWNlbWFpbEFwaS5wcm90b3R5cGUucGF0Y2hVc2VycG9saWNpZXNVc2VySWQgPSBmdW5jdGlvbiBwYXRjaFVzZXJwb2xpY2llc1VzZXJJZCh1c2VySWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3ZvaWNlbWFpbC91c2VycG9saWNpZXMve3VzZXJJZH0nO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZih1c2VySWQgPT09IHVuZGVmaW5lZCB8fCB1c2VySWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHVzZXJJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3t1c2VySWR9JywgdXNlcklkKTtcbiAgICBpZihib2R5ID09PSB1bmRlZmluZWQgfHwgYm9keSA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogYm9keScpO1xuICAgIH1cbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFZvaWNlbWFpbEFwaTtcbiIsIi8qanNoaW50IC1XMDY5ICovXG4vKipcbiogQGNsYXNzIFdvcmtmb3JjZU1hbmFnZW1lbnRBcGlcbiogQGV4YW1wbGVcbiogdmFyIGFwaSA9IG5ldyBwdXJlY2xvdWQucGxhdGZvcm0uV29ya2ZvcmNlTWFuYWdlbWVudEFwaShwdXJlQ2xvdWRTZXNzaW9uKTtcbiovXG5mdW5jdGlvbiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpKHNlc3Npb24pIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpKSkge1xuICAgICAgICByZXR1cm4gbmV3IFdvcmtmb3JjZU1hbmFnZW1lbnRBcGkoc2Vzc2lvbik7XG4gICAgfVxuICAgIGlmKCEoc2Vzc2lvbiAmJiBzZXNzaW9uLm1ha2VSZXF1ZXN0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtmb3JjZU1hbmFnZW1lbnRBcGkgcmVxdWlyZXMgYSBQdXJlQ2xvdWRTZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG59XG5cbi8qKlxuICAqIEBzdW1tYXJ5IERvd25sb2FkIGRlY2lzaW9ucyBmaWxlcyBtZXRhZGF0YVxuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInNvcnRPcmRlclwiOiBcIlwiLFxuICAgXCJzb3J0QnlcIjogXCJcIixcbiAgIFwicGFnZVNpemVcIjogMCxcbiAgIFwicGFnZU51bWJlclwiOiAwLFxuICAgXCJyZXR1cm5GaWVsZHNcIjogW10sXG4gICBcImV4cGFuZFwiOiBbXSxcbiAgIFwidHlwZXNcIjogW10sXG4gICBcInF1ZXJ5XCI6IFtdXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImVudGl0aWVzXCI6IFtdLFxuICAgXCJwYWdlU2l6ZVwiOiAwLFxuICAgXCJwYWdlTnVtYmVyXCI6IDAsXG4gICBcInRvdGFsXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIixcbiAgIFwiZmlyc3RVcmlcIjogXCJcIixcbiAgIFwicHJldmlvdXNVcmlcIjogXCJcIixcbiAgIFwibmV4dFVyaVwiOiBcIlwiLFxuICAgXCJsYXN0VXJpXCI6IFwiXCIsXG4gICBcInBhZ2VDb3VudFwiOiAwXG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0RGVjaXNpb25zRG93bmxvYWRzU2VhcmNoID0gZnVuY3Rpb24gcG9zdERlY2lzaW9uc0Rvd25sb2Fkc1NlYXJjaChib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi93b3JrZm9yY2VtYW5hZ2VtZW50L2RlY2lzaW9ucy9kb3dubG9hZHMvc2VhcmNoJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoYm9keSA9PT0gdW5kZWZpbmVkIHx8IGJvZHkgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGJvZHknKTtcbiAgICB9XG4gICAgaWYoYm9keSAhPT0gdW5kZWZpbmVkICYmIGJvZHkgIT09IG51bGwpe1xuICAgICAgcmVxdWVzdEJvZHkgPSBib2R5O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdQT1NUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGRlY2lzaW9ucyBkb3dubG9hZCBsaW5rXG4gICogQG1lbWJlck9mIFdvcmtmb3JjZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gZG93bmxvYWRJZCAtIFRoZSBkZWNpc2lvbnMgZmlsZSBkb3dubG9hZCBpZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBkb3dubG9hZGZpbGVuYW1lIC0gVGhlIGZpbGUgbmFtZSB1c2VkIHRvIGdldCB0aGUgZG93bmxvYWQgdXJsXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImlkXCI6IFwiXCIsXG4gICBcInVybFwiOiBcIlwiXG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXREZWNpc2lvbnNEb3dubG9hZHNEb3dubG9hZElkID0gZnVuY3Rpb24gZ2V0RGVjaXNpb25zRG93bmxvYWRzRG93bmxvYWRJZChkb3dubG9hZElkLCBkb3dubG9hZGZpbGVuYW1lKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi93b3JrZm9yY2VtYW5hZ2VtZW50L2RlY2lzaW9ucy9kb3dubG9hZHMve2Rvd25sb2FkSWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYoZG93bmxvYWRJZCA9PT0gdW5kZWZpbmVkIHx8IGRvd25sb2FkSWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IGRvd25sb2FkSWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7ZG93bmxvYWRJZH0nLCBkb3dubG9hZElkKTtcbiAgICByZXF1ZXN0UXVlcnlbXCJkb3dubG9hZGZpbGVuYW1lXCJdID0gZG93bmxvYWRmaWxlbmFtZTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBDcmVhdGUgYSBmb3JlY2FzdFxuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHt9IGJvZHkgLSBUaGUgcmVxdWVzdCBib2R5XG4gICogQGV4YW1wbGVcbiAgKiBCb2R5IEV4YW1wbGU6XG4gICoge1xuICAgXCJudW1iZXJPZlBlcmlvZHNcIjogMCxcbiAgIFwicGVyaW9kRnJlcXVlbmN5XCI6IFwiXCIsXG4gICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXG4gICBcIm1ldHJpY3NcIjogW10sXG4gICBcIm1hbmFnZW1lbnRVbml0SWRcIjogXCJcIixcbiAgIFwiY29waWVkRm9yZWNhc3RJZFwiOiBcIlwiXG59XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm5vdGlmaWNhdGlvbklkXCI6IFwiXCIsXG4gICBcImlkXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiXG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0TG9uZ3Rlcm1mb3JlY2FzdHMgPSBmdW5jdGlvbiBwb3N0TG9uZ3Rlcm1mb3JlY2FzdHMoYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC9sb25ndGVybWZvcmVjYXN0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBib2R5Jyk7XG4gICAgfVxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCB1c2VyIHNjaGVkdWxlcyB3aXRoaW4gdGhlIGdpdmVuIHRpbWUgcmFuZ2VcbiAgKiBAbWVtYmVyT2YgV29ya2ZvcmNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBtdUlkIC0gVGhlIG11SWQgb2YgdGhlIG1hbmFnZW1lbnQgdW5pdC5cbiAgKiBAcGFyYW0ge30gYm9keSAtIGJvZHlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInVzZXJJZHNcIjogW10sXG4gICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgXCJlbmREYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibWFuYWdlbWVudFVuaXRUaW1lWm9uZVwiOiBcIlwiLFxuICAgXCJ1c2VyU2NoZWR1bGVzXCI6IHt9XG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0TWFuYWdlbWVudHVuaXRzTXVJZFNjaGVkdWxlc1NlYXJjaCA9IGZ1bmN0aW9uIHBvc3RNYW5hZ2VtZW50dW5pdHNNdUlkU2NoZWR1bGVzU2VhcmNoKG11SWQsIGJvZHkpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3dvcmtmb3JjZW1hbmFnZW1lbnQvbWFuYWdlbWVudHVuaXRzL3ttdUlkfS9zY2hlZHVsZXMvc2VhcmNoJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYobXVJZCA9PT0gdW5kZWZpbmVkIHx8IG11SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IG11SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7bXVJZH0nLCBtdUlkKTtcbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSBsaXN0IG9mIHRpbWUgb2ZmIHJlcXVlc3RzIGZvciBhbnkgdXNlclxuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG11SWQgLSBUaGUgbXVJZCBvZiB0aGUgbWFuYWdlbWVudCB1bml0LlxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBUaGUgdXNlcklkIHRvIHdob20gdGhlIFRpbWUgT2ZmIFJlcXVlc3QgYXBwbGllcy5cbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY2VudGx5UmV2aWV3ZWQgLSBMaW1pdCByZXN1bHRzIHRvIHJlcXVlc3RzIHRoYXQgaGF2ZSBiZWVuIHJldmlld2VkIHdpdGhpbiB0aGUgcHJlY2VkaW5nIDMwIGRheXNcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ0aW1lT2ZmUmVxdWVzdHNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxufVxuICAqL1xuV29ya2ZvcmNlTWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0TWFuYWdlbWVudHVuaXRzTXVJZFVzZXJzVXNlcklkVGltZW9mZnJlcXVlc3RzID0gZnVuY3Rpb24gZ2V0TWFuYWdlbWVudHVuaXRzTXVJZFVzZXJzVXNlcklkVGltZW9mZnJlcXVlc3RzKG11SWQsIHVzZXJJZCwgcmVjZW50bHlSZXZpZXdlZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC9tYW5hZ2VtZW50dW5pdHMve211SWR9L3VzZXJzL3t1c2VySWR9L3RpbWVvZmZyZXF1ZXN0cyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG11SWQgPT09IHVuZGVmaW5lZCB8fCBtdUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBtdUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne211SWR9JywgbXVJZCk7XG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgcmVxdWVzdFF1ZXJ5W1wicmVjZW50bHlSZXZpZXdlZFwiXSA9IHJlY2VudGx5UmV2aWV3ZWQ7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnR0VUJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgdGltZSBvZmYgcmVxdWVzdCBieSBpZFxuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IG11SWQgLSBUaGUgbXVJZCBvZiB0aGUgbWFuYWdlbWVudCB1bml0LlxuICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBUaGUgdXNlcklkIHRvIHdob20gdGhlIFRpbWUgT2ZmIFJlcXVlc3QgYXBwbGllcy5cbiAgKiBAcGFyYW0ge3N0cmluZ30gdGltZU9mZlJlcXVlc3RJZCAtIFRpbWUgT2ZmIFJlcXVlc3QgSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImlzRnVsbERheVJlcXVlc3RcIjogdHJ1ZSxcbiAgIFwibWFya2VkQXNSZWFkXCI6IHRydWUsXG4gICBcImFjdGl2aXR5Q29kZUlkXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJwYXJ0aWFsRGF5U3RhcnREYXRlVGltZXNcIjogW10sXG4gICBcImRhaWx5RHVyYXRpb25NaW51dGVzXCI6IDAsXG4gICBcIm5vdGVzXCI6IFwiXCIsXG4gICBcInN1Ym1pdHRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInN1Ym1pdHRlZERhdGVcIjogXCJcIixcbiAgIFwicmV2aWV3ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyZXZpZXdlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmdWxsRGF5TWFuYWdlbWVudFVuaXREYXRlc1wiOiBbXVxufVxuICAqL1xuV29ya2ZvcmNlTWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0TWFuYWdlbWVudHVuaXRzTXVJZFVzZXJzVXNlcklkVGltZW9mZnJlcXVlc3RzVGltZW9mZnJlcXVlc3RJZCA9IGZ1bmN0aW9uIGdldE1hbmFnZW1lbnR1bml0c011SWRVc2Vyc1VzZXJJZFRpbWVvZmZyZXF1ZXN0c1RpbWVvZmZyZXF1ZXN0SWQobXVJZCwgdXNlcklkLCB0aW1lT2ZmUmVxdWVzdElkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi93b3JrZm9yY2VtYW5hZ2VtZW50L21hbmFnZW1lbnR1bml0cy97bXVJZH0vdXNlcnMve3VzZXJJZH0vdGltZW9mZnJlcXVlc3RzL3t0aW1lT2ZmUmVxdWVzdElkfSc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKG11SWQgPT09IHVuZGVmaW5lZCB8fCBtdUlkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiBtdUlkJyk7XG4gICAgfVxuICAgIHJlcXVlc3RQYXRoID0gcmVxdWVzdFBhdGgucmVwbGFjZSgne211SWR9JywgbXVJZCk7XG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dXNlcklkfScsIHVzZXJJZCk7XG4gICAgaWYodGltZU9mZlJlcXVlc3RJZCA9PT0gdW5kZWZpbmVkIHx8IHRpbWVPZmZSZXF1ZXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHRpbWVPZmZSZXF1ZXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dGltZU9mZlJlcXVlc3RJZH0nLCB0aW1lT2ZmUmVxdWVzdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYWdlbnRzIGluIHRoZSBtYW5hZ2VtZW50IHVuaXRcbiAgKiBAbWVtYmVyT2YgV29ya2ZvcmNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7c3RyaW5nfSBtdUlkIC0gVGhlIG11SWQgb2YgdGhlIG1hbmFnZW1lbnQgdW5pdC5cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiZW50aXRpZXNcIjogW11cbn1cbiAgKi9cbldvcmtmb3JjZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldE1hbmFnZW1lbnR1bml0c011SWRVc2VycyA9IGZ1bmN0aW9uIGdldE1hbmFnZW1lbnR1bml0c011SWRVc2VycyhtdUlkKXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi93b3JrZm9yY2VtYW5hZ2VtZW50L21hbmFnZW1lbnR1bml0cy97bXVJZH0vdXNlcnMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihtdUlkID09PSB1bmRlZmluZWQgfHwgbXVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbXVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttdUlkfScsIG11SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhY3Rpdml0eSBjb2RlcyBjb3JyZXNwb25kaW5nIHRvIGEgbWFuYWdlbWVudCB1bml0XG4gICogQG1lbWJlck9mIFdvcmtmb3JjZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gbXVJZCAtIFRoZSBtdUlkIG9mIHRoZSBtYW5hZ2VtZW50IHVuaXQuXG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiB7XG4gICBcImFjdGl2aXR5Q29kZXNcIjoge31cbn1cbiAgKi9cbldvcmtmb3JjZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldE1hbmFnZW1lbnR1bml0c011SWRBY3Rpdml0eWNvZGVzID0gZnVuY3Rpb24gZ2V0TWFuYWdlbWVudHVuaXRzTXVJZEFjdGl2aXR5Y29kZXMobXVJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC9tYW5hZ2VtZW50dW5pdHMve211SWR9L2FjdGl2aXR5Y29kZXMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICBpZihtdUlkID09PSB1bmRlZmluZWQgfHwgbXVJZCA9PT0gbnVsbCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgIHBhcmFtZXRlcjogbXVJZCcpO1xuICAgIH1cbiAgICByZXF1ZXN0UGF0aCA9IHJlcXVlc3RQYXRoLnJlcGxhY2UoJ3ttdUlkfScsIG11SWQpO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIHNjaGVkdWxlIGZvciB0aGUgY3VycmVudCB1c2VyXG4gICogQG1lbWJlck9mIFdvcmtmb3JjZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge30gYm9keSAtIGJvZHlcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcInN0YXJ0RGF0ZVwiOiBcIlwiLFxuICAgXCJlbmREYXRlXCI6IFwiXCJcbn1cbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwibWFuYWdlbWVudFVuaXRUaW1lWm9uZVwiOiBcIlwiLFxuICAgXCJ1c2VyU2NoZWR1bGVzXCI6IHt9XG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wb3N0U2NoZWR1bGVzID0gZnVuY3Rpb24gcG9zdFNjaGVkdWxlcyhib2R5KXtcbiAgICB2YXIgcmVxdWVzdFBhdGggPSAnL2FwaS92Mi93b3JrZm9yY2VtYW5hZ2VtZW50L3NjaGVkdWxlcyc7XG4gICAgdmFyIHJlcXVlc3RRdWVyeSA9IHt9O1xuICAgIHZhciByZXF1ZXN0Qm9keTtcblxuICAgIGlmKGJvZHkgIT09IHVuZGVmaW5lZCAmJiBib2R5ICE9PSBudWxsKXtcbiAgICAgIHJlcXVlc3RCb2R5ID0gYm9keTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5tYWtlUmVxdWVzdCgnUE9TVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cbi8qKlxuICAqIEBzdW1tYXJ5IEdldCBhIGxpc3Qgb2YgdGltZSBvZmYgcmVxdWVzdHMgZm9yIHRoZSBjdXJyZW50IHVzZXJcbiAgKiBAbWVtYmVyT2YgV29ya2ZvcmNlTWFuYWdlbWVudEFwaVxuICAqIEBpbnN0YW5jZVxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVjZW50bHlSZXZpZXdlZCAtIExpbWl0IHJlc3VsdHMgdG8gcmVxdWVzdHMgdGhhdCBoYXZlIGJlZW4gcmV2aWV3ZWQgd2l0aGluIHRoZSBwcmVjZWRpbmcgMzAgZGF5c1xuICAqIEBleGFtcGxlXG4gICogMjAwIFJlc3BvbnNlIEV4YW1wbGU6XG4gICoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcInRpbWVPZmZSZXF1ZXN0c1wiOiBbXSxcbiAgIFwic2VsZlVyaVwiOiBcIlwiXG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5nZXRUaW1lb2ZmcmVxdWVzdHMgPSBmdW5jdGlvbiBnZXRUaW1lb2ZmcmVxdWVzdHMocmVjZW50bHlSZXZpZXdlZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC90aW1lb2ZmcmVxdWVzdHMnO1xuICAgIHZhciByZXF1ZXN0UXVlcnkgPSB7fTtcbiAgICB2YXIgcmVxdWVzdEJvZHk7XG5cbiAgICByZXF1ZXN0UXVlcnlbXCJyZWNlbnRseVJldmlld2VkXCJdID0gcmVjZW50bHlSZXZpZXdlZDtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBHZXQgYSB0aW1lIG9mZiByZXF1ZXN0IGZvciB0aGUgY3VycmVudCB1c2VyIGJ5IGlkXG4gICogQG1lbWJlck9mIFdvcmtmb3JjZU1hbmFnZW1lbnRBcGlcbiAgKiBAaW5zdGFuY2VcbiAgKiBAcGFyYW0ge3N0cmluZ30gdGltZU9mZlJlcXVlc3RJZCAtIFRpbWUgT2ZmIFJlcXVlc3QgSWRcbiAgKiBAZXhhbXBsZVxuICAqIDIwMCBSZXNwb25zZSBFeGFtcGxlOlxuICAqIHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJ1c2VyXCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcImlzRnVsbERheVJlcXVlc3RcIjogdHJ1ZSxcbiAgIFwibWFya2VkQXNSZWFkXCI6IHRydWUsXG4gICBcImFjdGl2aXR5Q29kZUlkXCI6IFwiXCIsXG4gICBcInN0YXR1c1wiOiBcIlwiLFxuICAgXCJwYXJ0aWFsRGF5U3RhcnREYXRlVGltZXNcIjogW10sXG4gICBcImRhaWx5RHVyYXRpb25NaW51dGVzXCI6IDAsXG4gICBcIm5vdGVzXCI6IFwiXCIsXG4gICBcInN1Ym1pdHRlZEJ5XCI6IHtcbiAgICAgIFwiaWRcIjogXCJcIixcbiAgICAgIFwibmFtZVwiOiBcIlwiLFxuICAgICAgXCJjaGF0XCI6IHt9LFxuICAgICAgXCJkZXBhcnRtZW50XCI6IFwiXCIsXG4gICAgICBcImVtYWlsXCI6IFwiXCIsXG4gICAgICBcInByaW1hcnlDb250YWN0SW5mb1wiOiBbXSxcbiAgICAgIFwiYWRkcmVzc2VzXCI6IFtdLFxuICAgICAgXCJzdGF0ZVwiOiBcIlwiLFxuICAgICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgICAgXCJ1c2VybmFtZVwiOiBcIlwiLFxuICAgICAgXCJtYW5hZ2VyXCI6IHt9LFxuICAgICAgXCJpbWFnZXNcIjogW10sXG4gICAgICBcInZlcnNpb25cIjogMCxcbiAgICAgIFwicm91dGluZ1N0YXR1c1wiOiB7fSxcbiAgICAgIFwicHJlc2VuY2VcIjoge30sXG4gICAgICBcImNvbnZlcnNhdGlvblN1bW1hcnlcIjoge30sXG4gICAgICBcIm91dE9mT2ZmaWNlXCI6IHt9LFxuICAgICAgXCJnZW9sb2NhdGlvblwiOiB7fSxcbiAgICAgIFwic3RhdGlvblwiOiB7fSxcbiAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB7fSxcbiAgICAgIFwicHJvZmlsZVNraWxsc1wiOiBbXSxcbiAgICAgIFwibG9jYXRpb25zXCI6IFtdLFxuICAgICAgXCJzZWxmVXJpXCI6IFwiXCJcbiAgIH0sXG4gICBcInN1Ym1pdHRlZERhdGVcIjogXCJcIixcbiAgIFwicmV2aWV3ZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJyZXZpZXdlZERhdGVcIjogXCJcIixcbiAgIFwibW9kaWZpZWRCeVwiOiB7XG4gICAgICBcImlkXCI6IFwiXCIsXG4gICAgICBcIm5hbWVcIjogXCJcIixcbiAgICAgIFwiY2hhdFwiOiB7fSxcbiAgICAgIFwiZGVwYXJ0bWVudFwiOiBcIlwiLFxuICAgICAgXCJlbWFpbFwiOiBcIlwiLFxuICAgICAgXCJwcmltYXJ5Q29udGFjdEluZm9cIjogW10sXG4gICAgICBcImFkZHJlc3Nlc1wiOiBbXSxcbiAgICAgIFwic3RhdGVcIjogXCJcIixcbiAgICAgIFwidGl0bGVcIjogXCJcIixcbiAgICAgIFwidXNlcm5hbWVcIjogXCJcIixcbiAgICAgIFwibWFuYWdlclwiOiB7fSxcbiAgICAgIFwiaW1hZ2VzXCI6IFtdLFxuICAgICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICAgICBcInJvdXRpbmdTdGF0dXNcIjoge30sXG4gICAgICBcInByZXNlbmNlXCI6IHt9LFxuICAgICAgXCJjb252ZXJzYXRpb25TdW1tYXJ5XCI6IHt9LFxuICAgICAgXCJvdXRPZk9mZmljZVwiOiB7fSxcbiAgICAgIFwiZ2VvbG9jYXRpb25cIjoge30sXG4gICAgICBcInN0YXRpb25cIjoge30sXG4gICAgICBcImF1dGhvcml6YXRpb25cIjoge30sXG4gICAgICBcInByb2ZpbGVTa2lsbHNcIjogW10sXG4gICAgICBcImxvY2F0aW9uc1wiOiBbXSxcbiAgICAgIFwic2VsZlVyaVwiOiBcIlwiXG4gICB9LFxuICAgXCJtb2RpZmllZERhdGVcIjogXCJcIixcbiAgIFwic2VsZlVyaVwiOiBcIlwiLFxuICAgXCJmdWxsRGF5TWFuYWdlbWVudFVuaXREYXRlc1wiOiBbXVxufVxuICAqL1xuV29ya2ZvcmNlTWFuYWdlbWVudEFwaS5wcm90b3R5cGUuZ2V0VGltZW9mZnJlcXVlc3RzVGltZW9mZnJlcXVlc3RJZCA9IGZ1bmN0aW9uIGdldFRpbWVvZmZyZXF1ZXN0c1RpbWVvZmZyZXF1ZXN0SWQodGltZU9mZlJlcXVlc3RJZCl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC90aW1lb2ZmcmVxdWVzdHMve3RpbWVPZmZSZXF1ZXN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodGltZU9mZlJlcXVlc3RJZCA9PT0gdW5kZWZpbmVkIHx8IHRpbWVPZmZSZXF1ZXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHRpbWVPZmZSZXF1ZXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dGltZU9mZlJlcXVlc3RJZH0nLCB0aW1lT2ZmUmVxdWVzdElkKTtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1ha2VSZXF1ZXN0KCdHRVQnLCByZXF1ZXN0UGF0aCwgcmVxdWVzdFF1ZXJ5LCByZXF1ZXN0Qm9keSk7XG59O1xuXG4vKipcbiAgKiBAc3VtbWFyeSBNYXJrIGEgdGltZSBvZmYgcmVxdWVzdCBmb3IgdGhlIGN1cnJlbnQgdXNlciBhcyByZWFkIG9yIHVucmVhZFxuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHtzdHJpbmd9IHRpbWVPZmZSZXF1ZXN0SWQgLSBUaW1lIE9mZiBSZXF1ZXN0IElkXG4gICogQHBhcmFtIHt9IGJvZHkgLSBcbiAgKiBAZXhhbXBsZVxuICAqIEJvZHkgRXhhbXBsZTpcbiAgKiB7XG4gICBcIm1hcmtlZEFzUmVhZFwiOiB0cnVlXG59XG4gICovXG5Xb3JrZm9yY2VNYW5hZ2VtZW50QXBpLnByb3RvdHlwZS5wYXRjaFRpbWVvZmZyZXF1ZXN0c1RpbWVvZmZyZXF1ZXN0SWQgPSBmdW5jdGlvbiBwYXRjaFRpbWVvZmZyZXF1ZXN0c1RpbWVvZmZyZXF1ZXN0SWQodGltZU9mZlJlcXVlc3RJZCwgYm9keSl7XG4gICAgdmFyIHJlcXVlc3RQYXRoID0gJy9hcGkvdjIvd29ya2ZvcmNlbWFuYWdlbWVudC90aW1lb2ZmcmVxdWVzdHMve3RpbWVPZmZSZXF1ZXN0SWR9JztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodGltZU9mZlJlcXVlc3RJZCA9PT0gdW5kZWZpbmVkIHx8IHRpbWVPZmZSZXF1ZXN0SWQgPT09IG51bGwpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkICBwYXJhbWV0ZXI6IHRpbWVPZmZSZXF1ZXN0SWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFBhdGggPSByZXF1ZXN0UGF0aC5yZXBsYWNlKCd7dGltZU9mZlJlcXVlc3RJZH0nLCB0aW1lT2ZmUmVxdWVzdElkKTtcbiAgICBpZihib2R5ICE9PSB1bmRlZmluZWQgJiYgYm9keSAhPT0gbnVsbCl7XG4gICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFBhdGgsIHJlcXVlc3RRdWVyeSwgcmVxdWVzdEJvZHkpO1xufTtcblxuLyoqXG4gICogQHN1bW1hcnkgR2V0IGEgbGlzdCBvZiBVc2VyU2NoZWR1bGVBZGhlcmVuY2UgcmVjb3JkcyBmb3IgdGhlIHJlcXVlc3RlZCB1c2Vyc1xuICAqIEBtZW1iZXJPZiBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpXG4gICogQGluc3RhbmNlXG4gICogQHBhcmFtIHthcnJheX0gdXNlcklkIC0gVXNlciBJZChzKSBmb3Igd2hpY2ggdG8gZmV0Y2ggY3VycmVudCBzY2hlZHVsZSBhZGhlcmVuY2UgaW5mb3JtYXRpb24uICBNaW4gMSwgTWF4IG9mIDEwMCB1c2VySWRzIHBlciByZXF1ZXN0XG4gICogQGV4YW1wbGVcbiAgKiAyMDAgUmVzcG9uc2UgRXhhbXBsZTpcbiAgKiBbXG4ge1xuICBcImlkXCI6IFwiXCIsXG4gIFwibmFtZVwiOiBcIlwiLFxuICBcInVzZXJcIjoge1xuICAgXCJpZFwiOiBcIlwiLFxuICAgXCJuYW1lXCI6IFwiXCIsXG4gICBcImNoYXRcIjoge30sXG4gICBcImRlcGFydG1lbnRcIjogXCJcIixcbiAgIFwiZW1haWxcIjogXCJcIixcbiAgIFwicHJpbWFyeUNvbnRhY3RJbmZvXCI6IFtdLFxuICAgXCJhZGRyZXNzZXNcIjogW10sXG4gICBcInN0YXRlXCI6IFwiXCIsXG4gICBcInRpdGxlXCI6IFwiXCIsXG4gICBcInVzZXJuYW1lXCI6IFwiXCIsXG4gICBcIm1hbmFnZXJcIjoge30sXG4gICBcImltYWdlc1wiOiBbXSxcbiAgIFwidmVyc2lvblwiOiAwLFxuICAgXCJyb3V0aW5nU3RhdHVzXCI6IHt9LFxuICAgXCJwcmVzZW5jZVwiOiB7fSxcbiAgIFwiY29udmVyc2F0aW9uU3VtbWFyeVwiOiB7fSxcbiAgIFwib3V0T2ZPZmZpY2VcIjoge30sXG4gICBcImdlb2xvY2F0aW9uXCI6IHt9LFxuICAgXCJzdGF0aW9uXCI6IHt9LFxuICAgXCJhdXRob3JpemF0aW9uXCI6IHt9LFxuICAgXCJwcm9maWxlU2tpbGxzXCI6IFtdLFxuICAgXCJsb2NhdGlvbnNcIjogW10sXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcIm1hbmFnZW1lbnRVbml0XCI6IHtcbiAgIFwiaWRcIjogXCJcIixcbiAgIFwibmFtZVwiOiBcIlwiLFxuICAgXCJzdGFydERheU9mV2Vla1wiOiBcIlwiLFxuICAgXCJ0aW1lem9uZVwiOiBcIlwiLFxuICAgXCJ2ZXJzaW9uXCI6IDAsXG4gICBcInNlbGZVcmlcIjogXCJcIlxuICB9LFxuICBcInNjaGVkdWxlZEFjdGl2aXR5Q2F0ZWdvcnlcIjogXCJcIixcbiAgXCJzeXN0ZW1QcmVzZW5jZVwiOiBcIlwiLFxuICBcIm9yZ2FuaXphdGlvblNlY29uZGFyeVByZXNlbmNlSWRcIjogXCJcIixcbiAgXCJyb3V0aW5nU3RhdHVzXCI6IFwiXCIsXG4gIFwiYWN0dWFsQWN0aXZpdHlDYXRlZ29yeVwiOiBcIlwiLFxuICBcImlzT3V0T2ZPZmZpY2VcIjogdHJ1ZSxcbiAgXCJhZGhlcmVuY2VTdGF0ZVwiOiBcIlwiLFxuICBcImltcGFjdFwiOiBcIlwiLFxuICBcInRpbWVPZkFkaGVyZW5jZUNoYW5nZVwiOiBcIlwiLFxuICBcInNlbGZVcmlcIjogXCJcIlxuIH1cbl1cbiAgKi9cbldvcmtmb3JjZU1hbmFnZW1lbnRBcGkucHJvdG90eXBlLmdldEFkaGVyZW5jZSA9IGZ1bmN0aW9uIGdldEFkaGVyZW5jZSh1c2VySWQpe1xuICAgIHZhciByZXF1ZXN0UGF0aCA9ICcvYXBpL3YyL3dvcmtmb3JjZW1hbmFnZW1lbnQvYWRoZXJlbmNlJztcbiAgICB2YXIgcmVxdWVzdFF1ZXJ5ID0ge307XG4gICAgdmFyIHJlcXVlc3RCb2R5O1xuXG4gICAgaWYodXNlcklkID09PSB1bmRlZmluZWQgfHwgdXNlcklkID09PSBudWxsKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCAgcGFyYW1ldGVyOiB1c2VySWQnKTtcbiAgICB9XG4gICAgcmVxdWVzdFF1ZXJ5W1widXNlcklkXCJdID0gdXNlcklkO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb24ubWFrZVJlcXVlc3QoJ0dFVCcsIHJlcXVlc3RQYXRoLCByZXF1ZXN0UXVlcnksIHJlcXVlc3RCb2R5KTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBXb3JrZm9yY2VNYW5hZ2VtZW50QXBpO1xuIiwiXG52YXIgc3VwZXJhZ2VudCA9IHJlcXVpcmUoJ3N1cGVyYWdlbnQnKTtcbnZhciBQcm9taXNlID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xucmVxdWlyZSgnZXM2LXByb21pc2UnKS5wb2x5ZmlsbCgpO1xuXG4vL0FQSSBWRVJTSU9OIC0gMC44My44XG4vKipcbiAgKiBAZGVzY3JpcHRpb24gV2l0aCB0aGUgUHVyZUNsb3VkIFBsYXRmb3JtIEFQSSwgeW91IGNhbiBjb250cm9sIGFsbCBhc3BlY3RzIG9mIHlvdXIgUHVyZUNsb3VkIGVudmlyb25tZW50LiBXaXRoIHRoZSBBUElzIHlvdSBjYW4gYWNjZXNzIHRoZSBzeXN0ZW0gY29uZmlndXJhdGlvbiwgbWFuYWdlIGNvbnZlcnNhdGlvbnMgYW5kIG1vcmUuXG4gICogQGNsYXNzXG4gICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuc3RyYXRlZ3kgLSBBdXRoZW50aWNhdGlvbiBzdHJhdGVneTogXCJ0b2tlblwiLCBcImltcGxpY2l0XCIsIFwiY2xpZW50LWNyZWRlbnRpYWxzXCJcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5lbnZpcm9ubWVudCAtIChPcHRpb25hbCwgZGVmYXVsdCBcIm15cHVyZWNsb3VkLmNvbVwiKSBFbnZpcm9ubWVudCB0aGUgc2Vzc2lvbiB1c2UsIGUuZy4gbXlwdXJlY2xvdWQuaWUsIG15cHVyZWNsb3VkLmNvbS5hdSwgZXRjLlxuICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNsaWVudElkIC0gKE9wdGlvbmFsKSBDbGllbnQgaWRlbnRpZmllciBmb3IgXCJpbXBsaWNpdFwiIG9yIFwiY2xpZW50LWNyZWRlbnRpYWxzXCIgc3RyYXRlZ2llc1xuICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNsaWVudFNlY3JldCAtIChPcHRpb25hbCkgQ2xpZW50IHNlY3JldCBrZXkgZm9yIFwiY2xpZW50LWNyZWRlbnRpYWxzXCIgc3RyYXRlZ3lcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVybCAtIChPcHRpb25hbCkgQ2FsbGJhY2sgVVJMIGZvciBcImltcGxpY2l0XCIgc3RyYXRlZ3lcbiAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy50b2tlbiAtIChPcHRpb25hbCkgRXhpc3RpbmcgdG9rZW4gZm9yIFwidG9rZW5cIiBzdHJhdGVneVxuICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnN0b3JhZ2VLZXkgLSAoT3B0aW9uYWwpIEtleSB0byBzZXQgaW4gbG9jYWxTdG9yYWdlIHdpdGggdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuXG4gICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMudGltZW91dCAtIChPcHRpb25hbCkgUmVxdWVzdCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kd1xuICAqKi9cbmZ1bmN0aW9uIFB1cmVDbG91ZFNlc3Npb24ob3B0aW9ucykge1xuICAgIGlmKCEodGhpcyBpbnN0YW5jZW9mIFB1cmVDbG91ZFNlc3Npb24pKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVyZUNsb3VkU2Vzc2lvbihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZighb3B0aW9ucy50aW1lb3V0KXtcbiAgICAgICAgb3B0aW9ucy50aW1lb3V0ID0gMjAwMDtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5fc2V0VmFsdWVzRnJvbVVybEhhc2goKTtcblxuICAgIHRoaXMub3B0aW9ucy50b2tlbiA9IHRoaXMuX2dldFRva2VuKCk7XG4gICAgdGhpcy5zZXRFbnZpcm9ubWVudCh0aGlzLm9wdGlvbnMuZW52aXJvbm1lbnQpO1xuXG59XG5cbi8qKlxuICAqIEBkZXNjcmlwdGlvbiBTZXRzIHRoZSBlbnZpcm9ubWVudCB1c2VkIGJ5IHRoZSBzZXNzaW9uXG4gICogQHBhcmFtIHtzdHJpbmd9IGVudmlyb25tZW50IC0gKE9wdGlvbmFsLCBkZWZhdWx0IFwibXlwdXJlY2xvdWQuY29tXCIpIEVudmlyb25tZW50IHRoZSBzZXNzaW9uIHVzZSwgZS5nLiBteXB1cmVjbG91ZC5pZSwgbXlwdXJlY2xvdWQuY29tLmF1LCBldGMuXG4gICoqL1xuUHVyZUNsb3VkU2Vzc2lvbi5wcm90b3R5cGUuc2V0RW52aXJvbm1lbnQgPSBmdW5jdGlvbiBzZXRFbnZpcm9ubWVudChlbnZpcm9ubWVudCkge1xuICAgIHRoaXMub3B0aW9ucy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50IHx8ICdteXB1cmVjbG91ZC5jb20nO1xuICAgIHRoaXMuYXBpVXJsID0gJ2h0dHBzOi8vYXBpLicgKyB0aGlzLm9wdGlvbnMuZW52aXJvbm1lbnQ7XG4gICAgdGhpcy5hdXRoVXJsID0gJ2h0dHBzOi8vbG9naW4uJyArIHRoaXMub3B0aW9ucy5lbnZpcm9ubWVudDtcbn07XG5cblxuLyoqXG4gICogQGRlc2NyaXB0aW9uIFNldHMgYW4gZXJyb3IgaGFuZGxlciB0byBiZSBjYWxsZWQgYW55IHRpbWUgdGhlcmUgaXMgYSA0MDEgVW5hdXRoZW50aWNhdGVkIGVycm9yIHJldHVybmVkIGJ5IHRoZSBhcGlcbiAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBlcnJvckhhbmRsZXIgLSBUaGUgZnVuY3Rpb24gdG8gY2FsbC5cbiAgKiovXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5zZXRVbmF1dGhlbnRpY2F0ZWRFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiBzZXRFbnZpcm9ubWVudChlcnJvckhhbmRsZXIpIHtcbiAgICB0aGlzLnVuYXV0aGVudGljYXRlZEVycm9ySGFuZGxlciA9IGVycm9ySGFuZGxlcjtcbn07XG5cbi8qKlxuICAqIEBkZXNjcmlwdGlvbiBBdHRlbXB0cyB0byBsb2dpbiB3aXRoIHRoZSBhcHByb3ByaWF0ZSBhdXRoZW50aWNhdGlvbiBzdHJhdGVneVxuICAqIEByZXR1cm5zIFByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgb24gc3VjY2Vzc2Z1bCBhdXRoZW50aWNhdGlvbiwgb3RoZXJ3aXNlIHJlamVjdHMgd2l0aCBhbiBlcnJvclxuICAqKi9cblB1cmVDbG91ZFNlc3Npb24ucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24gbG9naW4oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudG9rZW4gPyB0aGlzLl90ZXN0VG9rZW5BY2Nlc3MoKS5jYXRjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VsZi5fYXV0aGVudGljYXRlKCk7XG4gICAgICAgIH0pIDogdGhpcy5fYXV0aGVudGljYXRlKCk7XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fYXV0aGVudGljYXRlID0gZnVuY3Rpb24gX2F1dGhlbnRpY2F0ZSgpIHtcbiAgdmFyIHN0cmF0ZWd5ID0gdGhpcy5vcHRpb25zLnN0cmF0ZWd5O1xuICBzd2l0Y2goc3RyYXRlZ3kpIHtcbiAgICBjYXNlICd0b2tlbic6XG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLm9wdGlvbnMudG9rZW47XG4gICAgICByZXR1cm4gdGhpcy5fbG9naW5XaXRoVG9rZW4odG9rZW4pO1xuICAgIGNhc2UgJ2ltcGxpY2l0JzpcbiAgICAgIHZhciBpbXBsaWNpdGNsaWVudElkID0gdGhpcy5vcHRpb25zLmNsaWVudElkO1xuICAgICAgdmFyIHJlZGlyZWN0VXJsID0gdGhpcy5vcHRpb25zLnJlZGlyZWN0VXJsO1xuICAgICAgdmFyIHN0YXRlID0gdGhpcy5vcHRpb25zLnN0YXRlO1xuICAgICAgcmV0dXJuIHRoaXMuX2xvZ2luV2l0aEltcGxpY2l0R3JhbnQoaW1wbGljaXRjbGllbnRJZCwgcmVkaXJlY3RVcmwsIHN0YXRlKTtcbiAgICBjYXNlICdjbGllbnQtY3JlZGVudGlhbHMnOlxuICAgICAgdmFyIGNsaWVudElkID0gdGhpcy5vcHRpb25zLmNsaWVudElkO1xuICAgICAgdmFyIGNsaWVudFNlY3JldCA9IHRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQ7XG4gICAgICByZXR1cm4gdGhpcy5fbG9naW5XaXRoQ2xpZW50Q3JlZGVudGlhbHMoY2xpZW50SWQsIGNsaWVudFNlY3JldCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gc3RyYXRlZ3kgXCInK3N0cmF0ZWd5KydcIiBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICB9XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fdGVzdFRva2VuQWNjZXNzID0gZnVuY3Rpb24gX3Rlc3RUb2tlbkFjY2VzcygpIHtcbiAgICBpZih0aGlzLm9wdGlvbnMuc3RyYXRlZ3kgPT09ICdpbXBsaWNpdCcpIHtcbiAgICAgIHZhciBjaGVja1VybCA9IHRoaXMuYXBpVXJsICsgXCIvYXBpL3YyL3VzZXJzL21lXCI7XG4gICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoJ2dldCcsIGNoZWNrVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcblxuUHVyZUNsb3VkU2Vzc2lvbi5wcm90b3R5cGUuX2xvZ2luV2l0aFRva2VuID0gZnVuY3Rpb24gX2xvZ2luV2l0aFRva2VuKHRva2VuKSB7XG4gICAgaWYoIXRva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT3B0aW9ucyByZXF1aXJlcyBhIFwidG9rZW5cIiBrZXkgZm9yIHRoZSBcInRva2VuXCIgc3RyYXRlZ3knKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcblxuUHVyZUNsb3VkU2Vzc2lvbi5wcm90b3R5cGUuX2xvZ2luV2l0aEltcGxpY2l0R3JhbnQgPSBmdW5jdGlvbihjbGllbnRJZCwgcmVkaXJlY3RVcmwsIHN0YXRlKSB7XG4gICAgdmFyIHF1ZXJ5ID0ge1xuICAgICAgICByZXNwb25zZV90eXBlOiAndG9rZW4nLFxuICAgICAgICBjbGllbnRfaWQ6IGVuY29kZVVSSUNvbXBvbmVudChjbGllbnRJZCksXG4gICAgICAgIHJlZGlyZWN0X3VyaTogZW5jb2RlVVJJKHJlZGlyZWN0VXJsKSxcbiAgICAgICAgc3RhdGU6IHN0YXRlXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHFzKHVybCwga2V5KSB7XG4gICAgICAgIHZhciB2YWwgPSBxdWVyeVtrZXldO1xuICAgICAgICBpZighdmFsKSByZXR1cm4gdXJsO1xuICAgICAgICByZXR1cm4gdXJsICsgJyYnICsga2V5ICsgJz0nICsgdmFsO1xuICAgIH1cblxuICAgIHZhciB1cmwgPSBPYmplY3Qua2V5cyhxdWVyeSkucmVkdWNlKHFzLCB0aGlzLmF1dGhVcmwgKyAnL2F1dGhvcml6ZT8nKTtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh1cmwpO1xufTtcblxuUHVyZUNsb3VkU2Vzc2lvbi5wcm90b3R5cGUuX3NldFZhbHVlc0Zyb21VcmxIYXNoID0gZnVuY3Rpb24gc2V0VmFsdWVzRnJvbVVybEhhc2goKSB7XG4gICAgaWYoISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYXRpb24uaGFzaCkpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoXG4gICAgICAgIC5zbGljZSgxKS5zcGxpdCgnJicpXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24ob2JqLCBwYWlyKSB7XG4gICAgICAgICAgICB2YXIga2V5VmFsdWUgPSBwYWlyLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICBvYmpba2V5VmFsdWVbMF1dID0ga2V5VmFsdWVbMV07XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9LCB7fSk7XG5cbiAgICBpZihoYXNoLmFjY2Vzc190b2tlbikgdGhpcy5fc2V0VG9rZW4oaGFzaC5hY2Nlc3NfdG9rZW4pO1xuICAgIGlmKGhhc2guc3RhdGUpIHRoaXMub3B0aW9ucy5zdGF0ZSA9IGhhc2guc3RhdGU7XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fbG9naW5XaXRoQ2xpZW50Q3JlZGVudGlhbHMgPSBmdW5jdGlvbihjbGllbnRJZCwgY2xpZW50U2VjcmV0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB1cmwgPSB0aGlzLmF1dGhVcmwgKyAnL3Rva2VuJztcbiAgICB2YXIgZGF0YSA9IHtncmFudF90eXBlOiAnY2xpZW50X2NyZWRlbnRpYWxzJ307XG4gICAgdmFyIHJlcXVlc3QgPSB0aGlzLl9iYXNlUmVxdWVzdCgncG9zdCcsIHVybClcbiAgICAgICAgLnNldCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpXG4gICAgICAgIC5hdXRoKGNsaWVudElkLCBjbGllbnRTZWNyZXQpXG4gICAgICAgIC5zZW5kKGRhdGEpO1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICAudGhlbihmdW5jdGlvbihib2R5KSB7XG4gICAgICAgICAgICBzZWxmLl9zZXRUb2tlbihib2R5LmFjY2Vzc190b2tlbik7XG4gICAgICAgIH0pO1xufTtcblxuUHVyZUNsb3VkU2Vzc2lvbi5wcm90b3R5cGUuX2dldFRva2VuID0gZnVuY3Rpb24gX2dldFRva2VuKCkge1xuICAgIGlmKHRoaXMub3B0aW9ucy50b2tlbikgcmV0dXJuIHRoaXMub3B0aW9ucy50b2tlbjtcbiAgICBpZih0aGlzLm9wdGlvbnMuc3RvcmFnZUtleSAmJiBQdXJlQ2xvdWRTZXNzaW9uLmhhc0xvY2FsU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5vcHRpb25zLnN0b3JhZ2VLZXkpO1xuICAgIH1cbn07XG5cblB1cmVDbG91ZFNlc3Npb24ucHJvdG90eXBlLl9zZXRUb2tlbiA9IGZ1bmN0aW9uIF9zZXRUb2tlbih0b2tlbikge1xuICAgIHRoaXMub3B0aW9ucy50b2tlbiA9IHRva2VuO1xuICAgIGlmKHRoaXMub3B0aW9ucy5zdG9yYWdlS2V5ICYmIFB1cmVDbG91ZFNlc3Npb24uaGFzTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMub3B0aW9ucy5zdG9yYWdlS2V5LCB0b2tlbik7XG4gICAgfVxufTtcblxuUHVyZUNsb3VkU2Vzc2lvbi5oYXNMb2NhbFN0b3JhZ2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtb2RcIiwgXCJtb2RcIik7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwibW9kXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pLmNhbGwodGhpcyk7XG5cbi8qKlxuICAqIEBkZXNjcmlwdGlvbiBEZWF1dGhlbnRpY2F0ZXMgdGhlIHNlc3Npb24gYW5kIHJlbW92ZXMgYW55IHN0b3JlZCB0b2tlblxuICAqKi9cblB1cmVDbG91ZFNlc3Npb24ucHJvdG90eXBlLmxvZ291dCA9IGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICBpZihQdXJlQ2xvdWRTZXNzaW9uLmhhc0xvY2FsU3RvcmFnZSkge1xuICAgICAgICB0aGlzLl9zZXRUb2tlbihudWxsKTtcbiAgICB9XG5cdHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMuYXV0aFVybCArIFwiL2xvZ291dFwiKTtcbn07XG5cbi8qKlxuICAqIEBkZXNjcmlwdGlvbiBNYWtlcyBhdXRoZW50aWNhdGVkIHJlcXVlc3RzIHRvIFB1cmVDbG91ZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgLSBIVFRQIG1ldGhvZCB2ZXJiLCBlLmcuIFwiZ2V0XCIsIFwicG9zdFwiXG4gICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byByZXF1ZXN0XG4gICogQHBhcmFtIHtvYmplY3R9IHF1ZXJ5IC0gKE9wdGlvbmFsKSBxdWVyeSBwYXJhbWV0ZXJzXG4gICogQHBhcmFtIHtvYmplY3R9IGJvZHkgLSAoT3B0aW9uYWwpIHJlcXVlc3QgYm9keSBwYXlsb2FkXG4gICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHJlc3BvbnNlIGJvZHksIG90aGVyd2lzZSByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAgKi9cblB1cmVDbG91ZFNlc3Npb24ucHJvdG90eXBlLm1ha2VSZXF1ZXN0ID0gZnVuY3Rpb24gbWFrZVJlcXVlc3QobWV0aG9kLCB1cmwsIHF1ZXJ5LCBib2R5KSB7XG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsLCBxdWVyeSwgYm9keSk7XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fbWFrZVJlcXVlc3QgPSBmdW5jdGlvbiBfbWFrZVJlcXVlc3QobWV0aG9kLCB1cmwsIHF1ZXJ5LCBib2R5KSB7XG4gICAgdmFyIGJlYXJlciA9ICdiZWFyZXIgJyArIHRoaXMub3B0aW9ucy50b2tlbjtcblxuICAgIGlmKHRoaXMuZGVidWdMb2cpe1xuICAgICAgICB2YXIgdHJhY2UgPSBtZXRob2QgKyBcIiBcIiArIHVybDtcbiAgICAgICAgaWYocXVlcnkgJiYgT2JqZWN0LmtleXMocXVlcnkpLmNvdW50ID4gMCAmJiBxdWVyeVtPYmplY3Qua2V5cyhxdWVyeSlbMF1dKXtcbiAgICAgICAgICAgIHRyYWNlICs9IFwiXFxuUXVlcnkgUGFyYW1zOiBcIiArIEpTT04uc3RyaW5naWZ5KHF1ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGJvZHkpe1xuICAgICAgICAgICAgdHJhY2UgKz0gXCJcXG5Cb2R5OiBcIiArIEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyh0cmFjZSk7XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3QgPSB0aGlzLl9iYXNlUmVxdWVzdChtZXRob2QsIHVybClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGJlYXJlcilcbiAgICAgICAgLnF1ZXJ5KHF1ZXJ5KVxuICAgICAgICAuc2VuZChib2R5KTtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QocmVxdWVzdCk7XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fYmFzZVJlcXVlc3QgPSBmdW5jdGlvbiBfYmFzZVJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgICBtZXRob2QgPSBtZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgICBpZih1cmwuY2hhckF0KDApID09PSAnLycpIHVybCA9IHRoaXMuYXBpVXJsICsgdXJsO1xuXG4gICAgdmFyIHJlcXVlc3QgPSBzdXBlcmFnZW50W21ldGhvZF0odXJsKVxuICAgICAgICAudHlwZSgnanNvbicpXG4gICAgICAgIC5hY2NlcHQoJ2pzb24nKVxuICAgICAgICAudGltZW91dCh0aGlzLm9wdGlvbnMudGltZW91dCk7XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgIHZhciB1c2VyQWdlbnQgPSAnUHVyZUNsb3VkIFNESy9KYXZhc2NyaXB0IDAuODMuOCc7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0LnNldCgnVXNlci1BZ2VudCcsIHVzZXJBZ2VudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcXVlc3Q7XG59O1xuXG5QdXJlQ2xvdWRTZXNzaW9uLnByb3RvdHlwZS5fc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiBfc2VuZFJlcXVlc3QocmVxdWVzdCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJlcXVlc3QuZW5kKGZ1bmN0aW9uKGVycm9yLCByZXMpIHtcbiAgICAgICAgICAgIGlmKHNlbGYuZGVidWdMb2cpe1xuICAgICAgICAgICAgICAgIGlmKHJlcyl7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGVidWdMb2cocmVzLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlbGYuZGVidWdMb2coZXJyb3IgfHwgcmVzLmVycm9yIHx8IHJlcy5ib2R5KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBpZihyZXMgJiYgcmVzLnVuYXV0aG9yaXplZCAmJiBzZWxmLnVuYXV0aGVudGljYXRlZEVycm9ySGFuZGxlcil7XG4gICAgICAgICAgICAgICAgc2VsZi51bmF1dGhlbnRpY2F0ZWRFcnJvckhhbmRsZXIoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihlcnJvcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHJlcy5ib2R5KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAgKiBAZGVzY3JpcHRpb24gQ29udmVpbmVuY2UgbWV0aG9kIGZvciBtYWtpbmcgR0VUIHJlcXVlc3RzXG4gICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byByZXF1ZXN0XG4gICogQHBhcmFtIHtvYmplY3R9IHF1ZXJ5IC0gKE9wdGlvbmFsKSBxdWVyeSBwYXJhbWV0ZXJzXG4gICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHJlc3BvbnNlIGJvZHksIG90aGVyd2lzZSByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAgKi9cblB1cmVDbG91ZFNlc3Npb24ucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCh1cmwsIHF1ZXJ5KSB7XG4gIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCdnZXQnLCB1cmwsIHF1ZXJ5KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUHVyZUNsb3VkU2Vzc2lvbjtcbiIsIlxyXG4vKipcclxuICogRXhwb3NlIGBFbWl0dGVyYC5cclxuICovXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgbmV3IGBFbWl0dGVyYC5cclxuICpcclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5mdW5jdGlvbiBFbWl0dGVyKG9iaikge1xyXG4gIGlmIChvYmopIHJldHVybiBtaXhpbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1peGluIHRoZSBlbWl0dGVyIHByb3BlcnRpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICogQHJldHVybiB7T2JqZWN0fVxyXG4gKiBAYXBpIHByaXZhdGVcclxuICovXHJcblxyXG5mdW5jdGlvbiBtaXhpbihvYmopIHtcclxuICBmb3IgKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtcclxuICAgIG9ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTtcclxuICB9XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLm9uID1cclxuRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gICh0aGlzLl9jYWxsYmFja3NbJyQnICsgZXZlbnRdID0gdGhpcy5fY2FsbGJhY2tzWyckJyArIGV2ZW50XSB8fCBbXSlcclxuICAgIC5wdXNoKGZuKTtcclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcclxuICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAqIEByZXR1cm4ge0VtaXR0ZXJ9XHJcbiAqIEBhcGkgcHVibGljXHJcbiAqL1xyXG5cclxuRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBmbil7XHJcbiAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICB0aGlzLm9mZihldmVudCwgb24pO1xyXG4gICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICB9XHJcblxyXG4gIG9uLmZuID0gZm47XHJcbiAgdGhpcy5vbihldmVudCwgb24pO1xyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXHJcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICogQHJldHVybiB7RW1pdHRlcn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5vZmYgPVxyXG5FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XHJcbkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4pe1xyXG4gIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtcclxuXHJcbiAgLy8gYWxsXHJcbiAgaWYgKDAgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHNwZWNpZmljIGV2ZW50XHJcbiAgdmFyIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgaWYgKCFjYWxsYmFja3MpIHJldHVybiB0aGlzO1xyXG5cclxuICAvLyByZW1vdmUgYWxsIGhhbmRsZXJzXHJcbiAgaWYgKDEgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8vIHJlbW92ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgdmFyIGNiO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjYiA9IGNhbGxiYWNrc1tpXTtcclxuICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XHJcbiAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbWl0IGBldmVudGAgd2l0aCB0aGUgZ2l2ZW4gYXJncy5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEBwYXJhbSB7TWl4ZWR9IC4uLlxyXG4gKiBAcmV0dXJuIHtFbWl0dGVyfVxyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xyXG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcbiAgICAsIGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF07XHJcblxyXG4gIGlmIChjYWxsYmFja3MpIHtcclxuICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgY2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJuIGFycmF5IG9mIGNhbGxiYWNrcyBmb3IgYGV2ZW50YC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKiBAYXBpIHB1YmxpY1xyXG4gKi9cclxuXHJcbkVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XHJcbiAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrc1snJCcgKyBldmVudF0gfHwgW107XHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhpcyBlbWl0dGVyIGhhcyBgZXZlbnRgIGhhbmRsZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICogQHJldHVybiB7Qm9vbGVhbn1cclxuICogQGFwaSBwdWJsaWNcclxuICovXHJcblxyXG5FbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgcmV0dXJuICEhIHRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7XHJcbn07XHJcbiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4zLjFcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB2YXIgX2lucHV0ID0gdGhpcy5faW5wdXQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShfaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJCA9IGMucmVzb2x2ZTtcblxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XG4gICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmFsbCA9IGFsbDtcblByb21pc2UucmFjZSA9IHJhY2U7XG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5Qcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXG5cbiAgLyoqXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQ2hhaW5pbmdcbiAgICAtLS0tLS0tLVxuICBcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICB9KTtcbiAgXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgfVxuICBcbiAgICAvLyBzeW5jaHJvbm91c1xuICAgIHRyeSB7XG4gICAgICBmaW5kQXV0aG9yKCk7XG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfVxuICBcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGNhdGNoXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlO1xufVxuXG5wb2x5ZmlsbCgpO1xuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xuUHJvbWlzZS5Qcm9taXNlID0gUHJvbWlzZTtcblxucmV0dXJuIFByb21pc2U7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXAiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiXG4vKipcbiAqIFJlZHVjZSBgYXJyYCB3aXRoIGBmbmAuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFxuICpcbiAqIFRPRE86IGNvbWJhdGlibGUgZXJyb3IgaGFuZGxpbmc/XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIGZuLCBpbml0aWFsKXsgIFxuICB2YXIgaWR4ID0gMDtcbiAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG4gIHZhciBjdXJyID0gYXJndW1lbnRzLmxlbmd0aCA9PSAzXG4gICAgPyBpbml0aWFsXG4gICAgOiBhcnJbaWR4KytdO1xuXG4gIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICBjdXJyID0gZm4uY2FsbChudWxsLCBjdXJyLCBhcnJbaWR4XSwgKytpZHgsIGFycik7XG4gIH1cbiAgXG4gIHJldHVybiBjdXJyO1xufTsiLCIvKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIEVtaXR0ZXIgPSByZXF1aXJlKCdlbWl0dGVyJyk7XG52YXIgcmVkdWNlID0gcmVxdWlyZSgncmVkdWNlJyk7XG52YXIgcmVxdWVzdEJhc2UgPSByZXF1aXJlKCcuL3JlcXVlc3QtYmFzZScpO1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBSb290IHJlZmVyZW5jZSBmb3IgaWZyYW1lcy5cbiAqL1xuXG52YXIgcm9vdDtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyAvLyBCcm93c2VyIHdpbmRvd1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHsgLy8gV2ViIFdvcmtlclxuICByb290ID0gc2VsZjtcbn0gZWxzZSB7IC8vIE90aGVyIGVudmlyb25tZW50c1xuICByb290ID0gdGhpcztcbn1cblxuLyoqXG4gKiBOb29wLlxuICovXG5cbmZ1bmN0aW9uIG5vb3AoKXt9O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgaG9zdCBvYmplY3QsXG4gKiB3ZSBkb24ndCB3YW50IHRvIHNlcmlhbGl6ZSB0aGVzZSA6KVxuICpcbiAqIFRPRE86IGZ1dHVyZSBwcm9vZiwgbW92ZSB0byBjb21wb2VudCBsYW5kXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGlzSG9zdChvYmopIHtcbiAgdmFyIHN0ciA9IHt9LnRvU3RyaW5nLmNhbGwob2JqKTtcblxuICBzd2l0Y2ggKHN0cikge1xuICAgIGNhc2UgJ1tvYmplY3QgRmlsZV0nOlxuICAgIGNhc2UgJ1tvYmplY3QgQmxvYl0nOlxuICAgIGNhc2UgJ1tvYmplY3QgRm9ybURhdGFdJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHBvc2UgYHJlcXVlc3RgLlxuICovXG5cbnZhciByZXF1ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlcXVlc3QnKS5iaW5kKG51bGwsIFJlcXVlc3QpO1xuXG4vKipcbiAqIERldGVybWluZSBYSFIuXG4gKi9cblxucmVxdWVzdC5nZXRYSFIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChyb290LlhNTEh0dHBSZXF1ZXN0XG4gICAgICAmJiAoIXJvb3QubG9jYXRpb24gfHwgJ2ZpbGU6JyAhPSByb290LmxvY2F0aW9uLnByb3RvY29sXG4gICAgICAgICAgfHwgIXJvb3QuQWN0aXZlWE9iamVjdCkpIHtcbiAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0O1xuICB9IGVsc2Uge1xuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTWljcm9zb2Z0LlhNTEhUVFAnKTsgfSBjYXRjaChlKSB7fVxuICAgIHRyeSB7IHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuNi4wJyk7IH0gY2F0Y2goZSkge31cbiAgICB0cnkgeyByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjMuMCcpOyB9IGNhdGNoKGUpIHt9XG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpOyB9IGNhdGNoKGUpIHt9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGFkZGVkIHRvIHN1cHBvcnQgSUUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbnZhciB0cmltID0gJycudHJpbVxuICA/IGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMudHJpbSgpOyB9XG4gIDogZnVuY3Rpb24ocykgeyByZXR1cm4gcy5yZXBsYWNlKC8oXlxccyp8XFxzKiQpL2csICcnKTsgfTtcblxuLyoqXG4gKiBTZXJpYWxpemUgdGhlIGdpdmVuIGBvYmpgLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmopIHtcbiAgaWYgKCFpc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICB2YXIgcGFpcnMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChudWxsICE9IG9ialtrZXldKSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCBvYmpba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgcmV0dXJuIHBhaXJzLmpvaW4oJyYnKTtcbn1cblxuLyoqXG4gKiBIZWxwcyAnc2VyaWFsaXplJyB3aXRoIHNlcmlhbGl6aW5nIGFycmF5cy5cbiAqIE11dGF0ZXMgdGhlIHBhaXJzIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2YWwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgIHJldHVybiB2YWwuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICBwdXNoRW5jb2RlZEtleVZhbHVlUGFpcihwYWlycywga2V5LCB2KTtcbiAgICB9KTtcbiAgfVxuICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpXG4gICAgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG59XG5cbi8qKlxuICogRXhwb3NlIHNlcmlhbGl6YXRpb24gbWV0aG9kLlxuICovXG5cbiByZXF1ZXN0LnNlcmlhbGl6ZU9iamVjdCA9IHNlcmlhbGl6ZTtcblxuIC8qKlxuICAqIFBhcnNlIHRoZSBnaXZlbiB4LXd3dy1mb3JtLXVybGVuY29kZWQgYHN0cmAuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICogQHJldHVybiB7T2JqZWN0fVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG5mdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKTtcbiAgdmFyIHBhcnRzO1xuICB2YXIgcGFpcjtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFpcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBwYWlyID0gcGFpcnNbaV07XG4gICAgcGFydHMgPSBwYWlyLnNwbGl0KCc9Jyk7XG4gICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogRXhwb3NlIHBhcnNlci5cbiAqL1xuXG5yZXF1ZXN0LnBhcnNlU3RyaW5nID0gcGFyc2VTdHJpbmc7XG5cbi8qKlxuICogRGVmYXVsdCBNSU1FIHR5cGUgbWFwLlxuICpcbiAqICAgICBzdXBlcmFnZW50LnR5cGVzLnhtbCA9ICdhcHBsaWNhdGlvbi94bWwnO1xuICpcbiAqL1xuXG5yZXF1ZXN0LnR5cGVzID0ge1xuICBodG1sOiAndGV4dC9odG1sJyxcbiAganNvbjogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB4bWw6ICdhcHBsaWNhdGlvbi94bWwnLFxuICB1cmxlbmNvZGVkOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0nOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgJ2Zvcm0tZGF0YSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG4vKipcbiAqIERlZmF1bHQgc2VyaWFsaXphdGlvbiBtYXAuXG4gKlxuICogICAgIHN1cGVyYWdlbnQuc2VyaWFsaXplWydhcHBsaWNhdGlvbi94bWwnXSA9IGZ1bmN0aW9uKG9iail7XG4gKiAgICAgICByZXR1cm4gJ2dlbmVyYXRlZCB4bWwgaGVyZSc7XG4gKiAgICAgfTtcbiAqXG4gKi9cblxuIHJlcXVlc3Quc2VyaWFsaXplID0ge1xuICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHNlcmlhbGl6ZSxcbiAgICdhcHBsaWNhdGlvbi9qc29uJzogSlNPTi5zdHJpbmdpZnlcbiB9O1xuXG4gLyoqXG4gICogRGVmYXVsdCBwYXJzZXJzLlxuICAqXG4gICogICAgIHN1cGVyYWdlbnQucGFyc2VbJ2FwcGxpY2F0aW9uL3htbCddID0gZnVuY3Rpb24oc3RyKXtcbiAgKiAgICAgICByZXR1cm4geyBvYmplY3QgcGFyc2VkIGZyb20gc3RyIH07XG4gICogICAgIH07XG4gICpcbiAgKi9cblxucmVxdWVzdC5wYXJzZSA9IHtcbiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc6IHBhcnNlU3RyaW5nLFxuICAnYXBwbGljYXRpb24vanNvbic6IEpTT04ucGFyc2Vcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBgc3RyYCBpbnRvXG4gKiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWFwcGVkIGZpZWxkcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihzdHIpIHtcbiAgdmFyIGxpbmVzID0gc3RyLnNwbGl0KC9cXHI/XFxuLyk7XG4gIHZhciBmaWVsZHMgPSB7fTtcbiAgdmFyIGluZGV4O1xuICB2YXIgbGluZTtcbiAgdmFyIGZpZWxkO1xuICB2YXIgdmFsO1xuXG4gIGxpbmVzLnBvcCgpOyAvLyB0cmFpbGluZyBDUkxGXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgbGluZSA9IGxpbmVzW2ldO1xuICAgIGluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgZmllbGQgPSBsaW5lLnNsaWNlKDAsIGluZGV4KS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHRyaW0obGluZS5zbGljZShpbmRleCArIDEpKTtcbiAgICBmaWVsZHNbZmllbGRdID0gdmFsO1xuICB9XG5cbiAgcmV0dXJuIGZpZWxkcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBgbWltZWAgaXMganNvbiBvciBoYXMgK2pzb24gc3RydWN0dXJlZCBzeW50YXggc3VmZml4LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gaXNKU09OKG1pbWUpIHtcbiAgcmV0dXJuIC9bXFwvK11qc29uXFxiLy50ZXN0KG1pbWUpO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbWltZSB0eXBlIGZvciB0aGUgZ2l2ZW4gYHN0cmAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdHlwZShzdHIpe1xuICByZXR1cm4gc3RyLnNwbGl0KC8gKjsgKi8pLnNoaWZ0KCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBoZWFkZXIgZmllbGQgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJhbXMoc3RyKXtcbiAgcmV0dXJuIHJlZHVjZShzdHIuc3BsaXQoLyAqOyAqLyksIGZ1bmN0aW9uKG9iaiwgc3RyKXtcbiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoLyAqPSAqLylcbiAgICAgICwga2V5ID0gcGFydHMuc2hpZnQoKVxuICAgICAgLCB2YWwgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgaWYgKGtleSAmJiB2YWwpIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIG5ldyBgUmVzcG9uc2VgIHdpdGggdGhlIGdpdmVuIGB4aHJgLlxuICpcbiAqICAtIHNldCBmbGFncyAoLm9rLCAuZXJyb3IsIGV0YylcbiAqICAtIHBhcnNlIGhlYWRlclxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICBBbGlhc2luZyBgc3VwZXJhZ2VudGAgYXMgYHJlcXVlc3RgIGlzIG5pY2U6XG4gKlxuICogICAgICByZXF1ZXN0ID0gc3VwZXJhZ2VudDtcbiAqXG4gKiAgV2UgY2FuIHVzZSB0aGUgcHJvbWlzZS1saWtlIEFQSSwgb3IgcGFzcyBjYWxsYmFja3M6XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnLycpLmVuZChmdW5jdGlvbihyZXMpe30pO1xuICogICAgICByZXF1ZXN0LmdldCgnLycsIGZ1bmN0aW9uKHJlcyl7fSk7XG4gKlxuICogIFNlbmRpbmcgZGF0YSBjYW4gYmUgY2hhaW5lZDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiAgT3IgcGFzc2VkIHRvIGAuc2VuZCgpYDpcbiAqXG4gKiAgICAgIHJlcXVlc3RcbiAqICAgICAgICAucG9zdCgnL3VzZXInKVxuICogICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqICBPciBwYXNzZWQgdG8gYC5wb3N0KClgOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgIC5lbmQoZnVuY3Rpb24ocmVzKXt9KTtcbiAqXG4gKiBPciBmdXJ0aGVyIHJlZHVjZWQgdG8gYSBzaW5nbGUgY2FsbCBmb3Igc2ltcGxlIGNhc2VzOlxuICpcbiAqICAgICAgcmVxdWVzdFxuICogICAgICAgIC5wb3N0KCcvdXNlcicsIHsgbmFtZTogJ3RqJyB9LCBmdW5jdGlvbihyZXMpe30pO1xuICpcbiAqIEBwYXJhbSB7WE1MSFRUUFJlcXVlc3R9IHhoclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIFJlc3BvbnNlKHJlcSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5yZXEgPSByZXE7XG4gIHRoaXMueGhyID0gdGhpcy5yZXEueGhyO1xuICAvLyByZXNwb25zZVRleHQgaXMgYWNjZXNzaWJsZSBvbmx5IGlmIHJlc3BvbnNlVHlwZSBpcyAnJyBvciAndGV4dCcgYW5kIG9uIG9sZGVyIGJyb3dzZXJzXG4gIHRoaXMudGV4dCA9ICgodGhpcy5yZXEubWV0aG9kICE9J0hFQUQnICYmICh0aGlzLnhoci5yZXNwb25zZVR5cGUgPT09ICcnIHx8IHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnKSkgfHwgdHlwZW9mIHRoaXMueGhyLnJlc3BvbnNlVHlwZSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgID8gdGhpcy54aHIucmVzcG9uc2VUZXh0XG4gICAgIDogbnVsbDtcbiAgdGhpcy5zdGF0dXNUZXh0ID0gdGhpcy5yZXEueGhyLnN0YXR1c1RleHQ7XG4gIHRoaXMuc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpO1xuICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVycyA9IHBhcnNlSGVhZGVyKHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcbiAgLy8gZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIHNvbWV0aW1lcyBmYWxzZWx5IHJldHVybnMgXCJcIiBmb3IgQ09SUyByZXF1ZXN0cywgYnV0XG4gIC8vIGdldFJlc3BvbnNlSGVhZGVyIHN0aWxsIHdvcmtzLiBzbyB3ZSBnZXQgY29udGVudC10eXBlIGV2ZW4gaWYgZ2V0dGluZ1xuICAvLyBvdGhlciBoZWFkZXJzIGZhaWxzLlxuICB0aGlzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJyk7XG4gIHRoaXMuc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlcik7XG4gIHRoaXMuYm9keSA9IHRoaXMucmVxLm1ldGhvZCAhPSAnSEVBRCdcbiAgICA/IHRoaXMucGFyc2VCb2R5KHRoaXMudGV4dCA/IHRoaXMudGV4dCA6IHRoaXMueGhyLnJlc3BvbnNlKVxuICAgIDogbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgY2FzZS1pbnNlbnNpdGl2ZSBgZmllbGRgIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXNwb25zZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oZmllbGQpe1xuICByZXR1cm4gdGhpcy5oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG59O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgcmVsYXRlZCBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBgLnR5cGVgIHRoZSBjb250ZW50IHR5cGUgd2l0aG91dCBwYXJhbXNcbiAqXG4gKiBBIHJlc3BvbnNlIG9mIFwiQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCJcbiAqIHdpbGwgcHJvdmlkZSB5b3Ugd2l0aCBhIGAudHlwZWAgb2YgXCJ0ZXh0L3BsYWluXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGhlYWRlclxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVzcG9uc2UucHJvdG90eXBlLnNldEhlYWRlclByb3BlcnRpZXMgPSBmdW5jdGlvbihoZWFkZXIpe1xuICAvLyBjb250ZW50LXR5cGVcbiAgdmFyIGN0ID0gdGhpcy5oZWFkZXJbJ2NvbnRlbnQtdHlwZSddIHx8ICcnO1xuICB0aGlzLnR5cGUgPSB0eXBlKGN0KTtcblxuICAvLyBwYXJhbXNcbiAgdmFyIG9iaiA9IHBhcmFtcyhjdCk7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHRoaXNba2V5XSA9IG9ialtrZXldO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYm9keSBgc3RyYC5cbiAqXG4gKiBVc2VkIGZvciBhdXRvLXBhcnNpbmcgb2YgYm9kaWVzLiBQYXJzZXJzXG4gKiBhcmUgZGVmaW5lZCBvbiB0aGUgYHN1cGVyYWdlbnQucGFyc2VgIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5wYXJzZUJvZHkgPSBmdW5jdGlvbihzdHIpe1xuICB2YXIgcGFyc2UgPSByZXF1ZXN0LnBhcnNlW3RoaXMudHlwZV07XG4gIGlmICghcGFyc2UgJiYgaXNKU09OKHRoaXMudHlwZSkpIHtcbiAgICBwYXJzZSA9IHJlcXVlc3QucGFyc2VbJ2FwcGxpY2F0aW9uL2pzb24nXTtcbiAgfVxuICByZXR1cm4gcGFyc2UgJiYgc3RyICYmIChzdHIubGVuZ3RoIHx8IHN0ciBpbnN0YW5jZW9mIE9iamVjdClcbiAgICA/IHBhcnNlKHN0cilcbiAgICA6IG51bGw7XG59O1xuXG4vKipcbiAqIFNldCBmbGFncyBzdWNoIGFzIGAub2tgIGJhc2VkIG9uIGBzdGF0dXNgLlxuICpcbiAqIEZvciBleGFtcGxlIGEgMnh4IHJlc3BvbnNlIHdpbGwgZ2l2ZSB5b3UgYSBgLm9rYCBvZiBfX3RydWVfX1xuICogd2hlcmVhcyA1eHggd2lsbCBiZSBfX2ZhbHNlX18gYW5kIGAuZXJyb3JgIHdpbGwgYmUgX190cnVlX18uIFRoZVxuICogYC5jbGllbnRFcnJvcmAgYW5kIGAuc2VydmVyRXJyb3JgIGFyZSBhbHNvIGF2YWlsYWJsZSB0byBiZSBtb3JlXG4gKiBzcGVjaWZpYywgYW5kIGAuc3RhdHVzVHlwZWAgaXMgdGhlIGNsYXNzIG9mIGVycm9yIHJhbmdpbmcgZnJvbSAxLi41XG4gKiBzb21ldGltZXMgdXNlZnVsIGZvciBtYXBwaW5nIHJlc3BvbmQgY29sb3JzIGV0Yy5cbiAqXG4gKiBcInN1Z2FyXCIgcHJvcGVydGllcyBhcmUgYWxzbyBkZWZpbmVkIGZvciBjb21tb24gY2FzZXMuIEN1cnJlbnRseSBwcm92aWRpbmc6XG4gKlxuICogICAtIC5ub0NvbnRlbnRcbiAqICAgLSAuYmFkUmVxdWVzdFxuICogICAtIC51bmF1dGhvcml6ZWRcbiAqICAgLSAubm90QWNjZXB0YWJsZVxuICogICAtIC5ub3RGb3VuZFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS5zZXRTdGF0dXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24oc3RhdHVzKXtcbiAgLy8gaGFuZGxlIElFOSBidWc6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAwNDY5NzIvbXNpZS1yZXR1cm5zLXN0YXR1cy1jb2RlLW9mLTEyMjMtZm9yLWFqYXgtcmVxdWVzdFxuICBpZiAoc3RhdHVzID09PSAxMjIzKSB7XG4gICAgc3RhdHVzID0gMjA0O1xuICB9XG5cbiAgdmFyIHR5cGUgPSBzdGF0dXMgLyAxMDAgfCAwO1xuXG4gIC8vIHN0YXR1cyAvIGNsYXNzXG4gIHRoaXMuc3RhdHVzID0gdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzO1xuICB0aGlzLnN0YXR1c1R5cGUgPSB0eXBlO1xuXG4gIC8vIGJhc2ljc1xuICB0aGlzLmluZm8gPSAxID09IHR5cGU7XG4gIHRoaXMub2sgPSAyID09IHR5cGU7XG4gIHRoaXMuY2xpZW50RXJyb3IgPSA0ID09IHR5cGU7XG4gIHRoaXMuc2VydmVyRXJyb3IgPSA1ID09IHR5cGU7XG4gIHRoaXMuZXJyb3IgPSAoNCA9PSB0eXBlIHx8IDUgPT0gdHlwZSlcbiAgICA/IHRoaXMudG9FcnJvcigpXG4gICAgOiBmYWxzZTtcblxuICAvLyBzdWdhclxuICB0aGlzLmFjY2VwdGVkID0gMjAyID09IHN0YXR1cztcbiAgdGhpcy5ub0NvbnRlbnQgPSAyMDQgPT0gc3RhdHVzO1xuICB0aGlzLmJhZFJlcXVlc3QgPSA0MDAgPT0gc3RhdHVzO1xuICB0aGlzLnVuYXV0aG9yaXplZCA9IDQwMSA9PSBzdGF0dXM7XG4gIHRoaXMubm90QWNjZXB0YWJsZSA9IDQwNiA9PSBzdGF0dXM7XG4gIHRoaXMubm90Rm91bmQgPSA0MDQgPT0gc3RhdHVzO1xuICB0aGlzLmZvcmJpZGRlbiA9IDQwMyA9PSBzdGF0dXM7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbiBgRXJyb3JgIHJlcHJlc2VudGF0aXZlIG9mIHRoaXMgcmVzcG9uc2UuXG4gKlxuICogQHJldHVybiB7RXJyb3J9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlc3BvbnNlLnByb3RvdHlwZS50b0Vycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHJlcSA9IHRoaXMucmVxO1xuICB2YXIgbWV0aG9kID0gcmVxLm1ldGhvZDtcbiAgdmFyIHVybCA9IHJlcS51cmw7XG5cbiAgdmFyIG1zZyA9ICdjYW5ub3QgJyArIG1ldGhvZCArICcgJyArIHVybCArICcgKCcgKyB0aGlzLnN0YXR1cyArICcpJztcbiAgdmFyIGVyciA9IG5ldyBFcnJvcihtc2cpO1xuICBlcnIuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gIGVyci5tZXRob2QgPSBtZXRob2Q7XG4gIGVyci51cmwgPSB1cmw7XG5cbiAgcmV0dXJuIGVycjtcbn07XG5cbi8qKlxuICogRXhwb3NlIGBSZXNwb25zZWAuXG4gKi9cblxucmVxdWVzdC5SZXNwb25zZSA9IFJlc3BvbnNlO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYFJlcXVlc3RgIHdpdGggdGhlIGdpdmVuIGBtZXRob2RgIGFuZCBgdXJsYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLl9xdWVyeSA9IHRoaXMuX3F1ZXJ5IHx8IFtdO1xuICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgdGhpcy51cmwgPSB1cmw7XG4gIHRoaXMuaGVhZGVyID0ge307IC8vIHByZXNlcnZlcyBoZWFkZXIgbmFtZSBjYXNlXG4gIHRoaXMuX2hlYWRlciA9IHt9OyAvLyBjb2VyY2VzIGhlYWRlciBuYW1lcyB0byBsb3dlcmNhc2VcbiAgdGhpcy5vbignZW5kJywgZnVuY3Rpb24oKXtcbiAgICB2YXIgZXJyID0gbnVsbDtcbiAgICB2YXIgcmVzID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICByZXMgPSBuZXcgUmVzcG9uc2Uoc2VsZik7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBlcnIgPSBuZXcgRXJyb3IoJ1BhcnNlciBpcyB1bmFibGUgdG8gcGFyc2UgdGhlIHJlc3BvbnNlJyk7XG4gICAgICBlcnIucGFyc2UgPSB0cnVlO1xuICAgICAgZXJyLm9yaWdpbmFsID0gZTtcbiAgICAgIC8vIGlzc3VlICM2NzU6IHJldHVybiB0aGUgcmF3IHJlc3BvbnNlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIucmF3UmVzcG9uc2UgPSBzZWxmLnhociAmJiBzZWxmLnhoci5yZXNwb25zZVRleHQgPyBzZWxmLnhoci5yZXNwb25zZVRleHQgOiBudWxsO1xuICAgICAgLy8gaXNzdWUgIzg3NjogcmV0dXJuIHRoZSBodHRwIHN0YXR1cyBjb2RlIGlmIHRoZSByZXNwb25zZSBwYXJzaW5nIGZhaWxzXG4gICAgICBlcnIuc3RhdHVzQ29kZSA9IHNlbGYueGhyICYmIHNlbGYueGhyLnN0YXR1cyA/IHNlbGYueGhyLnN0YXR1cyA6IG51bGw7XG4gICAgICByZXR1cm4gc2VsZi5jYWxsYmFjayhlcnIpO1xuICAgIH1cblxuICAgIHNlbGYuZW1pdCgncmVzcG9uc2UnLCByZXMpO1xuXG4gICAgaWYgKGVycikge1xuICAgICAgcmV0dXJuIHNlbGYuY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH1cblxuICAgIGlmIChyZXMuc3RhdHVzID49IDIwMCAmJiByZXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICByZXR1cm4gc2VsZi5jYWxsYmFjayhlcnIsIHJlcyk7XG4gICAgfVxuXG4gICAgdmFyIG5ld19lcnIgPSBuZXcgRXJyb3IocmVzLnN0YXR1c1RleHQgfHwgJ1Vuc3VjY2Vzc2Z1bCBIVFRQIHJlc3BvbnNlJyk7XG4gICAgbmV3X2Vyci5vcmlnaW5hbCA9IGVycjtcbiAgICBuZXdfZXJyLnJlc3BvbnNlID0gcmVzO1xuICAgIG5ld19lcnIuc3RhdHVzID0gcmVzLnN0YXR1cztcblxuICAgIHNlbGYuY2FsbGJhY2sobmV3X2VyciwgcmVzKTtcbiAgfSk7XG59XG5cbi8qKlxuICogTWl4aW4gYEVtaXR0ZXJgIGFuZCBgcmVxdWVzdEJhc2VgLlxuICovXG5cbkVtaXR0ZXIoUmVxdWVzdC5wcm90b3R5cGUpO1xuZm9yICh2YXIga2V5IGluIHJlcXVlc3RCYXNlKSB7XG4gIFJlcXVlc3QucHJvdG90eXBlW2tleV0gPSByZXF1ZXN0QmFzZVtrZXldO1xufVxuXG4vKipcbiAqIEFib3J0IHRoZSByZXF1ZXN0LCBhbmQgY2xlYXIgcG90ZW50aWFsIHRpbWVvdXQuXG4gKlxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5hYm9ydGVkKSByZXR1cm47XG4gIHRoaXMuYWJvcnRlZCA9IHRydWU7XG4gIHRoaXMueGhyICYmIHRoaXMueGhyLmFib3J0KCk7XG4gIHRoaXMuY2xlYXJUaW1lb3V0KCk7XG4gIHRoaXMuZW1pdCgnYWJvcnQnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCBDb250ZW50LVR5cGUgdG8gYHR5cGVgLCBtYXBwaW5nIHZhbHVlcyBmcm9tIGByZXF1ZXN0LnR5cGVzYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHN1cGVyYWdlbnQudHlwZXMueG1sID0gJ2FwcGxpY2F0aW9uL3htbCc7XG4gKlxuICogICAgICByZXF1ZXN0LnBvc3QoJy8nKVxuICogICAgICAgIC50eXBlKCd4bWwnKVxuICogICAgICAgIC5zZW5kKHhtbHN0cmluZylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QucG9zdCgnLycpXG4gKiAgICAgICAgLnR5cGUoJ2FwcGxpY2F0aW9uL3htbCcpXG4gKiAgICAgICAgLnNlbmQoeG1sc3RyaW5nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICB0aGlzLnNldCgnQ29udGVudC1UeXBlJywgcmVxdWVzdC50eXBlc1t0eXBlXSB8fCB0eXBlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCByZXNwb25zZVR5cGUgdG8gYHZhbGAuIFByZXNlbnRseSB2YWxpZCByZXNwb25zZVR5cGVzIGFyZSAnYmxvYicgYW5kIFxuICogJ2FycmF5YnVmZmVyJy5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC5yZXNwb25zZVR5cGUoJ2Jsb2InKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25zZVR5cGUgPSBmdW5jdGlvbih2YWwpe1xuICB0aGlzLl9yZXNwb25zZVR5cGUgPSB2YWw7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQWNjZXB0IHRvIGB0eXBlYCwgbWFwcGluZyB2YWx1ZXMgZnJvbSBgcmVxdWVzdC50eXBlc2AuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICBzdXBlcmFnZW50LnR5cGVzLmpzb24gPSAnYXBwbGljYXRpb24vanNvbic7XG4gKlxuICogICAgICByZXF1ZXN0LmdldCgnL2FnZW50JylcbiAqICAgICAgICAuYWNjZXB0KCdqc29uJylcbiAqICAgICAgICAuZW5kKGNhbGxiYWNrKTtcbiAqXG4gKiAgICAgIHJlcXVlc3QuZ2V0KCcvYWdlbnQnKVxuICogICAgICAgIC5hY2NlcHQoJ2FwcGxpY2F0aW9uL2pzb24nKVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhY2NlcHRcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbih0eXBlKXtcbiAgdGhpcy5zZXQoJ0FjY2VwdCcsIHJlcXVlc3QudHlwZXNbdHlwZV0gfHwgdHlwZSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgQXV0aG9yaXphdGlvbiBmaWVsZCB2YWx1ZSB3aXRoIGB1c2VyYCBhbmQgYHBhc3NgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFzc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgd2l0aCAndHlwZScgcHJvcGVydHkgJ2F1dG8nIG9yICdiYXNpYycgKGRlZmF1bHQgJ2Jhc2ljJylcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS5hdXRoID0gZnVuY3Rpb24odXNlciwgcGFzcywgb3B0aW9ucyl7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICB0eXBlOiAnYmFzaWMnXG4gICAgfVxuICB9XG5cbiAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICBjYXNlICdiYXNpYyc6XG4gICAgICB2YXIgc3RyID0gYnRvYSh1c2VyICsgJzonICsgcGFzcyk7XG4gICAgICB0aGlzLnNldCgnQXV0aG9yaXphdGlvbicsICdCYXNpYyAnICsgc3RyKTtcbiAgICBicmVhaztcblxuICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXI7XG4gICAgICB0aGlzLnBhc3N3b3JkID0gcGFzcztcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuKiBBZGQgcXVlcnktc3RyaW5nIGB2YWxgLlxuKlxuKiBFeGFtcGxlczpcbipcbiogICByZXF1ZXN0LmdldCgnL3Nob2VzJylcbiogICAgIC5xdWVyeSgnc2l6ZT0xMCcpXG4qICAgICAucXVlcnkoeyBjb2xvcjogJ2JsdWUnIH0pXG4qXG4qIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gdmFsXG4qIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuKiBAYXBpIHB1YmxpY1xuKi9cblxuUmVxdWVzdC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbih2YWwpe1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkgdmFsID0gc2VyaWFsaXplKHZhbCk7XG4gIGlmICh2YWwpIHRoaXMuX3F1ZXJ5LnB1c2godmFsKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFF1ZXVlIHRoZSBnaXZlbiBgZmlsZWAgYXMgYW4gYXR0YWNobWVudCB0byB0aGUgc3BlY2lmaWVkIGBmaWVsZGAsXG4gKiB3aXRoIG9wdGlvbmFsIGBmaWxlbmFtZWAuXG4gKlxuICogYGBgIGpzXG4gKiByZXF1ZXN0LnBvc3QoJy91cGxvYWQnKVxuICogICAuYXR0YWNoKG5ldyBCbG9iKFsnPGEgaWQ9XCJhXCI+PGIgaWQ9XCJiXCI+aGV5ITwvYj48L2E+J10sIHsgdHlwZTogXCJ0ZXh0L2h0bWxcIn0pKVxuICogICAuZW5kKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHBhcmFtIHtCbG9ifEZpbGV9IGZpbGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSl7XG4gIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKGZpZWxkLCBmaWxlLCBmaWxlbmFtZSB8fCBmaWxlLm5hbWUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cblJlcXVlc3QucHJvdG90eXBlLl9nZXRGb3JtRGF0YSA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5fZm9ybURhdGEpIHtcbiAgICB0aGlzLl9mb3JtRGF0YSA9IG5ldyByb290LkZvcm1EYXRhKCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhO1xufTtcblxuLyoqXG4gKiBTZW5kIGBkYXRhYCBhcyB0aGUgcmVxdWVzdCBib2R5LCBkZWZhdWx0aW5nIHRoZSBgLnR5cGUoKWAgdG8gXCJqc29uXCIgd2hlblxuICogYW4gb2JqZWN0IGlzIGdpdmVuLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAgIC8vIG1hbnVhbCBqc29uXG4gKiAgICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAqICAgICAgICAgLnR5cGUoJ2pzb24nKVxuICogICAgICAgICAuc2VuZCgne1wibmFtZVwiOlwidGpcIn0nKVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIGF1dG8ganNvblxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC5zZW5kKHsgbmFtZTogJ3RqJyB9KVxuICogICAgICAgICAuZW5kKGNhbGxiYWNrKVxuICpcbiAqICAgICAgIC8vIG1hbnVhbCB4LXd3dy1mb3JtLXVybGVuY29kZWRcbiAqICAgICAgIHJlcXVlc3QucG9zdCgnL3VzZXInKVxuICogICAgICAgICAudHlwZSgnZm9ybScpXG4gKiAgICAgICAgIC5zZW5kKCduYW1lPXRqJylcbiAqICAgICAgICAgLmVuZChjYWxsYmFjaylcbiAqXG4gKiAgICAgICAvLyBhdXRvIHgtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICogICAgICAgcmVxdWVzdC5wb3N0KCcvdXNlcicpXG4gKiAgICAgICAgIC50eXBlKCdmb3JtJylcbiAqICAgICAgICAgLnNlbmQoeyBuYW1lOiAndGonIH0pXG4gKiAgICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogICAgICAgLy8gZGVmYXVsdHMgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICogICAgICByZXF1ZXN0LnBvc3QoJy91c2VyJylcbiAgKiAgICAgICAgLnNlbmQoJ25hbWU9dG9iaScpXG4gICogICAgICAgIC5zZW5kKCdzcGVjaWVzPWZlcnJldCcpXG4gICogICAgICAgIC5lbmQoY2FsbGJhY2spXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpe1xuICB2YXIgb2JqID0gaXNPYmplY3QoZGF0YSk7XG4gIHZhciB0eXBlID0gdGhpcy5faGVhZGVyWydjb250ZW50LXR5cGUnXTtcblxuICAvLyBtZXJnZVxuICBpZiAob2JqICYmIGlzT2JqZWN0KHRoaXMuX2RhdGEpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgIHRoaXMuX2RhdGFba2V5XSA9IGRhdGFba2V5XTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGRhdGEpIHtcbiAgICBpZiAoIXR5cGUpIHRoaXMudHlwZSgnZm9ybScpO1xuICAgIHR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuICAgIGlmICgnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyA9PSB0eXBlKSB7XG4gICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YVxuICAgICAgICA/IHRoaXMuX2RhdGEgKyAnJicgKyBkYXRhXG4gICAgICAgIDogZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0YSA9ICh0aGlzLl9kYXRhIHx8ICcnKSArIGRhdGE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgaWYgKCFvYmogfHwgaXNIb3N0KGRhdGEpKSByZXR1cm4gdGhpcztcbiAgaWYgKCF0eXBlKSB0aGlzLnR5cGUoJ2pzb24nKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cblJlc3BvbnNlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShmbil7XG4gIGlmIChyb290LmNvbnNvbGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDbGllbnQtc2lkZSBwYXJzZSgpIG1ldGhvZCBoYXMgYmVlbiByZW5hbWVkIHRvIHNlcmlhbGl6ZSgpLiBUaGlzIG1ldGhvZCBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHN1cGVyYWdlbnQgdjIuMFwiKTtcbiAgfVxuICB0aGlzLnNlcmlhbGl6ZShmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuUmVzcG9uc2UucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uIHNlcmlhbGl6ZShmbil7XG4gIHRoaXMuX3BhcnNlciA9IGZuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIGBlcnJgIGFuZCBgcmVzYFxuICogYW5kIGhhbmRsZSBhcml0eSBjaGVjay5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJcbiAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUuY2FsbGJhY2sgPSBmdW5jdGlvbihlcnIsIHJlcyl7XG4gIHZhciBmbiA9IHRoaXMuX2NhbGxiYWNrO1xuICB0aGlzLmNsZWFyVGltZW91dCgpO1xuICBmbihlcnIsIHJlcyk7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHgtZG9tYWluIGVycm9yLlxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmNyb3NzRG9tYWluRXJyb3IgPSBmdW5jdGlvbigpe1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCdSZXF1ZXN0IGhhcyBiZWVuIHRlcm1pbmF0ZWRcXG5Qb3NzaWJsZSBjYXVzZXM6IHRoZSBuZXR3b3JrIGlzIG9mZmxpbmUsIE9yaWdpbiBpcyBub3QgYWxsb3dlZCBieSBBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4sIHRoZSBwYWdlIGlzIGJlaW5nIHVubG9hZGVkLCBldGMuJyk7XG4gIGVyci5jcm9zc0RvbWFpbiA9IHRydWU7XG5cbiAgZXJyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gdGhpcy5tZXRob2Q7XG4gIGVyci51cmwgPSB0aGlzLnVybDtcblxuICB0aGlzLmNhbGxiYWNrKGVycik7XG59O1xuXG4vKipcbiAqIEludm9rZSBjYWxsYmFjayB3aXRoIHRpbWVvdXQgZXJyb3IuXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuUmVxdWVzdC5wcm90b3R5cGUudGltZW91dEVycm9yID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLl90aW1lb3V0O1xuICB2YXIgZXJyID0gbmV3IEVycm9yKCd0aW1lb3V0IG9mICcgKyB0aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJyk7XG4gIGVyci50aW1lb3V0ID0gdGltZW91dDtcbiAgdGhpcy5jYWxsYmFjayhlcnIpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgdHJhbnNtaXNzaW9uIG9mIGNvb2tpZXMgd2l0aCB4LWRvbWFpbiByZXF1ZXN0cy5cbiAqXG4gKiBOb3RlIHRoYXQgZm9yIHRoaXMgdG8gd29yayB0aGUgb3JpZ2luIG11c3Qgbm90IGJlXG4gKiB1c2luZyBcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiIHdpdGggYSB3aWxkY2FyZCxcbiAqIGFuZCBhbHNvIG11c3Qgc2V0IFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHNcIlxuICogdG8gXCJ0cnVlXCIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5SZXF1ZXN0LnByb3RvdHlwZS53aXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbigpe1xuICB0aGlzLl93aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSW5pdGlhdGUgcmVxdWVzdCwgaW52b2tpbmcgY2FsbGJhY2sgYGZuKHJlcylgXG4gKiB3aXRoIGFuIGluc3RhbmNlb2YgYFJlc3BvbnNlYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH0gZm9yIGNoYWluaW5nXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblJlcXVlc3QucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGZuKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgeGhyID0gdGhpcy54aHIgPSByZXF1ZXN0LmdldFhIUigpO1xuICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyeS5qb2luKCcmJyk7XG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dDtcbiAgdmFyIGRhdGEgPSB0aGlzLl9mb3JtRGF0YSB8fCB0aGlzLl9kYXRhO1xuXG4gIC8vIHN0b3JlIGNhbGxiYWNrXG4gIHRoaXMuX2NhbGxiYWNrID0gZm4gfHwgbm9vcDtcblxuICAvLyBzdGF0ZSBjaGFuZ2VcbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYgKDQgIT0geGhyLnJlYWR5U3RhdGUpIHJldHVybjtcblxuICAgIC8vIEluIElFOSwgcmVhZHMgdG8gYW55IHByb3BlcnR5IChlLmcuIHN0YXR1cykgb2ZmIG9mIGFuIGFib3J0ZWQgWEhSIHdpbGxcbiAgICAvLyByZXN1bHQgaW4gdGhlIGVycm9yIFwiQ291bGQgbm90IGNvbXBsZXRlIHRoZSBvcGVyYXRpb24gZHVlIHRvIGVycm9yIGMwMGMwMjNmXCJcbiAgICB2YXIgc3RhdHVzO1xuICAgIHRyeSB7IHN0YXR1cyA9IHhoci5zdGF0dXMgfSBjYXRjaChlKSB7IHN0YXR1cyA9IDA7IH1cblxuICAgIGlmICgwID09IHN0YXR1cykge1xuICAgICAgaWYgKHNlbGYudGltZWRvdXQpIHJldHVybiBzZWxmLnRpbWVvdXRFcnJvcigpO1xuICAgICAgaWYgKHNlbGYuYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgcmV0dXJuIHNlbGYuY3Jvc3NEb21haW5FcnJvcigpO1xuICAgIH1cbiAgICBzZWxmLmVtaXQoJ2VuZCcpO1xuICB9O1xuXG4gIC8vIHByb2dyZXNzXG4gIHZhciBoYW5kbGVQcm9ncmVzcyA9IGZ1bmN0aW9uKGUpe1xuICAgIGlmIChlLnRvdGFsID4gMCkge1xuICAgICAgZS5wZXJjZW50ID0gZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwO1xuICAgIH1cbiAgICBlLmRpcmVjdGlvbiA9ICdkb3dubG9hZCc7XG4gICAgc2VsZi5lbWl0KCdwcm9ncmVzcycsIGUpO1xuICB9O1xuICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICB4aHIub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHhoci51cGxvYWQgJiYgdGhpcy5oYXNMaXN0ZW5lcnMoJ3Byb2dyZXNzJykpIHtcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGhhbmRsZVByb2dyZXNzO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy8gQWNjZXNzaW5nIHhoci51cGxvYWQgZmFpbHMgaW4gSUUgZnJvbSBhIHdlYiB3b3JrZXIsIHNvIGp1c3QgcHJldGVuZCBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIC8vIFJlcG9ydGVkIGhlcmU6XG4gICAgLy8gaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy84MzcyNDUveG1saHR0cHJlcXVlc3QtdXBsb2FkLXRocm93cy1pbnZhbGlkLWFyZ3VtZW50LXdoZW4tdXNlZC1mcm9tLXdlYi13b3JrZXItY29udGV4dFxuICB9XG5cbiAgLy8gdGltZW91dFxuICBpZiAodGltZW91dCAmJiAhdGhpcy5fdGltZXIpIHtcbiAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYudGltZWRvdXQgPSB0cnVlO1xuICAgICAgc2VsZi5hYm9ydCgpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG5cbiAgLy8gcXVlcnlzdHJpbmdcbiAgaWYgKHF1ZXJ5KSB7XG4gICAgcXVlcnkgPSByZXF1ZXN0LnNlcmlhbGl6ZU9iamVjdChxdWVyeSk7XG4gICAgdGhpcy51cmwgKz0gfnRoaXMudXJsLmluZGV4T2YoJz8nKVxuICAgICAgPyAnJicgKyBxdWVyeVxuICAgICAgOiAnPycgKyBxdWVyeTtcbiAgfVxuXG4gIC8vIGluaXRpYXRlIHJlcXVlc3RcbiAgaWYgKHRoaXMudXNlcm5hbWUgJiYgdGhpcy5wYXNzd29yZCkge1xuICAgIHhoci5vcGVuKHRoaXMubWV0aG9kLCB0aGlzLnVybCwgdHJ1ZSwgdGhpcy51c2VybmFtZSwgdGhpcy5wYXNzd29yZCk7XG4gIH0gZWxzZSB7XG4gICAgeGhyLm9wZW4odGhpcy5tZXRob2QsIHRoaXMudXJsLCB0cnVlKTtcbiAgfVxuXG4gIC8vIENPUlNcbiAgaWYgKHRoaXMuX3dpdGhDcmVkZW50aWFscykgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgLy8gYm9keVxuICBpZiAoJ0dFVCcgIT0gdGhpcy5tZXRob2QgJiYgJ0hFQUQnICE9IHRoaXMubWV0aG9kICYmICdzdHJpbmcnICE9IHR5cGVvZiBkYXRhICYmICFpc0hvc3QoZGF0YSkpIHtcbiAgICAvLyBzZXJpYWxpemUgc3R1ZmZcbiAgICB2YXIgY29udGVudFR5cGUgPSB0aGlzLl9oZWFkZXJbJ2NvbnRlbnQtdHlwZSddO1xuICAgIHZhciBzZXJpYWxpemUgPSB0aGlzLl9wYXJzZXIgfHwgcmVxdWVzdC5zZXJpYWxpemVbY29udGVudFR5cGUgPyBjb250ZW50VHlwZS5zcGxpdCgnOycpWzBdIDogJyddO1xuICAgIGlmICghc2VyaWFsaXplICYmIGlzSlNPTihjb250ZW50VHlwZSkpIHNlcmlhbGl6ZSA9IHJlcXVlc3Quc2VyaWFsaXplWydhcHBsaWNhdGlvbi9qc29uJ107XG4gICAgaWYgKHNlcmlhbGl6ZSkgZGF0YSA9IHNlcmlhbGl6ZShkYXRhKTtcbiAgfVxuXG4gIC8vIHNldCBoZWFkZXIgZmllbGRzXG4gIGZvciAodmFyIGZpZWxkIGluIHRoaXMuaGVhZGVyKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5oZWFkZXJbZmllbGRdKSBjb250aW51ZTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihmaWVsZCwgdGhpcy5oZWFkZXJbZmllbGRdKTtcbiAgfVxuXG4gIGlmICh0aGlzLl9yZXNwb25zZVR5cGUpIHtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gdGhpcy5fcmVzcG9uc2VUeXBlO1xuICB9XG5cbiAgLy8gc2VuZCBzdHVmZlxuICB0aGlzLmVtaXQoJ3JlcXVlc3QnLCB0aGlzKTtcblxuICAvLyBJRTExIHhoci5zZW5kKHVuZGVmaW5lZCkgc2VuZHMgJ3VuZGVmaW5lZCcgc3RyaW5nIGFzIFBPU1QgcGF5bG9hZCAoaW5zdGVhZCBvZiBub3RoaW5nKVxuICAvLyBXZSBuZWVkIG51bGwgaGVyZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICB4aHIuc2VuZCh0eXBlb2YgZGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBkYXRhIDogbnVsbCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuXG4vKipcbiAqIEV4cG9zZSBgUmVxdWVzdGAuXG4gKi9cblxucmVxdWVzdC5SZXF1ZXN0ID0gUmVxdWVzdDtcblxuLyoqXG4gKiBHRVQgYHVybGAgd2l0aCBvcHRpb25hbCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gZGF0YSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QuZ2V0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdHRVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5xdWVyeShkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogSEVBRCBgdXJsYCB3aXRoIG9wdGlvbmFsIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfEZ1bmN0aW9ufSBkYXRhIG9yIGZuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5oZWFkID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdIRUFEJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogREVMRVRFIGB1cmxgIHdpdGggb3B0aW9uYWwgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZWwodXJsLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdERUxFVEUnLCB1cmwpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcblxucmVxdWVzdFsnZGVsJ10gPSBkZWw7XG5yZXF1ZXN0WydkZWxldGUnXSA9IGRlbDtcblxuLyoqXG4gKiBQQVRDSCBgdXJsYCB3aXRoIG9wdGlvbmFsIGBkYXRhYCBhbmQgY2FsbGJhY2sgYGZuKHJlcylgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7TWl4ZWR9IGRhdGFcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5yZXF1ZXN0LnBhdGNoID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQQVRDSCcsIHVybCk7XG4gIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBkYXRhKSBmbiA9IGRhdGEsIGRhdGEgPSBudWxsO1xuICBpZiAoZGF0YSkgcmVxLnNlbmQoZGF0YSk7XG4gIGlmIChmbikgcmVxLmVuZChmbik7XG4gIHJldHVybiByZXE7XG59O1xuXG4vKipcbiAqIFBPU1QgYHVybGAgd2l0aCBvcHRpb25hbCBgZGF0YWAgYW5kIGNhbGxiYWNrIGBmbihyZXMpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge01peGVkfSBkYXRhXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7UmVxdWVzdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxucmVxdWVzdC5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQT1NUJywgdXJsKTtcbiAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGRhdGEpIGZuID0gZGF0YSwgZGF0YSA9IG51bGw7XG4gIGlmIChkYXRhKSByZXEuc2VuZChkYXRhKTtcbiAgaWYgKGZuKSByZXEuZW5kKGZuKTtcbiAgcmV0dXJuIHJlcTtcbn07XG5cbi8qKlxuICogUFVUIGB1cmxgIHdpdGggb3B0aW9uYWwgYGRhdGFgIGFuZCBjYWxsYmFjayBgZm4ocmVzKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHBhcmFtIHtNaXhlZHxGdW5jdGlvbn0gZGF0YSBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbnJlcXVlc3QucHV0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBmbil7XG4gIHZhciByZXEgPSByZXF1ZXN0KCdQVVQnLCB1cmwpO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZGF0YSkgZm4gPSBkYXRhLCBkYXRhID0gbnVsbDtcbiAgaWYgKGRhdGEpIHJlcS5zZW5kKGRhdGEpO1xuICBpZiAoZm4pIHJlcS5lbmQoZm4pO1xuICByZXR1cm4gcmVxO1xufTtcbiIsIi8qKlxuICogQ2hlY2sgaWYgYG9iamAgaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG51bGwgIT0gb2JqICYmICdvYmplY3QnID09IHR5cGVvZiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCIvKipcbiAqIE1vZHVsZSBvZiBtaXhlZC1pbiBmdW5jdGlvbnMgc2hhcmVkIGJldHdlZW4gbm9kZSBhbmQgY2xpZW50IGNvZGVcbiAqL1xudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pcy1vYmplY3QnKTtcblxuLyoqXG4gKiBDbGVhciBwcmV2aW91cyB0aW1lb3V0LlxuICpcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uIF9jbGVhclRpbWVvdXQoKXtcbiAgdGhpcy5fdGltZW91dCA9IDA7XG4gIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBGb3JjZSBnaXZlbiBwYXJzZXJcbiAqXG4gKiBTZXRzIHRoZSBib2R5IHBhcnNlciBubyBtYXR0ZXIgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UoZm4pe1xuICB0aGlzLl9wYXJzZXIgPSBmbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aW1lb3V0IHRvIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtSZXF1ZXN0fSBmb3IgY2hhaW5pbmdcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy50aW1lb3V0ID0gZnVuY3Rpb24gdGltZW91dChtcyl7XG4gIHRoaXMuX3RpbWVvdXQgPSBtcztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEZhdXggcHJvbWlzZSBzdXBwb3J0XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0XG4gKiBAcmV0dXJuIHtSZXF1ZXN0fVxuICovXG5cbmV4cG9ydHMudGhlbiA9IGZ1bmN0aW9uIHRoZW4oZnVsZmlsbCwgcmVqZWN0KSB7XG4gIHJldHVybiB0aGlzLmVuZChmdW5jdGlvbihlcnIsIHJlcykge1xuICAgIGVyciA/IHJlamVjdChlcnIpIDogZnVsZmlsbChyZXMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBBbGxvdyBmb3IgZXh0ZW5zaW9uXG4gKi9cblxuZXhwb3J0cy51c2UgPSBmdW5jdGlvbiB1c2UoZm4pIHtcbiAgZm4odGhpcyk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5cbi8qKlxuICogR2V0IHJlcXVlc3QgaGVhZGVyIGBmaWVsZGAuXG4gKiBDYXNlLWluc2Vuc2l0aXZlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKGZpZWxkKXtcbiAgcmV0dXJuIHRoaXMuX2hlYWRlcltmaWVsZC50b0xvd2VyQ2FzZSgpXTtcbn07XG5cbi8qKlxuICogR2V0IGNhc2UtaW5zZW5zaXRpdmUgaGVhZGVyIGBmaWVsZGAgdmFsdWUuXG4gKiBUaGlzIGlzIGEgZGVwcmVjYXRlZCBpbnRlcm5hbCBBUEkuIFVzZSBgLmdldChmaWVsZClgIGluc3RlYWQuXG4gKlxuICogKGdldEhlYWRlciBpcyBubyBsb25nZXIgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBzdXBlcmFnZW50IGNvZGUgYmFzZSlcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZmllbGRcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuXG5leHBvcnRzLmdldEhlYWRlciA9IGV4cG9ydHMuZ2V0O1xuXG4vKipcbiAqIFNldCBoZWFkZXIgYGZpZWxkYCB0byBgdmFsYCwgb3IgbXVsdGlwbGUgZmllbGRzIHdpdGggb25lIG9iamVjdC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpXG4gKiAgICAgICAgLnNldCgnWC1BUEktS2V5JywgJ2Zvb2JhcicpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogICAgICByZXEuZ2V0KCcvJylcbiAqICAgICAgICAuc2V0KHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsICdYLUFQSS1LZXknOiAnZm9vYmFyJyB9KVxuICogICAgICAgIC5lbmQoY2FsbGJhY2spO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZmllbGRcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLnNldCA9IGZ1bmN0aW9uKGZpZWxkLCB2YWwpe1xuICBpZiAoaXNPYmplY3QoZmllbGQpKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGZpZWxkKSB7XG4gICAgICB0aGlzLnNldChrZXksIGZpZWxkW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV0gPSB2YWw7XG4gIHRoaXMuaGVhZGVyW2ZpZWxkXSA9IHZhbDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBoZWFkZXIgYGZpZWxkYC5cbiAqIENhc2UtaW5zZW5zaXRpdmUuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgIHJlcS5nZXQoJy8nKVxuICogICAgICAgIC51bnNldCgnVXNlci1BZ2VudCcpXG4gKiAgICAgICAgLmVuZChjYWxsYmFjayk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkXG4gKi9cbmV4cG9ydHMudW5zZXQgPSBmdW5jdGlvbihmaWVsZCl7XG4gIGRlbGV0ZSB0aGlzLl9oZWFkZXJbZmllbGQudG9Mb3dlckNhc2UoKV07XG4gIGRlbGV0ZSB0aGlzLmhlYWRlcltmaWVsZF07XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBXcml0ZSB0aGUgZmllbGQgYG5hbWVgIGFuZCBgdmFsYCBmb3IgXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJcbiAqIHJlcXVlc3QgYm9kaWVzLlxuICpcbiAqIGBgYCBqc1xuICogcmVxdWVzdC5wb3N0KCcvdXBsb2FkJylcbiAqICAgLmZpZWxkKCdmb28nLCAnYmFyJylcbiAqICAgLmVuZChjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd8QmxvYnxGaWxlfEJ1ZmZlcnxmcy5SZWFkU3RyZWFtfSB2YWxcbiAqIEByZXR1cm4ge1JlcXVlc3R9IGZvciBjaGFpbmluZ1xuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5maWVsZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbCkge1xuICB0aGlzLl9nZXRGb3JtRGF0YSgpLmFwcGVuZChuYW1lLCB2YWwpO1xuICByZXR1cm4gdGhpcztcbn07XG4iLCIvLyBUaGUgbm9kZSBhbmQgYnJvd3NlciBtb2R1bGVzIGV4cG9zZSB2ZXJzaW9ucyBvZiB0aGlzIHdpdGggdGhlXG4vLyBhcHByb3ByaWF0ZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBib3VuZCBhcyBmaXJzdCBhcmd1bWVudFxuLyoqXG4gKiBJc3N1ZSBhIHJlcXVlc3Q6XG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgcmVxdWVzdCgnR0VUJywgJy91c2VycycpLmVuZChjYWxsYmFjaylcbiAqICAgIHJlcXVlc3QoJy91c2VycycpLmVuZChjYWxsYmFjaylcbiAqICAgIHJlcXVlc3QoJy91c2VycycsIGNhbGxiYWNrKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB1cmwgb3IgY2FsbGJhY2tcbiAqIEByZXR1cm4ge1JlcXVlc3R9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHJlcXVlc3QoUmVxdWVzdENvbnN0cnVjdG9yLCBtZXRob2QsIHVybCkge1xuICAvLyBjYWxsYmFja1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdXJsKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IoJ0dFVCcsIG1ldGhvZCkuZW5kKHVybCk7XG4gIH1cblxuICAvLyB1cmwgZmlyc3RcbiAgaWYgKDIgPT0gYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdENvbnN0cnVjdG9yKCdHRVQnLCBtZXRob2QpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBSZXF1ZXN0Q29uc3RydWN0b3IobWV0aG9kLCB1cmwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3Q7XG4iXX0=
